var nN=Object.defineProperty;var iN=(e,t,n)=>t in e?nN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cs=(e,t,n)=>(iN(e,typeof t!="symbol"?t+"":t,n),n);import{ao as nm,ap as rN,aq as $x,ar as Yl,as as aN,at as Xl,_ as Pe,au as oN,p as D,q as fe,s as Ge,S as Et,av as sN,aw as lN,ax as cN,ay as uN,al as Kt,D as $e,E as ze,am as Fe,G as He,an as nt,K as at,a as Oe,j as Ne,N as je,i as ye,h as $t,I as we,l as j,az as pN,aA as dN,aB as fN,aC as km,aD as pw,Q as Mn,w as C,y as x,t as U,B as pn,aE as zs,aF as id,aG as Fs,aH as mn,aI as vn,aJ as Gt,aK as hN,aL as mN,aM as vN,aN as zo,P as te,b as Bn,c as Ln,aO as Bm,aP as rd,v as _e,L as dw,M as fw,aQ as gN,aR as yN,aS as _N,m as Lc,aT as xN,aU as bN,aV as EN,aW as wN,aX as SN,z as lt,F as on,r as Pn,aY as zx,aZ as CN,a_ as TN,a$ as PN,b0 as im,ab as sn,b1 as xi,b2 as Li,b3 as hw,e as si,b4 as Ei,b5 as wi,b6 as li,b7 as qr,A as Od,b8 as mw,b9 as vw,ba as AN,n as RN,u as MN,bb as $c,x as Cn,J as Ov,bc as Iv,g as DN,bd as ON,be as IN,f as NN,bf as kN,bg as gw,H as BN,bh as LN,bi as $N,d as Si,bj as zN,bk as Nv,a9 as ad,bl as FN,a4 as Lm,bm as HN,bn as yw,o as kv,bo as Bv,bp as jN,bq as VN,br as UN,bs as Fx,T as WN}from"./index.b9dd0157.js";import{N as Ci,a as Ti}from"./Step.0811a842.js";import{N as Pi,a as ci,b as GN,c as _w,d as Kr,e as Yr,f as xw,g as bw}from"./Tabs.6508ba33.js";import{N as qN,a as KN}from"./Menu.770c9fa7.js";import{q as $m}from"./index.a8f087d3.js";const YN={name:"zh-CN",global:{undo:"\u64A4\u9500",redo:"\u91CD\u505A",confirm:"\u786E\u8BA4"},Popconfirm:{positiveText:"\u786E\u8BA4",negativeText:"\u53D6\u6D88"},Cascader:{placeholder:"\u8BF7\u9009\u62E9",loading:"\u52A0\u8F7D\u4E2D",loadingRequiredMessage:e=>`\u52A0\u8F7D\u5168\u90E8 ${e} \u7684\u5B50\u8282\u70B9\u540E\u624D\u53EF\u9009\u4E2D`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy\u5E74",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",clear:"\u6E05\u9664",now:"\u6B64\u523B",confirm:"\u786E\u8BA4",selectTime:"\u9009\u62E9\u65F6\u95F4",selectDate:"\u9009\u62E9\u65E5\u671F",datePlaceholder:"\u9009\u62E9\u65E5\u671F",datetimePlaceholder:"\u9009\u62E9\u65E5\u671F\u65F6\u95F4",monthPlaceholder:"\u9009\u62E9\u6708\u4EFD",yearPlaceholder:"\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u9009\u62E9\u5B63\u5EA6",startDatePlaceholder:"\u5F00\u59CB\u65E5\u671F",endDatePlaceholder:"\u7ED3\u675F\u65E5\u671F",startDatetimePlaceholder:"\u5F00\u59CB\u65E5\u671F\u65F6\u95F4",endDatetimePlaceholder:"\u7ED3\u675F\u65E5\u671F\u65F6\u95F4",startMonthPlaceholder:"\u5F00\u59CB\u6708\u4EFD",endMonthPlaceholder:"\u7ED3\u675F\u6708\u4EFD",monthBeforeYear:!1,firstDayOfWeek:0,today:"\u4ECA\u5929"},DataTable:{checkTableAll:"\u9009\u62E9\u5168\u90E8\u8868\u683C\u6570\u636E",uncheckTableAll:"\u53D6\u6D88\u9009\u62E9\u5168\u90E8\u8868\u683C\u6570\u636E",confirm:"\u786E\u8BA4",clear:"\u91CD\u7F6E"},LegacyTransfer:{sourceTitle:"\u6E90\u9879",targetTitle:"\u76EE\u6807\u9879"},Transfer:{selectAll:"\u5168\u9009",clearAll:"\u6E05\u9664",unselectAll:"\u53D6\u6D88\u5168\u9009",total:e=>`\u5171 ${e} \u9879`,selected:e=>`\u5DF2\u9009 ${e} \u9879`},Empty:{description:"\u65E0\u6570\u636E"},Select:{placeholder:"\u8BF7\u9009\u62E9"},TimePicker:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",positiveText:"\u786E\u8BA4",negativeText:"\u53D6\u6D88",now:"\u6B64\u523B"},Pagination:{goto:"\u8DF3\u81F3",selectionSuffix:"\u9875"},DynamicTags:{add:"\u6DFB\u52A0"},Log:{loading:"\u52A0\u8F7D\u4E2D"},Input:{placeholder:"\u8BF7\u8F93\u5165"},InputNumber:{placeholder:"\u8BF7\u8F93\u5165"},DynamicInput:{create:"\u6DFB\u52A0"},ThemeEditor:{title:"\u4E3B\u9898\u7F16\u8F91\u5668",clearAllVars:"\u6E05\u9664\u5168\u90E8\u53D8\u91CF",clearSearch:"\u6E05\u9664\u641C\u7D22",filterCompName:"\u8FC7\u6EE4\u7EC4\u4EF6\u540D",filterVarName:"\u8FC7\u6EE4\u53D8\u91CF\u540D",import:"\u5BFC\u5165",export:"\u5BFC\u51FA",restore:"\u6062\u590D\u9ED8\u8BA4"},Image:{tipPrevious:"\u4E0A\u4E00\u5F20\uFF08\u2190\uFF09",tipNext:"\u4E0B\u4E00\u5F20\uFF08\u2192\uFF09",tipCounterclockwise:"\u5411\u5DE6\u65CB\u8F6C",tipClockwise:"\u5411\u53F3\u65CB\u8F6C",tipZoomOut:"\u7F29\u5C0F",tipZoomIn:"\u653E\u5927",tipClose:"\u5173\u95ED\uFF08Esc\uFF09",tipOriginalSize:"\u7F29\u653E\u5230\u539F\u59CB\u5C3A\u5BF8"}},XN=YN;var ZN={lessThanXSeconds:{one:"\u4E0D\u5230 1 \u79D2",other:"\u4E0D\u5230 {{count}} \u79D2"},xSeconds:{one:"1 \u79D2",other:"{{count}} \u79D2"},halfAMinute:"\u534A\u5206\u949F",lessThanXMinutes:{one:"\u4E0D\u5230 1 \u5206\u949F",other:"\u4E0D\u5230 {{count}} \u5206\u949F"},xMinutes:{one:"1 \u5206\u949F",other:"{{count}} \u5206\u949F"},xHours:{one:"1 \u5C0F\u65F6",other:"{{count}} \u5C0F\u65F6"},aboutXHours:{one:"\u5927\u7EA6 1 \u5C0F\u65F6",other:"\u5927\u7EA6 {{count}} \u5C0F\u65F6"},xDays:{one:"1 \u5929",other:"{{count}} \u5929"},aboutXWeeks:{one:"\u5927\u7EA6 1 \u4E2A\u661F\u671F",other:"\u5927\u7EA6 {{count}} \u4E2A\u661F\u671F"},xWeeks:{one:"1 \u4E2A\u661F\u671F",other:"{{count}} \u4E2A\u661F\u671F"},aboutXMonths:{one:"\u5927\u7EA6 1 \u4E2A\u6708",other:"\u5927\u7EA6 {{count}} \u4E2A\u6708"},xMonths:{one:"1 \u4E2A\u6708",other:"{{count}} \u4E2A\u6708"},aboutXYears:{one:"\u5927\u7EA6 1 \u5E74",other:"\u5927\u7EA6 {{count}} \u5E74"},xYears:{one:"1 \u5E74",other:"{{count}} \u5E74"},overXYears:{one:"\u8D85\u8FC7 1 \u5E74",other:"\u8D85\u8FC7 {{count}} \u5E74"},almostXYears:{one:"\u5C06\u8FD1 1 \u5E74",other:"\u5C06\u8FD1 {{count}} \u5E74"}},JN=function(t,n,i){var r,a=ZN[t];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",String(n)),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?r+"\u5185":r+"\u524D":r};const QN=JN;var ek={full:"y'\u5E74'M'\u6708'd'\u65E5' EEEE",long:"y'\u5E74'M'\u6708'd'\u65E5'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},tk={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},nk={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},ik={date:nm({formats:ek,defaultWidth:"full"}),time:nm({formats:tk,defaultWidth:"full"}),dateTime:nm({formats:nk,defaultWidth:"full"})};const rk=ik;function ak(e,t,n){rN(2,arguments);var i=$x(e,n),r=$x(t,n);return i.getTime()===r.getTime()}function Hx(e,t,n){var i="eeee p";return ak(e,t,n)?i:e.getTime()>t.getTime()?"'\u4E0B\u4E2A'"+i:"'\u4E0A\u4E2A'"+i}var ok={lastWeek:Hx,yesterday:"'\u6628\u5929' p",today:"'\u4ECA\u5929' p",tomorrow:"'\u660E\u5929' p",nextWeek:Hx,other:"PP p"},sk=function(t,n,i,r){var a=ok[t];return typeof a=="function"?a(n,i,r):a};const lk=sk;var ck={narrow:["\u524D","\u516C\u5143"],abbreviated:["\u524D","\u516C\u5143"],wide:["\u516C\u5143\u524D","\u516C\u5143"]},uk={narrow:["1","2","3","4"],abbreviated:["\u7B2C\u4E00\u5B63","\u7B2C\u4E8C\u5B63","\u7B2C\u4E09\u5B63","\u7B2C\u56DB\u5B63"],wide:["\u7B2C\u4E00\u5B63\u5EA6","\u7B2C\u4E8C\u5B63\u5EA6","\u7B2C\u4E09\u5B63\u5EA6","\u7B2C\u56DB\u5B63\u5EA6"]},pk={narrow:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"],abbreviated:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],wide:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]},dk={narrow:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],short:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],abbreviated:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],wide:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"]},fk={narrow:{am:"\u4E0A",pm:"\u4E0B",midnight:"\u51CC\u6668",noon:"\u5348",morning:"\u65E9",afternoon:"\u4E0B\u5348",evening:"\u665A",night:"\u591C"},abbreviated:{am:"\u4E0A\u5348",pm:"\u4E0B\u5348",midnight:"\u51CC\u6668",noon:"\u4E2D\u5348",morning:"\u65E9\u6668",afternoon:"\u4E2D\u5348",evening:"\u665A\u4E0A",night:"\u591C\u95F4"},wide:{am:"\u4E0A\u5348",pm:"\u4E0B\u5348",midnight:"\u51CC\u6668",noon:"\u4E2D\u5348",morning:"\u65E9\u6668",afternoon:"\u4E2D\u5348",evening:"\u665A\u4E0A",night:"\u591C\u95F4"}},hk={narrow:{am:"\u4E0A",pm:"\u4E0B",midnight:"\u51CC\u6668",noon:"\u5348",morning:"\u65E9",afternoon:"\u4E0B\u5348",evening:"\u665A",night:"\u591C"},abbreviated:{am:"\u4E0A\u5348",pm:"\u4E0B\u5348",midnight:"\u51CC\u6668",noon:"\u4E2D\u5348",morning:"\u65E9\u6668",afternoon:"\u4E2D\u5348",evening:"\u665A\u4E0A",night:"\u591C\u95F4"},wide:{am:"\u4E0A\u5348",pm:"\u4E0B\u5348",midnight:"\u51CC\u6668",noon:"\u4E2D\u5348",morning:"\u65E9\u6668",afternoon:"\u4E2D\u5348",evening:"\u665A\u4E0A",night:"\u591C\u95F4"}},mk=function(t,n){var i=Number(t);switch(n==null?void 0:n.unit){case"date":return i.toString()+"\u65E5";case"hour":return i.toString()+"\u65F6";case"minute":return i.toString()+"\u5206";case"second":return i.toString()+"\u79D2";default:return"\u7B2C "+i.toString()}},vk={ordinalNumber:mk,era:Yl({values:ck,defaultWidth:"wide"}),quarter:Yl({values:uk,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Yl({values:pk,defaultWidth:"wide"}),day:Yl({values:dk,defaultWidth:"wide"}),dayPeriod:Yl({values:fk,defaultWidth:"wide",formattingValues:hk,defaultFormattingWidth:"wide"})};const gk=vk;var yk=/^(第\s*)?\d+(日|时|分|秒)?/i,_k=/\d+/i,xk={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},bk={any:[/^(前)/i,/^(公元)/i]},Ek={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},wk={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Sk={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Ck={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Tk={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Pk={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Ak={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},Rk={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},Mk={ordinalNumber:aN({matchPattern:yk,parsePattern:_k,valueCallback:function(t){return parseInt(t,10)}}),era:Xl({matchPatterns:xk,defaultMatchWidth:"wide",parsePatterns:bk,defaultParseWidth:"any"}),quarter:Xl({matchPatterns:Ek,defaultMatchWidth:"wide",parsePatterns:wk,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Xl({matchPatterns:Sk,defaultMatchWidth:"wide",parsePatterns:Ck,defaultParseWidth:"any"}),day:Xl({matchPatterns:Tk,defaultMatchWidth:"wide",parsePatterns:Pk,defaultParseWidth:"any"}),dayPeriod:Xl({matchPatterns:Ak,defaultMatchWidth:"any",parsePatterns:Rk,defaultParseWidth:"any"})};const Dk=Mk;var Ok={code:"zh-CN",formatDistance:QN,formatLong:rk,formatRelative:lk,localize:gk,match:Dk,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Ik=Ok,Nk={name:"zh-CN",locale:Ik},kk=Nk,Bk={};function Lk(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),Ge(o,Et(e.gridOptions,{ref:"gridComponent",class:"mytable-scrollbar"}),null,16)}const $k=Pe(oN,[["render",Lk]]);function zk(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),Ge(o,Et(e.gridOptions,{ref:"gridComponent",class:"mytable-scrollbar"}),null,16)}const Fk=Pe(sN,[["render",zk]]);function Hk(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),Ge(o,Et(e.gridOptions,{ref:"gridComponent",class:"mytable-scrollbar"}),null,16)}const jk=Pe(lN,[["render",Hk]]);function Vk(e,t,n,i,r,a){const o=D("NwCodeMirror");return fe(),Ge(o,{value:e.InterfaceDetailRequestParamsDemo},null,8,["value"])}const Uk=Pe(cN,[["render",Vk]]);function Wk(e,t,n,i,r,a){const o=D("NwCodeMirror");return fe(),Ge(o,{value:e.InterfaceDetailResponseParamsDemo},null,8,["value"])}const Gk=Pe(uN,[["render",Wk]]),qk={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,ResponsesStatus:$k,RequestParams:jk,ResponsesParams:Fk,RequestDemo:Uk,ResponsesDemo:Gk},props:{value:{type:String,default:""},text:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(e,t){const n=j(""),i=j(!1),r=()=>{i.value=!0};return e.value&&e.text&&(n.value=e.text),{InterfaceDetailRequestParamsDemo:pN,InterfaceDetailIsLoading:dN,InterfaceDetailBasicInfo:fN,cancelInterfaceDetail:km,InterfaceDetail:pw,text:n,visible:i,props:e,handleModal:r,callback(a,o,s){a&&(t.emit("update:value",o),t.emit("update:text",s),n.value=s,Mn().then(()=>{i.value=!1}))},theme:{Button:{heightSmall:"22px",fontSizeSmall:"12px"},Dialog:{iconMargin:"0 3px 0 0",titleFontSize:"14px",titleFontWeight:"bold",titleTextColor:"#5e5e5e",iconSize:"14px",padding:"2px 5px",closeSize:"14px",closeMargin:"5px",contentMargin:"0"},Modal:{boxShadow:"1px 0px 7px 1px #00000060"}}}}},Uo=e=>(mn("data-v-6569e6f4"),e=e(),vn(),e),Kk={style:{padding:"25px"}},Yk={class:Fs({"inf-summary":!0,post:!0})},Xk={class:"method"},Zk={class:"url"},Jk={class:"inf-accept"},Qk=Uo(()=>U("div",{class:"title"}," \u8BF7\u6C42\u6570\u636E\u7C7B\u578B ",-1)),e2={class:"value"},t2=Uo(()=>U("div",{class:"title"}," \u54CD\u5E94\u6570\u636E\u7C7B\u578B ",-1)),n2={class:"value"},i2=Uo(()=>U("div",{class:"inf-title"}," \u63A5\u53E3\u63CF\u8FF0 ",-1)),r2={class:"inf-content"},a2={class:"inf-title"},o2={style:{margin:"10px 0"}},s2=Uo(()=>U("div",{class:"inf-title"}," \u8BF7\u6C42\u53C2\u6570 ",-1)),l2={style:{margin:"10px 0"}},c2=Uo(()=>U("div",{class:"inf-title"}," \u54CD\u5E94\u72B6\u6001 ",-1)),u2={style:{margin:"10px 0"}},p2=Uo(()=>U("div",{class:"inf-title"}," \u54CD\u5E94\u53C2\u6570 ",-1)),d2={style:{margin:"10px 0"}},f2=Uo(()=>U("div",{class:"inf-title"}," \u54CD\u5E94\u793A\u4F8B ",-1)),h2={style:{margin:"10px 0"}};function m2(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-button"),c=D("n-layout-header"),u=D("RequestDemo"),d=D("RequestParams"),f=D("ResponsesStatus"),m=D("ResponsesParams"),v=D("ResponsesDemo"),g=D("n-spin"),y=D("n-layout-content"),E=D("n-layout"),N=D("n-config-provider");return fe(),Ge(N,{abstract:"","theme-overrides":{}},{default:C(()=>[x(E,{class:"fv-layout"},{default:C(()=>[x(c,{class:"fv-layout-header"},{default:C(()=>[U("div",null,pn(i.InterfaceDetailBasicInfo.title),1),x(s,{text:"",onClick:i.cancelInterfaceDetail},{default:C(()=>[x(o,{name:"icon-n-y-thinclose",size:14})]),_:1},8,["onClick"])]),_:1}),x(y,{class:"fv-layout-content"},{default:C(()=>[x(g,{class:"fv-spin",show:i.InterfaceDetailIsLoading},{default:C(()=>[U("div",Kk,[U("div",Yk,[U("div",Xk,pn(i.InterfaceDetailBasicInfo.method&&i.InterfaceDetailBasicInfo.method.toLocaleUpperCase()),1),U("div",Zk,pn(i.InterfaceDetailBasicInfo.url),1)]),U("div",Jk,[Qk,U("div",e2,pn(i.InterfaceDetailBasicInfo.requestContentType),1),t2,U("div",n2," ["+pn(i.InterfaceDetailBasicInfo.responsesContentType)+"] ",1)]),i2,U("div",r2,pn(i.InterfaceDetailBasicInfo.description),1),zs(U("div",a2," \u8BF7\u6C42\u793A\u4F8B ",512),[[id,!!i.InterfaceDetailRequestParamsDemo]]),zs(U("div",o2,[x(u)],512),[[id,!!i.InterfaceDetailRequestParamsDemo]]),s2,U("div",l2,[x(d)]),c2,U("div",u2,[x(f)]),p2,U("div",d2,[x(m)]),f2,U("div",h2,[x(v)])])]),_:1},8,["show"])]),_:1})]),_:1})]),_:1})}const v2=Pe(qk,[["render",m2],["__scopeId","data-v-6569e6f4"]]),g2={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(e,t){const n=j(null);j([]);const i=j(!0),r=j({rowId:"id",rowKey:!1,size:"mini",height:"100%",showOverflow:!1,highlightHoverRow:!0,border:!0,treeConfig:{expandRowKeys:["root"],indent:15,line:!0,lazy:!0,loadMethod:({row:a})=>a.id==="root"?hN().then(o=>o.map(s=>({id:s.dictItemCode,name:s.dictItemName,hasChild:!0,type:"sysCode"}))):(console.log(a),mN(a.id).then(o=>(o||[]).map(s=>({id:s.ctlClazz,name:s.ctlName,type:"ctlName"}))))},tableMenu:{},data:vN,columns:[{field:"name",title:"\u7C7B\u76EE",showHeaderOverflow:!0,treeNode:!0,slots:{default:({row:a})=>{let o=!1;return Object.keys(zo.value).length===0&&a.id==="root"?o=!0:o=zo.value[a.type]===a.id,[te("div",{class:{"side-tree-btn":!0,active:o},title:a.name,onClick:()=>{a.id==="root"?zo.value={}:a.type==="sysCode"?zo.value={sysCode:a.id}:zo.value={ctlClazz:a.id},t.emit("callback")}},{default:()=>a.name})]}}}]});return{props:e,gridRef:n,isLoading:i,gridOption:r}}};function y2(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),Ge(o,Et(i.gridOption,{ref:"gridComponent",class:"mytable-scrollbar"}),null,16)}const _2=Pe(g2,[["render",y2]]),x2={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NForm:Bn,NFormItem:Ln,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we},props:{value:{type:String,default:""},text:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(e,t){return{SearchForm:Bm,handleSearch(){rd.value.commitProxy("query")},handleReset(){Bm.value={mthPath:"",mthMethod:"",mthDescription:""},rd.value.commitProxy("query")}}}};function b2(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-select"),u=D("n-button"),d=D("n-form");return fe(),Ge(d,{ref:"formRef",inline:"","label-placement":"left","label-width":80,model:i.SearchForm,style:{height:"30px"}},{default:C(()=>[x(s,{label:"Url",path:"mthPath"},{default:C(()=>[x(o,{value:i.SearchForm.mthPath,"onUpdate:value":t[0]||(t[0]=f=>i.SearchForm.mthPath=f),placeholder:"Url"},null,8,["value"])]),_:1}),x(s,{label:"Method",path:"mthMethod"},{default:C(()=>[x(c,{style:{width:"120px"},value:i.SearchForm.mthMethod,"onUpdate:value":t[1]||(t[1]=f=>i.SearchForm.mthMethod=f),options:[{label:"\u5168\u90E8",value:""},{label:"GET",value:"get"},{label:"POST",value:"post"},{label:"PUT",value:"put"},{label:"DELETE",value:"delete"}]},null,8,["value"])]),_:1}),x(s,{label:"\u63CF\u8FF0",path:"mthDescription"},{default:C(()=>[x(o,{value:i.SearchForm.mthDescription,"onUpdate:value":t[2]||(t[2]=f=>i.SearchForm.mthDescription=f),placeholder:"\u63CF\u8FF0"},null,8,["value"])]),_:1}),x(s,null,{default:C(()=>[x(u,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:i.handleSearch},{default:C(()=>[_e(" \u67E5\u8BE2 ")]),_:1},8,["onClick"]),x(u,{type:"warning","attr-type":"button",onClick:i.handleReset},{default:C(()=>[_e(" \u91CD\u7F6E ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])}const E2=Pe(x2,[["render",b2]]),w2={components:{NConfigProvider:Kt,NDrawer:dw,NDrawerContent:fw,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NThemeEditor:gN,NButton:ye,NInputGroup:at,NInput:Oe,NSpin:Ne,NForm:Bn,NFormItem:Ln,NPopconfirm:yN,NModal:je,NwIcon:we,Detail:v2,SideTree:_2,Search:E2,NwAppTreeGrid:_N},props:{value:{type:String,default:""},text:{type:String,default:""},disabled:{type:Boolean,default:!1},bizType:{type:String,default:""},size:{type:String,default:"medium"},label:{type:String,default:"\u9009\u62E9"}},emits:["callback"],setup(e,t){const n=j(!1),i=j(!1),r=j(null),a=()=>{km(),i.value=!1},o=Lc({rowId:"id",size:"mini",border:!1,resizable:!0,height:"auto",align:null,columns:[{field:"mthPath",title:"\u8BF7\u6C42URL",showHeaderOverflow:!0},{field:"mthMethod",title:"\u8BF7\u6C42Method",showHeaderOverflow:!0,width:"105px"},{field:"mthDescription",title:"\u63A5\u53E3\u63CF\u8FF0",showHeaderOverflow:!0},{field:"ctlName",title:"\u6240\u5C5E\u7C7B",showHeaderOverflow:!0},{field:"status",title:"\u72B6\u6001",showOverflow:!0,width:"45px",slots:{default:({row:s})=>[te("span",null,s.onOff=="on"?"\u542F\u7528":"\u7981\u7528")]}},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"120px",slots:{default:({row:s})=>[te(ye,{text:!0,size:"small",type:"info",style:"margin-right: 10px;",onClick:()=>{console.log("gridContent",r),xN(s.id)}},{default:()=>"\u67E5\u770B"}),te(ye,{size:"small",type:"info",loading:!1,onClick:()=>{n.value=!0,bN(s.id).then(c=>{EN.resolveRefs(JSON.parse(c.content)).then(u=>{t.emit("callback",c,u)}),a()}).finally(()=>{n.value=!1})}},{default:()=>"\u9009\u62E9"})]}}],pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:s})=>wN({...Bm.value,...zo.value,bizType:e.bizType,page:{current:s.currentPage,size:s.pageSize}}).then(async c=>(console.log("=====dd=====",c),{result:c.records,total:c.total}))}}});return{props:e,isLoading:n,visible:i,gridContent:r,InterfaceDetail:pw,theme:Bk,gridOptions:o,pageRef:SN,tableRef:rd,sideTreeCallback(s){zo.value={sysCode:s.appCode},rd.value.commitProxy("query"),km()},handleModal(){i.value=!0},handleCancel:a}}},S2={class:"value-input",style:{display:"flex","align-items":"center"}},C2=U("div",{class:"iconfont icon-bpmn-ditu"},null,-1),T2=U("div",null," \u9009\u62E9OpenAPI\u63A5\u53E3 ",-1),P2=U("div",{class:"nw-table-header-left"},null,-1),A2={class:"nw-table-header-right"},R2={class:"nw-modal-action"};function M2(e,t,n,i,r,a){const o=D("n-button"),s=D("nw-icon"),c=D("Search"),u=D("n-layout-header"),d=D("nw-app-tree-grid"),f=D("n-layout-sider"),m=D("vxe-grid"),v=D("n-layout-content"),g=D("n-layout"),y=D("n-spin"),E=D("Detail"),N=D("n-drawer-content"),O=D("n-drawer"),T=D("n-modal");return fe(),lt(on,null,[U("div",S2,[x(o,{disabled:i.props.disabled,size:i.props.size,type:"info",onClick:i.handleModal,style:{"margin-left":"4px"}},{default:C(()=>[_e(pn(i.props.label),1)]),_:1},8,["disabled","size","onClick"])]),x(T,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=w=>i.visible=w),preset:"dialog",style:{width:"1000px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[C2,x(s,{name:"icon-request",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[T2]),default:C(()=>[x(y,{show:i.isLoading},{default:C(()=>[x(g,{class:"nw-page",style:{height:"600px","padding-top":"5px"},ref:"pageRef"},{default:C(()=>[x(v,{style:{height:"100%"}},{default:C(()=>[x(g,{class:"nw-layout-full",ref:"tbody"},{default:C(()=>[x(u,{class:"nw-table-header"},{default:C(()=>[P2,U("div",A2,[x(c)])]),_:1}),x(g,{"has-sider":"",class:"nw-table-content"},{default:C(()=>[x(f,{width:"250"},{default:C(()=>[x(d,{rootName:"\u5168\u90E8",onCallback:i.sideTreeCallback},null,8,["onCallback"])]),_:1}),x(v,{ref:"gridContent"},{default:C(()=>[x(m,Et(i.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1},512)]),_:1})]),_:1},512)]),_:1})]),_:1},512)]),_:1},8,["show"]),x(O,{show:i.InterfaceDetail.visible,"onUpdate:show":t[0]||(t[0]=w=>i.InterfaceDetail.visible=w),placement:"right",width:"100%","trap-focus":!1,"block-scroll":!1,to:i.gridContent&&i.gridContent.$el},{default:C(()=>[x(N,null,{default:C(()=>[x(E)]),_:1})]),_:1},8,["show","to"]),U("div",R2,[x(o,{size:"small",onClick:i.handleCancel},{default:C(()=>[_e("\u53D6\u6D88")]),_:1},8,["onClick"])])]),_:1},8,["show"])],64)}const Ew=Pe(w2,[["render",M2]]),D2={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{value:{type:String,default:""},fullName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["callback","update:value","update:formId","update:fullName","update:shortName"],setup(e,t){const n=j(!1),i=j(null),r=j([]),a=j([]),o=j({}),s=()=>{a.value=[],r.value=[],Pn({url:"/main/mdmCpts/lists",method:"post",data:{}}).then(f=>{console.log("====res====",f);const m={};f.forEach(v=>{o.value[v.id]=v,m[v.formId]||(m[v.formId]={formId:v.formId,formName:v.formName,formNameCh:v.formNameCh,formUrl:v.formUrl,cpts:[]}),m[v.formId].cpts.push(v)}),r.value=Object.values(m),console.log("===formsData.value===",r.value)})},c=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},expandConfig:{expandAll:!0},data:r,columns:[{title:"\u8868\u5355\u540D\u79F0",showOverflow:"title",minWidth:200,type:"expand",slots:{default:({row:f})=>`${f.formNameCh}`,content:({row:f})=>te("div",{class:"cpts-list"},f.cpts.length?f.cpts.map(m=>te("div",{class:{"cpt-item":!0,active:e.value===f.id},onClick:()=>{d(m)}},te("div",{class:"cpt-item-icon"},te(we,{size:60,name:m.icon})),te("div",{class:"cpt-item-text"},m.shortName))):te("div",null,"\u6CA1\u6709\u5176\u4ED6\u7248\u672C"))}}]}),u=()=>{n.value=!0,s()},d=f=>{console.log(f),t.emit("update:value",f.id),t.emit("update:formId",f.formId),t.emit("update:fullName",f.fullName),t.emit("update:shortName",f.shortName),t.emit("callback",f),n.value=!1};return{props:e,gridRef:i,gridOption:c,visible:n,handleModalShow:u,handleModalComplete:d,theme:{Button:{heightSmall:"20px",fontSizeSmall:"12px"},Dialog:{iconMargin:"0 3px 0 0",titleFontSize:"14px",titleFontWeight:"bold",titleTextColor:"#5e5e5e",iconSize:"14px",padding:"2px 5px",closeSize:"14px",closeMargin:"5px",contentMargin:"0"},Modal:{boxShadow:"1px 0px 7px 1px #00000060"}}}}},O2={style:{display:"flex","justify-content":"space-between",padding:"5px 0","align-items":"center"}},I2=U("div",null," \u9009\u62E9\u529F\u80FD ",-1),N2={class:"nw-modal-action"};function k2(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("vxe-grid"),d=D("n-layout-content"),f=D("n-layout"),m=D("n-modal"),v=D("n-config-provider");return fe(),lt(on,null,[U("div",null,[U("div",O2,[x(o,{size:"small",value:i.props.fullName,disabled:"",placeholder:""},null,8,["value"]),x(s,{type:"info",size:"small",style:{"margin-left":"5px"},onClick:i.handleModalShow},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["onClick"])])]),x(v,{abstract:"","theme-overrides":i.theme},{default:C(()=>[x(m,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=g=>i.visible=g),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[x(c,{name:"icon-biaodan",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[I2]),default:C(()=>[x(f,{class:"nw-modal-layout"},{default:C(()=>[x(d,null,{default:C(()=>[x(u,Et({class:"nw-vxe-grid",ref:"gridRef"},i.gridOption),null,16)]),_:1})]),_:1}),U("div",N2,[x(s,{size:"small",onClick:t[0]||(t[0]=g=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["theme-overrides"])],64)}const ww=Pe(D2,[["render",k2]]);function B2(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Ja(e){return typeof e=="string"?new zx([[document.querySelector(e)]],[document.documentElement]):new zx([[e]],CN)}function L2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function jx(e,t){if(e=L2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const $2={passive:!1},Ec={capture:!0,passive:!1};function rm(e){e.stopImmediatePropagation()}function ks(e){e.preventDefault(),e.stopImmediatePropagation()}function z2(e){var t=e.document.documentElement,n=Ja(e).on("dragstart.drag",ks,Ec);"onselectstart"in t?n.on("selectstart.drag",ks,Ec):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function F2(e,t){var n=e.document.documentElement,i=Ja(e).on("dragstart.drag",null);t&&(i.on("click.drag",ks,Ec),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pp=e=>()=>e;function zm(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:a,x:o,y:s,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}zm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function H2(e){return!e.ctrlKey&&!e.button}function j2(){return this.parentNode}function V2(e,t){return t==null?{x:e.x,y:e.y}:t}function U2(){return navigator.maxTouchPoints||"ontouchstart"in this}function W2(){var e=H2,t=j2,n=V2,i=U2,r={},a=TN("start","drag","end"),o=0,s,c,u,d,f=0;function m(w){w.on("mousedown.drag",v).filter(i).on("touchstart.drag",E).on("touchmove.drag",N,$2).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(w,R){if(!(d||!e.call(this,w,R))){var L=T(this,t.call(this,w,R),w,R,"mouse");!L||(Ja(w.view).on("mousemove.drag",g,Ec).on("mouseup.drag",y,Ec),z2(w.view),rm(w),u=!1,s=w.clientX,c=w.clientY,L("start",w))}}function g(w){if(ks(w),!u){var R=w.clientX-s,L=w.clientY-c;u=R*R+L*L>f}r.mouse("drag",w)}function y(w){Ja(w.view).on("mousemove.drag mouseup.drag",null),F2(w.view,u),ks(w),r.mouse("end",w)}function E(w,R){if(!!e.call(this,w,R)){var L=w.changedTouches,H=t.call(this,w,R),$=L.length,W,Q;for(W=0;W<$;++W)(Q=T(this,H,w,R,L[W].identifier,L[W]))&&(rm(w),Q("start",w,L[W]))}}function N(w){var R=w.changedTouches,L=R.length,H,$;for(H=0;H<L;++H)($=r[R[H].identifier])&&(ks(w),$("drag",w,R[H]))}function O(w){var R=w.changedTouches,L=R.length,H,$;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),H=0;H<L;++H)($=r[R[H].identifier])&&(rm(w),$("end",w,R[H]))}function T(w,R,L,H,$,W){var Q=a.copy(),pe=jx(W||L,R),oe,be,ke;if((ke=n.call(w,new zm("beforestart",{sourceEvent:L,target:m,identifier:$,active:o,x:pe[0],y:pe[1],dx:0,dy:0,dispatch:Q}),H))!=null)return oe=ke.x-pe[0]||0,be=ke.y-pe[1]||0,function Yt(re,ce,B){var b=pe,z;switch(re){case"start":r[$]=Yt,z=o++;break;case"end":delete r[$],--o;case"drag":pe=jx(B||ce,R),z=o;break}Q.call(re,w,new zm(re,{sourceEvent:ce,subject:ke,target:m,identifier:$,active:z,x:pe[0]+oe,y:pe[1]+be,dx:pe[0]-b[0],dy:pe[1]-b[1],dispatch:Q}),H)}}return m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:pp(!!w),m):e},m.container=function(w){return arguments.length?(t=typeof w=="function"?w:pp(w),m):t},m.subject=function(w){return arguments.length?(n=typeof w=="function"?w:pp(w),m):n},m.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:pp(!!w),m):i},m.on=function(){var w=a.on.apply(a,arguments);return w===a?m:w},m.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,m):Math.sqrt(f)},m}const Fm=Math.PI,Hm=2*Fm,ko=1e-6,G2=Hm-ko;function jm(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Sw(){return new jm}jm.prototype=Sw.prototype={constructor:jm,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-e,c=i-t,u=a-e,d=o-t,f=u*u+d*d;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>ko)if(!(Math.abs(d*s-c*u)>ko)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var m=n-a,v=i-o,g=s*s+c*c,y=m*m+v*v,E=Math.sqrt(g),N=Math.sqrt(f),O=r*Math.tan((Fm-Math.acos((g+f-y)/(2*E*N)))/2),T=O/N,w=O/E;Math.abs(T-1)>ko&&(this._+="L"+(e+T*u)+","+(t+T*d)),this._+="A"+r+","+r+",0,0,"+ +(d*m>u*v)+","+(this._x1=e+w*s)+","+(this._y1=t+w*c)}},arc:function(e,t,n,i,r,a){e=+e,t=+t,n=+n,a=!!a;var o=n*Math.cos(i),s=n*Math.sin(i),c=e+o,u=t+s,d=1^a,f=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>ko||Math.abs(this._y1-u)>ko)&&(this._+="L"+c+","+u),n&&(f<0&&(f=f%Hm+Hm),f>G2?this._+="A"+n+","+n+",0,1,"+d+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):f>ko&&(this._+="A"+n+","+n+",0,"+ +(f>=Fm)+","+d+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function q2(e,t){return e.parent===t.parent?1:2}function K2(e){return e.reduce(Y2,0)/e.length}function Y2(e,t){return e+t.x}function X2(e){return 1+e.reduce(Z2,0)}function Z2(e,t){return Math.max(e,t.y)}function J2(e){for(var t;t=e.children;)e=t[0];return e}function Q2(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Vx(){var e=q2,t=1,n=1,i=!1;function r(a){var o,s=0;a.eachAfter(function(m){var v=m.children;v?(m.x=K2(v),m.y=X2(v)):(m.x=o?s+=e(m,o):0,m.y=0,o=m)});var c=J2(a),u=Q2(a),d=c.x-e(c,u)/2,f=u.x+e(u,c)/2;return a.eachAfter(i?function(m){m.x=(m.x-a.x)*t,m.y=(a.y-m.y)*n}:function(m){m.x=(m.x-d)/(f-d)*t,m.y=(1-(a.y?m.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function eB(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function tB(){return this.eachAfter(eB)}function nB(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function iB(e,t){for(var n=this,i=[n],r,a,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function rB(e,t){for(var n=this,i=[n],r=[],a,o,s,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)i.push(a[o]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function aB(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function oB(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function sB(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function lB(e){for(var t=this,n=cB(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function cB(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function uB(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function pB(){return Array.from(this)}function dB(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function fB(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*hB(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function Lv(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=gB)):t===void 0&&(t=vB);for(var n=new wc(e),i,r=[n],a,o,s,c;i=r.pop();)if((o=t(i.data))&&(c=(o=Array.from(o)).length))for(i.children=o,s=c-1;s>=0;--s)r.push(a=o[s]=new wc(o[s])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(_B)}function mB(){return Lv(this).eachBefore(yB)}function vB(e){return e.children}function gB(e){return Array.isArray(e)?e[1]:null}function yB(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _B(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function wc(e){this.data=e,this.depth=this.height=0,this.parent=null}wc.prototype=Lv.prototype={constructor:wc,count:tB,each:nB,eachAfter:rB,eachBefore:iB,find:aB,sum:oB,sort:sB,path:lB,ancestors:uB,descendants:pB,leaves:dB,links:fB,copy:mB,[Symbol.iterator]:hB};function xB(e,t){return e.parent===t.parent?1:2}function am(e){var t=e.children;return t?t[0]:e.t}function om(e){var t=e.children;return t?t[t.length-1]:e.t}function bB(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function EB(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function wB(e,t,n){return e.a.parent===t.parent?e.a:n}function Wp(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Wp.prototype=Object.create(wc.prototype);function SB(e){for(var t=new Wp(e,0),n,i=[t],r,a,o,s;n=i.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)i.push(r=n.children[o]=new Wp(a[o],o)),r.parent=n;return(t.parent=new Wp(null,0)).children=[t],t}function Cw(){var e=xB,t=1,n=1,i=null;function r(u){var d=SB(u);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)u.eachBefore(c);else{var f=u,m=u,v=u;u.eachBefore(function(O){O.x<f.x&&(f=O),O.x>m.x&&(m=O),O.depth>v.depth&&(v=O)});var g=f===m?1:e(f,m)/2,y=g-f.x,E=t/(m.x+g+y),N=n/(v.depth||1);u.eachBefore(function(O){O.x=(O.x+y)*E,O.y=O.depth*N})}return u}function a(u){var d=u.children,f=u.parent.children,m=u.i?f[u.i-1]:null;if(d){EB(u);var v=(d[0].z+d[d.length-1].z)/2;m?(u.z=m.z+e(u._,m._),u.m=u.z-v):u.z=v}else m&&(u.z=m.z+e(u._,m._));u.parent.A=s(u,m,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,d,f){if(d){for(var m=u,v=u,g=d,y=m.parent.children[0],E=m.m,N=v.m,O=g.m,T=y.m,w;g=om(g),m=am(m),g&&m;)y=am(y),v=om(v),v.a=u,w=g.z+O-m.z-E+e(g._,m._),w>0&&(bB(wB(g,u,f),u,w),E+=w,N+=w),O+=g.m,E+=m.m,T+=y.m,N+=v.m;g&&!om(v)&&(v.t=g,v.m+=O-N),m&&!am(y)&&(y.t=m,y.m+=E-T,f=u)}return f}function c(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r}function Ux(e){return function(){return e}}var CB=Array.prototype.slice;function TB(e){return e[0]}function PB(e){return e[1]}class AB{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function RB(e){return new AB(e,!0)}function MB(e){return e.source}function DB(e){return e.target}function OB(e){let t=MB,n=DB,i=TB,r=PB,a=null,o=null;function s(){let c;const u=CB.call(arguments),d=t.apply(this,u),f=n.apply(this,u);if(a==null&&(o=e(c=Sw())),o.lineStart(),u[0]=d,o.point(+i.apply(this,u),+r.apply(this,u)),u[0]=f,o.point(+i.apply(this,u),+r.apply(this,u)),o.lineEnd(),c)return o=null,c+""||null}return s.source=function(c){return arguments.length?(t=c,s):t},s.target=function(c){return arguments.length?(n=c,s):n},s.x=function(c){return arguments.length?(i=typeof c=="function"?c:Ux(+c),s):i},s.y=function(c){return arguments.length?(r=typeof c=="function"?c:Ux(+c),s):r},s.context=function(c){return arguments.length?(c==null?a=o=null:o=e(a=c),s):a},s}function Tw(){return OB(RB)}const IB={common:{borderRadius:"0px"},Tag:{heightSmall:"14px"},Tabs:{tabFontSizeSmall:"12px",tabPaddingSmallCard:"2px 4px 0px 4px",tabBorderColor:"#a9a9a9"},Input:{fontSizeSmall:"12px",heightSmall:"24px",textColorDisabled:"#4d4d4d"},Form:{labelFontSizeTopSmall:"12px",labelPaddingVertical:"0 0 4px 2px",labelHeightSmall:"24px",blankHeightSmall:"24px",labelFontSizeLeftSmall:"12px",feedbackHeightSmall:"16px",feedbackFontSizeSmall:"12px"},Button:{heightSmall:"20px",fontSizeSmall:"12px",iconSizeSmall:"14px",iconMarginSmall:"2px"},Dialog:{iconMargin:"0 3px 0 0",titleFontSize:"14px",titleFontWeight:"bold",titleTextColor:"#5e5e5e",iconSize:"14px",padding:"2px 5px",closeSize:"14px",closeMargin:"5px",contentMargin:"0"},Modal:{boxShadow:"1px 0px 7px 1px #00000060"},TreeSelect:{peers:{InternalSelection:{heightSmall:"24px",fontSizeSmall:"12px",menuBoxShadow:"1px 0px 7px 1px #000"},InternalSelectMenu:{optionFontSizeSmall:"12px",optionHeightSmall:"14px",peers:{}},Empty:{fontSizeSmall:"12px",iconSizeSmall:"20px"}}},Select:{peers:{InternalSelection:{heightSmall:"24px",fontSizeSmall:"12px",menuBoxShadow:"1px 0px 7px 1px #000"},InternalSelectMenu:{optionFontSizeSmall:"12px",optionHeightSmall:"12px",peers:{}},Empty:{fontSizeSmall:"12px",iconSizeSmall:"20px"}}},Slider:{fontSize:"12px",dotWidth:"8px",dotHeight:"8px",handleSize:"10px"}},NB="web-wf";function kB(){return fetch(`/${NB}/bpmn/create.bpmn`,{method:"get"}).then(async e=>e.text())}function BB(e={}){return Pn({url:"/wf/wfevent/list",method:"post",data:e})}function LB(e={}){return Pn({url:"/wf/wfevent/lists",method:"post",data:e})}function $B(e){return Pn({url:`/wf/wfexpre/${e}`,method:"get"})}function zB(e={}){return Pn({url:"/wf/wfexpre/list",method:"post",data:e})}function FB(e){return Pn({url:`/main/form/detail/${e}`,method:"get"})}function HB(e){return Pn({url:"/wf/wfprocdef/list",method:"post",data:e})}const jB=e=>Pn({url:`/wf/wfprocdef/queryVerListByCamundaProcdefKey?camundaProcdefKey=${e}`,method:"post"});function VB(e){return Pn({url:"/main/expression/list?groupName=user-expression-controller",method:"get"})}function UB(e){return Pn({url:`/main/page/${e}`,method:"get"})}function WB(e){return Pn({url:"/wf/procTag/getConditionTagByServiceId",method:"get",params:{serviceId:e}})}function GB(e){return Pn({url:"/wf/wfprocdef/deployment",method:"post",data:e})}function qB(e){return Pn({url:`/wf/wfprocdef/getXmlByCamundaId?camundaDefId=${e}`,method:"get"},!1)}function zc(e){return Pn({url:"/main/mdmOrg/list",method:"post",data:e})}function KB(e){return Pn({url:"/main/mdmUser/list",method:"post",data:e})}const Wx=e=>Pn({url:`/wf/wfprocdef/createNewVersionByCamundaProcdefId?camundaProcdefId=${e}`,method:"post"}),YB=(e,t)=>Pn({url:`/main/mdmCpts/updateProcKey/${e}/${t}`,method:"put"}),Nt=(e,t)=>(e.extensionElements.values||(e.extensionElements.values=[]),e.extensionElements.values.find(n=>n.$type===t)),od=(e,t=[])=>(e.extensionElements.values||(e.extensionElements.values=[]),e.extensionElements.values.filter(n=>t.includes(n.$type))),Gx=()=>window.__BPMN_MODDLE__.get("bpmnFactory"),jt=(e,t)=>window.__BPMN_MODDLE__.get("bpmnFactory").create(e,t),Sc=(e,t)=>{window.__BPMN_MODDLE__.get("modeling").updateProperties(e,t)};var Ve={exports:{}};typeof Object.create=="function"?Ve.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ve.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}};function XB(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ZB=XB(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var o=r-Math.floor(r),s="",a=0;a<Math.floor(r);a++){var c=Math.floor(Math.random()*i).toString(i);s=c+s}if(o){var u=Math.pow(i,o),c=Math.floor(Math.random()*u).toString(i);s=c+s}var d=parseInt(s,i);return d!==1/0&&d>=Math.pow(2,n)?t(n,i):s};t.rack=function(n,i,r){var a=function(s){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var u=t(n,i)}while(Object.hasOwnProperty.call(o,u));return o[u]=s,u},o=a.hats={};return a.get=function(s){return a.hats[s]},a.set=function(s,c){return a.hats[s]=c,a},a.bits=n||128,a.base=i||16,a}});function Ur(e){if(!(this instanceof Ur))return new Ur(e);e=e||[128,36,1],this._seed=e.length?ZB.rack(e[0],e[1],e[2]):e}Ur.prototype.next=function(e){return this._seed(e||!0)};Ur.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Ur.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Ur.prototype.assigned=function(e){return this._seed.get(e)||!1};Ur.prototype.unclaim=function(e){delete this._seed.hats[e]};Ur.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function sd(e){return Array.prototype.concat.apply([],e)}var Fc=Object.prototype.toString,JB=Object.prototype.hasOwnProperty;function Hc(e){return e===void 0}function Hr(e){return e!==void 0}function qx(e){return e==null}function yt(e){return Fc.call(e)==="[object Array]"}function kn(e){return Fc.call(e)==="[object Object]"}function rt(e){return Fc.call(e)==="[object Number]"}function Qn(e){var t=Fc.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Hi(e){return Fc.call(e)==="[object String]"}function QB(e){if(!yt(e))throw new Error("must supply array")}function va(e,t){return JB.call(e,t)}function Dt(e,t){t=Fv(t);var n;return G(e,function(i,r){if(t(i,r))return n=i,!1}),n}function Pw(e,t){t=Fv(t);var n=yt(e)?-1:void 0;return G(e,function(i,r){if(t(i,r))return n=r,!1}),n}function st(e,t){var n=[];return G(e,function(i,r){t(i,r)&&n.push(i)}),n}function G(e,t){var n,i;if(!Hc(e)){var r=yt(e)?iL:nL;for(var a in e)if(va(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}}function eL(e,t){return Hc(e)?[]:(QB(e),t=Fv(t),e.filter(function(n,i){return!t(n,i)}))}function ji(e,t,n){return G(e,function(i,r){n=t(n,i,r)}),n}function Wo(e,t){return!!ji(e,function(n,i,r){return n&&t(i,r)},!0)}function Go(e,t){return!!Dt(e,t)}function Nn(e,t){var n=[];return G(e,function(i,r){n.push(t(i,r))}),n}function ld(e){return e&&Object.keys(e)||[]}function Cc(e){return ld(e).length}function $v(e){return Nn(e,function(t){return t})}function tl(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=zv(t),G(e,function(i){var r=t(i)||"_",a=n[r];a||(a=n[r]=[]),a.push(i)}),n}function Aw(e){e=zv(e);for(var t={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];G(i,function(o){return tl(o,e,t)});var a=Nn(t,function(o,s){return o[0]});return a}var tL=Aw;function _r(e,t){t=zv(t);var n=[];return G(e,function(i,r){for(var a=t(i,r),o={d:a,v:i},s=0;s<n.length;s++){var c=n[s].d;if(a<c){n.splice(s,0,o);return}}n.push(o)}),Nn(n,function(i){return i.v})}function yr(e){return function(t){return Wo(e,function(n,i){return t[i]===n})}}function zv(e){return Qn(e)?e:function(t){return t[e]}}function Fv(e){return Qn(e)?e:function(t){return t===e}}function nL(e){return e}function iL(e){return Number(e)}function Rw(e,t){var n,i,r,a;function o(f){var m=Date.now(),v=f?0:a+t-m;if(v>0)return s(v);e.apply(r,i),c()}function s(f){n=setTimeout(o,f)}function c(){n&&clearTimeout(n),n=a=i=r=void 0}function u(){n&&o(!0),c()}function d(){a=Date.now();for(var f=arguments.length,m=new Array(f),v=0;v<f;v++)m[v]=arguments[v];i=m,r=this,n||s(t)}return d.flush=u,d.cancel=c,d}function ai(e,t){return e.bind(t)}function Vm(){return Vm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vm.apply(this,arguments)}function Y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Vm.apply(void 0,[e].concat(n))}function xr(e,t){var n={},i=Object(e);return G(t,function(r){r in i&&(n[r]=e[r])}),n}function ro(e,t){var n={},i=Object(e);return G(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}function oi(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}var rL=[].indexOf,Hv=function(e,t){if(rL)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},aL=/\s+/,oL=Object.prototype.toString;function Wt(e){return new Qa(e)}function Qa(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Qa.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=Hv(t,e);return~n||t.push(e),this.el.className=t.join(" "),this};Qa.prototype.remove=function(e){if(oL.call(e)=="[object RegExp]")return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=Hv(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this};Qa.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Qa.prototype.toggle=function(e,t){return this.list?(typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(typeof t<"u"?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)};Qa.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(aL);return n[0]===""&&n.shift(),n};Qa.prototype.has=Qa.prototype.contains=function(e){return this.list?this.list.contains(e):!!~Hv(this.array(),e)};function Id(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}var Ts=typeof Element<"u"?Element.prototype:{},Kx=Ts.matches||Ts.matchesSelector||Ts.webkitMatchesSelector||Ts.mozMatchesSelector||Ts.msMatchesSelector||Ts.oMatchesSelector,cd=sL;function sL(e,t){if(!e||e.nodeType!==1)return!1;if(Kx)return Kx.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1}function qo(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(cd(i,t))return i;i=i.parentNode}return cd(i,t)?i:null}var Mw=window.addEventListener?"addEventListener":"attachEvent",lL=window.removeEventListener?"removeEventListener":"detachEvent",Dw=Mw!=="addEventListener"?"on":"",cL=function(e,t,n,i){return e[Mw](Dw+t,n,i||!1),n},uL=function(e,t,n,i){return e[lL](Dw+t,n,i||!1),n},Ie={bind:cL,unbind:uL},Ow=["focus","blur"];function pL(e,t,n,i,r){return Ow.indexOf(n)!==-1&&(r=!0),Ie.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=qo(o,t,!0),a.delegateTarget&&i.call(e,a)},r)}function dL(e,t,n,i){return Ow.indexOf(t)!==-1&&(i=!0),Ie.unbind(e,t,n,i)}var $i={bind:pL,unbind:dL},Vt=fL,Iw=!1,dp;typeof document<"u"&&(dp=document.createElement("div"),dp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Iw=!dp.getElementsByTagName("link").length,dp=void 0);var Sn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Iw?[1,"X<div>","</div>"]:[0,"",""]};Sn.td=Sn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Sn.option=Sn.optgroup=[1,'<select multiple="multiple">',"</select>"];Sn.thead=Sn.tbody=Sn.colgroup=Sn.caption=Sn.tfoot=[1,"<table>","</table>"];Sn.polyline=Sn.ellipse=Sn.polygon=Sn.circle=Sn.text=Sn.line=Sn.path=Sn.rect=Sn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function fL(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Sn[i]||Sn._default,a=r[0],o=r[1],s=r[2],c=t.createElement("div");for(c.innerHTML=o+e+s;a--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var u=t.createDocumentFragment();c.firstChild;)u.appendChild(c.removeChild(c.firstChild));return u}function Ft(e,t){return t=t||document,t.querySelector(e)}function Um(e,t){return t=t||document,t.querySelectorAll(e)}function Wr(e){e.parentNode&&e.parentNode.removeChild(e)}function hL(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Nw(e,t){return t.appendChild(hL(e,t))}function Ye(e,t){return Nw(t,e),e}var Wm=2,kw={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Wm,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Wm,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function mL(e,t){return kw[t]?e.style[t]:e.getAttributeNS(null,t)}function Bw(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=kw[i];r?(r===Wm&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function vL(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Bw(e,r,t[r])}function ve(e,t,n){if(typeof t=="string")if(n!==void 0)Bw(e,t,n);else return mL(e,t);else vL(e,t);return e}function jv(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var gL=/\s+/,yL=Object.prototype.toString;function Gm(e){return typeof e<"u"}function mt(e){return new eo(e)}function eo(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}eo.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=jv(t,e);return~n||t.push(e),Gm(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this};eo.prototype.remove=function(e){if(yL.call(e)==="[object RegExp]")return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=jv(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this};eo.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};eo.prototype.toggle=function(e,t){return this.list?(Gm(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(Gm(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)};eo.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(gL);return n[0]===""&&n.shift(),n};eo.prototype.has=eo.prototype.contains=function(e){return this.list?this.list.contains(e):!!~jv(this.array(),e)};function dn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Nd(e){for(var t;t=e.firstChild;)dn(t);return e}function Vv(e){return e.cloneNode(!0)}var Uv={svg:"http://www.w3.org/2000/svg"},Yx='<svg xmlns="'+Uv.svg+'"';function Lw(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Uv.svg)===-1&&(e=Yx+e.substring(4)):(e=Yx+">"+e+"</svg>",t=!0);var n=_L(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function _L(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Le(e,t){var n;return e.charAt(0)==="<"?(n=Lw(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Uv.svg,e),t&&ve(n,t),n}var sm=null;function qm(){return sm===null&&(sm=Le("svg")),sm}function Xx(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function xL(e,t,n,i,r,a){var o=qm().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return Xx(o,e);case 6:return Xx(o,{a:e,b:t,c:n,d:i,e:r,f:a})}}function pc(e){return e?qm().createSVGTransformFromMatrix(e):qm().createSVGTransform()}var Zx=/([&<>]{1})/g,bL=/([\n\r"]{1})/g,EL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function lm(e,t){function n(i,r){return EL[r]||r}return e.replace(t,n)}function $w(e,t){var n,i,r,a,o;switch(e.nodeType){case 3:t.push(lm(e.textContent,Zx));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',lm(a.value,bL),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,i=o.length;n<i;++n)$w(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",lm(e.nodeValue,Zx),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function wL(e,t){var n=Lw(t);if(Nd(e),!!t){CL(n)||(n=n.documentElement);for(var i=TL(n.childNodes),r=0;r<i.length;r++)Nw(i[r],e)}}function SL(e){for(var t=e.firstChild,n=[];t;)$w(t,n),t=t.nextSibling;return n.join("")}function CL(e){return e.nodeName==="#document-fragment"}function Jx(e,t){if(t!==void 0){try{wL(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return SL(e)}function TL(e){return Array.prototype.slice.call(e)}function PL(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function AL(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(PL(e,i))}function Tc(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),AL(n,t)),n.consolidate()}var RL=/^class /;function ML(e){return RL.test(e.toString())}function Km(e){return Object.prototype.toString.call(e)==="[object Array]"}function cm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fp(){var e=Array.prototype.slice.call(arguments);e.length===1&&Km(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var DL=/constructor\s*[^(]*\(\s*([^)]*)\)/m,OL=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,IL=/\/\*([^*]*)\*\//m;function NL(e){if(typeof e!="function")throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(ML(e)?DL:OL);return t?t[1]&&t[1].split(",").map(function(n){return t=n.match(IL),t?t[1].trim():n.trim()})||[]:[]}function kL(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}}function Ym(e,t){t=t||{get:function(g,y){if(n.push(g),y===!1)return null;throw o('No provider for "'+g+'"!')}};var n=[],i=this._providers=Object.create(t._providers||null),r=this._instances=Object.create(null),a=r.injector=this,o=function(g){var y=n.join(" -> ");return n.length=0,new Error(y?g+" (Resolving: "+y+")":g)},s=function(g,y){if(!i[g]&&g.indexOf(".")!==-1){for(var E=g.split("."),N=s(E.shift());E.length;)N=N[E.shift()];return N}if(cm(r,g))return r[g];if(cm(i,g)){if(n.indexOf(g)!==-1)throw n.push(g),o("Cannot resolve circular dependency!");return n.push(g),r[g]=i[g][0](i[g][1]),n.pop(),r[g]}return t.get(g,y)},c=function(g,y){if(typeof y>"u"&&(y={}),typeof g!="function")if(Km(g))g=fp(g.slice());else throw new Error('Cannot invoke "'+g+'". Expected a function!');var E=g.$inject||NL(g),N=E.map(function(O){return cm(y,O)?y[O]:s(O)});return{fn:g,dependencies:N}},u=function(g){var y=c(g),E=y.fn,N=y.dependencies,O=Function.prototype.bind.apply(E,[null].concat(N));return new O},d=function(g,y,E){var N=c(g,E),O=N.fn,T=N.dependencies;return O.apply(y,T)},f=function(g){return fp(function(y){return g.get(y)})},m=function(g,y){if(y&&y.length){var E=Object.create(null),N=Object.create(null),O=[],T=[],w=[],R,L,H,$;for(var W in i)R=i[W],y.indexOf(W)!==-1&&(R[2]==="private"?(L=O.indexOf(R[3]),L===-1?(H=R[3].createChild([],y),$=f(H),O.push(R[3]),T.push(H),w.push($),E[W]=[$,W,"private",H]):E[W]=[w[L],W,"private",T[L]]):E[W]=[R[2],R[1]],N[W]=!0),(R[2]==="factory"||R[2]==="type")&&R[1].$scope&&y.forEach(function(Q){R[1].$scope.indexOf(Q)!==-1&&(E[W]=[R[2],R[1]],N[Q]=!0)});y.forEach(function(Q){if(!N[Q])throw new Error('No provider for "'+Q+'". Cannot use provider from the parent!')}),g.unshift(E)}return new Ym(g,a)},v={factory:d,type:u,value:function(g){return g}};e.forEach(function(g){function y(T,w){return T!=="value"&&Km(w)&&(w=fp(w.slice())),w}if(g instanceof kL)g.forEach(function(T){var w=T[0],R=T[1],L=T[2];i[w]=[v[R],y(R,L),R]});else if(typeof g=="object")if(g.__exports__){var E=Object.keys(g).reduce(function(T,w){return w.substring(0,2)!=="__"&&(T[w]=g[w]),T},Object.create(null)),N=new Ym((g.__modules__||[]).concat([E]),a),O=fp(function(T){return N.get(T)});g.__exports__.forEach(function(T){i[T]=[O,T,"private",N]})}else Object.keys(g).forEach(function(T){if(g[T][2]==="private"){i[T]=g[T];return}var w=g[T][0],R=g[T][1];i[T]=[v[w],y(w,R),w]})}),this.get=s,this.invoke=d,this.instantiate=u,this.createChild=m}var BL=1e3;function ba(e,t){var n=this;t=t||BL,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,o=r.element,s=r.gfx,c=r.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(s,o,c):n.drawConnection(s,o,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}ba.prototype.canRender=function(){};ba.prototype.drawShape=function(){};ba.prototype.drawConnection=function(){};ba.prototype.getShapePath=function(){};ba.prototype.getConnectionPath=function(){};function nl(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function zw(e){for(var t="",n=0,i;i=e[n];n++)t+=i.x+","+i.y+" ";return t}function Wv(e,t){var n=Le("polyline");return ve(n,{points:zw(e)}),t&&ve(n,t),n}function LL(e,t){return ve(e,{points:zw(t)}),e}function Fw(e){return st(e,function(t){return!Dt(e,function(n){return n!==t&&Hw(t,n)})})}function Hw(e,t){if(!!t){if(e===t)return t;if(!!e.parent)return Hw(e.parent,t)}}function Qx(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Ko(e,t,n){n=n||0,yt(e)||(e=[e]),G(e,function(i,r){var a=t(i,r,n);yt(a)&&a.length&&Ko(a,t,n+1)})}function $L(e,t,n){var i=[],r=[];return Ko(e,function(a,o,s){Qx(i,a,t);var c=a.children;if((n===-1||s<n)&&c&&Qx(r,c,t))return c}),i}function kd(e,t){return $L(e,!t,-1)}function zL(e,t,n){Hc(t)&&(t=!0),kn(t)&&(n=t,t=!0),n=n||{};var i=Zl(n.allShapes),r=Zl(n.allConnections),a=Zl(n.enclosedElements),o=Zl(n.enclosedConnections),s=Zl(n.topLevel,t&&tl(e,function(d){return d.id}));function c(d){s[d.source.id]&&s[d.target.id]&&(s[d.id]=[d]),i[d.source.id]&&i[d.target.id]&&(o[d.id]=a[d.id]=d),r[d.id]=d}function u(d){if(a[d.id]=d,d.waypoints)o[d.id]=r[d.id]=d;else return i[d.id]=d,G(d.incoming,c),G(d.outgoing,c),d.children}return Ko(e,u),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:o,enclosedElements:a}}function Un(e,t){t=!!t,yt(e)||(e=[e]);var n,i,r,a;return G(e,function(o){var s=o;o.waypoints&&!t&&(s=Un(o.waypoints,!0));var c=s.x,u=s.y,d=s.height||0,f=s.width||0;(c<n||n===void 0)&&(n=c),(u<i||i===void 0)&&(i=u),(c+f>r||r===void 0)&&(r=c+f),(u+d>a||a===void 0)&&(a=u+d)}),{x:n,y:i,height:a-i,width:r-n}}function FL(e,t){var n={};return G(e,function(i){var r=i;r.waypoints&&(r=Un(r)),!rt(t.y)&&r.x>t.x&&(n[i.id]=i),!rt(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(rt(t.width)&&rt(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!rt(t.width)||!rt(t.height))&&(n[i.id]=i)}),n}function jw(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Vw(e){return!!(e&&e.isFrame)}function Zl(e,t){return Y({},e||{},t||{})}var HL=1;function ao(e,t){ba.call(this,e,HL),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Ve.exports(ao,ba);ao.prototype.canRender=function(){return!0};ao.prototype.drawShape=function(t,n,i){var r=Le("rect");return ve(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Vw(n)?ve(r,Y({},this.FRAME_STYLE,i||{})):ve(r,Y({},this.SHAPE_STYLE,i||{})),Ye(t,r),r};ao.prototype.drawConnection=function(t,n,i){var r=Wv(n.waypoints,Y({},this.CONNECTION_STYLE,i||{}));return Ye(t,r),r};ao.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,o=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return nl(o)};ao.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return nl(a)};ao.$inject=["eventBus","styles"];function jL(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return Y(a,{class:n})},this.style=function(n,i){!yt(n)&&!i&&(i=n,n=[]);var r=ji(n,function(a,o){return Y(a,e[o]||{})},{});return i?Y(r,i):r},this.computeStyle=function(n,i,r){return yt(i)||(r=i,i=[]),t.style(i||[],Y({},r,n||{}))}}const VL={__init__:["defaultRenderer"],defaultRenderer:["type",ao],styles:["type",jL]};function fn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function hn(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Gv(e,t){return!e||!t?-1:e.indexOf(t)}function jc(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qv(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),a=jc(e,t);return Math.abs(r/a)<=i}var Uw=2;function ga(e,t){var n;return yt(e)?n=e:n=[e,t],UL(n)?"h":WL(n)?"v":!1}function UL(e,t){var n;yt(e)?n=e:n=[e,t];var i=n.slice().shift();return Wo(n,function(r){return Math.abs(i.y-r.y)<=Uw})}function WL(e,t){var n;yt(e)?n=e:n=[e,t];var i=n.slice().shift();return Wo(n,function(r){return Math.abs(i.x-r.x)<=Uw})}function eb(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function Xm(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var GL=/,?([a-z]),?/gi,tb=parseFloat,un=Math,Wa=un.PI,Or=un.min,Ir=un.max,nb=un.pow,Ka=un.abs,qL=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,KL=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,ud=Array.isArray||function(e){return e instanceof Array};function Kv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dc(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Kv(e,n)&&(t[n]=dc(e[n]));return t}function YL(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function XL(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join("\u2400"),r=t.cache=t.cache||{},a=t.count=t.count||[];return Kv(r,i)?(YL(a,i),r[i]):(a.length>=1e3&&delete r[a.shift()],a.push(i),r[i]=e.apply(0,n),r[i])}return t}function ZL(e){if(!e)return null;var t=Hs(e);if(t.arr)return dc(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return ud(e)&&ud(e[0])&&(i=dc(e)),i.length||String(e).replace(qL,function(r,a,o){var s=[],c=a.toLowerCase();for(o.replace(KL,function(u,d){d&&s.push(+d)}),c=="m"&&s.length>2&&(i.push([a].concat(s.splice(0,2))),c="l",a=a=="m"?"l":"L");s.length>=n[c]&&(i.push([a].concat(s.splice(0,n[c]))),!!n[c]););}),i.toString=Hs.toString,t.arr=dc(i),i}function Hs(e){var t=Hs.ps=Hs.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Kv(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function Zm(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function Ww(){return this.join(",").replace(GL,"$1")}function pd(e){var t=dc(e);return t.toString=Ww,t}function ib(e,t,n,i,r,a,o,s,c){var u=1-c,d=nb(u,3),f=nb(u,2),m=c*c,v=m*c,g=d*e+f*3*c*n+u*3*c*c*r+v*o,y=d*t+f*3*c*i+u*3*c*c*a+v*s;return{x:dd(g),y:dd(y)}}function rb(e){var t=i5.apply(null,e);return Zm(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Ga(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function JL(e,t){return e=Zm(e),t=Zm(t),Ga(t,e.x,e.y)||Ga(t,e.x2,e.y)||Ga(t,e.x,e.y2)||Ga(t,e.x2,e.y2)||Ga(e,t.x,t.y)||Ga(e,t.x2,t.y)||Ga(e,t.x,t.y2)||Ga(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function ab(e,t,n,i,r){var a=-3*t+9*n-9*i+3*r,o=e*a+6*t-12*n+6*i;return e*o-3*t+3*n}function ob(e,t,n,i,r,a,o,s,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,d=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],v=0,g=0;g<d;g++){var y=u*f[g]+u,E=ab(y,e,n,r,o),N=ab(y,t,i,a,s),O=E*E+N*N;v+=m[g]*un.sqrt(O)}return u*v}function QL(e,t,n,i,r,a,o,s){if(!(Ir(e,n)<Or(r,o)||Or(e,n)>Ir(r,o)||Ir(t,i)<Or(a,s)||Or(t,i)>Ir(a,s))){var c=(e*i-t*n)*(r-o)-(e-n)*(r*s-a*o),u=(e*i-t*n)*(a-s)-(t-i)*(r*s-a*o),d=(e-n)*(a-s)-(t-i)*(r-o);if(!!d){var f=dd(c/d),m=dd(u/d),v=+f.toFixed(2),g=+m.toFixed(2);if(!(v<+Or(e,n).toFixed(2)||v>+Ir(e,n).toFixed(2)||v<+Or(r,o).toFixed(2)||v>+Ir(r,o).toFixed(2)||g<+Or(t,i).toFixed(2)||g>+Ir(t,i).toFixed(2)||g<+Or(a,s).toFixed(2)||g>+Ir(a,s).toFixed(2)))return{x:f,y:m}}}}function dd(e){return Math.round(e*1e11)/1e11}function e5(e,t,n){var i=rb(e),r=rb(t);if(!JL(i,r))return n?0:[];for(var a=ob.apply(0,e),o=ob.apply(0,t),s=sb(e)?1:~~(a/5)||1,c=sb(t)?1:~~(o/5)||1,u=[],d=[],f={},m=n?0:[],v=0;v<s+1;v++){var g=ib.apply(0,e.concat(v/s));u.push({x:g.x,y:g.y,t:v/s})}for(v=0;v<c+1;v++)g=ib.apply(0,t.concat(v/c)),d.push({x:g.x,y:g.y,t:v/c});for(v=0;v<s;v++)for(var y=0;y<c;y++){var E=u[v],N=u[v+1],O=d[y],T=d[y+1],w=Ka(N.x-E.x)<.01?"y":"x",R=Ka(T.x-O.x)<.01?"y":"x",L=QL(E.x,E.y,N.x,N.y,O.x,O.y,T.x,T.y),H;if(L){if(H=L.x.toFixed(9)+"#"+L.y.toFixed(9),f[H])continue;f[H]=!0;var $=E.t+Ka((L[w]-E[w])/(N[w]-E[w]))*(N.t-E.t),W=O.t+Ka((L[R]-O[R])/(T[R]-O[R]))*(T.t-O.t);$>=0&&$<=1&&W>=0&&W<=1&&(n?m++:m.push({x:L.x,y:L.y,t1:$,t2:W}))}}return m}function t5(e,t,n){e=cb(e),t=cb(t);for(var i,r,a,o,s,c,u,d,f,m,v=n?0:[],g=0,y=e.length;g<y;g++){var E=e[g];if(E[0]=="M")i=s=E[1],r=c=E[2];else{E[0]=="C"?(f=[i,r].concat(E.slice(1)),i=f[6],r=f[7]):(f=[i,r,i,r,s,c,s,c],i=s,r=c);for(var N=0,O=t.length;N<O;N++){var T=t[N];if(T[0]=="M")a=u=T[1],o=d=T[2];else{T[0]=="C"?(m=[a,o].concat(T.slice(1)),a=m[6],o=m[7]):(m=[a,o,a,o,u,d,u,d],a=u,o=d);var w=e5(f,m,n);if(n)v+=w;else{for(var R=0,L=w.length;R<L;R++)w[R].segment1=g,w[R].segment2=N,w[R].bez1=f,w[R].bez2=m;v=v.concat(w)}}}}}return v}function n5(e){var t=Hs(e);if(t.abs)return pd(t.abs);if((!ud(e)||!ud(e&&e[0]))&&(e=ZL(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,a=0,o=0,s=0,c;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],a=i,o=r,s++,n[0]=["M",i,r]);for(var u,d,f=s,m=e.length;f<m;f++){if(n.push(u=[]),d=e[f],c=d[0],c!=c.toUpperCase())switch(u[0]=c.toUpperCase(),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+d[6]+i,u[7]=+d[7]+r;break;case"V":u[1]=+d[1]+r;break;case"H":u[1]=+d[1]+i;break;case"M":a=+d[1]+i,o=+d[2]+r;default:for(var v=1,g=d.length;v<g;v++)u[v]=+d[v]+(v%2?i:r)}else for(var y=0,E=d.length;y<E;y++)u[y]=d[y];switch(c=c.toUpperCase(),u[0]){case"Z":i=+a,r=+o;break;case"H":i=u[1];break;case"V":r=u[1];break;case"M":a=u[u.length-2],o=u[u.length-1];default:i=u[u.length-2],r=u[u.length-1]}}return n.toString=Ww,t.abs=pd(n),n}function sb(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function hp(e,t,n,i){return[e,t,n,i,n,i]}function lb(e,t,n,i,r,a){var o=.3333333333333333,s=2/3;return[o*e+s*n,o*t+s*i,o*r+s*n,o*a+s*i,r,a]}function Gw(e,t,n,i,r,a,o,s,c,u){var d=Wa*120/180,f=Wa/180*(+r||0),m=[],v,g=XL(function(Je,St,tt){var ut=Je*un.cos(tt)-St*un.sin(tt),Xt=Je*un.sin(tt)+St*un.cos(tt);return{x:ut,y:Xt}});if(u)H=u[0],$=u[1],R=u[2],L=u[3];else{v=g(e,t,-f),e=v.x,t=v.y,v=g(s,c,-f),s=v.x,c=v.y;var y=(e-s)/2,E=(t-c)/2,N=y*y/(n*n)+E*E/(i*i);N>1&&(N=un.sqrt(N),n=N*n,i=N*i);var O=n*n,T=i*i,w=(a==o?-1:1)*un.sqrt(Ka((O*T-O*E*E-T*y*y)/(O*E*E+T*y*y))),R=w*n*E/i+(e+s)/2,L=w*-i*y/n+(t+c)/2,H=un.asin(((t-L)/i).toFixed(9)),$=un.asin(((c-L)/i).toFixed(9));H=e<R?Wa-H:H,$=s<R?Wa-$:$,H<0&&(H=Wa*2+H),$<0&&($=Wa*2+$),o&&H>$&&(H=H-Wa*2),!o&&$>H&&($=$-Wa*2)}var W=$-H;if(Ka(W)>d){var Q=$,pe=s,oe=c;$=H+d*(o&&$>H?1:-1),s=R+n*un.cos($),c=L+i*un.sin($),m=Gw(s,c,n,i,r,0,o,pe,oe,[$,Q,R,L])}W=$-H;var be=un.cos(H),ke=un.sin(H),Yt=un.cos($),re=un.sin($),ce=un.tan(W/4),B=4/3*n*ce,b=4/3*i*ce,z=[e,t],K=[e+B*ke,t-b*be],se=[s+B*re,c-b*Yt],Z=[s,c];if(K[0]=2*z[0]-K[0],K[1]=2*z[1]-K[1],u)return[K,se,Z].concat(m);m=[K,se,Z].concat(m).join().split(",");for(var ee=[],me=0,qe=m.length;me<qe;me++)ee[me]=me%2?g(m[me-1],m[me],f).y:g(m[me],m[me+1],f).x;return ee}function i5(e,t,n,i,r,a,o,s){for(var c=[],u=[[],[]],d,f,m,v,g,y,E,N,O=0;O<2;++O){if(O==0?(f=6*e-12*n+6*r,d=-3*e+9*n-9*r+3*o,m=3*n-3*e):(f=6*t-12*i+6*a,d=-3*t+9*i-9*a+3*s,m=3*i-3*t),Ka(d)<1e-12){if(Ka(f)<1e-12)continue;v=-m/f,0<v&&v<1&&c.push(v);continue}E=f*f-4*m*d,N=un.sqrt(E),!(E<0)&&(g=(-f+N)/(2*d),0<g&&g<1&&c.push(g),y=(-f-N)/(2*d),0<y&&y<1&&c.push(y))}for(var T=c.length,w=T,R;T--;)v=c[T],R=1-v,u[0][T]=R*R*R*e+3*R*R*v*n+3*R*v*v*r+v*v*v*o,u[1][T]=R*R*R*t+3*R*R*v*i+3*R*v*v*a+v*v*v*s;return u[0][w]=e,u[1][w]=t,u[0][w+1]=o,u[1][w+1]=s,u[0].length=u[1].length=w+2,{x0:Or.apply(0,u[0]),y0:Or.apply(0,u[1]),x1:Ir.apply(0,u[0]),y1:Ir.apply(0,u[1])}}function cb(e){var t=Hs(e);if(t.curve)return pd(t.curve);for(var n=n5(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(v,g,y){var E,N;if(!v)return["C",g.x,g.y,g.x,g.y,g.x,g.y];switch(!(v[0]in{T:1,Q:1})&&(g.qx=g.qy=null),v[0]){case"M":g.X=v[1],g.Y=v[2];break;case"A":v=["C"].concat(Gw.apply(0,[g.x,g.y].concat(v.slice(1))));break;case"S":y=="C"||y=="S"?(E=g.x*2-g.bx,N=g.y*2-g.by):(E=g.x,N=g.y),v=["C",E,N].concat(v.slice(1));break;case"T":y=="Q"||y=="T"?(g.qx=g.x*2-g.qx,g.qy=g.y*2-g.qy):(g.qx=g.x,g.qy=g.y),v=["C"].concat(lb(g.x,g.y,g.qx,g.qy,v[1],v[2]));break;case"Q":g.qx=v[1],g.qy=v[2],v=["C"].concat(lb(g.x,g.y,v[1],v[2],v[3],v[4]));break;case"L":v=["C"].concat(hp(g.x,g.y,v[1],v[2]));break;case"H":v=["C"].concat(hp(g.x,g.y,v[1],g.y));break;case"V":v=["C"].concat(hp(g.x,g.y,g.x,v[1]));break;case"Z":v=["C"].concat(hp(g.x,g.y,g.X,g.Y));break}return v},a=function(v,g){if(v[g].length>7){v[g].shift();for(var y=v[g];y.length;)o[g]="A",v.splice(g++,0,["C"].concat(y.splice(0,6)));v.splice(g,1),d=n.length}},o=[],s="",c="",u=0,d=n.length;u<d;u++){n[u]&&(s=n[u][0]),s!="C"&&(o[u]=s,u&&(c=o[u-1])),n[u]=r(n[u],i,c),o[u]!="A"&&s=="C"&&(o[u]="C"),a(n,u);var f=n[u],m=f.length;i.x=f[m-2],i.y=f[m-1],i.bx=tb(f[m-4])||i.x,i.by=tb(f[m-3])||i.y}return t.curve=pd(n),n}var r5=t5;const qw=r5;function Kw(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Xa(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ke(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Yv(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function dt(e){return Xa({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Wn(e,t,n){n=n||0,kn(n)||(n={x:n,y:n});var i=Ke(e),r=Ke(t),a=i.bottom+n.y<=r.top,o=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=i.right+n.x<=r.left,u=a?"top":s?"bottom":null,d=c?"left":o?"right":null;return d&&u?u+"-"+d:d||u||"intersect"}function Jm(e,t,n){var i=a5(e,t);return i.length===1||i.length===2&&jc(i[0],i[1])<1?Xa(i[0]):i.length>1?(i=_r(i,function(r){var a=Math.floor(r.t2*100)||1;return a=100-a,a=(a<10?"0":"")+a,r.segment2+"#"+a}),Xa(i[n?0:i.length-1])):null}function a5(e,t){return qw(e,t)}function o5(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],jc(n,r)===0||qv(i,r,n)?e.splice(t,1):t++;return e}function Gp(e,t){return Math.round(e*t)/t}function ub(e){return rt(e)?e+"px":e}function s5(e){for(;e.parent;)e=e.parent;return e}function l5(e){e=Y({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),Y(n.style,{position:"relative",overflow:"hidden",width:ub(e.width),height:ub(e.height)}),t.appendChild(n),n}function Yw(e,t,n){var i=Le("g");mt(i).add(t);var r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}var fd="base",Qm="djs-element-hidden",Xw=0,c5=1,u5={shape:["x","y","width","height"],connection:["waypoints"]};function ft(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}ft.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ft.prototype._init=function(e){var t=this._eventBus,n=this._container=l5(e),i=this._svg=Le("svg");ve(i,{width:"100%",height:"100%"}),Ye(n,i);var r=this._viewport=Yw(i,"viewport");this._layers={},this._planes={},e.deferUpdate!==!1&&(this._viewboxChanged=Rw(ai(this._viewboxChanged,this),300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:r})},this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],function(){delete this._cachedViewbox},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ft.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport};ft.prototype._clear=function(){var e=this,t=this._elementRegistry.getAll();t.forEach(function(n){var i=jw(n);i==="root"?e.setRootElementForPlane(null,e.findPlane(n),!0):e._removeElement(n,i)}),this._activePlane=null,this._planes={},delete this._cachedViewbox};ft.prototype.getDefaultLayer=function(){return this.getLayer(fd,Xw)};ft.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ft.prototype._createLayer=function(e,t){typeof t>"u"&&(t=c5);var n=ji(this._layers,function(i,r){return t>=r.index&&i++,i},0);return{group:Yw(this._viewport,"layer-"+e,n),index:t}};ft.prototype.getPlane=function(e){if(!e)throw new Error("must specify a name");return this._planes[e]};ft.prototype.createPlane=function(e,t){if(!e)throw new Error("must specify a name");if(this._planes[e])throw new Error("plane "+e+" already exists");t||(t={id:"__implicitroot"+e,children:[],isImplicit:!0});var n=this.getLayer(e,Xw);mt(n).add(Qm);var i=this._planes[e]={layer:n,name:e,rootElement:null};return this.setRootElementForPlane(t,i),i};ft.prototype.setActivePlane=function(e){if(!e)throw new Error("must specify a plane");return typeof e=="string"&&(e=this.getPlane(e)),this._activePlane&&mt(this._activePlane.layer).add(Qm),this._activePlane=e,mt(e.layer).remove(Qm),e.rootElement&&this._elementRegistry.updateGraphics(e.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:e}),e};ft.prototype.getActiveLayer=function(){return this.getActivePlane().layer};ft.prototype.getActivePlane=function(){var e=this._activePlane;return e||(e=this.createPlane(fd),this.setActivePlane(fd)),e};ft.prototype.findPlane=function(e){typeof e=="string"&&(e=this._elementRegistry.get(e));var t=s5(e);return Dt(this._planes,function(n){return n.rootElement===t})};ft.prototype.getContainer=function(){return this._container};ft.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(G([i.gfx,i.secondaryGfx],function(r){r&&(n?mt(r).add(t):mt(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};ft.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ft.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ft.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return mt(n).has(t)};ft.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ft.prototype.getRootElement=function(){var e=this.getActivePlane();return e.rootElement};ft.prototype.setRootElement=function(e,t){var n=this._activePlane;if(n)return this.setRootElementForPlane(e,n,t);var i=this.createPlane(fd,e);return this.setActivePlane(i),i.rootElement};ft.prototype.setRootElementForPlane=function(e,t,n){typeof t=="string"&&(t=this.getPlane(t)),e&&this._ensureValid("root",e);var i=t.rootElement,r=this._elementRegistry,a=this._eventBus;if(i){if(!n)throw new Error("rootElement already set, need to specify override");a.fire("root.remove",{element:i}),a.fire("root.removed",{element:i}),r.remove(i)}if(e){var o=t.layer;a.fire("root.add",{element:e}),r.add(e,o),a.fire("root.added",{element:e,gfx:o}),t===this._activePlane&&this._elementRegistry.updateGraphics(e,this._svg,!0)}return t.rootElement=e,e};ft.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=u5[e],i=Wo(n,function(r){return typeof t[r]<"u"});if(!i)throw new Error("must supply { "+n.join(", ")+" } with "+e)};ft.prototype._setParent=function(e,t,n){hn(t.children,e,n),e.parent=t};ft.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var o=a.create(e,t,i);return this._elementRegistry.add(t,o),a.update(e,t,o),r.fire(e+".added",{element:t,gfx:o}),t};ft.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ft.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ft.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),fn(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};ft.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ft.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ft.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ft.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ft.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ft.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;var t=this._viewport,n,i=this.getSize(),r,a,o,s,c;if(e)this._changeViewbox(function(){o=Math.min(i.width/e.width,i.height/e.height);var u=this._svg.createSVGMatrix().scale(o).translate(-e.x,-e.y);Tc(t,u)});else return n=this._activePlane&&this._activePlane.layer.getBBox()||{},a=Tc(t),r=a?a.matrix:xL(),o=Gp(r.a,1e3),s=Gp(-r.e||0,1e3),c=Gp(-r.f||0,1e3),e=this._cachedViewbox={x:s?s/o:0,y:c?c/o:0,width:i.width/o,height:i.height/o,scale:o,inner:{width:n.width||0,height:n.height||0,x:n.x||0,y:n.y||0},outer:i},e;return e};ft.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=Y({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Zw(t,n)}),{x:n.e,y:n.f}};ft.prototype.scrollToElement=function(e,t){var n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));var i=this.findPlane(e);i!==this._activePlane&&this.setActivePlane(i),t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};var r=Un(e),a=Ke(r),o=this.viewbox(),s=this.zoom(),c,u;o.y+=t.top/s,o.x+=t.left/s,o.width-=(t.right+t.left)/s,o.height-=(t.bottom+t.top)/s;var d=Ke(o),f=r.width<o.width&&r.height<o.height;if(!f)c=r.x-o.x,u=r.y-o.y;else{var m=Math.max(0,a.right-d.right),v=Math.min(0,a.left-d.left),g=Math.max(0,a.bottom-d.bottom),y=Math.min(0,a.top-d.top);c=m||v,u=g||y}this.scroll({dx:-c*s,dy:-u*s})};ft.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);var n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Gp(i.a,1e3)};function Zw(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ft.prototype._fitViewport=function(e){var t=this.viewbox(),n=t.outer,i=t.inner,r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};ft.prototype._setZoom=function(e,t){var n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint(),o,s,c,u,d;c=i.getCTM();var f=c.a;return t?(o=Y(a,t),s=o.matrixTransform(c.inverse()),u=r.translate(s.x,s.y).scale(1/f*e).translate(-s.x,-s.y),d=c.multiply(u)):d=r.scale(e),Zw(this._viewport,d),d};ft.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ft.prototype.getAbsoluteBBox=function(e){var t=this.viewbox(),n;if(e.waypoints){var i=this.getGraphics(e);n=i.getBBox()}else n=e;var r=n.x*t.scale-t.x*t.scale,a=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,s=n.height*t.scale;return{x:r,y:a,width:o,height:s}};ft.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var js="data-element-id";function Vi(e){this._elements={},this._eventBus=e}Vi.$inject=["eventBus"];Vi.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ve(t,js,i),n&&ve(n,js,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};Vi.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ve(i.gfx,js,""),i.secondaryGfx&&ve(i.secondaryGfx,js,""),delete t[n])};Vi.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};Vi.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,ve(t,js,i),t};Vi.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ve(e,js);var n=this._elements[t];return n&&n.element};Vi.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};Vi.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],o=a.element,s=a.gfx;if(e(o,s))return o}};Vi.prototype.getAll=function(){return this.filter(function(e){return e})};Vi.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};Vi.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};Vi.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var Jw={exports:{}},Bd={};function p5(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var s=this.indexOf(a);if(typeof o>"u"){if(s!==-1)return;o=this.length}s!==-1&&this.splice(s,1),this.splice(o,0,a),s===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function d5(e){return e.__refs_collection===!0}Bd.extend=p5;Bd.isExtended=d5;var Qw=Bd;function f5(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function e1(e,t,n){var i=Qw.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function h5(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var o=r;r=null,o&&e.unset(o,i,n),r=a,e.set(r,i,n)}}})}function to(e,t){if(!(this instanceof to))return new to(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}to.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?e1(this,t,e):h5(this,t,e)};to.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Qw.isExtended(n)||e1(this,t,e),n};to.prototype.ensureBound=function(e,t){f5(e,t)||this.bind(e,t)};to.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};to.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var m5=to;(function(e){e.exports=m5,e.exports.Collection=Bd})(Jw);const il=PN(Jw.exports);var t1=new il({name:"children",enumerable:!0,collection:!0},{name:"parent"}),n1=new il({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),pb=new il({name:"attachers",collection:!0},{name:"host"}),i1=new il({name:"outgoing",collection:!0},{name:"source"}),r1=new il({name:"incoming",collection:!0},{name:"target"});function Vc(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),t1.bind(this,"parent"),n1.bind(this,"labels"),i1.bind(this,"outgoing"),r1.bind(this,"incoming")}function rl(){Vc.call(this),t1.bind(this,"children"),pb.bind(this,"host"),pb.bind(this,"attachers")}Ve.exports(rl,Vc);function a1(){rl.call(this)}Ve.exports(a1,rl);function Ld(){rl.call(this),n1.bind(this,"labelTarget")}Ve.exports(Ld,rl);function o1(){Vc.call(this),i1.bind(this,"source"),r1.bind(this,"target")}Ve.exports(o1,Vc);var v5={connection:o1,shape:rl,label:Ld,root:a1};function g5(e,t){var n=v5[e];if(!n)throw new Error("unknown type: <"+e+">");return Y(new n,t)}function Ea(){this._uid=12}Ea.prototype.createRoot=function(e){return this.create("root",e)};Ea.prototype.createLabel=function(e){return this.create("label",e)};Ea.prototype.createShape=function(e){return this.create("shape",e)};Ea.prototype.createConnection=function(e){return this.create("connection",e)};Ea.prototype.create=function(e,t){return t=Y({},t||{}),t.id||(t.id=e+"_"+this._uid++),g5(e,t)};var hd="__fn",s1=1e3,y5=Array.prototype.slice;function Ai(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Ai.prototype.on=function(e,t,n,i){if(e=yt(e)?e:[e],Qn(t)&&(i=n,n=t,t=s1),!rt(t))throw new Error("priority must be a number");var r=n;i&&(r=ai(n,i),r[hd]=n[hd]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:r,next:null})})};Ai.prototype.once=function(e,t,n,i){var r=this;if(Qn(t)&&(i=n,n=t,t=s1),!rt(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(i,arguments);return r.off(e,a),o}a[hd]=n,this.on(e,t,a)};Ai.prototype.off=function(e,t){e=yt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};Ai.prototype.createEvent=function(e){var t=new Uc;return t.init(e),t};Ai.prototype.fire=function(e,t){var n,i,r,a;if(a=y5.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Uc?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==o&&(n.type=o)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};Ai.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Ai.prototype._destroy=function(){this._listeners={}};Ai.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};Ai.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=_5(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};Ai.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};Ai.prototype._getListeners=function(e){return this._listeners[e]};Ai.prototype._setListeners=function(e,t){this._listeners[e]=t};Ai.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[hd]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Uc(){}Uc.prototype.stopPropagation=function(){this.cancelBubble=!0};Uc.prototype.preventDefault=function(){this.defaultPrevented=!0};Uc.prototype.init=function(e){Y(this,e||{})};function _5(e,t){return e.apply(null,t)}function md(e){return e.childNodes[0]}function x5(e){return e.parentNode.childNodes[1]}function ev(e,t,n,i,r){var a=pc();a.setTranslate(t,n);var o=pc();o.setRotate(i||0,0,0);var s=pc();s.setScale(r||1,r||1),Tc(e,[a,o,s])}function bi(e,t,n){var i=pc();i.setTranslate(t,n),Tc(e,i)}function l1(e,t){var n=pc();n.setRotate(t,0,0),Tc(e,n)}function Ui(e,t){this._eventBus=e,this._elementRegistry=t}Ui.$inject=["eventBus","elementRegistry"];Ui.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=x5(t),n||(n=Le("g"),mt(n).add("djs-children"),Ye(t.parentNode,n))):n=t,n};Ui.prototype._clear=function(e){var t=md(e);return Id(t),t};Ui.prototype._createContainer=function(e,t,n,i){var r=Le("g");mt(r).add("djs-group"),typeof n<"u"?c1(r,t,t.childNodes[n]):Ye(t,r);var a=Le("g");mt(a).add("djs-element"),mt(a).add("djs-"+e),i&&mt(a).add("djs-frame"),Ye(r,a);var o=Le("g");return mt(o).add("djs-visual"),Ye(a,o),a};Ui.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Vw(t))};Ui.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=ji(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),G(i,function(r){var a=r.children;if(!!a){var o=t._getChildrenContainer(r);G(a.slice().reverse(),function(s){var c=n.getGraphics(s);c1(c.parentNode,o)})}})};Ui.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})};Ui.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Ui.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})};Ui.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Ui.prototype.update=function(e,t,n){if(!!t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),bi(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?ve(n,"display","none"):ve(n,"display","block")}};Ui.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);dn(t.parentNode)};function c1(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const b5={__depends__:[VL],__init__:["canvas"],canvas:["type",ft],elementRegistry:["type",Vi],elementFactory:["type",Ea],eventBus:["type",Ai],graphicsFactory:["type",Ui]};function E5(e){var t=[],n=[];function i(s){return t.indexOf(s)>=0}function r(s){t.push(s)}function a(s){i(s)||((s.__depends__||[]).forEach(a),!i(s)&&(r(s),(s.__init__||[]).forEach(function(c){n.push(c)})))}e.forEach(a);var o=new Ym(t);return n.forEach(function(s){try{o[typeof s=="string"?"get":"invoke"](s)}catch(c){throw console.error("Failed to instantiate component"),console.error(c.stack),c}}),o}function w5(e){e=e||{};var t={config:["value",e]},n=[t,b5].concat(e.modules||[]);return E5(n)}function al(e,t){this.injector=t=t||w5(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}al.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};al.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Xv(){}Xv.prototype.get=function(e){return this.$model.properties.get(this,e)};Xv.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function u1(e,t){this.model=e,this.properties=t}u1.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Xv.prototype);G(e.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(o){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),G(o,ai(function(s,c){this.set(c,s)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var S5={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},p1={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Zv(e,t){var n=p1[e];return n?n(t):t}function tv(e){return!!S5[e]}function d1(e){return!!p1[e]}function ri(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function rr(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}rr.prototype.build=function(){return xr(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};rr.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};rr.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(s===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,o),a[i.name]=a[i.localName]=t};rr.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=ri(r[0],i),o=ri(r[1],a.prefix).name,s=this.propertiesByName[o];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};rr.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};rr.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};rr.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};rr.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};rr.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};rr.prototype.hasProperty=function(e){return this.propertiesByName[e]};rr.prototype.addTrait=function(e,t){var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(G(e.properties,ai(function(a){a=Y({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,s=a.redefines;o||s?this.redefineProperty(a,o||s,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function oo(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,G(e,ai(this.registerPackage,this))}oo.prototype.getPackage=function(e){return this.packageMap[e]};oo.prototype.getPackages=function(){return this.packages};oo.prototype.registerPackage=function(e){e=Y({},e);var t=this.packageMap;db(t,e,"prefix"),db(t,e,"uri"),G(e.types,ai(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};oo.prototype.registerType=function(e,t){e=Y({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:Y(e.meta||{})});var n=ri(e.name,t.prefix),i=n.name,r={};G(e.properties,ai(function(a){var o=ri(a.name,n.prefix),s=o.name;tv(a.type)||(a.type=ri(a.type,o.prefix).name),Y(a,{ns:o,name:s}),r[s]=a},this)),Y(e,{ns:n,name:i,propertiesByName:r}),G(e.extends,ai(function(a){var o=this.typeMap[a];o.traits=o.traits||[],o.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};oo.prototype.mapTypes=function(e,t,n){var i=tv(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(s){return o(s,!0)}function o(s,c){var u=ri(s,tv(s)?"":e.prefix);r.mapTypes(u,t,c)}if(!i)throw new Error("unknown type <"+e.name+">");G(i.superClass,n?a:o),t(i,!n),G(i.traits,a)};oo.prototype.getEffectiveDescriptor=function(e){var t=ri(e),n=new rr(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};oo.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function db(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function ol(e){this.model=e}ol.prototype.set=function(e,t,n){if(!Hi(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;C5(n)?i?delete e[r]:delete e.$attrs[t]:i?r in e?e[r]=n:f1(e,i,n):e.$attrs[t]=n};ol.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&f1(e,n,[]),e[i]};ol.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=Y({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};ol.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};ol.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};function C5(e){return typeof e>"u"}function f1(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function ar(e){this.properties=new ol(this),this.factory=new u1(this,this.properties),this.registry=new oo(e,this.properties),this.typeCache={}}ar.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};ar.prototype.getType=function(e){var t=this.typeCache,n=Hi(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};ar.prototype.createAny=function(e,t,n){var i=ri(e),r={$type:e,$instanceOf:function(o){return o===this.$type}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),G(n,function(o,s){kn(o)&&o.value!==void 0?r[o.name]=o.value:r[s]=o}),r};ar.prototype.getPackage=function(e){return this.registry.getPackage(e)};ar.prototype.getPackages=function(){return this.registry.getPackages()};ar.prototype.getElementDescriptor=function(e){return e.$descriptor};ar.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};ar.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};ar.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var fb=String.fromCharCode,T5=Object.prototype.hasOwnProperty,P5=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,fc={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(fc).forEach(function(e){fc[e.toUpperCase()]=fc[e]});function A5(e,t,n,i){return i?T5.call(fc,i)?fc[i]:"&"+i+";":fb(t||parseInt(n,16))}function Oo(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(P5,A5):e}var R5="http://www.w3.org/2001/XMLSchema-instance",M5="xsi",hb="xsi:type",mb="non-whitespace outside of root node";function Ps(e){return new Error(e)}function vb(e){return"missing namespace for prefix <"+e+">"}function mp(e){return{get:e,enumerable:!0}}function D5(e){var t={},n;for(n in e)t[n]=e[n];return t}function nv(e){return e+"$uri"}function O5(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[nv(i)]=n;return t}function gb(){return{line:0,column:0}}function I5(e){throw e}function h1(e){if(!this)return new h1(e);var t=e&&e.proxy,n,i,r,a,o=I5,s,c,u,d,f=gb,m=!1,v=!1,g=null,y=!1,E;function N(w){w instanceof Error||(w=Ps(w)),g=w,o(w,f)}function O(w){!s||(w instanceof Error||(w=Ps(w)),s(w,f))}this.on=function(w,R){if(typeof R!="function")throw Ps("required args <name, cb>");switch(w){case"openTag":i=R;break;case"text":n=R;break;case"closeTag":r=R;break;case"error":o=R;break;case"warn":s=R;break;case"cdata":a=R;break;case"attention":d=R;break;case"question":u=R;break;case"comment":c=R;break;default:throw Ps("unsupported event: "+w)}return this},this.ns=function(w){if(typeof w>"u"&&(w={}),typeof w!="object")throw Ps("required args <nsMap={}>");var R={},L;for(L in w)R[L]=w[L];return R[R5]=M5,v=!0,E=R,this},this.parse=function(w){if(typeof w!="string")throw Ps("required args <xml=string>");return g=null,T(w),f=gb,y=!1,g},this.stop=function(){y=!0};function T(w){var R=v?[]:null,L=v?O5(E):null,H,$=[],W=0,Q=!1,pe=!1,oe=0,be=0,ke,Yt,re,ce,B,b,z,K,se,Z="",ee=0,me;function qe(){if(me!==null)return me;var St,tt,ut,Xt=v&&L.xmlns,Ht=v&&m?[]:null,wt=ee,ot=Z,nn=ot.length,gn,Ae,Bt,Mt,Me,Tt={},Dn={},ln,Be,de;e:for(;wt<nn;wt++)if(ln=!1,Be=ot.charCodeAt(wt),!(Be===32||Be<14&&Be>8)){for((Be<65||Be>122||Be>90&&Be<97)&&Be!==95&&Be!==58&&(O("illegal first char attribute name"),ln=!0),de=wt+1;de<nn;de++)if(Be=ot.charCodeAt(de),!(Be>96&&Be<123||Be>64&&Be<91||Be>47&&Be<59||Be===46||Be===45||Be===95)){if(Be===32||Be<14&&Be>8){O("missing attribute value"),wt=de;continue e}if(Be===61)break;O("illegal attribute name char"),ln=!0}if(Me=ot.substring(wt,de),Me==="xmlns:xmlns"&&(O("illegal declaration of xmlns"),ln=!0),Be=ot.charCodeAt(de+1),Be===34)de=ot.indexOf('"',wt=de+2),de===-1&&(de=ot.indexOf("'",wt),de!==-1&&(O("attribute value quote missmatch"),ln=!0));else if(Be===39)de=ot.indexOf("'",wt=de+2),de===-1&&(de=ot.indexOf('"',wt),de!==-1&&(O("attribute value quote missmatch"),ln=!0));else for(O("missing attribute value quotes"),ln=!0,de=de+1;de<nn&&(Be=ot.charCodeAt(de+1),!(Be===32||Be<14&&Be>8));de++);for(de===-1&&(O("missing closing quotes"),de=nn,ln=!0),ln||(Bt=ot.substring(wt,de)),wt=de;de+1<nn&&(Be=ot.charCodeAt(de+1),!(Be===32||Be<14&&Be>8));de++)wt===de&&(O("illegal character after attribute end"),ln=!0);if(wt=de+1,ln)continue e;if(Me in Dn){O("attribute <"+Me+"> already defined");continue}if(Dn[Me]=!0,!v){Tt[Me]=Bt;continue}if(m){if(Ae=Me==="xmlns"?"xmlns":Me.charCodeAt(0)===120&&Me.substr(0,6)==="xmlns:"?Me.substr(6):null,Ae!==null){if(St=Oo(Bt),tt=nv(Ae),Mt=E[St],!Mt){if(Ae==="xmlns"||tt in L&&L[tt]!==St)do Mt="ns"+W++;while(typeof L[Mt]<"u");else Mt=Ae;E[St]=Mt}L[Ae]!==Mt&&(gn||(L=D5(L),gn=!0),L[Ae]=Mt,Ae==="xmlns"&&(L[nv(Mt)]=St,Xt=Mt),L[tt]=St),Tt[Me]=Bt;continue}Ht.push(Me,Bt);continue}if(Be=Me.indexOf(":"),Be===-1){Tt[Me]=Bt;continue}if(!(ut=L[Me.substring(0,Be)])){O(vb(Me.substring(0,Be)));continue}Me=Xt===ut?Me.substr(Be+1):ut+Me.substr(Be),Me===hb&&(Be=Bt.indexOf(":"),Be!==-1?(ut=Bt.substring(0,Be),ut=L[ut]||ut,Bt=ut+Bt.substring(Be)):Bt=Xt+":"+Bt),Tt[Me]=Bt}if(m)for(wt=0,nn=Ht.length;wt<nn;wt++){if(Me=Ht[wt++],Bt=Ht[wt],Be=Me.indexOf(":"),Be!==-1){if(!(ut=L[Me.substring(0,Be)])){O(vb(Me.substring(0,Be)));continue}Me=Xt===ut?Me.substr(Be+1):ut+Me.substr(Be),Me===hb&&(Be=Bt.indexOf(":"),Be!==-1?(ut=Bt.substring(0,Be),ut=L[ut]||ut,Bt=ut+Bt.substring(Be)):Bt=Xt+":"+Bt)}Tt[Me]=Bt}return me=Tt}function Je(){for(var St=/(\r\n|\r|\n)/g,tt=0,ut=0,Xt=0,Ht=be,wt,ot;oe>=Xt&&(wt=St.exec(w),!(!wt||(Ht=wt[0].length+wt.index,Ht>oe)));)tt+=1,Xt=Ht;return oe==-1?(ut=Ht,ot=w.substring(be)):be===0?ot=w.substring(be,oe):(ut=oe-Xt,ot=be==-1?w.substring(oe):w.substring(oe,be+1)),{data:ot,line:tt,column:ut}}for(f=Je,t&&(se=Object.create({},{name:mp(function(){return z}),originalName:mp(function(){return K}),attrs:mp(qe),ns:mp(function(){return L})}));be!==-1;){if(w.charCodeAt(be)===60?oe=be:oe=w.indexOf("<",be),oe===-1){if($.length)return N("unexpected end of file");if(be===0)return N("missing start tag");be<w.length&&w.substring(be).trim()&&O(mb);return}if(be!==oe){if($.length){if(n&&(n(w.substring(be,oe),Oo,f),y))return}else if(w.substring(be,oe).trim()&&(O(mb),y))return}if(ce=w.charCodeAt(oe+1),ce===33){if(re=w.charCodeAt(oe+2),re===91&&w.substr(oe+3,6)==="CDATA["){if(be=w.indexOf("]]>",oe),be===-1)return N("unclosed cdata");if(a&&(a(w.substring(oe+9,be),f),y))return;be+=3;continue}if(re===45&&w.charCodeAt(oe+3)===45){if(be=w.indexOf("-->",oe),be===-1)return N("unclosed comment");if(c&&(c(w.substring(oe+4,be),Oo,f),y))return;be+=3;continue}}if(ce===63){if(be=w.indexOf("?>",oe),be===-1)return N("unclosed question");if(u&&(u(w.substring(oe,be+2),f),y))return;be+=2;continue}for(ke=oe+1;;ke++){if(B=w.charCodeAt(ke),isNaN(B))return be=-1,N("unclosed tag");if(B===34)re=w.indexOf('"',ke+1),ke=re!==-1?re:ke;else if(B===39)re=w.indexOf("'",ke+1),ke=re!==-1?re:ke;else if(B===62){be=ke;break}}if(ce===33){if(d&&(d(w.substring(oe,be+1),Oo,f),y))return;be+=1;continue}if(me={},ce===47){if(Q=!1,pe=!0,!$.length)return N("missing open tag");if(ke=z=$.pop(),re=oe+2+ke.length,w.substring(oe+2,re)!==ke)return N("closing tag mismatch");for(;re<be;re++)if(ce=w.charCodeAt(re),!(ce===32||ce>8&&ce<14))return N("close tag")}else{if(w.charCodeAt(be-1)===47?(ke=z=w.substring(oe+1,be-1),Q=!0,pe=!0):(ke=z=w.substring(oe+1,be),Q=!0,pe=!1),!(ce>96&&ce<123||ce>64&&ce<91||ce===95||ce===58))return N("illegal first char nodeName");for(re=1,Yt=ke.length;re<Yt;re++)if(ce=ke.charCodeAt(re),!(ce>96&&ce<123||ce>64&&ce<91||ce>47&&ce<59||ce===45||ce===95||ce==46)){if(ce===32||ce<14&&ce>8){z=ke.substring(0,re),me=null;break}return N("invalid nodeName")}pe||$.push(z)}if(v){if(H=L,Q&&(pe||R.push(H),me===null&&(m=ke.indexOf("xmlns",re)!==-1)&&(ee=re,Z=ke,qe(),m=!1)),K=z,ce=z.indexOf(":"),ce!==-1){if(b=L[z.substring(0,ce)],!b)return N("missing namespace on <"+K+">");z=z.substr(ce+1)}else b=L.xmlns;b&&(z=b+":"+z)}if(Q&&(ee=re,Z=ke,i&&(t?i(se,Oo,pe,f):i(z,qe,Oo,pe,f),y)))return;if(pe){if(r&&(r(t?se:z,Oo,Q,f),y))return;v&&(Q?L=H:L=R.pop())}be+=1}}}function m1(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var N5={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},$d="xsi:type";function v1(e){return e.xml&&e.xml.serialize}function g1(e){return v1(e)===$d}function k5(e){return v1(e)==="property"}function B5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y1(e,t){return m1(t)?e.prefix+":"+B5(e.localName):e.name}function L5(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function $5(e,t){var n=ri(e),i=t.getPackage(n.prefix);return L5(n,i)}function no(e){return new Error(e)}function ya(e){return e.$descriptor}function z5(e){Y(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw no("expected element");var n=this.elementsById,i=ya(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw no("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Wc(){}Wc.prototype.handleEnd=function(){};Wc.prototype.handleText=function(){};Wc.prototype.handleNode=function(){};function Jv(){}Jv.prototype=Object.create(Wc.prototype);Jv.prototype.handleNode=function(){return this};function sl(){}sl.prototype=Object.create(Wc.prototype);sl.prototype.handleText=function(e){this.body=(this.body||"")+e};function Gc(e,t){this.property=e,this.context=t}Gc.prototype=Object.create(sl.prototype);Gc.prototype.handleNode=function(e){if(this.element)throw no("expected no sub nodes");return this.element=this.createReference(e),this};Gc.prototype.handleEnd=function(){this.element.id=this.body};Gc.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Qv(e,t){this.element=t,this.propertyDesc=e}Qv.prototype=Object.create(sl.prototype);Qv.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Zv(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function zd(){}zd.prototype=Object.create(sl.prototype);zd.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function ei(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}ei.prototype=Object.create(zd.prototype);ei.prototype.addReference=function(e){this.context.addReference(e)};ei.prototype.handleText=function(e){var t=this.element,n=ya(t),i=n.bodyProperty;if(!i)throw no("unexpected body text <"+e+">");sl.prototype.handleText.call(this,e)};ei.prototype.handleEnd=function(){var e=this.body,t=this.element,n=ya(t),i=n.bodyProperty;i&&e!==void 0&&(e=Zv(i.type,e),t.set(i.name,e))};ei.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=ya(n),r=this.context,a=new n({}),o=this.model,s;return G(t,function(c,u){var d=i.propertiesByName[u],f;d&&d.isReference?d.isMany?(f=c.split(" "),G(f,function(m){r.addReference({element:a,property:d.ns.name,id:m})})):r.addReference({element:a,property:d.ns.name,id:c}):(d?c=Zv(d.type,c):u!=="xmlns"&&(s=ri(u,i.ns.prefix),o.getPackage(s.prefix)&&r.addWarning({message:"unknown attribute <"+u+">",element:a,property:u,value:c})),a.set(u,c))}),a};ei.prototype.getPropertyForNode=function(e){var t=e.name,n=ri(t),i=this.type,r=this.model,a=ya(i),o=n.name,s=a.propertiesByName[o],c,u;if(s&&!s.isAttr)return g1(s)&&(c=e.attributes[$d],c)?(c=$5(c,r),u=r.getType(c),Y({},s,{effectiveType:ya(u).name})):s;var d=r.getPackage(n.prefix);if(d){if(c=y1(n,d),u=r.getType(c),s=Dt(a.properties,function(f){return!f.isVirtual&&!f.isReference&&!f.isAttribute&&u.hasType(f.type)}),s)return Y({},s,{effectiveType:ya(u).name})}else if(s=Dt(a.properties,function(f){return!f.isReference&&!f.isAttribute&&f.type==="Element"}),s)return s;throw no("unrecognized element <"+n.name+">")};ei.prototype.toString=function(){return"ElementDescriptor["+ya(this.type).name+"]"};ei.prototype.valueHandler=function(e,t){return new Qv(e,t)};ei.prototype.referenceHandler=function(e){return new Gc(e,this.context)};ei.prototype.handler=function(e){return e==="Element"?new Vs(this.model,e,this.context):new ei(this.model,e,this.context)};ei.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,d1(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(Y(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function eg(e,t,n){ei.call(this,e,t,n)}eg.prototype=Object.create(ei.prototype);eg.prototype.createElement=function(e){var t=e.name,n=ri(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),o=a&&y1(n,a)||t;if(!r.hasType(o))throw no("unexpected element <"+e.originalName+">");return ei.prototype.createElement.call(this,e)};function Vs(e,t,n){this.model=e,this.context=n}Vs.prototype=Object.create(zd.prototype);Vs.prototype.createElement=function(e){var t=e.name,n=ri(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};Vs.prototype.handleChild=function(e){var t=new Vs(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};Vs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function tg(e){e instanceof ar&&(e={model:e}),Y(this,{lax:!1},e)}tg.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof ei?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,o=new z5(Y({},t,{rootHandler:i})),s=new h1({proxy:!0}),c=F5();i.context=o,c.push(i);function u(R,L,H){var $=L(),W=$.line,Q=$.column,pe=$.data;pe.charAt(0)==="<"&&pe.indexOf(" ")!==-1&&(pe=pe.slice(0,pe.indexOf(" "))+">");var oe="unparsable content "+(pe?pe+" ":"")+`detected
	line: `+W+`
	column: `+Q+`
	nested error: `+R.message;if(H)return o.addWarning({message:oe,error:R}),!0;throw no(oe)}function d(R,L){return u(R,L,!0)}function f(){var R=o.elementsById,L=o.references,H,$;for(H=0;$=L[H];H++){var W=$.element,Q=R[$.id],pe=ya(W).propertiesByName[$.property];if(Q||o.addWarning({message:"unresolved reference <"+$.id+">",element:$.element,property:$.property,value:$.id}),pe.isMany){var oe=W.get(pe.name),be=oe.indexOf($);be===-1&&(be=oe.length),Q?oe[be]=Q:oe.splice(be,1)}else W.set(pe.name,Q)}}function m(){c.pop().handleEnd()}var v=/^<\?xml /i,g=/ encoding="([^"]+)"/i,y=/^utf-8$/i;function E(R){if(!!v.test(R)){var L=g.exec(R),H=L&&L[1];!H||y.test(H)||o.addWarning({message:"unsupported document encoding <"+H+">, falling back to UTF-8"})}}function N(R,L){var H=c.peek();try{c.push(H.handleNode(R))}catch($){u($,L,a)&&c.push(new Jv)}}function O(R,L){try{c.peek().handleText(R)}catch(H){d(H,L)}}function T(R,L){!R.trim()||O(R,L)}var w=r.getPackages().reduce(function(R,L){return R[L.uri]=L.prefix,R},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(w).on("openTag",function(R,L,H,$){var W=R.attrs||{},Q=Object.keys(W).reduce(function(oe,be){var ke=L(W[be]);return oe[be]=ke,oe},{}),pe={name:R.name,originalName:R.originalName,attributes:Q,ns:R.ns};N(pe,$)}).on("question",E).on("closeTag",m).on("cdata",O).on("text",function(R,L,H){T(L(R),H)}).on("error",u).on("warn",d),new Promise(function(R,L){var H;try{s.parse(e),f()}catch(oe){H=oe}var $=i.element;!H&&!$&&(H=no("failed to parse document as <"+i.type.$descriptor.name+">"));var W=o.warnings,Q=o.references,pe=o.elementsById;return H?(H.warnings=W,L(H)):R({rootElement:$,elementsById:pe,references:Q,warnings:W})})};tg.prototype.handler=function(e){return new eg(this.model,e)};function F5(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var H5=`<?xml version="1.0" encoding="UTF-8"?>
`,j5=/<|>|'|"|&|\n\r|\n/g,_1=/<|>|&/g;function V5(e){var t={},n={},i={},r=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,s){n[o.uri]=o,s?r.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,s){t[o||"xmlns"]=s},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var s=o.uri,c=this.getNSKey(o);i[c]=this.byUri(s),e&&e.logUsed(o)},this.getUsed=function(o){function s(d){var f=c.getNSKey(d);return i[f]}var c=this,u=[].concat(r,a);return u.filter(s)}}function U5(e){return e.charAt(0).toLowerCase()+e.slice(1)}function W5(e,t){return m1(t)?U5(e):e}function x1(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function b1(e){return Hi(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function G5(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function q5(e,t){return t.isGeneric?Y({localName:t.ns.localName},e):Y({localName:W5(t.ns.localName,t.$pkg)},e)}function K5(e,t){return Y({localName:t.ns.localName},e)}function Y5(e){var t=e.$descriptor;return st(t.properties,function(n){var i=n.name;if(n.isVirtual||!va(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var X5={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Z5={"<":"lt",">":"gt","&":"amp"};function E1(e,t,n){return e=Hi(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function J5(e){return E1(e,j5,X5)}function Q5(e){return E1(e,_1,Z5)}function e$(e){return st(e,function(t){return t.isAttr})}function t$(e){return st(e,function(t){return!t.isAttr})}function ng(e){this.tagName=e}ng.prototype.build=function(e){return this.element=e,this};ng.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Vo(){}Vo.prototype.serializeValue=Vo.prototype.serializeTo=function(e){e.append(this.escape?Q5(this.value):this.value)};Vo.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(_1)!==-1&&(this.escape=!0),this};function ig(e){this.tagName=e}x1(ig,Vo);ig.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Jt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Jt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=Y5(e),this.parseAttributes(e$(r)),this.parseContainments(t$(r))),this.parseGenericAttributes(e,i),this};Jt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return q5(t,e)};Jt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return K5(t,e)};Jt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Jt.prototype.nsAttributeName=function(e){var t;if(Hi(e)?t=ri(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:Y({localName:t.localName},n)};Jt.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return G(e,function(r,a){var o;a==="$body"?n.push(new Vo().build({type:"String"},r)):a==="$children"?G(r,function(s){n.push(new Jt(t).build(s))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,r),o&&i.push({name:a,value:r}))}),i};Jt.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=ri(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};Jt.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return G(i,function(a,o){var s=n.parseNsAttribute(e,o,a);s&&r.push(s)}),r};Jt.prototype.parseGenericAttributes=function(e,t){var n=this;G(t,function(i){if(i.name!==$d)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Jt.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;G(e,function(r){var a=i.get(r.name),o=r.isReference,s=r.isMany;if(s||(a=[a]),r.isBody)n.push(new Vo().build(r,a[0]));else if(d1(r.type))G(a,function(d){n.push(new ig(t.addTagName(t.nsPropertyTagName(r))).build(r,d))});else if(o)G(a,function(d){n.push(new ng(t.addTagName(t.nsPropertyTagName(r))).build(d))});else{var c=g1(r),u=k5(r);G(a,function(d){var f;c?f=new Fd(t,r):u?f=new Jt(t,r):f=new Jt(t),n.push(f.build(d))})}})};Jt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new V5(i):t=i),t};Jt.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,o=i.byUri(r);return(!o||n)&&i.add(e,t),i.mapPrefix(a,r),e};Jt.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,o=e.uri,s,c,u;if(!a&&!o)return{localName:e.localName};if(u=N5[a]||i&&(i.getPackage(a)||{}).uri,o=o||u||r.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(o),!e){for(s=a,c=1;r.uriByPrefix(s);)s=a+"_"+c++;e=this.logNamespace({prefix:s,uri:o},u===o)}return a&&r.mapPrefix(a,o),e};Jt.prototype.parseAttributes=function(e){var t=this,n=this.element;G(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];G(r,function(o){a.push(o.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Jt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),b1(e)};Jt.prototype.addAttribute=function(e,t){var n=this.attrs;Hi(t)&&(t=J5(t));var i=Pw(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Jt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=G5(n).concat(t)),G(t,function(i){e.append(" ").append(b1(i.name)).append('="').append(i.value).append('"')})};Jt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Vo;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),G(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Fd(e,t){Jt.call(this,e,t)}x1(Fd,Jt);Fd.prototype.parseNsAttributes=function(e){var t=Jt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName($d),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};Fd.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function n$(){this.value="",this.write=function(e){this.value+=e}}function i$(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function r$(e){e=Y({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new n$,a=new i$(r,e.format);if(e.preamble&&a.append(H5),new Jt().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function Hd(e,t){ar.call(this,e,t)}Hd.prototype=Object.create(ar.prototype);Hd.prototype.fromXML=function(e,t,n){Hi(t)||(n=t,t="bpmn:Definitions");var i=new tg(Y({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Hd.prototype.toXML=function(e,t){var n=new r$(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(o){return r(o)}})};var a$="BPMN20",o$="http://www.omg.org/spec/BPMN/20100524/MODEL",s$="bpmn",l$=[],c$=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],u$=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],p$={tagAlias:"lowerCase",typePrefix:"t"},d$={name:a$,uri:o$,prefix:s$,associations:l$,types:c$,enumerations:u$,xml:p$},f$="BPMNDI",h$="http://www.omg.org/spec/BPMN/20100524/DI",m$="bpmndi",v$=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],g$=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],y$=[],_$={name:f$,uri:h$,prefix:m$,types:v$,enumerations:g$,associations:y$},x$="DC",b$="http://www.omg.org/spec/DD/20100524/DC",E$="dc",w$=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],S$=[],C$={name:x$,uri:b$,prefix:E$,types:w$,associations:S$},T$="DI",P$="http://www.omg.org/spec/DD/20100524/DI",A$="di",R$=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],M$=[],D$={tagAlias:"lowerCase"},O$={name:T$,uri:P$,prefix:A$,types:R$,associations:M$,xml:D$},I$="bpmn.io colors for BPMN",N$="http://bpmn.io/schema/bpmn/biocolor/1.0",k$="bioc",B$=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],L$=[],$$=[],z$={name:I$,uri:N$,prefix:k$,types:B$,enumerations:L$,associations:$$},F$="BPMN in Color",H$="http://www.omg.org/spec/BPMN/non-normative/color/1.0",j$="color",V$=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],U$=[],W$=[],G$={name:F$,uri:H$,prefix:j$,types:V$,enumerations:U$,associations:W$},q$={bpmn:d$,bpmndi:_$,dc:C$,di:O$,bioc:z$,color:G$};function K$(e,t){var n=Y({},q$,e);return new Hd(n,t)}function jn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var Y$=new il({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function yi(e,t){return e.$instanceOf(t)}function X$(e){return Dt(e.rootElements,function(t){return yi(t,"bpmn:Process")||yi(t,"bpmn:Collaboration")})}function Z$(e,t){var n={},i=[];function r(Z,ee){return function(me){Z(me,ee)}}function a(Z){n[Z.id]=Z}function o(Z){return n[Z.id]}function s(Z,ee){var me=Z.gfx;if(me)throw new Error(t("already rendered {element}",{element:jn(Z)}));return e.element(Z,ee)}function c(Z,ee){return e.root(Z,ee)}function u(Z,ee){try{var me=Z.di&&s(Z,ee);return a(Z),me}catch(qe){d(qe.message,{element:Z,error:qe}),console.error(t("failed to import {element}",{element:jn(Z)})),console.error(qe)}}function d(Z,ee){e.error(Z,ee)}function f(Z){var ee=Z.bpmnElement;ee?ee.di?d(t("multiple DI elements defined for {element}",{element:jn(ee)}),{element:ee}):(Y$.bind(ee,"di"),ee.di=Z):d(t("no bpmnElement referenced in {element}",{element:jn(Z)}),{element:Z})}function m(Z){v(Z.plane)}function v(Z){f(Z),G(Z.planeElement,g)}function g(Z){f(Z)}function y(Z,ee){var me=Z.diagrams;if(ee&&me.indexOf(ee)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!ee&&me&&me.length&&(ee=me[0]),!ee)throw new Error(t("no diagram to display"));m(ee);var qe=ee.plane;if(!qe)throw new Error(t("no plane for {element}",{element:jn(ee)}));var Je=qe.bpmnElement;if(!Je)if(Je=X$(Z),Je)d(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:jn(qe),rootElement:jn(Je)})),qe.bpmnElement=Je,f(qe);else throw new Error(t("no process or collaboration to display"));var St=c(Je,qe);if(yi(Je,"bpmn:Process"))N(Je,St);else if(yi(Je,"bpmn:Collaboration"))K(Je),O(Z.rootElements,St);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:jn(qe),rootElement:jn(Je)}));E()}function E(){for(var Z;i.length;)Z=i.shift(),Z()}function N(Z,ee){B(Z,ee),Q(Z.ioSpecification,ee),W(Z.artifacts,ee),a(Z)}function O(Z,ee){var me=st(Z,function(qe){return!o(qe)&&yi(qe,"bpmn:Process")&&qe.laneSets});me.forEach(r(N,ee))}function T(Z,ee){u(Z,ee)}function w(Z,ee){G(Z,r(T,ee))}function R(Z,ee){u(Z,ee)}function L(Z,ee){u(Z,ee)}function H(Z,ee){u(Z,ee)}function $(Z,ee){u(Z,ee)}function W(Z,ee){G(Z,function(me){yi(me,"bpmn:Association")?i.push(function(){$(me,ee)}):$(me,ee)})}function Q(Z,ee){!Z||(G(Z.dataInputs,r(L,ee)),G(Z.dataOutputs,r(H,ee)))}function pe(Z,ee){B(Z,ee),W(Z.artifacts,ee)}function oe(Z,ee){var me=u(Z,ee);yi(Z,"bpmn:SubProcess")&&pe(Z,me||ee),yi(Z,"bpmn:Activity")&&Q(Z.ioSpecification,ee),i.push(function(){G(Z.dataInputAssociations,r(R,ee)),G(Z.dataOutputAssociations,r(R,ee))})}function be(Z,ee){u(Z,ee)}function ke(Z,ee){u(Z,ee)}function Yt(Z,ee){i.push(function(){var me=u(Z,ee);Z.childLaneSet&&re(Z.childLaneSet,me||ee),se(Z)})}function re(Z,ee){G(Z.lanes,r(Yt,ee))}function ce(Z,ee){G(Z,r(re,ee))}function B(Z,ee){b(Z.flowElements,ee),Z.laneSets&&ce(Z.laneSets,ee)}function b(Z,ee){G(Z,function(me){yi(me,"bpmn:SequenceFlow")?i.push(function(){be(me,ee)}):yi(me,"bpmn:BoundaryEvent")?i.unshift(function(){oe(me,ee)}):yi(me,"bpmn:FlowNode")?oe(me,ee):yi(me,"bpmn:DataObject")||(yi(me,"bpmn:DataStoreReference")||yi(me,"bpmn:DataObjectReference")?ke(me,ee):d(t("unrecognized flowElement {element} in context {context}",{element:jn(me),context:ee?jn(ee.businessObject):"null"}),{element:me,context:ee}))})}function z(Z,ee){var me=u(Z,ee),qe=Z.processRef;qe&&N(qe,me||ee)}function K(Z){G(Z.participants,r(z)),W(Z.artifacts),i.push(function(){w(Z.messageFlows)})}function se(Z){G(Z.flowNodeRef,function(ee){var me=ee.get("lanes");me&&me.push(Z)})}return{handleDeferred:E,handleDefinitions:y,handleSubProcess:pe,registerDi:f}}function J$(e,t,n){var i,r,a,o,s=[];function c(u,d){var f={root:function(v){return i.add(v)},element:function(v,g){return i.add(v,g)},error:function(v,g){s.push({message:v,context:g})}},m=new Z$(f,a);m.handleDefinitions(u,d)}return new Promise(function(u,d){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("translate"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:o,warnings:s}),u({warnings:s})}catch(f){return f.warnings=s,d(f)}})}function ll(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(t>=1&&Qn(arguments[t-1])){var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);e.apply(this,i).then(function(r){var a=Object.keys(r)[0];return n(null,r[a])},function(r){return n(r,r.warnings)})}else return e.apply(this,arguments)}}var Q$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',w1=Q$;function jd(e){return e.join(";")}var S1=jd(["color: #404040"]),ez=jd(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),tz=jd(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"]),nz=jd(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"]),iz='<div class="bjs-powered-by-lightbox" style="'+ez+'"><div class="backdrop" style="'+tz+'"></div><div class="notice" style="'+nz+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+S1+'">'+w1+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Jl;function rz(){Jl||(Jl=Vt(iz),$i.bind(Jl,".backdrop","click",function(e){document.body.removeChild(Jl)})),document.body.appendChild(Jl)}function Qt(e){e=Y({},oz,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),lz(this._container),this._init(this._container,this._moddle,e)}Ve.exports(Qt,al);Qt.prototype.importXML=ll(function(t,n){var i=this;function r(a){var o=i.get("eventBus").createEvent(a);return Object.defineProperty(o,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:a.warnings,references:a.references,elementsById:a.elementsById}}}),o}return new Promise(function(a,o){t=i._emit("import.parse.start",{xml:t})||t,i._moddle.fromXML(t,"bpmn:Definitions").then(function(s){var c=s.rootElement,u=s.references,d=s.warnings,f=s.elementsById;c=i._emit("import.parse.complete",r({error:null,definitions:c,elementsById:f,references:u,warnings:d}))||c,i.importDefinitions(c,n).then(function(m){var v=[].concat(d,m.warnings||[]);return i._emit("import.done",{error:null,warnings:v}),a({warnings:v})}).catch(function(m){var v=[].concat(d,m.warnings||[]);return i._emit("import.done",{error:m,warnings:v}),o(qp(m,v))})}).catch(function(s){return i._emit("import.parse.complete",{error:s}),s=az(s),i._emit("import.done",{error:s,warnings:s.warnings}),o(s)})})});Qt.prototype.importDefinitions=ll(function(t,n){var i=this;return new Promise(function(r,a){i._setDefinitions(t),i.open(n).then(function(o){var s=o.warnings;return r({warnings:s})}).catch(function(o){return a(o)})})});Qt.prototype.open=ll(function(t){var n=this._definitions,i=t,r=this;return new Promise(function(a,o){if(!n){var s=new Error("no XML imported");return o(qp(s,[]))}if(typeof t=="string"&&(i=sz(n,t),!i)){var c=new Error("BPMNDiagram <"+t+"> not found");return o(qp(c,[]))}try{r.clear()}catch(u){return o(qp(u,[]))}J$(r,n,i).then(function(u){var d=u.warnings;return a({warnings:d})}).catch(function(u){return o(u)})})});Qt.prototype.saveXML=ll(function(t){t=t||{};var n=this,i=this._definitions;return new Promise(function(r){if(!i)return r({error:new Error("no definitions loaded")});i=n._emit("saveXML.start",{definitions:i})||i,n._moddle.toXML(i,t).then(function(a){var o=a.xml;return o=n._emit("saveXML.serialized",{xml:o})||o,r({xml:o})})}).catch(function(r){return{error:r}}).then(function(r){n._emit("saveXML.done",r);var a=r.error;return a?Promise.reject(a):r})});Qt.prototype.saveSVG=ll(function(t){var n=this;return new Promise(function(i,r){n._emit("saveSVG.start");var a,o;try{var s=n.get("canvas"),c=s.getDefaultLayer(),u=Ft("defs",s._svg),d=Jx(c),f=u?"<defs>"+Jx(u)+"</defs>":"",m=c.getBBox();a=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+m.width+'" height="'+m.height+'" viewBox="'+m.x+" "+m.y+" "+m.width+" "+m.height+'" version="1.1">'+f+d+"</svg>"}catch(v){o=v}return n._emit("saveSVG.done",{error:o,svg:a}),o?r(o):i({svg:a})})});Qt.prototype._setDefinitions=function(e){this._definitions=e};Qt.prototype.getModules=function(){return this._modules};Qt.prototype.clear=function(){!this.getDefinitions()||(this.get("elementRegistry").forEach(function(e){var t=e.businessObject;t&&t.di&&delete t.di}),al.prototype.clear.call(this))};Qt.prototype.destroy=function(){al.prototype.destroy.call(this),Wr(this._container)};Qt.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Qt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Qt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Ft(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Qt.prototype.getDefinitions=function(){return this._definitions};Qt.prototype.detach=function(){var e=this._container,t=e.parentNode;!t||(this._emit("detach",{}),t.removeChild(e))};Qt.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,i,r),s=Y(ro(n,["additionalModules"]),{canvas:Y({},n.canvas,{container:e}),modules:o});al.call(this,s),n&&n.container&&this.attachTo(n.container)};Qt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Qt.prototype._createContainer=function(e){var t=Vt('<div class="bjs-container"></div>');return Y(t.style,{width:yb(e.width),height:yb(e.height),position:e.position}),t};Qt.prototype._createModdle=function(e){var t=Y({},this._moddleExtensions,e.moddleExtensions);return new K$(t)};Qt.prototype._modules=[];function qp(e,t){return e.warnings=t,e}function az(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}var oz={width:"100%",height:"100%",position:"relative"};function yb(e){return e+(rt(e)?"px":"")}function sz(e,t){return t&&Dt(e.diagrams,function(n){return n.id===t})||null}function lz(e){var t=w1,n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+S1+'">'+t+"</a>",i=Vt(n);e.appendChild(i),Ie.bind(i,"click",function(r){rz(),r.preventDefault()})}function qc(e){Qt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Ve.exports(qc,Qt);qc.prototype._createModdle=function(e){var t=Qt.prototype._createModdle.call(this,e);return t.ids=new Ur([32,36,1]),t};qc.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function P(e,t){var n=Te(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function At(e,t){return Go(t,function(n){return P(e,n)})}function Te(e){return e&&e.businessObject||e}function Ot(e){return P(e,"bpmn:CallActivity")?!1:P(e,"bpmn:SubProcess")?Te(e).di&&!!Te(e).di.isExpanded:P(e,"bpmn:Participant")?!!Te(e).processRef:!0}function cz(e){return e&&Te(e).isInterrupting!==!1}function zi(e){return e&&!!Te(e).triggeredByEvent}function Vd(e,t){var n=Te(e),i=!1;return n.eventDefinitions&&G(n.eventDefinitions,function(r){P(r,t)&&(i=!0)}),i}function uz(e){return Vd(e,"bpmn:ErrorEventDefinition")}function pz(e){return Vd(e,"bpmn:EscalationEventDefinition")}function dz(e){return Vd(e,"bpmn:CompensateEventDefinition")}function C1(e){if(P(e,"bpmn:FlowElement")||P(e,"bpmn:Participant")||P(e,"bpmn:Lane")||P(e,"bpmn:SequenceFlow")||P(e,"bpmn:MessageFlow")||P(e,"bpmn:DataInput")||P(e,"bpmn:DataOutput"))return"name";if(P(e,"bpmn:TextAnnotation"))return"text";if(P(e,"bpmn:Group"))return"categoryValueRef"}function fz(e){var t=e.categoryValueRef;return t&&t.value||""}function br(e){var t=e.businessObject,n=C1(t);if(n)return n==="categoryValueRef"?fz(t):t[n]||""}function hz(e,t,n){var i=e.businessObject,r=C1(i);return r&&(r==="categoryValueRef"?i.categoryValueRef.value=t:i[r]=t),e}function Rr(e,t,n){function i(r,a){return Wo(a,function(o,s){return r[s]==o})}return Go(e.eventDefinitions,function(r){return r.$type===t&&i(e,n)})}function mz(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function vz(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function Us(e){return e.businessObject.di}function Zn(e){return e.businessObject}function bt(e,t){var n=Us(e);return n.get("color:background-color")||n.get("bioc:fill")||t||"white"}function Ee(e,t){var n=Us(e);return n.get("color:border-color")||n.get("bioc:stroke")||t||"black"}function Ql(e,t,n){var i=Us(e),r=i.get("label");return r&&r.get("color:color")||t||Ee(e,n)}function gz(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return nl(r)}function yz(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,o=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return nl(o)}function _z(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,o=n/2,s=[["M",i+a,r],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return nl(s)}function xz(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return nl(a)}var bz=new Ur,Kp=10,um=3,As=.95,Ez=.35,wz=10;function Yo(e,t,n,i,r,a,o){ba.call(this,t,o);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,u=e&&e.defaultLabelColor,d=bz.next(),f={},m=n.computeStyle;function v(B,b){var z=Y({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},b.attrs),K=b.ref||{x:0,y:0},se=b.scale||1;z.strokeDasharray==="none"&&(z.strokeDasharray=[1e4,1]);var Z=Le("marker");ve(b.element,z),Ye(Z,b.element),ve(Z,{id:B,viewBox:"0 0 20 20",refX:K.x,refY:K.y,markerWidth:20*se,markerHeight:20*se,orient:"auto"});var ee=Ft("defs",r._svg);ee||(ee=Le("defs"),Ye(r._svg,ee)),Ye(ee,Z),f[B]=Z}function g(B){return B.replace(/[^0-9a-zA-z]+/g,"_")}function y(B,b,z){var K=B+"-"+g(b)+"-"+g(z)+"-"+d;return f[K]||E(K,B,b,z),"url(#"+K+")"}function E(B,b,z,K){if(b==="sequenceflow-end"){var se=Le("path");ve(se,{d:"M 1 5 L 11 10 L 1 15 Z"}),v(B,{element:se,ref:{x:11,y:10},scale:.5,attrs:{fill:K,stroke:K}})}if(b==="messageflow-start"){var Z=Le("circle");ve(Z,{cx:6,cy:6,r:3.5}),v(B,{element:Z,attrs:{fill:z,stroke:K},ref:{x:6,y:6}})}if(b==="messageflow-end"){var ee=Le("path");ve(ee,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),v(B,{element:ee,attrs:{fill:z,stroke:K,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if(b==="association-start"){var me=Le("path");ve(me,{d:"M 11 5 L 1 10 L 11 15"}),v(B,{element:me,attrs:{fill:"none",stroke:K,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if(b==="association-end"){var qe=Le("path");ve(qe,{d:"M 1 5 L 11 10 L 1 15"}),v(B,{element:qe,attrs:{fill:"none",stroke:K,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if(b==="conditional-flow-marker"){var Je=Le("path");ve(Je,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),v(B,{element:Je,attrs:{fill:z,stroke:K},ref:{x:-1,y:10},scale:.5})}if(b==="conditional-default-flow-marker"){var St=Le("path");ve(St,{d:"M 6 4 L 10 16"}),v(B,{element:St,attrs:{stroke:K},ref:{x:0,y:10},scale:.5})}}function N(B,b,z,K,se){kn(K)&&(se=K,K=0),K=K||0,se=m(se,{stroke:"black",strokeWidth:2,fill:"white"}),se.fill==="none"&&delete se.fillOpacity;var Z=b/2,ee=z/2,me=Le("circle");return ve(me,{cx:Z,cy:ee,r:Math.round((b+z)/4-K)}),ve(me,se),Ye(B,me),me}function O(B,b,z,K,se,Z){kn(se)&&(Z=se,se=0),se=se||0,Z=m(Z,{stroke:"black",strokeWidth:2,fill:"white"});var ee=Le("rect");return ve(ee,{x:se,y:se,width:b-se*2,height:z-se*2,rx:K,ry:K}),ve(ee,Z),Ye(B,ee),ee}function T(B,b,z,K){var se=b/2,Z=z/2,ee=[{x:se,y:0},{x:b,y:Z},{x:se,y:z},{x:0,y:Z}],me=ee.map(function(Je){return Je.x+","+Je.y}).join(" ");K=m(K,{stroke:"black",strokeWidth:2,fill:"white"});var qe=Le("polygon");return ve(qe,{points:me}),ve(qe,K),Ye(B,qe),qe}function w(B,b,z){z=m(z,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var K=Wv(b,z);return Ye(B,K),K}function R(B,b,z){z=m(z,["no-fill"],{strokeWidth:2,stroke:"black"});var K=Le("path");return ve(K,{d:b}),ve(K,z),Ye(B,K),K}function L(B,b,z,K){return R(b,z,Y({"data-marker":B},K))}function H(B){return function(b,z){return Yt[B](b,z)}}function $(B){return Yt[B]}function W(B,b){var z=Zn(B),K=mz(z);return z.eventDefinitions&&z.eventDefinitions.length>1?z.parallelMultiple?$("bpmn:ParallelMultipleEventDefinition")(b,B,K):$("bpmn:MultipleEventDefinition")(b,B,K):Rr(z,"bpmn:MessageEventDefinition")?$("bpmn:MessageEventDefinition")(b,B,K):Rr(z,"bpmn:TimerEventDefinition")?$("bpmn:TimerEventDefinition")(b,B,K):Rr(z,"bpmn:ConditionalEventDefinition")?$("bpmn:ConditionalEventDefinition")(b,B):Rr(z,"bpmn:SignalEventDefinition")?$("bpmn:SignalEventDefinition")(b,B,K):Rr(z,"bpmn:EscalationEventDefinition")?$("bpmn:EscalationEventDefinition")(b,B,K):Rr(z,"bpmn:LinkEventDefinition")?$("bpmn:LinkEventDefinition")(b,B,K):Rr(z,"bpmn:ErrorEventDefinition")?$("bpmn:ErrorEventDefinition")(b,B,K):Rr(z,"bpmn:CancelEventDefinition")?$("bpmn:CancelEventDefinition")(b,B,K):Rr(z,"bpmn:CompensateEventDefinition")?$("bpmn:CompensateEventDefinition")(b,B,K):Rr(z,"bpmn:TerminateEventDefinition")?$("bpmn:TerminateEventDefinition")(b,B,K):null}function Q(B,b,z){z=Y({size:{width:100}},z);var K=a.createText(b||"",z);return mt(K).add("djs-label"),Ye(B,K),K}function pe(B,b,z){var K=Zn(b);return Q(B,K.name,{box:b,align:z,padding:5,style:{fill:Ql(b,u,c)}})}function oe(B,b){var z={width:90,height:30,x:b.width/2+b.x,y:b.height/2+b.y};return Q(B,br(b),{box:z,fitBox:!0,style:Y({},a.getExternalStyle(),{fill:Ql(b,u,c)})})}function be(B,b,z){var K=Q(B,b,{box:{height:30,width:z.height},align:"center-middle",style:{fill:Ql(z,u,c)}}),se=-1*z.height;ev(K,0,-se,270)}function ke(B){for(var b=B.waypoints,z="m  "+b[0].x+","+b[0].y,K=1;K<b.length;K++)z+="L"+b[K].x+","+b[K].y+" ";return z}var Yt=this.handlers={"bpmn:Event":function(B,b,z){return"fillOpacity"in z||(z.fillOpacity=As),N(B,b.width,b.height,z)},"bpmn:StartEvent":function(B,b){var z={fill:bt(b,s),stroke:Ee(b,c)},K=Zn(b);K.isInterrupting||(z={strokeDasharray:"6",strokeLinecap:"round",fill:bt(b,s),stroke:Ee(b,c)});var se=$("bpmn:Event")(B,b,z);return W(b,B),se},"bpmn:MessageEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:b.width,containerHeight:b.height,position:{mx:.235,my:.315}}),se=z?Ee(b,c):bt(b,s),Z=z?bt(b,s):Ee(b,c),ee=R(B,K,{strokeWidth:1,fill:se,stroke:Z});return ee},"bpmn:TimerEventDefinition":function(B,b){var z=N(B,b.width,b.height,.2*b.height,{strokeWidth:2,fill:bt(b,s),stroke:Ee(b,c)}),K=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:b.width,containerHeight:b.height,position:{mx:.5,my:.5}});R(B,K,{strokeWidth:2,strokeLinecap:"square",stroke:Ee(b,c)});for(var se=0;se<12;se++){var Z=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:b.width,containerHeight:b.height,position:{mx:.5,my:.5}}),ee=b.width/2,me=b.height/2;R(B,Z,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+se*30+","+me+","+ee+")",stroke:Ee(b,c)})}return z},"bpmn:EscalationEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.5,my:.2}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)})},"bpmn:ConditionalEventDefinition":function(B,b){var z=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.5,my:.222}});return R(B,z,{strokeWidth:1,stroke:Ee(b,c)})},"bpmn:LinkEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.57,my:.263}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)})},"bpmn:ErrorEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:b.width,containerHeight:b.height,position:{mx:.2,my:.722}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)})},"bpmn:CancelEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.638,my:-.055}}),se=z?Ee(b,c):"none",Z=R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)});return l1(Z,45),Z},"bpmn:CompensateEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.22,my:.5}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)})},"bpmn:SignalEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:b.width,containerHeight:b.height,position:{mx:.5,my:.2}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se,stroke:Ee(b,c)})},"bpmn:MultipleEventDefinition":function(B,b,z){var K=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:b.width,containerHeight:b.height,position:{mx:.222,my:.36}}),se=z?Ee(b,c):"none";return R(B,K,{strokeWidth:1,fill:se})},"bpmn:ParallelMultipleEventDefinition":function(B,b){var z=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:b.width,containerHeight:b.height,position:{mx:.458,my:.194}});return R(B,z,{strokeWidth:1,fill:Ee(b,c),stroke:Ee(b,c)})},"bpmn:EndEvent":function(B,b){var z=$("bpmn:Event")(B,b,{strokeWidth:4,fill:bt(b,s),stroke:Ee(b,c)});return W(b,B),z},"bpmn:TerminateEventDefinition":function(B,b){var z=N(B,b.width,b.height,8,{strokeWidth:4,fill:Ee(b,c),stroke:Ee(b,c)});return z},"bpmn:IntermediateEvent":function(B,b){var z=$("bpmn:Event")(B,b,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)});return N(B,b.width,b.height,um,{strokeWidth:1,fill:bt(b,"none"),stroke:Ee(b,c)}),W(b,B),z},"bpmn:IntermediateCatchEvent":H("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":H("bpmn:IntermediateEvent"),"bpmn:Activity":function(B,b,z){return z=z||{},"fillOpacity"in z||(z.fillOpacity=As),O(B,b.width,b.height,Kp,z)},"bpmn:Task":function(B,b){var z={fill:bt(b,s),stroke:Ee(b,c)},K=$("bpmn:Activity")(B,b,z);return pe(B,b,"center-middle"),re(B,b),K},"bpmn:ServiceTask":function(B,b){var z=$("bpmn:Task")(B,b),K=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});R(B,K,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)});var se=i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});R(B,se,{strokeWidth:0,fill:bt(b,s)});var Z=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return R(B,Z,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)}),z},"bpmn:UserTask":function(B,b){var z=$("bpmn:Task")(B,b),K=15,se=12,Z=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:K,y:se}});R(B,Z,{strokeWidth:.5,fill:bt(b,s),stroke:Ee(b,c)});var ee=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:K,y:se}});R(B,ee,{strokeWidth:.5,fill:bt(b,s),stroke:Ee(b,c)});var me=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:K,y:se}});return R(B,me,{strokeWidth:.5,fill:Ee(b,c),stroke:Ee(b,c)}),z},"bpmn:ManualTask":function(B,b){var z=$("bpmn:Task")(B,b),K=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return R(B,K,{strokeWidth:.5,fill:bt(b,s),stroke:Ee(b,c)}),z},"bpmn:SendTask":function(B,b){var z=$("bpmn:Task")(B,b),K=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return R(B,K,{strokeWidth:1,fill:Ee(b,c),stroke:bt(b,s)}),z},"bpmn:ReceiveTask":function(B,b){var z=Zn(b),K=$("bpmn:Task")(B,b),se;return z.instantiate?(N(B,28,28,20*.22,{strokeWidth:1}),se=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):se=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),R(B,se,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)}),K},"bpmn:ScriptTask":function(B,b){var z=$("bpmn:Task")(B,b),K=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return R(B,K,{strokeWidth:1,stroke:Ee(b,c)}),z},"bpmn:BusinessRuleTask":function(B,b){var z=$("bpmn:Task")(B,b),K=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),se=R(B,K);ve(se,{strokeWidth:1,fill:bt(b,"#aaaaaa"),stroke:Ee(b,c)});var Z=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),ee=R(B,Z);return ve(ee,{strokeWidth:1,stroke:Ee(b,c)}),z},"bpmn:SubProcess":function(B,b,z){z=Y({fill:bt(b,s),stroke:Ee(b,c)},z);var K=$("bpmn:Activity")(B,b,z),se=Ot(b);return zi(b)&&ve(K,{strokeDasharray:"1,2"}),pe(B,b,se?"center-top":"center-middle"),se?re(B,b):re(B,b,["SubProcessMarker"]),K},"bpmn:AdHocSubProcess":function(B,b){return $("bpmn:SubProcess")(B,b)},"bpmn:Transaction":function(B,b){var z=$("bpmn:SubProcess")(B,b),K=n.style(["no-fill","no-events"],{stroke:Ee(b,c)});return O(B,b.width,b.height,Kp-2,um,K),z},"bpmn:CallActivity":function(B,b){return $("bpmn:SubProcess")(B,b,{strokeWidth:5})},"bpmn:Participant":function(B,b){var z={fillOpacity:As,fill:bt(b,s),stroke:Ee(b,c)},K=$("bpmn:Lane")(B,b,z),se=Ot(b);if(se){w(B,[{x:30,y:0},{x:30,y:b.height}],{stroke:Ee(b,c)});var Z=Zn(b).name;be(B,Z,b)}else{var ee=Zn(b).name;Q(B,ee,{box:b,align:"center-middle",style:{fill:Ql(b,u,c)}})}var me=!!Zn(b).participantMultiplicity;return me&&$("ParticipantMultiplicityMarker")(B,b),K},"bpmn:Lane":function(B,b,z){var K=O(B,b.width,b.height,0,Y({fill:bt(b,s),fillOpacity:Ez,stroke:Ee(b,c)},z)),se=Zn(b);if(se.$type==="bpmn:Lane"){var Z=se.name;be(B,Z,b)}return K},"bpmn:InclusiveGateway":function(B,b){var z=$("bpmn:Gateway")(B,b);return N(B,b.width,b.height,b.height*.24,{strokeWidth:2.5,fill:bt(b,s),stroke:Ee(b,c)}),z},"bpmn:ExclusiveGateway":function(B,b){var z=$("bpmn:Gateway")(B,b),K=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:b.width,containerHeight:b.height,position:{mx:.32,my:.3}});return Us(b).isMarkerVisible&&R(B,K,{strokeWidth:1,fill:Ee(b,c),stroke:Ee(b,c)}),z},"bpmn:ComplexGateway":function(B,b){var z=$("bpmn:Gateway")(B,b),K=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:b.width,containerHeight:b.height,position:{mx:.46,my:.26}});return R(B,K,{strokeWidth:1,fill:Ee(b,c),stroke:Ee(b,c)}),z},"bpmn:ParallelGateway":function(B,b){var z=$("bpmn:Gateway")(B,b),K=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:b.width,containerHeight:b.height,position:{mx:.46,my:.2}});return R(B,K,{strokeWidth:1,fill:Ee(b,c),stroke:Ee(b,c)}),z},"bpmn:EventBasedGateway":function(B,b){var z=Zn(b),K=$("bpmn:Gateway")(B,b);N(B,b.width,b.height,b.height*.2,{strokeWidth:1,fill:"none",stroke:Ee(b,c)});var se=z.eventGatewayType,Z=!!z.instantiate;function ee(){var St=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:b.width,containerHeight:b.height,position:{mx:.36,my:.44}}),tt={strokeWidth:2,fill:bt(b,"none"),stroke:Ee(b,c)};R(B,St,tt)}if(se==="Parallel"){var me=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:b.width,containerHeight:b.height,position:{mx:.474,my:.296}}),qe=R(B,me);ve(qe,{strokeWidth:1,fill:"none"})}else if(se==="Exclusive"){if(!Z){var Je=N(B,b.width,b.height,b.height*.26);ve(Je,{strokeWidth:1,fill:"none",stroke:Ee(b,c)})}ee()}return K},"bpmn:Gateway":function(B,b){var z={fill:bt(b,s),fillOpacity:As,stroke:Ee(b,c)};return T(B,b.width,b.height,z)},"bpmn:SequenceFlow":function(B,b){var z=ke(b),K=bt(b,s),se=Ee(b,c),Z={strokeLinejoin:"round",markerEnd:y("sequenceflow-end",K,se),stroke:Ee(b,c)},ee=R(B,z,Z),me=Zn(b),qe;return b.source&&(qe=b.source.businessObject,me.conditionExpression&&qe.$instanceOf("bpmn:Activity")&&ve(ee,{markerStart:y("conditional-flow-marker",K,se)}),qe.default&&(qe.$instanceOf("bpmn:Gateway")||qe.$instanceOf("bpmn:Activity"))&&qe.default===me&&ve(ee,{markerStart:y("conditional-default-flow-marker",K,se)})),ee},"bpmn:Association":function(B,b,z){var K=Zn(b),se=bt(b,s),Z=Ee(b,c);return z=Y({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:Ee(b,c)},z||{}),(K.associationDirection==="One"||K.associationDirection==="Both")&&(z.markerEnd=y("association-end",se,Z)),K.associationDirection==="Both"&&(z.markerStart=y("association-start",se,Z)),w(B,b.waypoints,z)},"bpmn:DataInputAssociation":function(B,b){var z=bt(b,s),K=Ee(b,c);return $("bpmn:Association")(B,b,{markerEnd:y("association-end",z,K)})},"bpmn:DataOutputAssociation":function(B,b){var z=bt(b,s),K=Ee(b,c);return $("bpmn:Association")(B,b,{markerEnd:y("association-end",z,K)})},"bpmn:MessageFlow":function(B,b){var z=Zn(b),K=Us(b),se=bt(b,s),Z=Ee(b,c),ee=ke(b),me={markerEnd:y("messageflow-end",se,Z),markerStart:y("messageflow-start",se,Z),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:Ee(b,c)},qe=R(B,ee,me);if(z.messageRef){var Je=qe.getPointAtLength(qe.getTotalLength()/2),St=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Je.x,y:Je.y}}),tt={strokeWidth:1};K.messageVisibleKind==="initiating"?(tt.fill="white",tt.stroke="black"):(tt.fill="#888",tt.stroke="white");var ut=R(B,St,tt),Xt=z.messageRef.name,Ht=Q(B,Xt,{align:"center-top",fitBox:!0,style:{fill:Ee(b,u)}}),wt=ut.getBBox(),ot=Ht.getBBox(),nn=Je.x-ot.width/2,gn=Je.y+wt.height/2+wz;ev(Ht,nn,gn,0)}return qe},"bpmn:DataObject":function(B,b){var z=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.474,my:.296}}),K=R(B,z,{fill:bt(b,s),fillOpacity:As,stroke:Ee(b,c)}),se=Zn(b);return vz(se)&&ce(B,b),K},"bpmn:DataObjectReference":H("bpmn:DataObject"),"bpmn:DataInput":function(B,b){var z=i.getRawPath("DATA_ARROW"),K=$("bpmn:DataObject")(B,b);return R(B,z,{strokeWidth:1}),K},"bpmn:DataOutput":function(B,b){var z=i.getRawPath("DATA_ARROW"),K=$("bpmn:DataObject")(B,b);return R(B,z,{strokeWidth:1,fill:"black"}),K},"bpmn:DataStoreReference":function(B,b){var z=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:0,my:.133}}),K=R(B,z,{strokeWidth:2,fill:bt(b,s),fillOpacity:As,stroke:Ee(b,c)});return K},"bpmn:BoundaryEvent":function(B,b){var z=Zn(b),K=z.cancelActivity,se={strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)};K||(se.strokeDasharray="6",se.strokeLinecap="round");var Z=Y({},se,{fillOpacity:1}),ee=Y({},se,{fill:"none"}),me=$("bpmn:Event")(B,b,Z);return N(B,b.width,b.height,um,ee),W(b,B),me},"bpmn:Group":function(B,b){var z=O(B,b.width,b.height,Kp,{stroke:Ee(b,c),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"});return z},label:function(B,b){return oe(B,b)},"bpmn:TextAnnotation":function(B,b){var z={fill:"none",stroke:"none"},K=O(B,b.width,b.height,0,0,z),se=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:0,my:0}});R(B,se,{stroke:Ee(b,c)});var Z=Zn(b).text||"";return Q(B,Z,{box:b,align:"left-top",padding:5,style:{fill:Ql(b,u,c)}}),K},ParticipantMultiplicityMarker:function(B,b){var z=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:b.width/2/b.width,my:(b.height-15)/b.height}});L("participant-multiplicity",B,z,{strokeWidth:2,fill:bt(b,s),stroke:Ee(b,c)})},SubProcessMarker:function(B,b){var z=O(B,14,14,0,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)});bi(z,b.width/2-7.5,b.height-20);var K=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2-7.5)/b.width,my:(b.height-20)/b.height}});L("sub-process",B,K,{fill:bt(b,s),stroke:Ee(b,c)})},ParallelMarker:function(B,b,z){var K=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2+z.parallel)/b.width,my:(b.height-20)/b.height}});L("parallel",B,K,{fill:bt(b,s),stroke:Ee(b,c)})},SequentialMarker:function(B,b,z){var K=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2+z.seq)/b.width,my:(b.height-19)/b.height}});L("sequential",B,K,{fill:bt(b,s),stroke:Ee(b,c)})},CompensationMarker:function(B,b,z){var K=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2+z.compensation)/b.width,my:(b.height-13)/b.height}});L("compensation",B,K,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c)})},LoopMarker:function(B,b,z){var K=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2+z.loop)/b.width,my:(b.height-7)/b.height}});L("loop",B,K,{strokeWidth:1,fill:bt(b,s),stroke:Ee(b,c),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(B,b,z){var K=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:(b.width/2+z.adhoc)/b.width,my:(b.height-15)/b.height}});L("adhoc",B,K,{strokeWidth:1,fill:Ee(b,c),stroke:Ee(b,c)})}};function re(B,b,z){var K=Zn(b),se=z&&z.indexOf("SubProcessMarker")!==-1,Z;se?Z={seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:Z={seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},G(z,function(qe){$(qe)(B,b,Z)}),K.isForCompensation&&$("CompensationMarker")(B,b,Z),K.$type==="bpmn:AdHocSubProcess"&&$("AdhocMarker")(B,b,Z);var ee=K.loopCharacteristics,me=ee&&ee.isSequential;ee&&(me===void 0&&$("LoopMarker")(B,b,Z),me===!1&&$("ParallelMarker")(B,b,Z),me===!0&&$("SequentialMarker")(B,b,Z))}function ce(B,b){var z=(b.height-18)/b.height,K=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:b.width,containerHeight:b.height,position:{mx:.33,my:z}});R(B,K,{strokeWidth:2})}this._drawPath=R}Ve.exports(Yo,ba);Yo.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Yo.prototype.canRender=function(e){return P(e,"bpmn:BaseElement")};Yo.prototype.drawShape=function(e,t){var n=t.type,i=this.handlers[n];return i(e,t)};Yo.prototype.drawConnection=function(e,t){var n=t.type,i=this.handlers[n];return i(e,t)};Yo.prototype.getShapePath=function(e){return P(e,"bpmn:Event")?gz(e):P(e,"bpmn:Activity")?yz(e,Kp):P(e,"bpmn:Gateway")?_z(e):xz(e)};var Sz=0,Cz={width:150,height:50};function Tz(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function Pz(e){return kn(e)?Y({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function Az(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function Rz(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=Az(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return Mz(e,r,i,a);r=Oz(r,a.width,t)}}function Mz(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var _b="\xAD";function Dz(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===_b)&&r.pop();break}var o=r[r.length-1];return o&&o===_b&&(r[r.length-1]="-"),r.join("")}function Oz(e,t,n){var i=Math.max(e.length*(n/t),1),r=Dz(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function Iz(){var e=document.getElementById("helper-svg");return e||(e=Le("svg"),ve(e,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}function Ud(e){this._config=Y({},{size:Cz,padding:Sz,style:{},align:"center-top"},e||{})}Ud.prototype.createText=function(e,t){return this.layoutText(e,t).element};Ud.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Ud.prototype.layoutText=function(e,t){var n=Y({},this._config.size,t.box),i=Y({},this._config.style,t.style),r=Tz(t.align||this._config.align),a=Pz(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,s=Nz(i),c=e.split(/\u00AD?\r?\n/),u=[],d=n.width-a.left-a.right,f=Le("text");ve(f,{x:0,y:0}),ve(f,i);var m=Iz();for(Ye(m,f);c.length;)u.push(Rz(c,d,f));r.vertical==="middle"&&(a.top=a.bottom=0);var v=ji(u,function(O,T,w){return O+(s||T.height)},0)+a.top+a.bottom,g=ji(u,function(O,T,w){return T.width>O?T.width:O},0),y=a.top;r.vertical==="middle"&&(y+=(n.height-v)/2),y-=(s||u[0].height)/4;var E=Le("text");ve(E,i),G(u,function(O){var T;switch(y+=s||O.height,r.horizontal){case"left":T=a.left;break;case"right":T=(o?g:d)-a.right-O.width;break;default:T=Math.max(((o?g:d)-O.width)/2+a.left,0)}var w=Le("tspan");ve(w,{x:T,y}),w.textContent=O.text,Ye(E,w)}),dn(f);var N={width:g,height:v};return{dimensions:N,element:E}};function Nz(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var kz=12,Bz=1.2,Lz=30;function T1(e){var t=Y({fontFamily:"Arial, sans-serif",fontSize:kz,fontWeight:"normal",lineHeight:Bz},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=Y({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Ud({style:t});this.getExternalLabelBounds=function(a,o){var s=r.getDimensions(o,{box:{width:90,height:30,x:a.width/2+a.x,y:a.height/2+a.y},style:i});return{x:Math.round(a.x+a.width/2-s.width/2),y:Math.round(a.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(a,o){var s=r.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(Lz,Math.round(s.height))}},this.createText=function(a,o){return r.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}T1.$inject=["config.textRenderer"];function $z(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var s=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,u=0;u<i.heightElements.length;u++)o["y"+u]=i.heightElements[u]*s;for(var d=0;d<i.widthElements.length;d++)o["x"+d]=i.widthElements[d]*c}var f=jz(i.d,{mx:r,my:a,e:o});return f}}var zz=/\{([^{}]+)\}/g,Fz=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Hz(e,t,n){var i=n;return t.replace(Fz,function(r,a,o,s,c){a=a||s,i&&(a in i&&(i=i[a]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function jz(e,t){return String(e).replace(zz,function(n,i){return Hz(n,i,t)})}const Vz={__init__:["bpmnRenderer"],bpmnRenderer:["type",Yo],textRenderer:["type",T1],pathMap:["type",$z]};function Uz(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Wd={translate:["value",Uz]};var Pc={width:90,height:20},xb=15;function Ws(e){return P(e,"bpmn:Event")||P(e,"bpmn:Gateway")||P(e,"bpmn:DataStoreReference")||P(e,"bpmn:DataObjectReference")||P(e,"bpmn:DataInput")||P(e,"bpmn:DataOutput")||P(e,"bpmn:SequenceFlow")||P(e,"bpmn:MessageFlow")||P(e,"bpmn:Group")}function Gd(e){return Vn(e.label)}function Wz(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=Gz(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),o=r.x,s=r.y;return Math.abs(a)<Math.PI/2?s-=xb:o+=xb,{x:o,y:s}}function Gz(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function qd(e){return e.waypoints?Wz(e.waypoints):P(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Pc.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Pc.height/2}}function qz(e,t){var n,i,r,a=e.di,o=a.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(Pc.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=qd(t),i=Pc),Y({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Vn(e){return e&&!!e.labelTarget}function Yp(e,t){return Y({id:e.id,type:e.$type,businessObject:e},t)}function Kz(e,t,n){var i=e.di.waypoint;return!i||i.length<2?[dt(t),dt(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function P1(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:jn(n),referenced:jn(t),property:i}))}function wa(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}wa.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];wa.prototype.add=function(e,t){var n=e.di,i,r=this._translate,a,o;if(P(n,"bpmndi:BPMNPlane"))i=this._elementFactory.createRoot(Yp(e)),this._canvas.setRootElement(i);else if(P(n,"bpmndi:BPMNShape")){var s=!Ot(e),c=Xz(e);a=t&&(t.hidden||t.collapsed);var u=e.di.bounds;i=this._elementFactory.createShape(Yp(e,{collapsed:s,hidden:a,x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height),isFrame:c})),P(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),P(e,"bpmn:Lane")&&(o=0),P(e,"bpmn:DataStoreReference")&&(Yz(t,dt(u))||(t=this._canvas.getRootElement())),this._canvas.addShape(i,t,o)}else if(P(n,"bpmndi:BPMNEdge")){var d=this._getSource(e),f=this._getTarget(e);a=t&&(t.hidden||t.collapsed),i=this._elementFactory.createConnection(Yp(e,{hidden:a,source:d,target:f,waypoints:Kz(e,d,f)})),P(e,"bpmn:DataAssociation")&&(t=null),P(e,"bpmn:SequenceFlow")&&(o=0),this._canvas.addConnection(i,t,o)}else throw new Error(r("unknown di {di} for element {semantic}",{di:jn(n),semantic:jn(e)}));return Ws(e)&&br(i)&&this.addLabel(e,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};wa.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:jn(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw P1(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),a.indexOf(t)===-1&&a.push(t)};wa.prototype.addLabel=function(e,t){var n,i,r;return n=qz(e,t),i=br(t),i&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(Yp(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!br(t),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,t.parent)};wa.prototype._getEnd=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?P1(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:jn(e),side:t}))};wa.prototype._getSource=function(e){return this._getEnd(e,"source")};wa.prototype._getTarget=function(e){return this._getEnd(e,"target")};wa.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function Yz(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Xz(e){return P(e,"bpmn:Group")}const Zz={__depends__:[Wd],bpmnImporter:["type",wa]},Jz={__depends__:[Vz,Zz]};function bb(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function cl(e){return e.originalEvent||e.srcEvent}function pm(e,t){bb(e),bb(cl(e))}function io(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Qz(){return/mac/i.test(navigator.platform)}function A1(e,t){return(cl(e)||e).button===t}function so(e){return A1(e,0)}function eF(e){return A1(e,1)}function Gs(e){var t=cl(e)||e;return so(e)?Qz()?t.metaKey:t.ctrlKey:!1}function R1(e){var t=cl(e)||e;return so(e)&&t.shiftKey}function tF(e){return!0}function vp(e){return so(e)||eF(e)}var Eb=500;function M1(e,t,n){var i=this;function r(H,$,W){if(!s(H,$)){var Q,pe,oe;W?pe=t.getGraphics(W):(Q=$.delegateTarget||$.target,Q&&(pe=Q,W=t.get(pe))),!(!pe||!W)&&(oe=e.fire(H,{element:W,gfx:pe,originalEvent:$}),oe===!1&&($.stopPropagation(),$.preventDefault()))}}var a={};function o(H){return a[H]}function s(H,$){var W=u[H]||so;return!W($)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":tF,"element.mousedown":vp,"element.mouseup":vp,"element.click":vp,"element.dblclick":vp};function d(H,$,W){var Q=c[H];if(!Q)throw new Error("unmapped DOM event name <"+H+">");return r(Q,$,W)}var f="svg, .djs-element";function m(H,$,W,Q){var pe=a[W]=function(oe){r(W,oe)};Q&&(u[W]=Q),pe.$delegate=$i.bind(H,f,$,pe)}function v(H,$,W){var Q=o(W);!Q||$i.unbind(H,$,Q.$delegate)}function g(H){G(c,function($,W){m(H,W,$)})}function y(H){G(c,function($,W){v(H,W,$)})}e.on("canvas.destroy",function(H){y(H.svg)}),e.on("canvas.init",function(H){g(H.svg)}),e.on(["shape.added","connection.added"],function(H){var $=H.element,W=H.gfx;e.fire("interactionEvents.createHit",{element:$,gfx:W})}),e.on(["shape.changed","connection.changed"],Eb,function(H){var $=H.element,W=H.gfx;e.fire("interactionEvents.updateHit",{element:$,gfx:W})}),e.on("interactionEvents.createHit",Eb,function(H){var $=H.element,W=H.gfx;i.createDefaultHit($,W)}),e.on("interactionEvents.updateHit",function(H){var $=H.element,W=H.gfx;i.updateDefaultHit($,W)});var E=w("djs-hit djs-hit-stroke"),N=w("djs-hit djs-hit-click-stroke"),O=w("djs-hit djs-hit-all"),T={all:O,"click-stroke":N,stroke:E};function w(H,$){return $=Y({stroke:"white",strokeWidth:15},$||{}),n.cls(H,["no-fill","no-border"],$)}function R(H,$){var W=T[$];if(!W)throw new Error("invalid hit type <"+$+">");return ve(H,W),H}function L(H,$){Ye(H,$)}this.removeHits=function(H){var $=Um(".djs-hit",H);G($,dn)},this.createDefaultHit=function(H,$){var W=H.waypoints,Q=H.isFrame,pe;return W?this.createWaypointsHit($,W):(pe=Q?"stroke":"all",this.createBoxHit($,pe,{width:H.width,height:H.height}))},this.createWaypointsHit=function(H,$){var W=Wv($);return R(W,"stroke"),L(H,W),W},this.createBoxHit=function(H,$,W){W=Y({x:0,y:0},W);var Q=Le("rect");return R(Q,$),ve(Q,W),L(H,Q),Q},this.updateDefaultHit=function(H,$){var W=Ft(".djs-hit",$);if(!!W)return H.waypoints?LL(W,H.waypoints):ve(W,{width:H.width,height:H.height}),W},this.fire=r,this.triggerMouseEvent=d,this.mouseHandler=o,this.registerEvent=m,this.unregisterEvent=v}M1.$inject=["eventBus","elementRegistry","styles"];const Kc={__init__:["interactionEvents"],interactionEvents:["type",M1]};var nF=500;function Kd(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function a(o,s){var c=Le("rect");return ve(c,Y({x:10,y:10,width:100,height:100},i)),Ye(o,c),c}e.on(["shape.added","shape.changed"],nF,function(o){var s=o.element,c=o.gfx,u=Ft(".djs-outline",c);u||(u=a(c)),r.updateShapeOutline(u,s)}),e.on(["connection.added","connection.changed"],function(o){var s=o.element,c=o.gfx,u=Ft(".djs-outline",c);u||(u=a(c)),r.updateConnectionOutline(u,s)})}Kd.prototype.updateShapeOutline=function(e,t){ve(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Kd.prototype.updateConnectionOutline=function(e,t){var n=Un(t);ve(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Kd.$inject=["eventBus","styles","elementRegistry"];const D1={__init__:["outline"],outline:["type",Kd]};function ul(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","plane.set"],function(i){n.select(null)})}ul.$inject=["eventBus","canvas"];ul.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};ul.prototype.get=function(){return this._selectedElements};ul.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};ul.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();yt(e)||(e=e?[e]:[]);var r=this._canvas;e=e.filter(function(a){var o=r.findPlane(a);return o===r.getActivePlane()}),t?G(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var wb="hover",Sb="selected";function O1(e,t,n,i){this._multiSelectionBox=null;function r(o,s){t.addMarker(o,s)}function a(o,s){t.removeMarker(o,s)}e.on("element.hover",function(o){r(o.element,wb)}),e.on("element.out",function(o){a(o.element,wb)}),e.on("selection.changed",function(o){function s(f){a(f,Sb)}function c(f){r(f,Sb)}var u=o.oldSelection,d=o.newSelection;G(u,function(f){d.indexOf(f)===-1&&s(f)}),G(d,function(f){u.indexOf(f)===-1&&c(f)})})}O1.$inject=["eventBus","canvas","selection","styles"];function I1(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,o=a.canExecute,s=a.elements,c=a.hints||{},u=c.autoSelect;if(o){if(u===!1)return;yt(u)?t.select(u):t.select(s.filter(iF))}}),e.on("connect.end",500,function(r){var a=r.context,o=a.canExecute,s=a.hover;o&&s&&t.select(s)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],o=i.get(r.context.shape.id),s=Dt(a,function(c){return o.id===c.id});s||t.select(o)}),e.on("element.click",function(r){if(!!so(r)){var a=r.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),s=t.get().length>1,c=Gs(r)||R1(r);if(o&&s)return c?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,c)}})}I1.$inject=["eventBus","selection","canvas","elementRegistry"];function iF(e){return!e.hidden}const Xr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Kc,D1],selection:["type",ul],selectionVisuals:["type",O1],selectionBehavior:["type",I1]};function rg(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}rg.prototype.next=function(){return this._prefix+ ++this._counter};var rF=new rg("ov"),aF=500;function $n(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=rF,this._overlayDefaults=Y({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=oF(n.getContainer()),this._init()}$n.$inject=["config.overlays","eventBus","canvas","elementRegistry"];$n.prototype.get=function(e){if(Hi(e)&&(e={id:e}),Hi(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?st(t.overlays,yr({type:e.type})):t.overlays.slice():[]}else return e.type?st(this._overlays,yr({type:e.type})):e.id?this._overlays[e.id]:null};$n.prototype.add=function(e,t,n){if(kn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=Y({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};$n.prototype.remove=function(e){var t=this.get(e)||[];yt(t)||(t=[t]);var n=this;G(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Wr(i.html),Wr(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};$n.prototype.show=function(){Yc(this._overlayRoot)};$n.prototype.hide=function(){Yc(this._overlayRoot,!1)};$n.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Id(this._overlayRoot)};$n.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=Un(t);i=a.x,r=a.y}N1(n,i,r),oi(e.html,"data-container-id",t.id)};$n.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var o;i.waypoints?o=Un(i).width:o=i.width,r=t.right*-1+o}if(t.bottom!==void 0){var s;i.waypoints?s=Un(i).height:s=i.height,a=t.bottom*-1+s}N1(n,r||0,a||0)};$n.prototype._createOverlayContainer=function(e){var t=Vt('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};$n.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";k1(this._overlayRoot,n)};$n.prototype._getOverlayContainer=function(e,t){var n=Dt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};$n.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Hi(i)&&(i=Vt(i)),a=this._getOverlayContainer(n),r=Vt('<div class="djs-overlay" data-overlay-id="'+t+'" style="position: absolute">'),r.appendChild(i),e.type&&Wt(r).add("djs-overlay-"+e.type);var o=this._canvas.findPlane(n),s=this._canvas.getActivePlane();e.plane=o,o!==s&&Yc(r,!1),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$n.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=e.plane,r=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,s=this._canvas.getActivePlane(),c=!0;(i!==s||n&&(Hr(r)&&r>t.scale||Hr(a)&&a<t.scale))&&(c=!1),Yc(o,c),this._updateOverlayScale(e,t)};$n.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,o,s="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Hr(i)&&t.scale<i&&(o=(1/t.scale||1)*i),Hr(r)&&t.scale>r&&(o=(1/t.scale||1)*r)),Hr(o)&&(s="scale("+o+","+o+")"),k1(a,s)};$n.prototype._updateOverlaysVisibilty=function(e){var t=this;G(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};$n.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});G(a,function(c){t.remove(c.id)});var o=t._getOverlayContainer(r);if(o){Wr(o.html);var s=t._overlayContainers.indexOf(o);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",aF,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(G(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Wt(r.html)[i.add?"add":"remove"](i.marker)}),e.on("plane.set",function(i){G(t._overlays,function(r){Yc(r.htmlContainer,r.plane===i.plane)})}),e.on("diagram.clear",this.clear,this)};function oF(e){var t=Vt('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function N1(e,t,n){Y(e.style,{left:t+"px",top:n+"px"})}function Yc(e,t){e.style.display=t===!1?"none":""}function k1(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const ag={__init__:["overlays"],overlays:["type",$n]};function lo(e){Qt.call(this,e)}Ve.exports(lo,Qt);lo.prototype._modules=[Jz,Wd,Xr,ag];lo.prototype._moddleExtensions={};var sF=67,lF=86,cF=89,uF=90,pF=["c","C",sF],dF=["v","V",lF],fF=["y","Y",cF],B1=["z","Z",uF];function hF(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Fi(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function gr(e,t){return e=yt(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.keyCode)!==-1}function og(e){return e.shiftKey}function mF(e){return Fi(e)&&gr(pF,e)}function vF(e){return Fi(e)&&gr(dF,e)}function gF(e){return Fi(e)&&!og(e)&&gr(B1,e)}function yF(e){return Fi(e)&&(gr(fF,e)||gr(B1,e)&&og(e))}var Yd="keyboard.keydown",_F="keyboard.keyup",Cb="input-handle-modified-keys",xF=1e3;function zn(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}zn.$inject=["config.keyboard","eventBus"];zn.prototype._keydownHandler=function(e){this._keyHandler(e,Yd)};zn.prototype._keyupHandler=function(e){this._keyHandler(e,_F)};zn.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Yd,i),n&&e.preventDefault()}};zn.prototype._isEventIgnored=function(e){return bF(e.target)&&this._isModifiedKeyIgnored(e)};zn.prototype._isModifiedKeyIgnored=function(e){if(!Fi(e))return!0;var t=this._getAllowedModifiers(e.target);return!t.includes(e.key)};zn.prototype._getAllowedModifiers=function(e){var t=qo(e,"["+Cb+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(Cb).split(",")};zn.prototype.bind=function(e){this.unbind(),this._node=e,Ie.bind(e,"keydown",this._keydownHandler,!0),Ie.bind(e,"keyup",this._keyupHandler,!0),this._fire("bind")};zn.prototype.getBinding=function(){return this._node};zn.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Ie.unbind(e,"keydown",this._keydownHandler,!0),Ie.unbind(e,"keyup",this._keyupHandler,!0)),this._node=null};zn.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};zn.prototype.addListener=function(e,t,n){Qn(e)&&(n=t,t=e,e=xF),this._eventBus.on(n||Yd,e,t)};zn.prototype.removeListener=function(e,t){this._eventBus.off(t||Yd,e)};zn.prototype.hasModifier=hF;zn.prototype.isCmd=Fi;zn.prototype.isShift=og;zn.prototype.isKey=gr;function bF(e){return e&&(cd(e,"input, textarea")||e.contentEditable==="true")}var EF=500;function pl(e,t){var n=this;e.on("editorActions.init",EF,function(i){var r=i.editorActions;n.registerBindings(t,r)})}pl.$inject=["eventBus","keyboard"];pl.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(gF(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(yF(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(mF(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(vF(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(gr(["+","Add","="],r)&&Fi(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(gr(["-","Subtract"],r)&&Fi(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(gr("0",r)&&Fi(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(gr(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const sg={__init__:["keyboard","keyboardBindings"],keyboard:["type",zn],keyboardBindings:["type",pl]};var wF={moveSpeed:50,moveSpeedAccelerated:200};function L1(e,t,n){var i=this;this._config=Y({},wF,e||{}),t.addListener(r);function r(a){var o=a.keyEvent,s=i._config;if(!!t.isCmd(o)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var c=t.isShift(o)?s.moveSpeedAccelerated:s.moveSpeed,u;switch(o.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return i.moveCanvas({speed:c,direction:u}),!0}}this.moveCanvas=function(a){var o=0,s=0,c=a.speed,u=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":o=u;break;case"up":s=u;break;case"right":o=-u;break;case"down":s=-u;break}n.scroll({dx:o,dy:s})}}L1.$inject=["config.keyboardMove","keyboard","canvas"];const $1={__depends__:[sg],__init__:["keyboardMove"],keyboardMove:["type",L1]};var SF=/^djs-cursor-.*$/;function Xd(e){var t=Wt(document.body);t.removeMatching(SF),e&&t.add("djs-cursor-"+e)}function z1(){Xd(null)}var CF=5e3;function F1(e,t){t=t||"element.click";function n(){return!1}return e.once(t,CF,n),function(){e.off(t,n)}}function hc(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function jr(e,t){return{x:e.x-t.x,y:e.y-t.y}}var TF=15;function H1(e,t){var n;e.on("element.mousedown",500,function(o){return a(o.originalEvent)});function i(o){var s=n.start,c=n.button,u=io(o),d=jr(u,s);if(!n.dragging&&PF(d)>TF&&(n.dragging=!0,c===0&&F1(e),Xd("grab")),n.dragging){var f=n.last||n.start;d=jr(u,f),t.scroll({dx:d.x,dy:d.y}),n.last=u}o.preventDefault()}function r(o){Ie.unbind(document,"mousemove",i),Ie.unbind(document,"mouseup",r),n=null,z1()}function a(o){if(!qo(o.target,".djs-draggable")){var s=o.button;if(!(s>=2||o.ctrlKey||o.shiftKey||o.altKey))return n={button:s,start:io(o)},Ie.bind(document,"mousemove",i),Ie.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}H1.$inject=["eventBus","canvas"];function PF(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const j1={__init__:["moveCanvas"],moveCanvas:["type",H1]};function iv(e){return Math.log(e)/Math.log(10)}function V1(e,t){var n=iv(e.min),i=iv(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function AF(e,t){return Math.max(e.min,Math.min(e.max,t))}var RF=Math.sign||function(e){return e>=0?1:-1},lg={min:.2,max:4},U1=10,MF=.1,DF=.75;function Zr(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=ai(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||DF;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}Zr.$inject=["config.zoomScroll","eventBus","canvas"];Zr.prototype.scroll=function(t){this._canvas.scroll(t)};Zr.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Zr.prototype.zoom=function(t,n){var i=V1(lg,U1*2);this._totalDelta+=t,Math.abs(this._totalDelta)>MF&&(this._zoom(t,n,i),this._totalDelta=0)};Zr.prototype._handleWheel=function(t){if(!qo(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey,r=t.shiftKey,a=-1*this._scale,o;if(i?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,i){var s=n.getBoundingClientRect(),c={x:t.clientX-s.left,y:t.clientY-s.top};o=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*RF(t.deltaY)*a,this.zoom(o,c)}else r?o={dx:a*t.deltaY,dy:0}:o={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(o)}};Zr.prototype.stepZoom=function(t,n){var i=V1(lg,U1);this._zoom(t,n,i)};Zr.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,a=iv(i.zoom()),o=Math.round(a/n)*n;o+=n*r;var s=Math.pow(10,o);i.zoom(AF(lg,s),t)};Zr.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&Ie[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};Zr.prototype._init=function(e){this.toggle(e)};const W1={__init__:["zoomScroll"],zoomScroll:["type",Zr]};function Ac(e){lo.call(this,e)}Ve.exports(Ac,lo);Ac.prototype._navigationModules=[$1,j1,W1];Ac.prototype._modules=[].concat(lo.prototype._modules,Ac.prototype._navigationModules);var G1={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,i,r){var a=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),s="function",c=Math.round,u=Math.abs,d=Date.now;function f(A,k,V){return setTimeout(T(A,V),k)}function m(A,k,V){return Array.isArray(A)?(v(A,V[k],V),!0):!1}function v(A,k,V){var ne;if(!!A)if(A.forEach)A.forEach(k,V);else if(A.length!==r)for(ne=0;ne<A.length;)k.call(V,A[ne],ne,A),ne++;else for(ne in A)A.hasOwnProperty(ne)&&k.call(V,A[ne],ne,A)}function g(A,k,V){var ne="DEPRECATED METHOD: "+k+`
`+V+` AT 
`;return function(){var ge=new Error("get-stack-trace"),Re=ge&&ge.stack?ge.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",vt=t.console&&(t.console.warn||t.console.log);return vt&&vt.call(t.console,ne,Re),A.apply(this,arguments)}}var y;typeof Object.assign!="function"?y=function(k){if(k===r||k===null)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(k),ne=1;ne<arguments.length;ne++){var ge=arguments[ne];if(ge!==r&&ge!==null)for(var Re in ge)ge.hasOwnProperty(Re)&&(V[Re]=ge[Re])}return V}:y=Object.assign;var E=g(function(k,V,ne){for(var ge=Object.keys(V),Re=0;Re<ge.length;)(!ne||ne&&k[ge[Re]]===r)&&(k[ge[Re]]=V[ge[Re]]),Re++;return k},"extend","Use `assign`."),N=g(function(k,V){return E(k,V,!0)},"merge","Use `assign`.");function O(A,k,V){var ne=k.prototype,ge;ge=A.prototype=Object.create(ne),ge.constructor=A,ge._super=ne,V&&y(ge,V)}function T(A,k){return function(){return A.apply(k,arguments)}}function w(A,k){return typeof A==s?A.apply(k&&k[0]||r,k):A}function R(A,k){return A===r?k:A}function L(A,k,V){v(Q(k),function(ne){A.addEventListener(ne,V,!1)})}function H(A,k,V){v(Q(k),function(ne){A.removeEventListener(ne,V,!1)})}function $(A,k){for(;A;){if(A==k)return!0;A=A.parentNode}return!1}function W(A,k){return A.indexOf(k)>-1}function Q(A){return A.trim().split(/\s+/g)}function pe(A,k,V){if(A.indexOf&&!V)return A.indexOf(k);for(var ne=0;ne<A.length;){if(V&&A[ne][V]==k||!V&&A[ne]===k)return ne;ne++}return-1}function oe(A){return Array.prototype.slice.call(A,0)}function be(A,k,V){for(var ne=[],ge=[],Re=0;Re<A.length;){var vt=k?A[Re][k]:A[Re];pe(ge,vt)<0&&ne.push(A[Re]),ge[Re]=vt,Re++}return V&&(k?ne=ne.sort(function(wn,On){return wn[k]>On[k]}):ne=ne.sort()),ne}function ke(A,k){for(var V,ne,ge=k[0].toUpperCase()+k.slice(1),Re=0;Re<a.length;){if(V=a[Re],ne=V?V+ge:k,ne in A)return ne;Re++}return r}var Yt=1;function re(){return Yt++}function ce(A){var k=A.ownerDocument||A;return k.defaultView||k.parentWindow||t}var B=/mobile|tablet|ip(ad|hone|od)|android/i,b="ontouchstart"in t,z=ke(t,"PointerEvent")!==r,K=b&&B.test(navigator.userAgent),se="touch",Z="pen",ee="mouse",me="kinect",qe=25,Je=1,St=2,tt=4,ut=8,Xt=1,Ht=2,wt=4,ot=8,nn=16,gn=Ht|wt,Ae=ot|nn,Bt=gn|Ae,Mt=["x","y"],Me=["clientX","clientY"];function Tt(A,k){var V=this;this.manager=A,this.callback=k,this.element=A.element,this.target=A.options.inputTarget,this.domHandler=function(ne){w(A.options.enable,[A])&&V.handler(ne)},this.init()}Tt.prototype={handler:function(){},init:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(ce(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&H(this.element,this.evEl,this.domHandler),this.evTarget&&H(this.target,this.evTarget,this.domHandler),this.evWin&&H(ce(this.element),this.evWin,this.domHandler)}};function Dn(A){var k,V=A.options.inputClass;return V?k=V:z?k=Cl:K?k=Ia:b?k=Al:k=rs,new k(A,ln)}function ln(A,k,V){var ne=V.pointers.length,ge=V.changedPointers.length,Re=k&Je&&ne-ge===0,vt=k&(tt|ut)&&ne-ge===0;V.isFirst=!!Re,V.isFinal=!!vt,Re&&(A.session={}),V.eventType=k,Be(A,V),A.emit("hammer.input",V),A.recognize(V),A.session.prevInput=V}function Be(A,k){var V=A.session,ne=k.pointers,ge=ne.length;V.firstInput||(V.firstInput=it(k)),ge>1&&!V.firstMultiple?V.firstMultiple=it(k):ge===1&&(V.firstMultiple=!1);var Re=V.firstInput,vt=V.firstMultiple,yn=vt?vt.center:Re.center,wn=k.center=_t(ne);k.timeStamp=d(),k.deltaTime=k.timeStamp-Re.timeStamp,k.angle=ea(yn,wn),k.distance=Sr(yn,wn),de(V,k),k.offsetDirection=Kn(k.deltaX,k.deltaY);var On=rn(k.deltaTime,k.deltaX,k.deltaY);k.overallVelocityX=On.x,k.overallVelocityY=On.y,k.overallVelocity=u(On.x)>u(On.y)?On.x:On.y,k.scale=vt?_l(vt.pointers,ne):1,k.rotation=vt?yl(vt.pointers,ne):0,k.maxPointers=V.prevInput?k.pointers.length>V.prevInput.maxPointers?k.pointers.length:V.prevInput.maxPointers:k.pointers.length,We(V,k);var qi=A.element;$(k.srcEvent.target,qi)&&(qi=k.srcEvent.target),k.target=qi}function de(A,k){var V=k.center,ne=A.offsetDelta||{},ge=A.prevDelta||{},Re=A.prevInput||{};(k.eventType===Je||Re.eventType===tt)&&(ge=A.prevDelta={x:Re.deltaX||0,y:Re.deltaY||0},ne=A.offsetDelta={x:V.x,y:V.y}),k.deltaX=ge.x+(V.x-ne.x),k.deltaY=ge.y+(V.y-ne.y)}function We(A,k){var V=A.lastInterval||k,ne=k.timeStamp-V.timeStamp,ge,Re,vt,yn;if(k.eventType!=ut&&(ne>qe||V.velocity===r)){var wn=k.deltaX-V.deltaX,On=k.deltaY-V.deltaY,qi=rn(ne,wn,On);Re=qi.x,vt=qi.y,ge=u(qi.x)>u(qi.y)?qi.x:qi.y,yn=Kn(wn,On),A.lastInterval=k}else ge=V.velocity,Re=V.velocityX,vt=V.velocityY,yn=V.direction;k.velocity=ge,k.velocityX=Re,k.velocityY=vt,k.direction=yn}function it(A){for(var k=[],V=0;V<A.pointers.length;)k[V]={clientX:c(A.pointers[V].clientX),clientY:c(A.pointers[V].clientY)},V++;return{timeStamp:d(),pointers:k,center:_t(k),deltaX:A.deltaX,deltaY:A.deltaY}}function _t(A){var k=A.length;if(k===1)return{x:c(A[0].clientX),y:c(A[0].clientY)};for(var V=0,ne=0,ge=0;ge<k;)V+=A[ge].clientX,ne+=A[ge].clientY,ge++;return{x:c(V/k),y:c(ne/k)}}function rn(A,k,V){return{x:k/A||0,y:V/A||0}}function Kn(A,k){return A===k?Xt:u(A)>=u(k)?A<0?Ht:wt:k<0?ot:nn}function Sr(A,k,V){V||(V=Mt);var ne=k[V[0]]-A[V[0]],ge=k[V[1]]-A[V[1]];return Math.sqrt(ne*ne+ge*ge)}function ea(A,k,V){V||(V=Mt);var ne=k[V[0]]-A[V[0]],ge=k[V[1]]-A[V[1]];return Math.atan2(ge,ne)*180/Math.PI}function yl(A,k){return ea(k[1],k[0],Me)+ea(A[1],A[0],Me)}function _l(A,k){return Sr(k[0],k[1],Me)/Sr(A[0],A[1],Me)}var xl={mousedown:Je,mousemove:St,mouseup:tt},bl="mousedown",El="mousemove mouseup";function rs(){this.evEl=bl,this.evWin=El,this.pressed=!1,Tt.apply(this,arguments)}O(rs,Tt,{handler:function(k){var V=xl[k.type];V&Je&&k.button===0&&(this.pressed=!0),V&St&&k.which!==1&&(V=tt),this.pressed&&(V&tt&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[k],changedPointers:[k],pointerType:ee,srcEvent:k}))}});var Bf={pointerdown:Je,pointermove:St,pointerup:tt,pointercancel:ut,pointerout:ut},Lf={2:se,3:Z,4:ee,5:me},wl="pointerdown",Sl="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(wl="MSPointerDown",Sl="MSPointerMove MSPointerUp MSPointerCancel");function Cl(){this.evEl=wl,this.evWin=Sl,Tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}O(Cl,Tt,{handler:function(k){var V=this.store,ne=!1,ge=k.type.toLowerCase().replace("ms",""),Re=Bf[ge],vt=Lf[k.pointerType]||k.pointerType,yn=vt==se,wn=pe(V,k.pointerId,"pointerId");Re&Je&&(k.button===0||yn)?wn<0&&(V.push(k),wn=V.length-1):Re&(tt|ut)&&(ne=!0),!(wn<0)&&(V[wn]=k,this.callback(this.manager,Re,{pointers:V,changedPointers:[k],pointerType:vt,srcEvent:k}),ne&&V.splice(wn,1))}});var $f={touchstart:Je,touchmove:St,touchend:tt,touchcancel:ut},zf="touchstart",Ff="touchstart touchmove touchend touchcancel";function Tl(){this.evTarget=zf,this.evWin=Ff,this.started=!1,Tt.apply(this,arguments)}O(Tl,Tt,{handler:function(k){var V=$f[k.type];if(V===Je&&(this.started=!0),!!this.started){var ne=Hf.call(this,k,V);V&(tt|ut)&&ne[0].length-ne[1].length===0&&(this.started=!1),this.callback(this.manager,V,{pointers:ne[0],changedPointers:ne[1],pointerType:se,srcEvent:k})}}});function Hf(A,k){var V=oe(A.touches),ne=oe(A.changedTouches);return k&(tt|ut)&&(V=be(V.concat(ne),"identifier",!0)),[V,ne]}var jf={touchstart:Je,touchmove:St,touchend:tt,touchcancel:ut},Vf="touchstart touchmove touchend touchcancel";function Ia(){this.evTarget=Vf,this.targetIds={},Tt.apply(this,arguments)}O(Ia,Tt,{handler:function(k){var V=jf[k.type],ne=Uf.call(this,k,V);!ne||this.callback(this.manager,V,{pointers:ne[0],changedPointers:ne[1],pointerType:se,srcEvent:k})}});function Uf(A,k){var V=oe(A.touches),ne=this.targetIds;if(k&(Je|St)&&V.length===1)return ne[V[0].identifier]=!0,[V,V];var ge,Re,vt=oe(A.changedTouches),yn=[],wn=this.target;if(Re=V.filter(function(On){return $(On.target,wn)}),k===Je)for(ge=0;ge<Re.length;)ne[Re[ge].identifier]=!0,ge++;for(ge=0;ge<vt.length;)ne[vt[ge].identifier]&&yn.push(vt[ge]),k&(tt|ut)&&delete ne[vt[ge].identifier],ge++;if(!!yn.length)return[be(Re.concat(yn),"identifier",!0),yn]}var Pl=2500,yu=25;function Al(){Tt.apply(this,arguments);var A=T(this.handler,this);this.touch=new Ia(this.manager,A),this.mouse=new rs(this.manager,A),this.primaryTouch=null,this.lastTouches=[]}O(Al,Tt,{handler:function(k,V,ne){var ge=ne.pointerType==se,Re=ne.pointerType==ee;if(!(Re&&ne.sourceCapabilities&&ne.sourceCapabilities.firesTouchEvents)){if(ge)Wf.call(this,V,ne);else if(Re&&Gf.call(this,ne))return;this.callback(k,V,ne)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wf(A,k){A&Je?(this.primaryTouch=k.changedPointers[0].identifier,_u.call(this,k)):A&(tt|ut)&&_u.call(this,k)}function _u(A){var k=A.changedPointers[0];if(k.identifier===this.primaryTouch){var V={x:k.clientX,y:k.clientY};this.lastTouches.push(V);var ne=this.lastTouches,ge=function(){var Re=ne.indexOf(V);Re>-1&&ne.splice(Re,1)};setTimeout(ge,Pl)}}function Gf(A){for(var k=A.srcEvent.clientX,V=A.srcEvent.clientY,ne=0;ne<this.lastTouches.length;ne++){var ge=this.lastTouches[ne],Re=Math.abs(k-ge.x),vt=Math.abs(V-ge.y);if(Re<=yu&&vt<=yu)return!0}return!1}var xu=ke(o.style,"touchAction"),bu=xu!==r,Eu="compute",Rl="auto",Ml="manipulation",ta="none",_o="pan-x",xo="pan-y",as=qf();function Dl(A,k){this.manager=A,this.set(k)}Dl.prototype={set:function(A){A==Eu&&(A=this.compute()),bu&&this.manager.element.style&&as[A]&&(this.manager.element.style[xu]=A),this.actions=A.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var A=[];return v(this.manager.recognizers,function(k){w(k.options.enable,[k])&&(A=A.concat(k.getTouchAction()))}),os(A.join(" "))},preventDefaults:function(A){var k=A.srcEvent,V=A.offsetDirection;if(this.manager.session.prevented){k.preventDefault();return}var ne=this.actions,ge=W(ne,ta)&&!as[ta],Re=W(ne,xo)&&!as[xo],vt=W(ne,_o)&&!as[_o];if(ge){var yn=A.pointers.length===1,wn=A.distance<2,On=A.deltaTime<250;if(yn&&wn&&On)return}if(!(vt&&Re)&&(ge||Re&&V&gn||vt&&V&Ae))return this.preventSrc(k)},preventSrc:function(A){this.manager.session.prevented=!0,A.preventDefault()}};function os(A){if(W(A,ta))return ta;var k=W(A,_o),V=W(A,xo);return k&&V?ta:k||V?k?_o:xo:W(A,Ml)?Ml:Rl}function qf(){if(!bu)return!1;var A={},k=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(V){A[V]=k?t.CSS.supports("touch-action",V):!0}),A}var na=1,di=2,Na=4,Cr=8,Wi=Cr,ka=16,Mi=32;function pr(A){this.options=y({},this.defaults,A||{}),this.id=re(),this.manager=null,this.options.enable=R(this.options.enable,!0),this.state=na,this.simultaneous={},this.requireFail=[]}pr.prototype={defaults:{},set:function(A){return y(this.options,A),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(A){if(m(A,"recognizeWith",this))return this;var k=this.simultaneous;return A=ss(A,this),k[A.id]||(k[A.id]=A,A.recognizeWith(this)),this},dropRecognizeWith:function(A){return m(A,"dropRecognizeWith",this)?this:(A=ss(A,this),delete this.simultaneous[A.id],this)},requireFailure:function(A){if(m(A,"requireFailure",this))return this;var k=this.requireFail;return A=ss(A,this),pe(k,A)===-1&&(k.push(A),A.requireFailure(this)),this},dropRequireFailure:function(A){if(m(A,"dropRequireFailure",this))return this;A=ss(A,this);var k=pe(this.requireFail,A);return k>-1&&this.requireFail.splice(k,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(A){return!!this.simultaneous[A.id]},emit:function(A){var k=this,V=this.state;function ne(ge){k.manager.emit(ge,A)}V<Cr&&ne(k.options.event+wu(V)),ne(k.options.event),A.additionalEvent&&ne(A.additionalEvent),V>=Cr&&ne(k.options.event+wu(V))},tryEmit:function(A){if(this.canEmit())return this.emit(A);this.state=Mi},canEmit:function(){for(var A=0;A<this.requireFail.length;){if(!(this.requireFail[A].state&(Mi|na)))return!1;A++}return!0},recognize:function(A){var k=y({},A);if(!w(this.options.enable,[this,k])){this.reset(),this.state=Mi;return}this.state&(Wi|ka|Mi)&&(this.state=na),this.state=this.process(k),this.state&(di|Na|Cr|ka)&&this.tryEmit(k)},process:function(A){},getTouchAction:function(){},reset:function(){}};function wu(A){return A&ka?"cancel":A&Cr?"end":A&Na?"move":A&di?"start":""}function Su(A){return A==nn?"down":A==ot?"up":A==Ht?"left":A==wt?"right":""}function ss(A,k){var V=k.manager;return V?V.get(A):A}function fi(){pr.apply(this,arguments)}O(fi,pr,{defaults:{pointers:1},attrTest:function(A){var k=this.options.pointers;return k===0||A.pointers.length===k},process:function(A){var k=this.state,V=A.eventType,ne=k&(di|Na),ge=this.attrTest(A);return ne&&(V&ut||!ge)?k|ka:ne||ge?V&tt?k|Cr:k&di?k|Na:di:Mi}});function bo(){fi.apply(this,arguments),this.pX=null,this.pY=null}O(bo,fi,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bt},getTouchAction:function(){var A=this.options.direction,k=[];return A&gn&&k.push(xo),A&Ae&&k.push(_o),k},directionTest:function(A){var k=this.options,V=!0,ne=A.distance,ge=A.direction,Re=A.deltaX,vt=A.deltaY;return ge&k.direction||(k.direction&gn?(ge=Re===0?Xt:Re<0?Ht:wt,V=Re!=this.pX,ne=Math.abs(A.deltaX)):(ge=vt===0?Xt:vt<0?ot:nn,V=vt!=this.pY,ne=Math.abs(A.deltaY))),A.direction=ge,V&&ne>k.threshold&&ge&k.direction},attrTest:function(A){return fi.prototype.attrTest.call(this,A)&&(this.state&di||!(this.state&di)&&this.directionTest(A))},emit:function(A){this.pX=A.deltaX,this.pY=A.deltaY;var k=Su(A.direction);k&&(A.additionalEvent=this.options.event+k),this._super.emit.call(this,A)}});function ls(){fi.apply(this,arguments)}O(ls,fi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ta]},attrTest:function(A){return this._super.attrTest.call(this,A)&&(Math.abs(A.scale-1)>this.options.threshold||this.state&di)},emit:function(A){if(A.scale!==1){var k=A.scale<1?"in":"out";A.additionalEvent=this.options.event+k}this._super.emit.call(this,A)}});function Eo(){pr.apply(this,arguments),this._timer=null,this._input=null}O(Eo,pr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Rl]},process:function(A){var k=this.options,V=A.pointers.length===k.pointers,ne=A.distance<k.threshold,ge=A.deltaTime>k.time;if(this._input=A,!ne||!V||A.eventType&(tt|ut)&&!ge)this.reset();else if(A.eventType&Je)this.reset(),this._timer=f(function(){this.state=Wi,this.tryEmit()},k.time,this);else if(A.eventType&tt)return Wi;return Mi},reset:function(){clearTimeout(this._timer)},emit:function(A){this.state===Wi&&(A&&A.eventType&tt?this.manager.emit(this.options.event+"up",A):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function Ol(){fi.apply(this,arguments)}O(Ol,fi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ta]},attrTest:function(A){return this._super.attrTest.call(this,A)&&(Math.abs(A.rotation)>this.options.threshold||this.state&di)}});function cs(){fi.apply(this,arguments)}O(cs,fi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:gn|Ae,pointers:1},getTouchAction:function(){return bo.prototype.getTouchAction.call(this)},attrTest:function(A){var k=this.options.direction,V;return k&(gn|Ae)?V=A.overallVelocity:k&gn?V=A.overallVelocityX:k&Ae&&(V=A.overallVelocityY),this._super.attrTest.call(this,A)&&k&A.offsetDirection&&A.distance>this.options.threshold&&A.maxPointers==this.options.pointers&&u(V)>this.options.velocity&&A.eventType&tt},emit:function(A){var k=Su(A.offsetDirection);k&&this.manager.emit(this.options.event+k,A),this.manager.emit(this.options.event,A)}});function ia(){pr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}O(ia,pr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ml]},process:function(A){var k=this.options,V=A.pointers.length===k.pointers,ne=A.distance<k.threshold,ge=A.deltaTime<k.time;if(this.reset(),A.eventType&Je&&this.count===0)return this.failTimeout();if(ne&&ge&&V){if(A.eventType!=tt)return this.failTimeout();var Re=this.pTime?A.timeStamp-this.pTime<k.interval:!0,vt=!this.pCenter||Sr(this.pCenter,A.center)<k.posThreshold;this.pTime=A.timeStamp,this.pCenter=A.center,!vt||!Re?this.count=1:this.count+=1,this._input=A;var yn=this.count%k.taps;if(yn===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Wi,this.tryEmit()},k.interval,this),di):Wi}return Mi},failTimeout:function(){return this._timer=f(function(){this.state=Mi},this.options.interval,this),Mi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Wi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Gi(A,k){return k=k||{},k.recognizers=R(k.recognizers,Gi.defaults.preset),new us(A,k)}Gi.VERSION="2.0.7",Gi.defaults={domEvents:!1,touchAction:Eu,enable:!0,inputTarget:null,inputClass:null,preset:[[Ol,{enable:!1}],[ls,{enable:!1},["rotate"]],[cs,{direction:gn}],[bo,{direction:gn},["swipe"]],[ia],[ia,{event:"doubletap",taps:2},["tap"]],[Eo]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Kf=1,Il=2;function us(A,k){this.options=y({},Gi.defaults,k||{}),this.options.inputTarget=this.options.inputTarget||A,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=A,this.input=Dn(this),this.touchAction=new Dl(this,this.options.touchAction),ps(this,!0),v(this.options.recognizers,function(V){var ne=this.add(new V[0](V[1]));V[2]&&ne.recognizeWith(V[2]),V[3]&&ne.requireFailure(V[3])},this)}us.prototype={set:function(A){return y(this.options,A),A.touchAction&&this.touchAction.update(),A.inputTarget&&(this.input.destroy(),this.input.target=A.inputTarget,this.input.init()),this},stop:function(A){this.session.stopped=A?Il:Kf},recognize:function(A){var k=this.session;if(!k.stopped){this.touchAction.preventDefaults(A);var V,ne=this.recognizers,ge=k.curRecognizer;(!ge||ge&&ge.state&Wi)&&(ge=k.curRecognizer=null);for(var Re=0;Re<ne.length;)V=ne[Re],k.stopped!==Il&&(!ge||V==ge||V.canRecognizeWith(ge))?V.recognize(A):V.reset(),!ge&&V.state&(di|Na|Cr)&&(ge=k.curRecognizer=V),Re++}},get:function(A){if(A instanceof pr)return A;for(var k=this.recognizers,V=0;V<k.length;V++)if(k[V].options.event==A)return k[V];return null},add:function(A){if(m(A,"add",this))return this;var k=this.get(A.options.event);return k&&this.remove(k),this.recognizers.push(A),A.manager=this,this.touchAction.update(),A},remove:function(A){if(m(A,"remove",this))return this;if(A=this.get(A),A){var k=this.recognizers,V=pe(k,A);V!==-1&&(k.splice(V,1),this.touchAction.update())}return this},on:function(A,k){if(A!==r&&k!==r){var V=this.handlers;return v(Q(A),function(ne){V[ne]=V[ne]||[],V[ne].push(k)}),this}},off:function(A,k){if(A!==r){var V=this.handlers;return v(Q(A),function(ne){k?V[ne]&&V[ne].splice(pe(V[ne],k),1):delete V[ne]}),this}},emit:function(A,k){this.options.domEvents&&Yf(A,k);var V=this.handlers[A]&&this.handlers[A].slice();if(!(!V||!V.length)){k.type=A,k.preventDefault=function(){k.srcEvent.preventDefault()};for(var ne=0;ne<V.length;)V[ne](k),ne++}},destroy:function(){this.element&&ps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ps(A,k){var V=A.element;if(!!V.style){var ne;v(A.options.cssProps,function(ge,Re){ne=ke(V.style,Re),k?(A.oldCssProps[ne]=V.style[ne],V.style[ne]=ge):V.style[ne]=A.oldCssProps[ne]||""}),k||(A.oldCssProps={})}}function Yf(A,k){var V=n.createEvent("Event");V.initEvent(A,!0,!0),V.gesture=k,k.target.dispatchEvent(V)}y(Gi,{INPUT_START:Je,INPUT_MOVE:St,INPUT_END:tt,INPUT_CANCEL:ut,STATE_POSSIBLE:na,STATE_BEGAN:di,STATE_CHANGED:Na,STATE_ENDED:Cr,STATE_RECOGNIZED:Wi,STATE_CANCELLED:ka,STATE_FAILED:Mi,DIRECTION_NONE:Xt,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:wt,DIRECTION_UP:ot,DIRECTION_DOWN:nn,DIRECTION_HORIZONTAL:gn,DIRECTION_VERTICAL:Ae,DIRECTION_ALL:Bt,Manager:us,Input:Tt,TouchAction:Dl,TouchInput:Ia,MouseInput:rs,PointerEventInput:Cl,TouchMouseInput:Al,SingleTouchInput:Tl,Recognizer:pr,AttrRecognizer:fi,Tap:ia,Pan:bo,Swipe:cs,Pinch:ls,Rotate:Ol,Press:Eo,on:L,off:H,each:v,merge:N,extend:E,assign:y,inherit:O,bindFn:T,prefixed:ke});var Cu=typeof t<"u"?t:typeof self<"u"?self:{};Cu.Hammer=Gi,typeof r=="function"&&r.amd?r(function(){return Gi}):e.exports?e.exports=Gi:t[i]=Gi})(window,document,"Hammer")})(G1);const Io=G1.exports;var OF=.2,IF=4,Tb=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function gp(e,t){return t.get(e,!1)}function rv(e){e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.srcEvent&&typeof e.srcEvent.stopPropagation=="function"&&e.srcEvent.stopPropagation(),typeof e.stopImmediatePropagation=="function"&&e.stopImmediatePropagation()}function dm(e){function t(u){G(Tb,function(d){Ie.bind(e,d,rv,!0)})}function n(u){setTimeout(function(){G(Tb,function(d){Ie.unbind(e,d,rv,!0)})},500)}Ie.bind(e,"touchstart",t,!0),Ie.bind(e,"touchend",n,!0),Ie.bind(e,"touchcancel",n,!0);var i=new Io.Manager(e,{inputClass:Io.TouchInput,recognizers:[],domEvents:!0}),r=new Io.Tap,a=new Io.Pan({threshold:10}),o=new Io.Press,s=new Io.Pinch,c=new Io.Tap({event:"doubletap",taps:2});return s.requireFailure(a),s.requireFailure(o),i.add([a,o,s,c,r]),i.reset=function(u){var d=this.recognizers,f=this.session;f.stopped||(i.stop(u),setTimeout(function(){var m,v;for(m=0;v=d[m];m++)v.reset(),v.state=8;f.curRecognizer=null},0))},i.on("hammer.input",function(u){u.srcEvent.defaultPrevented&&i.reset(!0)}),i}function q1(e,t,n,i,r){var a=gp("dragging",e),o=gp("move",e),s=gp("contextPad",e),c=gp("palette",e),u;function d(v,g){return function(y){var E=f(y.target),N=E&&i.get(E);return g&&(y.srcEvent.button=g),r.fire(v,y,N)}}function f(v){var g=qo(v,"svg, .djs-element",!0);return g}function m(v){u=dm(v);function g(N){var O=0,T=0;function w(L){var H=L.deltaX-O,$=L.deltaY-T;t.scroll({dx:H,dy:$}),O=L.deltaX,T=L.deltaY}function R(L){u.off("panmove",w),u.off("panend",R),u.off("pancancel",R)}u.on("panmove",w),u.on("panend",R),u.on("pancancel",R)}function y(N){var O=f(N.target),T=O&&i.get(O);if(o&&t.getRootElement()!==T)return o.start(N,T,!0);g()}function E(N){var O=t.zoom(),T=N.center;function w(L){var H=1-(1-L.scale)/1.5,$=Math.max(OF,Math.min(IF,H*O));t.zoom($,T),rv(L)}function R(L){u.off("pinchmove",w),u.off("pinchend",R),u.off("pinchcancel",R),u.reset(!0)}u.on("pinchmove",w),u.on("pinchend",R),u.on("pinchcancel",R)}u.on("tap",d("element.click")),u.on("doubletap",d("element.dblclick",1)),u.on("panstart",y),u.on("press",y),u.on("pinchstart",E)}a&&n.on("drag.move",function(v){var g=v.originalEvent;if(!(!g||g instanceof MouseEvent)){var y=io(g),E=document.elementFromPoint(y.x,y.y),N=f(E),O=N&&i.get(N);O!==v.hover&&(v.hover&&a.out(v),O&&(a.hover({element:O,gfx:N}),v.hover=O,v.hoverGfx=N))}}),s&&n.on("contextPad.create",function(v){var g=v.pad.html,y=dm(g);y.on("panstart",function(E){s.trigger("dragstart",E,!0)}),y.on("press",function(E){s.trigger("dragstart",E,!0)}),y.on("tap",function(E){s.trigger("click",E)})}),c&&n.on("palette.create",function(v){var g=v.container,y=dm(g);y.on("panstart",function(E){c.trigger("dragstart",E,!0)}),y.on("press",function(E){c.trigger("dragstart",E,!0)}),y.on("tap",function(E){c.trigger("click",E)})}),n.on("canvas.init",function(v){m(v.svg)})}q1.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];function cg(e,t){var n=this;t.on("canvas.init",function(i){n.addBBoxMarker(i.svg)})}cg.$inject=["canvas","eventBus"];cg.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=Le("rect");ve(n,{x:-1e4,y:1e4,width:10,height:10}),ve(n,t),Ye(e,n);var i=Le("rect");ve(i,{x:1e4,y:1e4,width:10,height:10}),ve(i,t),Ye(e,i)};const NF={__depends__:[Kc],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",q1],touchFix:["type",cg]},kF={__depends__:[NF]};function fm(e){return e&&e[e.length-1]}function Pb(e){return e.y}function Ab(e){return e.x}var BF={left:Ab,center:Ab,right:function(e){return e.x+e.width},top:Pb,middle:Pb,bottom:function(e){return e.y+e.height}};function dl(e){this._modeling=e}dl.$inject=["modeling"];dl.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};dl.prototype._isType=function(e,t){return t.indexOf(e)!==-1};dl.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,a={},o={},s=!1,c,u,d;function f(m,v){return Math.round((m[i]+v[i]+v[r])/2)}if(this._isType(e,["left","top"]))a[e]=t[0][i];else if(this._isType(e,["right","bottom"]))d=fm(t),a[e]=d[i]+d[r];else if(this._isType(e,["center","middle"])){if(G(t,function(m){var v=m[i]+Math.round(m[r]/2);o[v]?o[v].elements.push(m):o[v]={elements:[m],center:v}}),c=_r(o,function(m){return m.elements.length>1&&(s=!0),m.elements.length}),s)return a[e]=fm(c).center,a;u=t[0],t=_r(t,function(m){return m[i]+m[r]}),d=fm(t),a[e]=f(u,d)}return a};dl.prototype.trigger=function(e,t){var n=this._modeling,i=st(e,function(s){return!(s.waypoints||s.host||s.labelTarget)});if(!(i.length<2)){var r=BF[t],a=_r(i,r),o=this._alignmentPosition(t,a);n.alignElements(a,o)}};const LF={__init__:["alignElements"],alignElements:["type",dl]};var $F=10,K1=50,zF=250;function ug(e,t,n,i){for(var r;r=FF(e,n,t);)n=i(t,n,r);return n}function pg(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(a){var o=e[a];if(!!o){var s=a==="x"?"width":"height",c=o.margin,u=o.minDistance;c<0?r[a]=Math.min(i[a]+c-t[s]/2,n[a]-u+c):r[a]=Math.max(i[a]+i[s]+c+t[s]/2,n[a]+u+c)}}),r}}function FF(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=jF(e);return Dt(r,function(a){if(a===n)return!1;var o=Wn(a,i,$F);return o==="intersect"})}function HF(e,t){t||(t={});function n(g){return g.source===e?1:-1}var i=t.defaultDistance||K1,r=t.direction||"e",a=t.filter,o=t.getWeight||n,s=t.maxDistance||zF,c=t.reference||"start";a||(a=WF);function u(g,y){return r==="n"?c==="start"?Ke(g).top-Ke(y).bottom:c==="center"?Ke(g).top-dt(y).y:Ke(g).top-Ke(y).top:r==="w"?c==="start"?Ke(g).left-Ke(y).right:c==="center"?Ke(g).left-dt(y).x:Ke(g).left-Ke(y).left:r==="s"?c==="start"?Ke(y).top-Ke(g).bottom:c==="center"?dt(y).y-Ke(g).bottom:Ke(y).bottom-Ke(g).bottom:c==="start"?Ke(y).left-Ke(g).right:c==="center"?dt(y).x-Ke(g).right:Ke(y).right-Ke(g).right}var d=e.incoming.filter(a).map(function(g){var y=o(g),E=y<0?u(g.source,e):u(e,g.source);return{id:g.source.id,distance:E,weight:y}}),f=e.outgoing.filter(a).map(function(g){var y=o(g),E=y>0?u(e,g.target):u(g.target,e);return{id:g.target.id,distance:E,weight:y}}),m=d.concat(f).reduce(function(g,y){return g[y.id+"__weight_"+y.weight]=y,g},{}),v=ji(m,function(g,y){var E=y.distance,N=y.weight;return E<0||E>s||(g[String(E)]||(g[String(E)]=0),g[String(E)]+=1*N,(!g.distance||g[g.distance]<g[String(E)])&&(g.distance=E)),g},{});return v.distance||i}function jF(e){var t=hm(e);return e.host&&(t=t.concat(hm(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(hm(i))},[]))),t}function hm(e){return UF(e).concat(VF(e))}function VF(e){return e.incoming.map(function(t){return t.source})}function UF(e){return e.outgoing.map(function(t){return t.target})}function WF(){return!0}var GF=100;function Y1(e,t,n){e.on("autoPlace",GF,function(i){var r=i.shape,a=i.source;return qF(a,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,a){e.fire("autoPlace.start",{source:i,shape:r});var o=e.fire("autoPlace",{source:i,shape:r}),s=t.appendShape(i,r,o,i.parent,a);return e.fire("autoPlace.end",{source:i,shape:s}),s}}Y1.$inject=["eventBus","modeling","canvas"];function qF(e,t,n){n||(n={});var i=n.defaultDistance||K1,r=dt(e),a=Ke(e);return{x:a.right+i+t.width/2,y:r.y}}function X1(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}X1.$inject=["eventBus","selection"];const KF={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Y1],autoPlaceSelectionBehavior:["type",X1]};function vd(e,t){for(typeof t=="string"&&(t=[t]);e=e.parent;)if(At(e,t))return e;return null}function Z1(e,t){if(P(t,"bpmn:TextAnnotation"))return ZF(e,t);if(At(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return JF(e,t);if(P(t,"bpmn:FlowNode"))return YF(e,t)}function YF(e,t){var n=Ke(e),i=dt(e),r=HF(e,{filter:function(d){return P(d,"bpmn:SequenceFlow")}}),a=30,o=80,s="left";P(e,"bpmn:BoundaryEvent")&&(s=Wn(e,e.host,-25),s.indexOf("top")!==-1&&(a*=-1));var c={x:n.right+r+t.width/2,y:i.y+XF(s,o)},u={y:{margin:a,minDistance:o}};return ug(e,t,c,pg(u))}function XF(e,t){return e.indexOf("top")!=-1?-1*t:e.indexOf("bottom")!=-1?t:0}function ZF(e,t){var n=Ke(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2},r={y:{margin:-30,minDistance:20}};return ug(e,t,i,pg(r))}function JF(e,t){var n=Ke(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},r={x:{margin:30,minDistance:30}};return ug(e,t,i,pg(r))}function J1(e){e.on("autoPlace",function(t){var n=t.shape,i=t.source;return Z1(i,n)})}J1.$inject=["eventBus"];const QF={__depends__:[KF],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",J1]};var e6=1e3;function Se(e){this._eventBus=e}Se.$inject=["eventBus"];function t6(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}Se.prototype.on=function(e,t,n,i,r,a){if((Qn(t)||rt(t))&&(a=r,r=i,i=n,n=t,t=null),Qn(n)&&(a=r,r=i,i=n,n=e6),kn(r)&&(a=r,r=!1),!Qn(i))throw new Error("handlerFn must be a function");yt(e)||(e=[e]);var o=this._eventBus;G(e,function(s){var c=["commandStack",s,t].filter(function(u){return u}).join(".");o.on(c,n,r?t6(i,a):i,a)})};var n6=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];G(n6,function(e){Se.prototype[e]=function(t,n,i,r,a){(Qn(t)||rt(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}});function Sa(e,t,n,i){Se.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(a){var o=a.context,s=o.hints||{},c=o.shape,u=o.parent||o.newParent;s.autoResize!==!1&&r._expand([c],u)}),this.postExecuted(["elements.move"],function(a){var o=a.context,s=sd($v(o.closure.topLevel)),c=o.hints,u=c?c.autoResize:!0;if(u!==!1){var d=tl(s,function(f){return f.parent.id});G(d,function(f,m){yt(u)&&(f=f.filter(function(v){return Dt(u,yr({id:v.id}))})),r._expand(f,m)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var o=a.context,s=o.hints,c=o.shape;s&&s.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(a){var o=a.context,s=o.hints,c=o.shape,u=c.parent;s&&s.autoResize===!1||u&&r._expand([c],u)})}Sa.$inject=["eventBus","elementRegistry","modeling","rules"];Ve.exports(Sa,Se);Sa.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=Ke(Un(e)),a=Ke(t),o={};return r.top-a.top<i.top&&(o.top=r.top-n.top),r.left-a.left<i.left&&(o.left=r.left-n.left),a.right-r.right<i.right&&(o.right=r.right+n.right),a.bottom-r.bottom<i.bottom&&(o.bottom=r.bottom+n.bottom),Yv(Y({},a,o))};Sa.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(!!n){var i=this._getOptimalBounds(e,t);if(!!i6(i,t)){var r=r6(xr(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var a=t.parent;a&&this._expand([t],a)}}};Sa.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Sa.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Sa.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function i6(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function r6(e,t){var n="";return e=Ke(e),t=Ke(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Zd(e){e.invoke(Sa,this)}Zd.$inject=["injector"];Ve.exports(Zd,Sa);Zd.prototype.resize=function(e,t,n){P(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function co(e){Se.call(this,e),this.init()}co.$inject=["eventBus"];Ve.exports(co,Se);co.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(a,o,s){return n(a)},!0)})};co.prototype.init=function(){};function Xc(e){co.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Xc.$inject=["eventBus"];Ve.exports(Xc,co);Xc.prototype.canResize=function(e,t){return!1};function Jd(e,t){Xc.call(this,e),this._modeling=t}Ve.exports(Jd,Xc);Jd.$inject=["eventBus","modeling"];Jd.prototype.canResize=function(e,t){if(!P(t,"bpmn:Participant")&&!P(t,"bpmn:Lane")&&!P(t,"bpmn:SubProcess"))return!1;var n=!0;return G(e,function(i){if(P(i,"bpmn:Lane")||i.labelTarget){n=!1;return}}),n};const a6={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Zd],bpmnAutoResizeProvider:["type",Jd]};var Rb=1500;function Q1(e,t,n){var i=this,r=n.get("dragging",!1);function a(o){if(!o.hover){var s=o.originalEvent,c=i._findTargetGfx(s),u=c&&e.get(c);c&&u&&(o.stopPropagation(),r.hover({element:u,gfx:c}),r.move(s))}}r&&t.on("drag.start",function(o){t.once("drag.move",Rb,function(s){a(s)})}),function(){var o,s;t.on("element.hover",function(c){o=c.gfx,s=c.element}),t.on("element.hover",Rb,function(c){s&&t.fire("element.out",{element:s,gfx:o})}),t.on("element.out",function(){o=null,s=null})}(),this._findTargetGfx=function(o){var s,c;if(o instanceof MouseEvent)return s=io(o),c=document.elementFromPoint(s.x,s.y),o6(c)}}Q1.$inject=["elementRegistry","eventBus","injector"];function o6(e){return qo(e,"svg, .djs-element",!0)}const s6={__init__:["hoverFix"],hoverFix:["type",Q1]};var Rs=Math.round,Mb="djs-drag-active";function No(e){e.preventDefault()}function l6(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function c6(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function eS(e,t,n,i){var r={threshold:5,trapClick:!0},a;function o(T){var w=t.viewbox(),R=t._container.getBoundingClientRect();return{x:w.x+(T.x-R.left)/w.scale,y:w.y+(T.y-R.top)/w.scale}}function s(T,w){w=w||a;var R=e.createEvent(Y({},w.payload,w.data,{isTouch:w.isTouch}));return e.fire("drag."+T,R)===!1?!1:e.fire(w.prefix+"."+T,R)}function c(T){var w=T.filter(function(R){return i.get(R.id)});w.length&&n.select(w)}function u(T,w){var R=a.payload,L=a.displacement,H=a.globalStart,$=io(T),W=jr($,H),Q=a.localStart,pe=o($),oe=jr(pe,Q);if(!a.active&&(w||c6(W)>a.threshold)){if(Y(R,{x:Rs(Q.x+L.x),y:Rs(Q.y+L.y),dx:0,dy:0},{originalEvent:T}),s("start")===!1)return E();a.active=!0,a.keepSelection||(R.previousSelection=n.get(),n.select(null)),a.cursor&&Xd(a.cursor),t.addMarker(t.getRootElement(),Mb)}pm(T),a.active&&(Y(R,{x:Rs(pe.x+L.x),y:Rs(pe.y+L.y),dx:Rs(oe.x),dy:Rs(oe.y)},{originalEvent:T}),s("move"))}function d(T){var w,R=!0;a.active&&(T&&(a.payload.originalEvent=T,pm(T)),R=s("end")),R===!1&&s("rejected"),w=N(R!==!0),s("ended",w)}function f(T){T.which===27&&(No(T),E())}function m(T){var w;a.active&&(w=F1(e),setTimeout(w,400),No(T)),d(T)}function v(T){u(T)}function g(T){var w=a.payload;w.hoverGfx=T.gfx,w.hover=T.element,s("hover")}function y(T){s("out");var w=a.payload;w.hoverGfx=null,w.hover=null}function E(T){var w;if(!!a){var R=a.active;R&&s("cancel"),w=N(T),R&&s("canceled",w)}}function N(T){var w,R;s("cleanup"),z1(),a.trapClick?R=m:R=d,Ie.unbind(document,"mousemove",u),Ie.unbind(document,"dragstart",No),Ie.unbind(document,"selectstart",No),Ie.unbind(document,"mousedown",R,!0),Ie.unbind(document,"mouseup",R,!0),Ie.unbind(document,"keyup",f),Ie.unbind(document,"touchstart",v,!0),Ie.unbind(document,"touchcancel",E,!0),Ie.unbind(document,"touchmove",u,!0),Ie.unbind(document,"touchend",d,!0),e.off("element.hover",g),e.off("element.out",y),t.removeMarker(t.getRootElement(),Mb);var L=a.payload.previousSelection;return T!==!1&&L&&!n.get().length&&c(L),w=a,a=null,w}function O(T,w,R,L){a&&E(!1),typeof w=="string"&&(L=R,R=w,w=null),L=Y({},r,L||{});var H=L.data||{},$,W,Q,pe,oe;L.trapClick?pe=m:pe=d,T?($=cl(T)||T,W=io(T),pm(T),$.type==="dragstart"&&No($)):($=null,W={x:0,y:0}),Q=o(W),w||(w=Q),oe=l6($),a=Y({prefix:R,data:H,payload:{},globalStart:W,displacement:jr(w,Q),localStart:Q,isTouch:oe},L),L.manual||(oe?(Ie.bind(document,"touchstart",v,!0),Ie.bind(document,"touchcancel",E,!0),Ie.bind(document,"touchmove",u,!0),Ie.bind(document,"touchend",d,!0)):(Ie.bind(document,"mousemove",u),Ie.bind(document,"dragstart",No),Ie.bind(document,"selectstart",No),Ie.bind(document,"mousedown",pe,!0),Ie.bind(document,"mouseup",pe,!0)),Ie.bind(document,"keyup",f),e.on("element.hover",g),e.on("element.out",y)),s("init"),L.autoActivate&&u(T,!0)}e.on("diagram.destroy",E),this.init=O,this.move=u,this.hover=g,this.out=y,this.end=d,this.cancel=E,this.context=function(){return a},this.setOptions=function(T){Y(r,T)}}eS.$inject=["eventBus","canvas","selection","elementRegistry"];const Ca={__depends__:[s6,Xr],dragging:["type",eS]};function fl(e,t,n){this._canvas=n,this._opts=Y({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var a=i._toBorderPoint(r);i.startScroll(a)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}fl.$inject=["config.autoScroll","eventBus","canvas"];fl.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var o=0,s=0,c=0;c<4;c++)u6(a[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(c===0?o=n.scrollStep:c==1?s=n.scrollStep:c==2?o=-n.scrollStep:c==3&&(s=-n.scrollStep));(o!==0||s!==0)&&(t.scroll({dx:o,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function u6(e,t,n){return t<e&&e<n}fl.prototype.stopScroll=function(){clearTimeout(this._scrolling)};fl.prototype.setOptions=function(e){this._opts=Y({},this._opts,e)};fl.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=io(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const p6={__depends__:[Ca],__init__:["autoScroll"],autoScroll:["type",fl]};function dg(e){this._commandStack=e.get("commandStack",!1)}dg.$inject=["injector"];dg.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const Jr={__init__:["rules"],rules:["type",dg]};var yp=Math.round,d6=Math.max;function f6(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function h6(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var tS=10;function m6(e,t){var n,i;for(n=0;i=e[n];n++)if(jc(i,t)<=tS)return{point:e[n],bendpoint:!0,index:n};return null}function v6(e,t){var n=qw(f6(t,tS),h6(e)),i=n[0],r=n[n.length-1],a;return i?i!==r?i.segment2!==r.segment2?(a=d6(i.segment2,r.segment2)-1,{point:e[a],bendpoint:!0,index:a}):{point:{x:yp(i.x+r.x)/2,y:yp(i.y+r.y)/2},index:i.segment2}:{point:{x:yp(i.x),y:yp(i.y)},index:i.segment2}:null}function av(e,t){return m6(e,t)||v6(e,t)}var nS="djs-bendpoint",iS="djs-segment-dragger";function g6(e,t){var n=io(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var a=e.viewbox();return{x:a.x+(n.x-r.x)/a.scale,y:a.y+(n.y-r.y)/a.scale}}function ov(e,t,n){var i=g6(e,n),r=av(t,i);return r}function sv(e,t){var n=Le("g");mt(n).add(nS),Ye(e,n);var i=Le("circle");ve(i,{cx:0,cy:0,r:4}),mt(i).add("djs-visual"),Ye(n,i);var r=Le("circle");return ve(r,{cx:0,cy:0,r:10}),mt(r).add("djs-hit"),Ye(n,r),t&&mt(n).add(t),n}function y6(e,t,n,i){var r=Le("g");Ye(e,r);var a=14,o=3,s=11,c=_6(t,n,i),u=o+s,d=Le("rect");ve(d,{x:-a/2,y:-o/2,width:a,height:o}),mt(d).add("djs-visual"),Ye(r,d);var f=Le("rect");return ve(f,{x:-c/2,y:-u/2,width:c,height:u}),mt(f).add("djs-hit"),Ye(r,f),l1(r,i==="v"?90:0),r}function rS(e,t,n){var i=Le("g"),r=Xm(t,n),a=ga(t,n);return Ye(e,i),y6(i,t,n,a),mt(i).add(iS),mt(i).add(a==="h"?"horizontal":"vertical"),bi(i,r.x,r.y),i}function lv(e){return Math.abs(Math.round(e*2/3))}function _6(e,t,n){var i=t.x-e.x,r=t.y-e.y;return lv(n==="h"?i:r)}var aS={exports:{}};/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */(function(e,t){(function(n,i){e.exports=i(n)})(typeof im<"u"?im:im,function(n){if(n.CSS&&n.CSS.escape)return n.CSS.escape;var i=function(r){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var a=String(r),o=a.length,s=-1,c,u="",d=a.charCodeAt(0);++s<o;){if(c=a.charCodeAt(s),c==0){u+="\uFFFD";continue}if(c>=1&&c<=31||c==127||s==0&&c>=48&&c<=57||s==1&&c>=48&&c<=57&&d==45){u+="\\"+c.toString(16)+" ";continue}if(s==0&&o==1&&c==45){u+="\\"+a.charAt(s);continue}if(c>=128||c==45||c==95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){u+=a.charAt(s);continue}u+="\\"+a.charAt(s)}return u};return n.CSS||(n.CSS={}),n.CSS.escape=i,i})})(aS);const Rc=aS.exports;var x6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Db(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return x6[t]})}function oS(e,t,n,i,r){function a(T,w,R){var L=T.index,H=T.point,$,W,Q,pe,oe,be;return L<=0||T.bendpoint?!1:($=w[L-1],W=w[L],Q=Xm($,W),pe=ga($,W),oe=Math.abs(H.x-Q.x),be=Math.abs(H.y-Q.y),pe&&oe<=R&&be<=R)}function o(T,w){var R=T.waypoints,L,H,$,W;return w.index<=0||w.bendpoint||(L={start:R[w.index-1],end:R[w.index]},H=ga(L.start,L.end),!H)?null:(H==="h"?$=L.end.x-L.start.x:$=L.end.y-L.start.y,W=lv($)/2,W)}function s(T,w){var R=w.waypoints,L=ov(t,R,T),H;if(!!L)return H=o(w,L),a(L,R,H)?r.start(T,w,L.index):i.start(T,w,L.index,!L.bendpoint),!0}function c(T,w,R){Ie.bind(T,w,function(L){n.triggerMouseEvent(w,L,R),L.stopPropagation()})}function u(T,w){var R=t.getLayer("overlays"),L=Ft('.djs-bendpoints[data-element-id="'+Rc(T.id)+'"]',R);return!L&&w&&(L=Le("g"),ve(L,{"data-element-id":T.id}),mt(L).add("djs-bendpoints"),Ye(R,L),c(L,"mousedown",T),c(L,"click",T),c(L,"dblclick",T)),L}function d(T,w){return Ft('.djs-segment-dragger[data-segment-idx="'+T+'"]',w)}function f(T,w){w.waypoints.forEach(function(R,L){var H=sv(T);Ye(T,H),bi(H,R.x,R.y)}),sv(T,"floating")}function m(T,w){for(var R=w.waypoints,L,H,$,W=1;W<R.length;W++)L=R[W-1],H=R[W],ga(L,H)&&($=rS(T,L,H),ve($,{"data-segment-idx":W}),c($,"mousemove",w))}function v(T){G(Um("."+nS,T),function(w){dn(w)})}function g(T){G(Um("."+iS,T),function(w){dn(w)})}function y(T){var w=u(T);return w||(w=u(T,!0),f(w,T),m(w,T)),w}function E(T){var w=u(T);w&&(g(w),v(w),m(w,T),f(w,T))}function N(T,w){var R=Ft(".floating",T),L=w.point;!R||bi(R,L.x,L.y)}function O(T,w,R){var L=d(w.index,T),H=R[w.index-1],$=R[w.index],W=w.point,Q=Xm(H,$),pe=ga(H,$),oe,be;!L||(oe=b6(L),be={x:W.x-Q.x,y:W.y-Q.y},pe==="v"&&(be={x:be.y,y:be.x}),bi(oe,be.x,be.y))}e.on("connection.changed",function(T){E(T.element)}),e.on("connection.remove",function(T){var w=u(T.element);w&&dn(w)}),e.on("element.marker.update",function(T){var w=T.element,R;!w.waypoints||(R=y(w),T.add?mt(R).add(T.marker):mt(R).remove(T.marker))}),e.on("element.mousemove",function(T){var w=T.element,R=w.waypoints,L,H;if(R){if(L=u(w,!0),H=ov(t,R,T.originalEvent),!H)return;N(L,H),H.bendpoint||O(L,H,R)}}),e.on("element.mousedown",function(T){if(!!so(T)){var w=T.originalEvent,R=T.element;if(!!R.waypoints)return s(w,R)}}),e.on("selection.changed",function(T){var w=T.newSelection,R=w[0];R&&R.waypoints&&y(R)}),e.on("element.hover",function(T){var w=T.element;w.waypoints&&(y(w),n.registerEvent(T.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(T){n.unregisterEvent(T.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(T){var w=T.element,R=T.newId;if(w.waypoints){var L=u(w);L&&ve(L,{"data-element-id":R})}}),this.addHandles=y,this.updateHandles=E,this.getBendpointsContainer=u,this.getSegmentDragger=d}oS.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function b6(e){return Ft(".djs-visual",e)}var Ob=Math.round,Bo="reconnectStart",Lo="reconnectEnd",ec="updateWaypoints";function fg(e,t,n,i,r,a){this._injector=e,this.start=function(o,s,c,u){var d=n.getGraphics(s),f=s.source,m=s.target,v=s.waypoints,g;!u&&c===0?g=Bo:!u&&c===v.length-1?g=Lo:g=ec;var y=g===ec?"connection.updateWaypoints":"connection.reconnect",E=r.allowed(y,{connection:s,source:f,target:m});E===!1&&(E=r.allowed(y,{connection:s,source:m,target:f})),E!==!1&&i.init(o,"bendpoint.move",{data:{connection:s,connectionGfx:d,context:{allowed:E,bendpointIndex:c,connection:s,source:f,target:m,insert:u,type:g}}})},t.on("bendpoint.move.hover",function(o){var s=o.context,c=s.connection,u=c.source,d=c.target,f=o.hover,m=s.type;s.hover=f;var v;if(!!f){var g=m===ec?"connection.updateWaypoints":"connection.reconnect";if(v=s.allowed=r.allowed(g,{connection:c,source:m===Bo?f:u,target:m===Lo?f:d}),v){s.source=m===Bo?f:u,s.target=m===Lo?f:d;return}v===!1&&(v=s.allowed=r.allowed(g,{connection:c,source:m===Lo?f:d,target:m===Bo?f:u})),v&&(s.source=m===Lo?f:d,s.target=m===Bo?f:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(o){var s=o.context,c=s.type;s.hover=null,s.source=null,s.target=null,c!==ec&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(o){var s=o.context,c=s.allowed,u=s.bendpointIndex,d=s.connection,f=s.insert,m=d.waypoints.slice(),v=s.source,g=s.target,y=s.type,E=s.hints||{},N={x:Ob(o.x),y:Ob(o.y)};if(!c)return!1;y===ec?(f?m.splice(u,0,N):m[u]=N,E.bendpointMove={insert:f,bendpointIndex:u},m=this.cropWaypoints(d,m),a.updateWaypoints(d,o5(m),E)):(y===Bo?(E.docking="source",gd(s)&&(E.docking="target",E.newWaypoints=m.reverse())):y===Lo&&(E.docking="target",gd(s)&&(E.docking="source",E.newWaypoints=m.reverse())),a.reconnect(d,v,g,N,E))},this)}fg.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];fg.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function gd(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===Bo)return t&&i&&t===i&&n!==i;if(r===Lo)return t&&n&&t===n&&n!==i}var E6="reconnectStart",w6="reconnectEnd",Ib="updateWaypoints",tc="connect-ok",_p="connect-not-ok",Nb="connect-hover",kb="djs-updating",Bb="djs-element-hidden",Lb=1100;function sS(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var o=a.context,s=o.bendpointIndex,c=o.connection,u=o.insert,d=c.waypoints,f=d.slice();o.waypoints=d,u&&f.splice(s,0,{x:a.x,y:a.y}),c.waypoints=f;var m=o.draggerGfx=sv(i.getLayer("overlays"));mt(m).add("djs-dragging"),i.addMarker(c,Bb),i.addMarker(c,kb)}),n.on("bendpoint.move.hover",function(a){var o=a.context,s=o.allowed,c=o.hover,u=o.type;if(c){if(i.addMarker(c,Nb),u===Ib)return;s?(i.removeMarker(c,_p),i.addMarker(c,tc)):s===!1&&(i.removeMarker(c,tc),i.addMarker(c,_p))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Lb,function(a){var o=a.context,s=o.hover,c=o.target;s&&(i.removeMarker(s,Nb),i.removeMarker(s,c?tc:_p))}),n.on("bendpoint.move.move",function(a){var o=a.context,s=o.allowed,c=o.bendpointIndex,u=o.draggerGfx,d=o.hover,f=o.type,m=o.connection,v=m.source,g=m.target,y=m.waypoints.slice(),E={x:a.x,y:a.y},N=o.hints||{},O={};r&&(N.connectionStart&&(O.connectionStart=N.connectionStart),N.connectionEnd&&(O.connectionEnd=N.connectionEnd),f===E6?gd(o)?(O.connectionEnd=O.connectionEnd||E,O.source=g,O.target=d||v,y=y.reverse()):(O.connectionStart=O.connectionStart||E,O.source=d||v,O.target=g):f===w6?gd(o)?(O.connectionStart=O.connectionStart||E,O.source=d||g,O.target=v,y=y.reverse()):(O.connectionEnd=O.connectionEnd||E,O.source=v,O.target=d||g):(O.noCropping=!0,O.noLayout=!0,y[c]=E),f===Ib&&(y=e.cropWaypoints(m,y)),O.waypoints=y,r.drawPreview(o,s,O)),bi(u,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Lb,function(a){var o=a.context,s=o.connection,c=o.draggerGfx,u=o.hover,d=o.target,f=o.waypoints;s.waypoints=f,dn(c),i.removeMarker(s,kb),i.removeMarker(s,Bb),u&&(i.removeMarker(u,tc),i.removeMarker(u,d?tc:_p)),r&&r.cleanUp(o)})}sS.$inject=["bendpointMove","injector","eventBus","canvas"];var $b="connect-hover",zb="djs-updating";function Fb(e,t,n){return hg(e,t,e[t]+n)}function hg(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function S6(e,t,n,i){var r=Math.max(t[i],n[i]),a=Math.min(t[i],n[i]),o=20,s=Math.min(Math.max(a+o,e[i]),r-o);return hg(t,i,s)}function lS(e){return e==="x"?"y":"x"}function Hb(e,t,n){var i,r;return e.original?e.original:(i=dt(t),r=lS(n),hg(e,r,i[r]))}function cS(e,t,n,i,r,a){var o=e.get("connectionDocking",!1);this.start=function(f,m,v){var g,y=n.getGraphics(m),E=v-1,N=v,O=m.waypoints,T=O[E],w=O[N],R=ov(n,O,f),L,H,$;L=ga(T,w),L&&(H=L==="v"?"x":"y",E===0&&(T=Hb(T,m.source,H)),N===O.length-1&&(w=Hb(w,m.target,H)),R?$=R.point:$={x:(T.x+w.x)/2,y:(T.y+w.y)/2},g={connection:m,segmentStartIndex:E,segmentEndIndex:N,segmentStart:T,segmentEnd:w,axis:H,dragPosition:$},i.init(f,$,"connectionSegment.move",{cursor:H==="x"?"resize-ew":"resize-ns",data:{connection:m,connectionGfx:y,context:g}}))};function s(f,m){if(!o)return m;var v=f.waypoints,g;return f.waypoints=m,g=o.getCroppedWaypoints(f),f.waypoints=v,g}function c(f){r.update("connection",f.connection,f.connectionGfx)}function u(f,m,v){var g=f.newWaypoints,y=f.segmentStartIndex+m,E=g[y],N=f.segmentEndIndex+m,O=g[N],T=lS(f.axis),w=S6(v,E,O,T);bi(f.draggerGfx,w.x,w.y)}function d(f,m){var v=0,g=f.filter(function(y,E){return qv(f[E-1],f[E+1],y)?(v=E<=m?v-1:v,!1):!0});return{waypoints:g,segmentOffset:v}}t.on("connectionSegment.move.start",function(f){var m=f.context,v=f.connection,g=n.getLayer("overlays");m.originalWaypoints=v.waypoints.slice(),m.draggerGfx=rS(g,m.segmentStart,m.segmentEnd),mt(m.draggerGfx).add("djs-dragging"),n.addMarker(v,zb)}),t.on("connectionSegment.move.move",function(f){var m=f.context,v=m.connection,g=m.segmentStartIndex,y=m.segmentEndIndex,E=m.segmentStart,N=m.segmentEnd,O=m.axis,T=m.originalWaypoints.slice(),w=Fb(E,O,f["d"+O]),R=Fb(N,O,f["d"+O]),L=T.length,H=0;T[g]=w,T[y]=R;var $,W;g<2&&($=Wn(v.source,w),g===1?$==="intersect"&&(T.shift(),T[0]=w,H--):$!=="intersect"&&(T.unshift(E),H++)),y>L-3&&(W=Wn(v.target,R),y===L-2?W==="intersect"&&(T.pop(),T[T.length-1]=R):W!=="intersect"&&T.push(N)),m.newWaypoints=v.waypoints=s(v,T),u(m,H,f),m.newSegmentStartIndex=g+H,c(f)}),t.on("connectionSegment.move.hover",function(f){f.context.hover=f.hover,n.addMarker(f.hover,$b)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(f){var m=f.context.hover;m&&n.removeMarker(m,$b)}),t.on("connectionSegment.move.cleanup",function(f){var m=f.context,v=m.connection;m.draggerGfx&&dn(m.draggerGfx),n.removeMarker(v,zb)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(f){var m=f.context,v=m.connection;v.waypoints=m.originalWaypoints,c(f)}),t.on("connectionSegment.move.end",function(f){var m=f.context,v=m.connection,g=m.newWaypoints,y=m.newSegmentStartIndex;g=g.map(function(R){return{original:R.original,x:Math.round(R.x),y:Math.round(R.y)}});var E=d(g,y),N=E.waypoints,O=s(v,N),T=E.segmentOffset,w={segmentMove:{segmentStartIndex:m.segmentStartIndex,newSegmentStartIndex:y+T}};a.updateWaypoints(v,O,w)})}cS.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var C6=Math.abs,jb=Math.round;function T6(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],C6(r-e)<=n)return r}function uS(e){return{x:e.x,y:e.y}}function pS(e){return{x:e.x+e.width,y:e.y+e.height}}function ir(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:jb(e.x+e.width/2),y:jb(e.y+e.height/2)}}function qs(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Tn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],a=e.snapped=e.snapped||{};return n===!1?a[t]=!1:(a[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function dS(e){return e.children||[]}var P6=Math.abs,Vb=Math.round,mm=10;function fS(e){function t(a,o){if(yt(a)){for(var s=a.length;s--;)if(P6(a[s]-o)<=mm)return a[s]}else{a=+a;var c=o%a;if(c<mm)return o-c;if(c>a-mm)return o-c+a}return o}function n(a){if(a.width)return{x:Vb(a.width/2+a.x),y:Vb(a.height/2+a.y)}}function i(a){var o=a.snapPoints,s=a.connection,c=s.waypoints,u=a.segmentStart,d=a.segmentStartIndex,f=a.segmentEnd,m=a.segmentEndIndex,v=a.axis;if(o)return o;var g=[c[d-1],u,f,c[m+1]];return d<2&&g.unshift(n(s.source)),m>c.length-3&&g.unshift(n(s.target)),a.snapPoints=o={horizontal:[],vertical:[]},G(g,function(y){y&&(y=y.original||y,v==="y"&&o.horizontal.push(y.y),v==="x"&&o.vertical.push(y.x))}),o}e.on("connectionSegment.move.move",1500,function(a){var o=a.context,s=i(o),c=a.x,u=a.y,d,f;if(!!s){d=t(s.vertical,c),f=t(s.horizontal,u);var m=c-d,v=u-f;Y(a,{dx:a.dx-m,dy:a.dy-v,x:d,y:f}),(m||s.vertical.indexOf(c)!==-1)&&Tn(a,"x",d),(v||s.horizontal.indexOf(u)!==-1)&&Tn(a,"y",f)}});function r(a){var o=a.snapPoints,s=a.connection.waypoints,c=a.bendpointIndex;if(o)return o;var u=[s[c-1],s[c+1]];return a.snapPoints=o={horizontal:[],vertical:[]},G(u,function(d){d&&(d=d.original||d,o.horizontal.push(d.y),o.vertical.push(d.x))}),o}e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var o=a.context,s=r(o),c=o.hover,u=c&&n(c),d=a.x,f=a.y,m,v;if(!!s){m=t(u?s.vertical.concat([u.x]):s.vertical,d),v=t(u?s.horizontal.concat([u.y]):s.horizontal,f);var g=d-m,y=f-v;Y(a,{dx:a.dx-g,dy:a.dy-y,x:a.x-g,y:a.y-y}),(g||s.vertical.indexOf(d)!==-1)&&Tn(a,"x",m),(y||s.horizontal.indexOf(f)!==-1)&&Tn(a,"y",v)}})}fS.$inject=["eventBus"];const A6={__depends__:[Ca,Jr],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",oS],bendpointMove:["type",fg],bendpointMovePreview:["type",sS],connectionSegmentMove:["type",cS],bendpointSnapping:["type",fS]};function hS(e,t,n,i){function r(o,s){return i.allowed("connection.create",{source:o,target:s})}function a(o,s){return r(s,o)}e.on("connect.hover",function(o){var s=o.context,c=s.start,u=o.hover,d;if(s.hover=u,d=s.canExecute=r(c,u),!qx(d)){if(d!==!1){s.source=c,s.target=u;return}d=s.canExecute=a(c,u),!qx(d)&&d!==!1&&(s.source=u,s.target=c)}}),e.on(["connect.out","connect.cleanup"],function(o){var s=o.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(o){var s=o.context,c=s.canExecute,u=s.connectionStart,d={x:o.x,y:o.y},f=s.source,m=s.target;if(!c)return!1;var v=null,g={connectionStart:cv(s)?d:u,connectionEnd:cv(s)?u:d};kn(c)&&(v=c),n.connect(f,m,v,g)}),this.start=function(o,s,c,u){kn(c)||(u=c,c=dt(s)),t.init(o,"connect",{autoActivate:u,data:{shape:s,context:{start:s,connectionStart:c}}})}}hS.$inject=["eventBus","dragging","modeling","rules"];function cv(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var R6=1100,M6=900,Ub="connect-ok",Wb="connect-not-ok";function mS(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var a=r.context,o=a.canExecute,s=a.hover,c=a.source,u=a.start,d=a.startPosition,f=a.target,m=a.connectionStart||d,v=a.connectionEnd||{x:r.x,y:r.y},g=m,y=v;cv(a)&&(g=v,y=m),i.drawPreview(a,o,{source:c||u,target:f||s,connectionStart:g,connectionEnd:y})}),t.on("connect.hover",M6,function(r){var a=r.context,o=r.hover,s=a.canExecute;s!==null&&n.addMarker(o,s?Ub:Wb)}),t.on(["connect.out","connect.cleanup"],R6,function(r){var a=r.hover;a&&(n.removeMarker(a,Ub),n.removeMarker(a,Wb))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}mS.$inject=["injector","eventBus","canvas"];const mg={__depends__:[Xr,Jr,Ca],__init__:["connectPreview"],connect:["type",hS],connectPreview:["type",mS]};var D6="djs-connection-preview";function Ta(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Ta.$inject=["injector","canvas","graphicsFactory","elementFactory"];Ta.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,a=n.source,o=n.target,s=n.waypoints,c=n.connectionStart,u=n.connectionEnd,d=n.noLayout,f=n.noCropping,m=n.noNoop,v,g=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Nd(i),r||(r=e.getConnection=O6(function(y,E,N){return g.getConnection(y,E,N)})),t&&(v=r(t,a,o)),!v){!m&&this.drawNoopPreview(i,n);return}v.waypoints=s||[],this._layouter&&!d&&(v.waypoints=this._layouter.layoutConnection(v,{source:a,target:o,connectionStart:c,connectionEnd:u,waypoints:n.waypoints||v.waypoints})),(!v.waypoints||!v.waypoints.length)&&(v.waypoints=[a?dt(a):c,o?dt(o):u]),this._connectionDocking&&(a||o)&&!f&&(v.waypoints=this._connectionDocking.getCroppedWaypoints(v,a,o)),this._graphicsFactory.drawConnection(i,v)};Ta.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||dt(n),a=t.connectionEnd||dt(i),o=this.cropWaypoints(r,a,n,i),s=this.createNoopConnection(o[0],o[1]);Ye(e,s)};Ta.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,a=n&&r.getShapePath(n),o=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return e=n&&Jm(a,s,!0)||e,t=i&&Jm(o,s,!1)||t,[e,t]};Ta.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&dn(e.connectionPreviewGfx)};Ta.prototype.getConnection=function(e){var t=I6(e);return this._elementFactory.createConnection(t)};Ta.prototype.createConnectionPreviewGfx=function(){var e=Le("g");return ve(e,{pointerEvents:"none"}),mt(e).add(D6),Ye(this._canvas.getActiveLayer(),e),e};Ta.prototype.createNoopConnection=function(e,t){var n=Le("polyline");return ve(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),ve(n,{points:[e.x,e.y,t.x,t.y]}),n};function O6(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function I6(e){return kn(e)?e:{}}const N6={__init__:["connectionPreview"],connectionPreview:["type",Ta]};var Gb=Math.min,qb=Math.max;function vm(e){e.preventDefault()}function mc(e){e.stopPropagation()}function k6(e){return e.nodeType===Node.TEXT_NODE}function B6(e){return[].slice.call(e)}function Er(e){this.container=e.container,this.parent=Vt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Ft("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=ai(this.autoResize,this),this.handlePaste=ai(this.handlePaste,this)}Er.prototype.create=function(e,t,n,i){var r=this,a=this.parent,o=this.content,s=this.container;i=this.options=i||{},t=this.style=t||{};var c=xr(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);Y(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var u=xr(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return Y(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),i.centerVertically&&Y(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),o.innerText=n,Ie.bind(o,"keydown",this.keyHandler),Ie.bind(o,"mousedown",mc),Ie.bind(o,"paste",r.handlePaste),i.autoResize&&Ie.bind(o,"input",this.autoResize),i.resizable&&this.resizable(t),s.appendChild(a),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),a};Er.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};Er.prototype.insertText=function(e){e=L6(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Er.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,a=t.endOffset,o=t.commonAncestorContainer,s=B6(o.childNodes),c,u;if(k6(o)){var d=n.textContent;n.textContent=d.substring(0,r)+e+d.substring(a),c=n,u=r+e.length}else if(n===this.content&&i===this.content){var f=document.createTextNode(e);this.content.insertBefore(f,s[r]),c=f,u=f.textContent.length}else{var m=s.indexOf(n),v=s.indexOf(i);s.forEach(function(g,y){y===m?g.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(a):y>m&&y<=v&&Wr(g)}),c=n,u=r+e.length}c&&u!==void 0&&setTimeout(function(){self.setSelection(c,u)})};Er.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};Er.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,o=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=Vt('<div class="djs-direct-editing-resize-handle"></div>');var s,c,u,d,f=function(g){vm(g),mc(g),s=g.clientX,c=g.clientY;var y=t.getBoundingClientRect();u=y.width,d=y.height,Ie.bind(document,"mousemove",m),Ie.bind(document,"mouseup",v)},m=function(g){vm(g),mc(g);var y=Gb(qb(u+g.clientX-s,i),a),E=Gb(qb(d+g.clientY-c,r),o);t.style.width=y+"px",t.style.height=E+"px",e.resizeHandler({width:u,height:d,dx:g.clientX-s,dy:g.clientY-c})},v=function(g){vm(g),mc(g),Ie.unbind(document,"mousemove",m,!1),Ie.unbind(document,"mouseup",v,!1)};Ie.bind(n,"mousedown",f)}Y(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Er.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Ie.unbind(t,"keydown",this.keyHandler),Ie.unbind(t,"mousedown",mc),Ie.unbind(t,"input",this.autoResize),Ie.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Wr(n)),Wr(e)};Er.prototype.getValue=function(){return this.content.innerText.trim()};Er.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Er.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function L6(e){return e.replace(/\r\n|\r|\n/g,`
`)}function or(e,t){this._eventBus=e,this._providers=[],this._textbox=new Er({container:t.getContainer(),keyHandler:ai(this._handleKey,this),resizeHandler:ai(this._handleResize,this)})}or.$inject=["eventBus","canvas"];or.prototype.registerProvider=function(e){this._providers.push(e)};or.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};or.prototype.cancel=function(){!this._active||(this._fire("cancel"),this.close())};or.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};or.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0};or.prototype.complete=function(){var e=this._active;if(!!e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),a=e.context.text;(r!==a||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};or.prototype.getValue=function(){return this._textbox.getValue()};or.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};or.prototype._handleResize=function(e){this._fire("resize",e)};or.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=Dt(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const vS={__depends__:[Kc],__init__:["directEditing"],directEditing:["type",or]};var Kb=".entry",$6=1e3;function sr(e,t,n){this._eventBus=t,this._overlays=n;var i=Hr(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}sr.$inject=["config.contextPad","eventBus","overlays"];sr.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",function(n){var i=n.newSelection;i.length===1?t.open(i[0]):t.close()}),e.on("elements.delete",function(n){var i=n.elements;G(i,function(r){t.isOpen(r)&&t.close()})}),e.on("element.changed",function(n){var i=n.element,r=t._current;r&&r.element===i&&t.open(i,!0)})};sr.prototype.registerProvider=function(e,t){t||(t=e,e=$6),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};sr.prototype.getEntries=function(e){var t=this._getProviders(),n={};return G(t,function(i){var r=i.getContextPadEntries(e);Qn(r)?n=r(n):G(r,function(a,o){n[o]=a})}),n};sr.prototype.trigger=function(e,t,n){var i=this._current.element,r=this._current.entries,a,o,s,c=t.delegateTarget||t.target;if(!c)return t.preventDefault();if(a=r[oi(c,"data-action")],o=a.action,s=t.originalEvent||t,Qn(o)){if(e==="click")return o(s,i,n)}else if(o[e])return o[e](s,i,n);t.preventDefault()};sr.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};sr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};sr.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;G(t,function(r,a){var o=r.group||"default",s=Vt(r.html||'<div class="entry" draggable="true"></div>'),c;oi(s,"data-action",a),c=Ft("[data-group="+o+"]",i),c||(c=Vt('<div class="group" data-group="'+o+'"></div>'),i.appendChild(c)),c.appendChild(s),r.className&&z6(s,r.className),r.title&&oi(s,"title",r.title),r.imageUrl&&s.appendChild(Vt('<img src="'+r.imageUrl+'">'))}),Wt(i).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})};sr.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=Vt('<div class="djs-context-pad"></div>'),r=Y({html:i},this._overlaysConfig);$i.bind(i,Kb,"click",function(o){t.trigger("click",o)}),$i.bind(i,Kb,"dragstart",function(o){t.trigger("dragstart",o)}),Ie.bind(i,"mousedown",function(o){o.stopPropagation()}),this._overlayId=n.add(e,"context-pad",r);var a=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:a}),a};sr.prototype.close=function(){!this.isOpen()||(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};sr.prototype.isOpen=function(e){return!!this._current&&(e?this._current.element===e:!0)};function z6(e,t){var n=Wt(e),i=yt(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}const F6={__depends__:[Kc,ag],contextPad:["type",sr]};var H6=["marker-start","marker-mid","marker-end"],j6=["circle","ellipse","line","path","polygon","polyline","rect"];function Xo(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",function(){G(r._clonedMarkers,function(a){dn(a)}),r._clonedMarkers={}})}Xo.$inject=["elementRegistry","eventBus","canvas","styles"];Xo.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Xo.prototype.addDragger=function(e,t,n){n=n||this.getGfx(e);var i=Vv(n),r=n.getBoundingClientRect();return this._cloneMarkers(md(i)),ve(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Ye(t,i),i};Xo.prototype.addFrame=function(e,t){var n=Le("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return Ye(t,n),n};Xo.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);!G6(e)||H6.forEach(function(i){if(ve(e,i)){var r=V6(e,i,t._canvas.getContainer());t._cloneMarker(e,r,i)}})};Xo.prototype._cloneMarker=function(e,t,n){var i=t.id,r=this._clonedMarkers[i];if(!r){r=Vv(t);var a=i+"-clone";r.id=a,mt(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var o=Ft("defs",this._canvas._svg);o||(o=Le("defs"),Ye(this._canvas._svg,o)),Ye(o,r)}var s=W6(this._clonedMarkers[i].id);ve(e,n,s)};function V6(e,t,n){var i=U6(ve(e,t));return Ft("marker#"+i,n||document)}function U6(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function W6(e){return"url(#"+e+")"}function G6(e){return j6.indexOf(e.nodeName)!==-1}const Zc={__init__:["previewSupport"],previewSupport:["type",Xo]};var q6="drop-ok",Yb="drop-not-ok",Xb="attach-ok",Zb="new-parent",Jb="create",K6=2e3;function gS(e,t,n,i,r){function a(c,u,d,f,m){if(!u)return!1;c=st(c,function(O){var T=O.labelTarget;return!O.parent&&!(Y6(O)&&c.indexOf(T)!==-1)});var v=Dt(c,function(O){return!lc(O)}),g=!1,y=!1,E=!1;e0(c)&&(g=r.allowed("shape.attach",{position:d,shape:v,target:u})),g||(e0(c)?E=r.allowed("shape.create",{position:d,shape:v,source:f,target:u}):E=r.allowed("elements.create",{elements:c,position:d,target:u}));var N=m.connectionTarget;return E||g?(v&&f&&(y=r.allowed("connection.create",{source:N===f?v:f,target:N===f?f:v,hints:{targetParent:u,targetAttach:g}})),{attach:g,connect:y}):E===null||g===null?null:!1}function o(c,u){[Xb,q6,Yb,Zb].forEach(function(d){d===u?e.addMarker(c,d):e.removeMarker(c,d)})}n.on(["create.move","create.hover"],function(c){var u=c.context,d=u.elements,f=c.hover,m=u.source,v=u.hints||{};if(!f){u.canExecute=!1,u.target=null;return}Qb(c);var g={x:c.x,y:c.y},y=u.canExecute=f&&a(d,f,g,m,v);f&&y!==null&&(u.target=f,y&&y.attach?o(f,Xb):o(f,y?Zb:Yb))}),n.on(["create.end","create.out","create.cleanup"],function(c){var u=c.hover;u&&o(u,null)}),n.on("create.end",function(c){var u=c.context,d=u.source,f=u.shape,m=u.elements,v=u.target,g=u.canExecute,y=g&&g.attach,E=g&&g.connect,N=u.hints||{};if(g===!1||!v)return!1;Qb(c);var O={x:c.x,y:c.y};E?f=i.appendShape(d,f,O,v,{attach:y,connection:E===!0?{}:E,connectionTarget:N.connectionTarget}):(m=i.createElements(m,O,v,Y({},N,{attach:y})),f=Dt(m,function(T){return!lc(T)})),Y(u,{elements:m,shape:f}),Y(c,{elements:m,shape:f})});function s(){var c=t.context();c&&c.prefix===Jb&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],K6,function(){n.off("elements.changed",s)})}),this.start=function(c,u,d){yt(u)||(u=[u]);var f=Dt(u,function(v){return!lc(v)});if(!!f){d=Y({elements:u,hints:{},shape:f},d||{}),G(u,function(v){rt(v.x)||(v.x=0),rt(v.y)||(v.y=0)});var m=Un(u);G(u,function(v){lc(v)&&(v.waypoints=Nn(v.waypoints,function(g){return{x:g.x-m.x-m.width/2,y:g.y-m.y-m.height/2}})),Y(v,{x:v.x-m.x-m.width/2,y:v.y-m.y-m.height/2})}),t.init(c,Jb,{cursor:"grabbing",autoActivate:!0,data:{shape:f,elements:u,context:d}})}}}gS.$inject=["canvas","dragging","eventBus","modeling","rules"];function Qb(e){var t=e.context,n=t.createConstraints;!n||(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function lc(e){return!!e.waypoints}function e0(e){return e&&e.length===1&&!lc(e[0])}function Y6(e){return!!e.labelTarget}var X6=750;function yS(e,t,n,i,r){function a(o){var s=Le("g");ve(s,r.cls("djs-drag-group",["no-events"]));var c=Le("g");return o.forEach(function(u){var d;u.hidden||(u.waypoints?(d=n._createContainer("connection",c),n.drawConnection(md(d),u)):(d=n._createContainer("shape",c),n.drawShape(md(d),u),bi(d,u.x,u.y)),i.addDragger(u,s,d))}),s}t.on("create.move",X6,function(o){var s=o.hover,c=o.context,u=c.elements,d=c.dragGroup;d||(d=c.dragGroup=a(u));var f;s?(d.parentNode||(f=e.getActiveLayer(),Ye(f,d)),bi(d,o.x,o.y)):dn(d)}),t.on("create.cleanup",function(o){var s=o.context,c=s.dragGroup;c&&dn(c)})}yS.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Qd={__depends__:[Ca,Zc,Jr,Xr],__init__:["create","createPreview"],create:["type",gS],createPreview:["type",yS]};var _S="data-id",xS=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],Z6=1e3;function En(e,t,n){var i=Hr(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}En.$inject=["config.popupMenu","eventBus","canvas"];En.prototype.registerProvider=function(e,t,n){n||(n=t,t=Z6),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};En.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");var n=this._getProviders(t);if(!n)return!0;var i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),a=Cc(i)>0,o=r&&Cc(r)>0;return!a&&!o};En.prototype.open=function(e,t,n){var i=this._getProviders(t);if(!e)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:t,element:e,position:n},a=this._getEntries(e,i),o=this._getHeaderEntries(e,i);r.entries=Y({},a,o),r.container=this._createContainer(),Cc(o)&&r.container.appendChild(this._createEntries(o,"djs-popup-header")),Cc(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-body"));var s=this._canvas,c=s.getContainer();this._attachContainer(r.container,c,n.cursor),this._bindAutoClose()};En.prototype.close=function(){!this.isOpen()||(this._emit("close"),this._unbindAutoClose(),Wr(this._current.container),this._current.container=null)};En.prototype.isOpen=function(){return!!this._current.container};En.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=oi(t,_S),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)};En.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};En.prototype._getEntries=function(e,t){var n={};return G(t,function(i){if(!i.getPopupMenuEntries){G(i.getEntries(e),function(a){var o=a.id;if(!o)throw new Error("every entry must have the id property set");n[o]=ro(a,["id"])});return}var r=i.getPopupMenuEntries(e);Qn(r)?n=r(n):G(r,function(a,o){n[o]=a})}),n};En.prototype._getHeaderEntries=function(e,t){var n={};return G(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;G(i.getHeaderEntries(e),function(a){var o=a.id;if(!o)throw new Error("every entry must have the id property set");n[o]=ro(a,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);Qn(r)?n=r(n):G(r,function(a,o){n[o]=a})}),n};En.prototype._getEntry=function(e){var t=this._current.entries[e];if(!t)throw new Error("entry not found");return t};En.prototype._emit=function(e){this._eventBus.fire("popupMenu."+e)};En.prototype._createContainer=function(){var e=Vt('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return Y(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),Wt(e).add(n),e};En.prototype._attachContainer=function(e,t,n){var i=this;$i.bind(e,".entry","click",function(r){i.trigger(r)}),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n)};En.prototype._updateScale=function(e){var t=this._canvas.zoom(),n=this._config.scale,i,r,a=t;n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Hr(i)&&t<i&&(a=i),Hr(r)&&t>r&&(a=r)),J6(e,"scale("+a+")")};En.prototype._assureIsInbounds=function(e,t){var n=this._canvas,i=n._container.getBoundingClientRect(),r=e.offsetLeft,a=e.offsetTop,o=e.scrollWidth,s=e.scrollHeight,c={},u,d,f={x:t.x-i.left,y:t.y-i.top};r+o>i.width&&(c.x=!0),a+s>i.height&&(c.y=!0),c.x&&c.y?(u=f.x-o+"px",d=f.y-s+"px"):c.x?(u=f.x-o+"px",d=f.y+"px"):c.y&&f.y<s?(u=f.x+"px",d=10+"px"):c.y&&(u=f.x+"px",d=f.y-s+"px"),Y(e.style,{left:u,top:d},{visibility:"visible","z-index":1e3})};En.prototype._createEntries=function(e,t){var n=Vt("<div>"),i=this;return Wt(n).add(t),G(e,function(r,a){var o=i._createEntry(r,a);n.appendChild(o)}),n};En.prototype._createEntry=function(e,t){var n=Vt("<div>"),i=Wt(n);if(i.add("entry"),e.className&&e.className.split(" ").forEach(function(a){i.add(a)}),oi(n,_S,t),e.label){var r=Vt("<span>");r.textContent=e.label,n.appendChild(r)}return e.imageUrl&&n.appendChild(Vt('<img src="'+e.imageUrl+'" />')),e.active===!0&&i.add("active"),e.disabled===!0&&i.add("disabled"),e.title&&(n.title=e.title),n};En.prototype._bindAutoClose=function(){this._eventBus.once(xS,this.close,this)};En.prototype._unbindAutoClose=function(){this._eventBus.off(xS,this.close,this)};function J6(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const Q6={__init__:["popupMenu"],popupMenu:["type",En]};function Jc(){}Jc.prototype.get=function(){return this._data};Jc.prototype.set=function(e){this._data=e};Jc.prototype.clear=function(){var e=this._data;return delete this._data,e};Jc.prototype.isEmpty=function(){return!this._data};const e3={clipboard:["type",Jc]};function vg(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}vg.$inject=["eventBus"];vg.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||t3(0,0)};function t3(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,a=e,o=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,a,o,!1,!1,!1,!1,0,null),n}const Qc={__init__:["mouse"],mouse:["type",vg]};function wr(e,t,n,i,r,a,o,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=a,this._mouse=o,this._rules=s,r.on("copyPaste.copyElement",function(c){var u=c.descriptor,d=c.element,f=c.elements;u.priority=1,u.id=d.id;var m=Dt(f,function(v){return v===d.parent});m&&(u.parent=d.parent.id),n3(d)&&(u.priority=2,u.host=d.host.id),ef(d)&&(u.priority=3,u.source=d.source.id,u.target=d.target.id,u.waypoints=i3(d)),tf(d)&&(u.priority=4,u.labelTarget=d.labelTarget.id),G(["x","y","width","height"],function(v){rt(d[v])&&(u[v]=d[v])}),u.hidden=d.hidden,u.collapsed=d.collapsed}),r.on("copyPaste.pasteElements",function(c){var u=c.hints;Y(u,{createElementsBehavior:!1})})}wr.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];wr.prototype.copy=function(e){var t,n;return yt(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(yt(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};wr.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};wr.prototype._paste=function(e,t,n,i){G(e,function(a){rt(a.x)||(a.x=0),rt(a.y)||(a.y=0)});var r=Un(e);return G(e,function(a){ef(a)&&(a.waypoints=Nn(a.waypoints,function(o){return{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2}})),Y(a,{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,Y({},i))};wr.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return G(e,function(a,o){a=_r(a,"priority"),G(a,function(s){var c=Y({},ro(s,["priority"]));i[s.parent]?c.parent=i[s.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c});var u;if(ef(c)){c.source=i[s.source],c.target=i[s.target],u=i[s.id]=t.createConnection(c),r.push(u);return}if(tf(c)){c.labelTarget=i[c.labelTarget],u=i[s.id]=t.createLabel(c),r.push(u);return}c.host&&(c.host=i[c.host]),u=i[s.id]=t.createShape(c),r.push(u)})}),r};wr.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(ro(e,["id"]));return t};wr.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(ro(e,["id"]));return t};wr.prototype.createShape=function(e){var t=this._elementFactory.createShape(ro(e,["id"]));return t};wr.prototype.hasRelations=function(e,t){var n,i,r;return!(ef(e)&&(i=Dt(t,yr({id:e.source.id})),r=Dt(t,yr({id:e.target.id})),!i||!r)||tf(e)&&(n=Dt(t,yr({id:e.labelTarget.id})),!n))};wr.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],a=Fw(e);function o(u,d){return t.allowed("element.copy",{element:u,elements:d})}function s(u,d){var f=Dt(r,function(m){return u===m.element});if(!f){r.push({element:u,depth:d});return}f.depth<d&&(r=c(f,r),r.push({element:f.element,depth:d}))}function c(u,d){var f=d.indexOf(u);return f!==-1&&d.splice(f,1),d}return Ko(a,function(u,d,f){if(tf(u))return;G(u.labels,function(v){s(v,f)});function m(v){v&&v.length&&G(v,function(g){G(g.labels,function(y){s(y,f)}),s(g,f)})}return G([u.attachers,u.incoming,u.outgoing],m),s(u,f),u.children}),e=Nn(r,function(u){return u.element}),r=Nn(r,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),r=_r(r,function(u){return u.descriptor.priority}),e=Nn(r,function(u){return u.element}),G(r,function(u){var d=u.depth;if(!n.hasRelations(u.element,e)){n0(u.element,e);return}if(!o(u.element,e)){n0(u.element,e);return}i[d]||(i[d]=[]),i[d].push(u.descriptor)}),i};function n3(e){return!!e.host}function ef(e){return!!e.waypoints}function tf(e){return!!e.labelTarget}function i3(e){return Nn(e.waypoints,function(t){return t=t0(t),t.original&&(t.original=t0(t.original)),t})}function t0(e){return Y({},e)}function n0(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const r3={__depends__:[e3,Qd,Qc,Jr],__init__:["copyPaste"],copyPaste:["type",wr]};function xp(e,t,n){yt(n)||(n=[n]),G(n,function(i){Hc(e[i])||(t[i]=e[i])})}function a3(e,t){yt(t)||(t=[t]),G(t,function(n){e[n]&&delete e[n]})}var o3=750;function bS(e,t,n){t.on("copyPaste.copyElement",o3,function(a){var o=a.descriptor,s=a.element,c=o.oldBusinessObject=Te(s);if(o.type=s.type,xp(c,o,"name"),o.di={},xp(c.di,o.di,["fill","stroke","background-color","border-color","color"]),xp(c.di,o,"isExpanded"),i0(o))return o;c.default&&(o.default=c.default.id)}),t.on("moddleCopy.canCopyProperty",function(a){var o=a.parent,s=a.property,c=a.propertyName,u;if(c==="processRef"&&P(o,"bpmn:Participant")&&P(s,"bpmn:Process"))return u=e.create("bpmn:Process"),n.copyElement(s,u)});var i;function r(a,o){var s=Te(a);a.default&&(i[a.default]={element:s,property:"default"}),a.host&&(Te(a).attachedToRef=Te(o[a.host])),i=ro(i,ji(i,function(c,u,d){var f=u.element,m=u.property;return d===a.id&&(f[m]=s,c.push(a.id)),c},[]))}t.on("copyPaste.pasteElements",function(){i={}}),t.on("copyPaste.pasteElement",function(a){var o=a.cache,s=a.descriptor,c=s.oldBusinessObject,u;if(i0(s)){s.businessObject=Te(o[s.labelTarget]);return}u=e.create(c.$type),s.businessObject=n.copyElement(c,u),r(s,o),xp(s,u,["isExpanded","name"]),a3(s,"oldBusinessObject")})}bS.$inject=["bpmnFactory","eventBus","moddleCopy"];function i0(e){return!!e.labelTarget}var s3=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function eu(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return _r(r,function(a){return a==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,a=kn(r)&&r.$descriptor,o=i.propertyName;if(o&&s3.indexOf(o)!==-1||o&&a&&!Dt(a.properties,yr({name:o})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(l3(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}eu.$inject=["eventBus","bpmnFactory","moddle"];eu.prototype.copyElement=function(e,t,n){var i=this;n&&!yt(n)&&(n=[n]),n=n||uv(e.$descriptor);var r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return r===!1||(yt(r)&&(n=r),G(n,function(a){var o;va(e,a)&&(o=e.get(a));var s=i.copyProperty(o,t,a),c=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:s,propertyName:a});c!==!1&&Hr(s)&&t.set(a,s)})),t};eu.prototype.copyProperty=function(e,t,n){var i=this,r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(r!==!1){if(r)return kn(r)&&r.$type&&!r.$parent&&(r.$parent=t),r;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?this._copyId(e,t):yt(e)?ji(e,function(o,s){return r=i.copyProperty(s,t,n),r?(r.$parent=t,o.concat(r)):o},[]):kn(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(r=i._bpmnFactory.create(e.$type),r.$parent=t,r=i.copyElement(e,r),r):e}};eu.prototype._copyId=function(e,t){if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function uv(e,t){return ji(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function l3(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}const ES={__depends__:[r3],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",bS],moddleCopy:["type",eu]};var r0=Math.round;function gg(e){this._modeling=e}gg.$inject=["modeling"];gg.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=t.width||e.width,a=t.height||e.height,o=t.x||e.x,s=t.y||e.y,c=r0(o+r/2),u=r0(s+a/2);return i.replaceShape(e,Y({},t,{x:c,y:u,width:r,height:a}),n)};const c3={__init__:["replace"],replace:["type",gg]};function u3(e,t,n){yt(n)||(n=[n]),G(n,function(i){Hc(e[i])||(t[i]=e[i])})}var p3=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function d3(e,t){var n=e&&va(e,"collapsed")?e.collapsed:!Ot(e),i;return t&&(va(t,"collapsed")||va(t,"isExpanded"))?i=va(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i?(e.collapsed=n,!0):!1}function wS(e,t,n,i,r,a,o){function s(c,u,d){d=d||{};var f=u.type,m=c.businessObject;if(bp(m)&&f==="bpmn:SubProcess"&&d3(c,u))return i.toggleCollapse(c),c;var v=e.create(f),g={type:f,businessObject:v},y=uv(m.$descriptor),E=uv(v.$descriptor,!0),N=f3(y,E);Y(v,xr(u,p3));var O=st(N,function(T){return T==="eventDefinitions"?a0(c,u.eventDefinitionType):T==="loopCharacteristics"?!zi(v):!(va(v,T)||T==="processRef"&&u.isExpanded===!1||T==="triggeredByEvent")});return v=n.copyElement(m,v,O),u.eventDefinitionType&&(a0(v,u.eventDefinitionType)||(g.eventDefinitionType=u.eventDefinitionType,g.eventDefinitionAttrs=u.eventDefinitionAttrs)),P(m,"bpmn:Activity")&&(bp(m)?g.isExpanded=Ot(m):u&&va(u,"isExpanded")&&(g.isExpanded=u.isExpanded),Ot(m)&&!P(m,"bpmn:Task")&&g.isExpanded&&(g.width=c.width,g.height=c.height)),bp(m)&&!bp(v)&&(d.moveChildren=!1),P(m,"bpmn:Participant")&&(u.isExpanded===!0?v.processRef=e.create("bpmn:Process"):d.moveChildren=!1,g.width=c.width,g.height=t._getDefaultSize(v).height),a.allowed("shape.resize",{shape:v})||(g.height=t._getDefaultSize(v).height,g.width=t._getDefaultSize(v).width),v.name=m.name,At(m,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&At(v,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(v.default=m.default),u.host&&!P(m,"bpmn:BoundaryEvent")&&P(v,"bpmn:BoundaryEvent")&&(g.host=u.host),(g.type==="bpmn:DataStoreReference"||g.type==="bpmn:DataObjectReference")&&(g.x=c.x+(c.width-g.width)/2),g.di={},u3(m.di,g.di,["fill","stroke","background-color","border-color","color"]),g=r.replaceElement(c,g,d),d.select!==!1&&o.select(g),g}this.replaceElement=s}wS.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];function bp(e){return P(e,"bpmn:SubProcess")}function a0(e,t){var n=Te(e);return t&&n.get("eventDefinitions").some(function(i){return P(i,t)})}function f3(e,t){return e.filter(function(n){return t.indexOf(n)!==-1})}const SS={__depends__:[ES,c3,Xr],bpmnReplace:["type",wS]};function o0(e){return function(t){var n=t.target,i=Te(e),r=i.eventDefinitions&&i.eventDefinitions[0],a=i.$type===n.type,o=(r&&r.$type)===n.eventDefinitionType,s=i.triggeredByEvent===n.triggeredByEvent,c=n.isExpanded===void 0||n.isExpanded===Ot(i);return!a||!o||!s||!c}}var h3=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],m3=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],v3=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],g3=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],y3=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],_3=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],x3=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],b3=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],s0=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],E3=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],w3=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],S3=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],C3=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],T3=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],P3=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty Pool";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function lr(e,t,n,i,r,a,o){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=a,this._translate=o,this.register()}lr.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"];lr.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};lr.prototype.getEntries=function(e){var t=e.businessObject,n=this._rules,i;if(!n.allowed("shape.replace",{element:e}))return[];var r=o0(e);return P(t,"bpmn:DataObjectReference")?this._createEntries(e,E3):P(t,"bpmn:DataStoreReference")&&!P(e.parent,"bpmn:Collaboration")?this._createEntries(e,w3):P(t,"bpmn:StartEvent")&&!P(t.$parent,"bpmn:SubProcess")?(i=st(h3,r),this._createEntries(e,i)):P(t,"bpmn:Participant")?(i=st(P3,function(a){return Ot(t)!==a.target.isExpanded}),this._createEntries(e,i)):P(t,"bpmn:StartEvent")&&zi(t.$parent)?(i=st(C3,function(a){var o=a.target,s=o.isInterrupting!==!1,c=Te(e).isInterrupting===s;return r(a)||!r(a)&&!c}),this._createEntries(e,i)):P(t,"bpmn:StartEvent")&&!zi(t.$parent)&&P(t.$parent,"bpmn:SubProcess")?(i=st(m3,r),this._createEntries(e,i)):P(t,"bpmn:EndEvent")?(i=st(g3,function(a){var o=a.target;return o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!P(t.$parent,"bpmn:Transaction")?!1:r(a)}),this._createEntries(e,i)):P(t,"bpmn:BoundaryEvent")?(i=st(S3,function(a){var o=a.target;if(o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!P(t.attachedToRef,"bpmn:Transaction"))return!1;var s=o.cancelActivity!==!1,c=t.cancelActivity==s;return r(a)||!r(a)&&!c}),this._createEntries(e,i)):P(t,"bpmn:IntermediateCatchEvent")||P(t,"bpmn:IntermediateThrowEvent")?(i=st(v3,r),this._createEntries(e,i)):P(t,"bpmn:Gateway")?(i=st(y3,r),this._createEntries(e,i)):P(t,"bpmn:Transaction")?(i=st(x3,r),this._createEntries(e,i)):zi(t)&&Ot(t)?(i=st(b3,r),this._createEntries(e,i)):P(t,"bpmn:SubProcess")&&Ot(t)?(i=st(_3,r),this._createEntries(e,i)):P(t,"bpmn:AdHocSubProcess")&&!Ot(t)?(i=st(s0,function(a){var o=a.target,s=o.type==="bpmn:SubProcess",c=o.isExpanded===!0;return o0(e)&&(!s||c)}),this._createEntries(e,i)):P(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,T3):P(t,"bpmn:FlowNode")?(i=st(s0,r),P(t,"bpmn:SubProcess")&&!Ot(t)&&(i=st(i,function(a){return a.label!=="Sub Process (collapsed)"})),this._createEntries(e,i)):[]};lr.prototype.getHeaderEntries=function(e){var t=[];return P(e,"bpmn:Activity")&&!zi(e)&&(t=t.concat(this._getLoopEntries(e))),P(e,"bpmn:DataObjectReference")&&(t=t.concat(this._getDataObjectIsCollection(e))),P(e,"bpmn:Participant")&&(t=t.concat(this._getParticipantMultiplicity(e))),P(e,"bpmn:SubProcess")&&!P(e,"bpmn:Transaction")&&!zi(e)&&t.push(this._getAdHocEntry(e)),t};lr.prototype._createEntries=function(e,t){var n=[],i=this;return G(t,function(r){var a=i._createMenuEntry(r,e);n.push(a)}),n};lr.prototype._createSequenceFlowEntries=function(e,t){var n=Te(e),i=[],r=this._modeling,a=this._moddle,o=this;return G(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(P(n.sourceRef,"bpmn:ExclusiveGateway")||P(n.sourceRef,"bpmn:InclusiveGateway")||P(n.sourceRef,"bpmn:ComplexGateway")||P(n.sourceRef,"bpmn:Activity"))&&i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&P(n.sourceRef,"bpmn:Activity")&&i.push(o._createMenuEntry(s,e,function(){var c=a.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})}));break;default:if(P(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})}));if((P(n.sourceRef,"bpmn:ExclusiveGateway")||P(n.sourceRef,"bpmn:InclusiveGateway")||P(n.sourceRef,"bpmn:ComplexGateway")||P(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})}))}}),i};lr.prototype._createMenuEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,a=function(){return r(t,e.target)},o=e.label;o&&typeof o=="function"&&(o=o(t)),n=n||a;var s={label:i(o),className:e.className,id:e.actionName,action:n};return s};lr.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function i(d,f){var m;f.active?m=void 0:(m=t._moddle.create(f.options.loopCharacteristics),f.options.isSequential&&(m.isSequential=f.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:m})}var r=Te(e),a=r.loopCharacteristics,o,s,c;a&&(o=a.isSequential,s=a.isSequential===void 0,c=a.isSequential!==void 0&&!a.isSequential);var u=[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:o,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}];return u};lr.prototype._getDataObjectIsCollection=function(e){var t=this,n=this._translate;function i(s,c){t._modeling.updateModdleProperties(e,r,{isCollection:!c.active})}var r=e.businessObject.dataObjectRef,a=r.isCollection,o=[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:i}];return o};lr.prototype._getParticipantMultiplicity=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(s,c){var u=c.active,d;u||(d=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:d})}var a=e.businessObject.participantMultiplicity,o=[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:i("Participant Multiplicity"),active:!!a,action:r}];return o};lr.prototype._getAdHocEntry=function(e){var t=this._translate,n=Te(e),i=P(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement,a={id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,s){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}};return a};const A3={__depends__:[Q6,SS],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",lr]};var yd=Math.max,_d=Math.min,R3=20;function CS(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function M3(e,t,n){var i=n.x,r=n.y,a={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(a.y=e.y+r,a.height=e.height-r):t.indexOf("s")!==-1&&(a.height=e.height+r),t.indexOf("e")!==-1?a.width=e.width+i:t.indexOf("w")!==-1&&(a.x=e.x+i,a.width=e.width-i),a}function D3(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function Ep(e,t,n){var i=t[e],r=n.min&&n.min[e],a=n.max&&n.max[e];return rt(r)&&(i=(/top|left/.test(e)?_d:yd)(i,r)),rt(a)&&(i=(/top|left/.test(e)?yd:_d)(i,a)),i}function O3(e,t){if(!t)return e;var n=Ke(e);return Yv({top:Ep("top",n,t),right:Ep("right",n,t),bottom:Ep("bottom",n,t),left:Ep("left",n,t)})}function I3(e,t,n,i){var r=Ke(t),a={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},o=i?Ke(i):a,s={top:_d(a.top,o.top),left:_d(a.left,o.left),bottom:yd(a.bottom,o.bottom),right:yd(a.right,o.right)};return Yv(s)}function nc(e,t){return typeof e<"u"?e:R3}function N3(e,t){var n,i,r,a;return typeof t=="object"?(n=nc(t.left),i=nc(t.right),r=nc(t.top),a=nc(t.bottom)):n=i=r=a=nc(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+a}}function k3(e){return!(e.waypoints||e.type==="label")}function TS(e,t){var n;if(e.length===void 0?n=st(e.children,k3):n=e,n.length)return N3(Un(n),t)}var wp=Math.abs;function B3(e,t){return CS(Ke(t),Ke(e))}var L3=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Is=30;function nf(e,t){return t=t||[],e.children.filter(function(n){P(n,"bpmn:Lane")&&(nf(n,t),t.push(n))}),t}function Zo(e){return e.children.filter(function(t){return P(t,"bpmn:Lane")})}function vr(e){return vd(e,L3)||e}function $3(e,t){var n=vr(e),i=P(n,"bpmn:Process")?[]:[n],r=nf(n,i),a=Ke(e),o=Ke(t),s=B3(e,t),c=[];return r.forEach(function(u){if(u!==e){var d=0,f=s.right,m=0,v=s.left,g=Ke(u);s.top&&(wp(g.bottom-a.top)<10&&(m=o.top-g.bottom),wp(g.top-a.top)<5&&(d=o.top-g.top)),s.bottom&&(wp(g.top-a.bottom)<10&&(d=o.bottom-g.top),wp(g.bottom-a.bottom)<5&&(m=o.bottom-g.bottom)),(d||f||m||v)&&c.push({shape:u,newBounds:D3(u,{top:d,right:f,bottom:m,left:v})})}}),c}function yg(e,t,n,i,r,a,o,s,c,u,d,f){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=a,this._connect=o,this._create=s,this._popupMenu=c,this._canvas=u,this._rules=d,this._translate=f,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(m){var v=m.context,g=v.shape;if(!(!Gs(m)||!i.isOpen(g))){var y=i.getEntries(g);y.replace&&y.replace.action.click(m,g)}})}yg.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];yg.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,a=this._create,o=this._popupMenu,s=this._canvas,c=this._rules,u=this._autoPlace,d=this._translate,f={};if(e.type==="label")return f;var m=e.businessObject;function v(w,R){r.start(w,R)}function g(w){n.removeElements([e])}function y(w){var R=5,L=s.getContainer(),H=t.getPad(w).html,$=L.getBoundingClientRect(),W=H.getBoundingClientRect(),Q=W.top-$.top,pe=W.left-$.left,oe={x:pe,y:Q+W.height+R};return oe}function E(w,R,L,H){typeof L!="string"&&(H=L,L=d("Append {type}",{type:w.replace(/^bpmn:/,"")}));function $(Q,pe){var oe=i.createShape(Y({type:w},H));a.start(Q,oe,{source:pe})}var W=u?function(Q,pe){var oe=i.createShape(Y({type:w},H));u.append(pe,oe)}:$;return{group:"model",className:R,title:L,action:{dragstart:$,click:W}}}function N(w){return function(R,L){n.splitLane(L,w),t.open(L,!0)}}if(At(m,["bpmn:Lane","bpmn:Participant"])&&Ot(m)){var O=Zo(e);Y(f,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:d("Add Lane above"),action:{click:function(w,R){n.addLane(R,"top")}}}}),O.length<2&&(e.height>=120&&Y(f,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:d("Divide into two Lanes"),action:{click:N(2)}}}),e.height>=180&&Y(f,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:d("Divide into three Lanes"),action:{click:N(3)}}})),Y(f,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:d("Add Lane below"),action:{click:function(w,R){n.addLane(R,"bottom")}}}})}P(m,"bpmn:FlowNode")&&(P(m,"bpmn:EventBasedGateway")?Y(f,{"append.receive-task":E("bpmn:ReceiveTask","bpmn-icon-receive-task",d("Append ReceiveTask")),"append.message-intermediate-event":E("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",d("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":E("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",d("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":E("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",d("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":E("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",d("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):l0(m,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Y(f,{"append.compensation-activity":E("bpmn:Task","bpmn-icon-task",d("Append compensation activity"),{isForCompensation:!0})}):!P(m,"bpmn:EndEvent")&&!m.isForCompensation&&!l0(m,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!zi(m)&&Y(f,{"append.end-event":E("bpmn:EndEvent","bpmn-icon-end-event-none",d("Append EndEvent")),"append.gateway":E("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",d("Append Gateway")),"append.append-task":E("bpmn:Task","bpmn-icon-task",d("Append Task")),"append.intermediate-event":E("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",d("Append Intermediate/Boundary Event"))})),o.isEmpty(e,"bpmn-replace")||Y(f,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:d("Change type"),action:{click:function(w,R){var L=Y(y(R),{cursor:{x:w.x,y:w.y}});o.open(R,"bpmn-replace",L)}}}}),At(m,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Y(f,{"append.text-annotation":E("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:d("Connect using "+(m.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:v,dragstart:v}}}),P(m,"bpmn:TextAnnotation")&&Y(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:d("Connect using Association"),action:{click:v,dragstart:v}}}),At(m,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Y(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:d("Connect using DataInputAssociation"),action:{click:v,dragstart:v}}}),P(m,"bpmn:Group")&&Y(f,{"append.text-annotation":E("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var T=c.allowed("elements.delete",{elements:[e]});return yt(T)&&(T=T[0]===e),T&&Y(f,{delete:{group:"edit",className:"bpmn-icon-trash",title:d("Remove"),action:{click:g}}}),f};function l0(e,t,n){var i=e.$instanceOf(t),r=!1,a=e.eventDefinitions||[];return G(a,function(o){o.$type===n&&(r=!0)}),i&&r}const z3={__depends__:[vS,F6,Xr,mg,Qd,A3],__init__:["contextPadProvider"],contextPadProvider:["type",yg]};var F3={horizontal:["x","width"],vertical:["y","height"]},c0=5;function Pa(e){this._modeling=e,this._filters=[],this.registerFilter(function(t,n,i){var r=0,a=0,o;return G(t,function(s){s.waypoints||s.labelTarget||(r+=s[i],a+=1)}),o=Math.round(r/a),st(t,function(s){return s[i]<o+50})})}Pa.$inject=["modeling"];Pa.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Pa.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Pa.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(G(t,function(a){r=a(r,n,i)}),r):e};Pa.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var a=_r(e,i);return G(a,function(o,s){var c=n._findRange(o,i,r),u,d=t[t.length-1];d&&n._hasIntersection(d.range,c)?t[t.length-1].elements.push(o):(u={range:c,elements:[o]},t.push(u))}),t};Pa.prototype._setOrientation=function(e){var t=F3[e];this._axis=t[0],this._dimension=t[1]};Pa.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Pa.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+c0,max:t+n-c0}};const H3={__init__:["distributeElements"],distributeElements:["type",Pa]};function PS(e){e.registerFilter(function(t){return st(t,function(n){var i=At(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)})})}PS.$inject=["distributeElements"];const j3={__depends__:[H3],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",PS]};var AS="is not a registered action",V3="is already registered";function cr(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}cr.$inject=["eventBus","injector"];cr.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),o=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),a&&i&&this.register("copy",function(){var d=i.get();a.copy(d)}),a&&this.register("paste",function(){a.paste()}),r&&this.register("stepZoom",function(d){r.stepZoom(d.value)}),o&&this.register("zoom",function(d){o.zoom(d.value)}),n&&i&&s&&this.register("removeSelection",function(){var d=i.get();if(!!d.length){var f=s.allowed("elements.delete",{elements:d}),m;f!==!1&&(yt(f)?m=f:m=d,m.length&&n.removeElements(m.slice()))}}),c&&this.register("moveCanvas",function(d){c.moveCanvas(d)}),u&&this.register("moveSelection",function(d){u.moveSelection(d.direction,d.accelerated)})};cr.prototype.trigger=function(e,t){if(!this._actions[e])throw _g(e,AS);return this._actions[e](t)};cr.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);G(e,function(i,r){n._registerAction(r,i)})};cr.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw _g(e,V3);this._actions[e]=t};cr.prototype.unregister=function(e){if(!this.isRegistered(e))throw _g(e,AS);this._actions[e]=void 0};cr.prototype.getActions=function(){return Object.keys(this._actions)};cr.prototype.isRegistered=function(e){return!!this._actions[e]};function _g(e,t){return new Error(e+" "+t)}const U3={__init__:["editorActions"],editorActions:["type",cr]};function rf(e){e.invoke(cr,this)}Ve.exports(rf,cr);rf.$inject=["injector"];rf.prototype._registerDefaultActions=function(e){cr.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),a=e.get("lassoTool",!1),o=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),u=e.get("alignElements",!1),d=e.get("directEditing",!1),f=e.get("searchPad",!1),m=e.get("modeling",!1);t&&n&&i&&this._registerAction("selectElements",function(){var v=t.getRootElement(),g=n.filter(function(y){return y!==v});return i.select(g),g}),r&&this._registerAction("spaceTool",function(){r.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),o&&this._registerAction("handTool",function(){o.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),i&&c&&this._registerAction("distributeElements",function(v){var g=i.get(),y=v.type;g.length&&c.trigger(g,y)}),i&&u&&this._registerAction("alignElements",function(v){var g=i.get(),y=[],E=v.type;g.length&&(y=st(g,function(N){return!P(N,"bpmn:Lane")}),u.trigger(y,E))}),i&&m&&this._registerAction("setColor",function(v){var g=i.get();g.length&&m.setColor(g,v)}),i&&d&&this._registerAction("directEditing",function(){var v=i.get();v.length&&d.activate(v[0])}),f&&this._registerAction("find",function(){f.toggle()}),t&&m&&this._registerAction("moveToOrigin",function(){var v=t.getRootElement(),g,y;P(v,"bpmn:Collaboration")?y=n.filter(function(E){return P(E.parent,"bpmn:Collaboration")}):y=n.filter(function(E){return E!==v&&!P(E.parent,"bpmn:SubProcess")}),g=Un(y),m.moveElements(y,{x:-g.x,y:-g.y},v)})};const W3={__depends__:[U3],editorActions:["type",rf]};function RS(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;At(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}RS.$inject=["eventBus"];var Xp=10;function gm(e,t,n){return n||(n="round"),Math[n](e/t)*t}var G3=1200,q3=800;function uo(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",q3,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],G3,function(a){var o=a.originalEvent;if(!(!r.active||o&&Fi(o))){var s=a.context,c=s.gridSnappingContext;c||(c=s.gridSnappingContext={}),["x","y"].forEach(function(u){var d={},f=Y3(a,u,e);f&&(d.offset=f);var m=K3(a,u);m&&Y(d,m),qs(a,u)||r.snapEvent(a,u,d)})}})}uo.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);Tn(e,t,i)};uo.prototype.getGridSpacing=function(){return Xp};uo.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=gm(e,Xp);var i,r;return t&&t.min&&(i=t.min,rt(i)&&(i=gm(i+n,Xp,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,rt(r)&&(r=gm(r+n,Xp,"floor"),e=Math.min(e,r))),e-=n,e};uo.prototype.isActive=function(){return this.active};uo.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};uo.prototype.toggleActive=function(){this.setActive(!this.active)};uo.$inject=["elementRegistry","eventBus","config.gridSnapping"];function K3(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},a=n.gridSnappingContext,o=a.snapConstraints;if(o&&o[t])return o[t];o||(o=a.snapConstraints={}),o[t]||(o[t]={});var s=n.direction;i&&(Zp(t)?(o.x.min=i.left,o.x.max=i.right):(o.y.min=i.top,o.y.max=i.bottom));var c=r.min,u=r.max;return c&&(Zp(t)?p0(s)?o.x.max=c.left:o.x.min=c.right:u0(s)?o.y.max=c.top:o.y.min=c.bottom),u&&(Zp(t)?p0(s)?o.x.min=u.left:o.x.max=u.right:u0(s)?o.y.min=u.top:o.y.max=u.bottom),o[t]}function Y3(e,t,n){var i=e.context,r=e.shape,a=i.gridSnappingContext,o=a.snapLocation,s=a.snapOffset;return s&&rt(s[t])||(s||(s=a.snapOffset={}),rt(s[t])||(s[t]=0),!r)||(n.get(r.id)||(Zp(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!o)||(t==="x"?/left/.test(o)?s[t]-=r.width/2:/right/.test(o)&&(s[t]+=r.width/2):/top/.test(o)?s[t]-=r.height/2:/bottom/.test(o)&&(s[t]+=r.height/2)),s[t]}function Zp(e){return e==="x"}function u0(e){return e.indexOf("n")!==-1}function p0(e){return e.indexOf("w")!==-1}function Jo(e,t){Se.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,a=r.hints||{},o=a.autoResize;if(!!o){var s=r.shape,c=r.newBounds;Hi(o)?r.newBounds=n.snapComplex(c,o):r.newBounds=n.snapSimple(s,c)}})}Jo.$inject=["eventBus","gridSnapping","modeling"];Ve.exports(Jo,Se);Jo.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Jo.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Jo.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),r&&(i?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),Y(e,a),e};Jo.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),i&&(r?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),Y(e,a),e};var X3=2e3;function MS(e,t){e.on(["spaceTool.move","spaceTool.end"],X3,function(n){var i=n.context;if(!!i.initialized){var r=i.axis,a;r==="x"?(a=t.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=t.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}MS.$inject=["eventBus","gridSnapping"];const Z3={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Jo],gridSnappingSpaceToolBehavior:["type",MS]},J3={__depends__:[Z3],__init__:["gridSnapping"],gridSnapping:["type",uo]};var Q3=2e3;function DS(e,t){e.on("autoPlace",Q3,function(n){var i=n.source,r=dt(i),a=n.shape,o=Z1(i,a);return["x","y"].forEach(function(s){var c={};o[s]!==r[s]&&(o[s]>r[s]?c.min=o[s]:c.max=o[s],P(a,"bpmn:TextAnnotation")&&(e8(s)?c.offset=-a.width/2:c.offset=-a.height/2),o[s]=t.snapValue(o[s],c))}),o})}DS.$inject=["eventBus","gridSnapping"];function e8(e){return e==="x"}var t8=1750;function OS(e,t,n){t.on(["create.start","shape.move.start"],t8,function(i){var r=i.context,a=r.shape,o=e.getRootElement();if(!(!P(a,"bpmn:Participant")||!P(o,"bpmn:Process")||!o.children.length)){var s=r.createConstraints;!s||(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}OS.$inject=["canvas","eventBus","gridSnapping"];var n8=3e3;function af(e,t,n){Se.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],n8,function(r){var a=r.context,o=a.connection,s=a.hints||{},c=o.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||!i8(c)||n.updateWaypoints(o,i.snapMiddleSegments(c))})}af.$inject=["eventBus","gridSnapping","modeling"];Ve.exports(af,Se);af.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=o8(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function i8(e){return e.length>3}function r8(e){return e==="h"}function a8(e){return e==="v"}function o8(e,t,n){var i=ga(t,n),r={};return r8(i)&&(r.y=e.snapValue(t.y)),a8(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=Y({},t,r),n=Y({},n,r)),[t,n]}const s8={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",DS],gridSnappingCreateParticipantBehavior:["type",OS],gridSnappingLayoutConnectionBehavior:["type",af]},l8={__depends__:[J3,s8],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",RS]};var c8=30,u8=30;function tu(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,a=i.gfx;if(P(r,"bpmn:Lane"))return n.createParticipantHit(r,a);if(P(r,"bpmn:Participant"))return Ot(r)?n.createParticipantHit(r,a):n.createDefaultHit(r,a);if(P(r,"bpmn:SubProcess"))return Ot(r)?n.createSubProcessHit(r,a):n.createDefaultHit(r,a)})}tu.$inject=["eventBus","interactionEvents"];tu.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};tu.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:c8,height:e.height}),!0};tu.prototype.createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:u8}),!0};const p8={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",tu]};function of(e){e.invoke(pl,this)}Ve.exports(of,pl);of.$inject=["injector"];of.prototype.registerBindings=function(e,t){pl.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0})};const d8={__depends__:[sg],__init__:["keyboardBindings"],keyboardBindings:["type",of]};var f8={moveSpeed:1,moveSpeedAccelerated:10},h8=1500,d0="left",f0="up",h0="right",m0="down",m8={ArrowLeft:d0,Left:d0,ArrowUp:f0,Up:f0,ArrowRight:h0,Right:h0,ArrowDown:m0,Down:m0},v8={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function IS(e,t,n,i,r){var a=this;this._config=Y({},f8,e||{}),t.addListener(h8,function(o){var s=o.keyEvent,c=m8[s.key];if(!!c&&!t.isCmd(s)){var u=t.isShift(s);return a.moveSelection(c,u),!0}}),this.moveSelection=function(o,s){var c=r.get();if(!!c.length){var u=this._config[s?"moveSpeedAccelerated":"moveSpeed"],d=v8[o](u),f=i.allowed("elements.move",{shapes:c});f&&n.moveElements(c,d)}}}IS.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const g8={__depends__:[sg,Xr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",IS]};function NS(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(jw(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}NS.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const kS={__init__:["changeSupport"],changeSupport:["type",NS]};var v0=10;function nu(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function a(c,u){var d=c.shape,f=c.direction,m=c.resizeConstraints,v;c.delta=u,v=M3(d,f,u),c.newBounds=O3(v,m),c.canExecute=r.canResize(c)}function o(c){var u=c.resizeConstraints,d=c.minBounds;u===void 0&&(d===void 0&&(d=r.computeMinResizeBox(c)),c.resizeConstraints={min:Ke(d)})}function s(c){var u=c.shape,d=c.canExecute,f=c.newBounds;if(d){if(f=Kw(f),!y8(u,f))return;n.resizeShape(u,f)}}e.on("resize.start",function(c){o(c.context)}),e.on("resize.move",function(c){var u={x:c.dx,y:c.dy};a(c.context,u)}),e.on("resize.end",function(c){s(c.context)})}nu.prototype.canResize=function(e){var t=this._rules,n=xr(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};nu.prototype.activate=function(e,t,n){var i=this._dragging,r,a;if(typeof n=="string"&&(n={direction:n}),r=Y({shape:t},n),a=r.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,BS(t,a),"resize",{autoActivate:!0,cursor:_8(a),data:{shape:t,context:r}})};nu.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:v0,height:v0},r=TS(t,e.childrenBoxPadding),I3(n,t,i,r)};nu.$inject=["eventBus","rules","modeling","dragging"];function y8(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function BS(e,t){var n=dt(e),i=Ke(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function _8(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var g0="djs-resizing",y0="resize-not-ok",x8=500;function LS(e,t,n){function i(a){var o=a.shape,s=a.newBounds,c=a.frame;c||(c=a.frame=n.addFrame(o,t.getActiveLayer()),t.addMarker(o,g0)),s.width>5&&ve(c,{x:s.x,width:s.width}),s.height>5&&ve(c,{y:s.y,height:s.height}),a.canExecute?mt(c).remove(y0):mt(c).add(y0)}function r(a){var o=a.shape,s=a.frame;s&&dn(a.frame),t.removeMarker(o,g0)}e.on("resize.move",x8,function(a){i(a.context)}),e.on("resize.cleanup",function(a){r(a.context)})}LS.$inject=["eventBus","canvas","previewSupport"];var Sp=-6,Cp=4,Tp=20,ic="djs-resizer",b8=["n","w","s","e","nw","ne","se","sw"];function po(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(a){var o=a.newSelection;r.removeResizers(),o.length===1&&G(o,ai(r.addResizer,r))}),e.on("shape.changed",function(a){var o=a.element;n.isSelected(o)&&(r.removeResizers(),r.addResizer(o))})}po.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(a){so(a)&&i.activate(a,e,n)}Ie.bind(t,"mousedown",r),Ie.bind(t,"touchstart",r)};po.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),a=E8(i),o=Le("g");mt(o).add(ic),mt(o).add(ic+"-"+e.id),mt(o).add(ic+"-"+i),Ye(r,o);var s=Le("rect");ve(s,{x:-Cp/2+a.x,y:-Cp/2+a.y,width:Cp,height:Cp}),mt(s).add(ic+"-visual"),Ye(o,s);var c=Le("rect");return ve(c,{x:-Tp/2+a.x,y:-Tp/2+a.y,width:Tp,height:Tp}),mt(c).add(ic+"-hit"),Ye(o,c),ev(o,t,n),o};po.prototype.createResizer=function(e,t){var n=BS(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};po.prototype.addResizer=function(e){var t=this,n=this._resize;!n.canResize({shape:e})||G(b8,function(i){t.createResizer(e,i)})};po.prototype.removeResizers=function(){var e=this._getResizersParent();Nd(e)};po.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};po.$inject=["eventBus","canvas","selection","resize"];function E8(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Sp:e.indexOf("w")!==-1&&(t.x=Sp),e.indexOf("s")!==-1?t.y=-Sp:e.indexOf("n")!==-1&&(t.y=Sp),t}const $S={__depends__:[Jr,Ca,Zc],__init__:["resize","resizePreview","resizeHandles"],resize:["type",nu],resizePreview:["type",LS],resizeHandles:["type",po]};function pv(e,t){var n=t.create("bpmn:CategoryValue"),i=t.create("bpmn:Category",{categoryValue:[n]});return hn(e.get("rootElements"),i),Te(i).$parent=e,Te(n).$parent=i,n}function iu(e,t,n,i,r,a,o){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=o,i.registerProvider(this),e.on("element.dblclick",function(c){s(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(c){i.isActive()&&i.complete()}),e.on(["commandStack.changed"],function(c){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(c){a.removeResizers()}),e.on("create.end",500,function(c){var u=c.context,d=u.shape,f=c.context.canExecute,m=c.isTouch;m||!f||u.hints&&u.hints.createElementsBehavior===!1||s(d)}),e.on("autoPlace.end",500,function(c){s(c.shape)});function s(c,u){(u||At(c,["bpmn:Task","bpmn:TextAnnotation"])||xg(c))&&i.activate(c)}}iu.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];iu.prototype.activate=function(e){var t=br(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);Y(n,i);var r={};return(At(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||xg(e))&&Y(r,{centerVertically:!0}),Ws(e)&&Y(r,{autoResize:!0}),P(e,"bpmn:TextAnnotation")&&Y(r,{resizable:!0,autoResize:!0}),Y(n,{options:r}),n}};iu.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},a={x:i.x,y:i.y},o=t.zoom(),s=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),u=c.fontSize*o,d=c.lineHeight,f=s.fontSize*o,m=s.lineHeight,v={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(P(e,"bpmn:Lane")||C8(e))&&(Y(a,{width:i.height,height:30*o,x:i.x-i.height/2+15*o,y:r.y-30*o/2}),Y(v,{fontSize:f+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px",transform:"rotate(-90deg)"})),(At(e,["bpmn:Task","bpmn:CallActivity"])||S8(e)||xg(e))&&(Y(a,{width:i.width,height:i.height}),Y(v,{fontSize:f+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"})),w8(e)&&(Y(a,{width:i.width,x:i.x}),Y(v,{fontSize:f+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"}));var g=90*o,y=7*o,E=4*o;if(n.labelTarget&&(Y(a,{width:g,height:i.height+y+E,x:r.x-g/2,y:i.y-y}),Y(v,{fontSize:u+"px",lineHeight:d,paddingTop:y+"px",paddingBottom:E+"px"})),Ws(n)&&!Gd(n)&&!Vn(n)){var N=qd(e),O=t.getAbsoluteBBox({x:N.x,y:N.y,width:0,height:0}),T=u+y+E;Y(a,{width:g,height:T,x:O.x-g/2,y:O.y-T/2}),Y(v,{fontSize:u+"px",lineHeight:d,paddingTop:y+"px",paddingBottom:E+"px"})}return P(e,"bpmn:TextAnnotation")&&(Y(a,{width:i.width,height:i.height,minWidth:30*o,minHeight:10*o}),Y(v,{textAlign:"left",paddingTop:5*o+"px",paddingBottom:7*o+"px",paddingLeft:7*o+"px",paddingRight:5*o+"px",fontSize:f+"px",lineHeight:m})),{bounds:a,style:v}};iu.prototype.update=function(e,t,n,i){var r,a;if(P(e,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/a.width*i.width,height:e.height/a.height*i.height}),P(e,"bpmn:Group")){var o=Te(e);if(!o.categoryValueRef){var s=this._canvas.getRootElement(),c=Te(s).$parent,u=pv(c,this._bpmnFactory);Te(e).categoryValueRef=u}}T8(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function xg(e){return P(e,"bpmn:SubProcess")&&!Ot(e)}function w8(e){return P(e,"bpmn:SubProcess")&&Ot(e)}function S8(e){return P(e,"bpmn:Participant")&&!Ot(e)}function C8(e){return P(e,"bpmn:Participant")&&Ot(e)}function T8(e){return!e||!e.trim()}var _0="djs-element-hidden",x0="djs-label-hidden";function zS(e,t,n,i){var r=this,a=t.getDefaultLayer(),o,s,c;e.on("directEditing.activate",function(u){var d=u.active;if(o=d.element.label||d.element,P(o,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(o),c=Le("g");var f=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),m=r.path=Le("path");ve(m,{d:f,strokeWidth:2,stroke:P8(o)}),Ye(c,m),Ye(a,c),bi(c,o.x,o.y)}P(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,_0):(P(o,"bpmn:Task")||P(o,"bpmn:CallActivity")||P(o,"bpmn:SubProcess")||P(o,"bpmn:Participant"))&&t.addMarker(o,x0)}),e.on("directEditing.resize",function(u){if(P(o,"bpmn:TextAnnotation")){var d=u.height,f=u.dy,m=Math.max(o.height/s.height*(d+f),0),v=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:m,position:{mx:0,my:0}});ve(r.path,{d:v})}}),e.on(["directEditing.complete","directEditing.cancel"],function(u){var d=u.active;d&&(t.removeMarker(d.element.label||d.element,_0),t.removeMarker(o,x0)),o=void 0,s=void 0,c&&(dn(c),c=void 0)})}zS.$inject=["eventBus","canvas","elementRegistry","pathMap"];function P8(e,t){var n=Te(e);return n.di.get("stroke")||t||"black"}const A8={__depends__:[kS,$S,vS],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",iu],labelEditingPreview:["type",zS]};var bg=["top","bottom","left","right"],Pp=10;function Eg(e,t){Se.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var a=r.context,o=a.connection,s=o.source,c=o.target,u=a.hints||{};u.createElementsBehavior!==!1&&(n(s),n(c))}),this.postExecuted(["label.create"],function(r){var a=r.context,o=a.shape,s=a.hints||{};s.createElementsBehavior!==!1&&n(o.labelTarget)}),this.postExecuted(["elements.create"],function(r){var a=r.context,o=a.elements,s=a.hints||{};s.createElementsBehavior!==!1&&o.forEach(function(c){n(c)})});function n(r){if(!!Gd(r)){var a=D8(r);!a||i(r,a)}}function i(r,a){var o=dt(r),s=r.label,c=dt(s);if(!!s.parent){var u=Ke(r),d;switch(a){case"top":d={x:o.x,y:u.top-Pp-s.height/2};break;case"left":d={x:u.left-Pp-s.width/2,y:o.y};break;case"bottom":d={x:o.x,y:u.bottom+Pp+s.height/2};break;case"right":d={x:u.right+Pp+s.width/2,y:o.y};break}var f=jr(d,c);t.moveShape(s,f)}}}Ve.exports(Eg,Se);Eg.$inject=["eventBus","modeling"];function R8(e){var t=e.host,n=dt(e),i=Wn(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var a=bg.filter(function(o){return r.indexOf(o)===-1});return a}function M8(e){var t=dt(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return FS(t,i)});return n}function D8(e){var t=dt(e.label),n=dt(e),i=FS(n,t);if(!!O8(i)){var r=M8(e);if(e.host){var a=R8(e);r=r.concat(a)}var o=bg.filter(function(s){return r.indexOf(s)===-1});if(o.indexOf(i)===-1)return o[0]}}function FS(e,t){return Wn(t,e,5)}function O8(e){return bg.indexOf(e)!==-1}function wg(e,t,n){Se.call(this,e),this.preExecute("shape.append",function(i){var r=i.source,a=i.shape;i.position||(P(a,"bpmn:TextAnnotation")?i.position={x:r.x+r.width/2+75,y:r.y-50-a.height/2}:i.position={x:r.x+r.width+80+a.width/2,y:r.y+r.height/2})},!0)}Ve.exports(wg,Se);wg.$inject=["eventBus","elementFactory","bpmnRules"];function Sg(e,t){e.invoke(Se,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,a=st(r.incoming.concat(r.outgoing),function(o){return P(o,"bpmn:Association")});G(a,function(o){t.moveConnection(o,{x:0,y:0},i)})},!0)}Ve.exports(Sg,Se);Sg.$inject=["injector","modeling"];var b0=500;function sf(e,t){t.invoke(Se,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",b0,function(i){var r=i.elements;r=r.filter(function(a){var o=a.host;return E0(a,o)}),r.length===1&&r.map(function(a){return r.indexOf(a)}).forEach(function(a){var o=r[a];i.elements[a]=n.replaceShape(r[a],o)})},!0),this.preExecute("elements.move",b0,function(i){var r=i.shapes,a=i.newHost;if(r.length===1){var o=r[0];E0(o,a)&&(i.shapes=[n.replaceShape(o,a)])}},!0)}sf.$inject=["bpmnReplace","injector"];Ve.exports(sf,Se);sf.prototype.replaceShape=function(e,t){var n=I8(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function I8(e){var t=Te(e),n=t.eventDefinitions;return n&&n[0]}function E0(e,t){return!Vn(e)&&At(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}var N8=2e3;function Cg(e,t,n){Se.call(this,e);function i(r){return st(r.attachers,function(a){return P(a,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var a=r.context.source,o=r.context.target,s=i(o);P(a,"bpmn:EventBasedGateway")&&P(o,"bpmn:ReceiveTask")&&s.length>0&&n.removeElements(s)}),this.postExecute("connection.reconnect",function(r){var a=r.context.oldSource,o=r.context.newSource;P(a,"bpmn:Gateway")&&P(o,"bpmn:EventBasedGateway")&&G(o.outgoing,function(s){var c=s.target,u=i(c);P(c,"bpmn:ReceiveTask")&&u.length>0&&n.removeElements(u)})}),e.on("moddleCopy.canCopyProperty",N8,function(r){var a=r.parent,o=r.property,s=r.propertyName,c=t.getPropertyDescriptor(a,s);c&&c.isReference&&P(o,"bpmn:RootElement")&&a.set(s,o)})}Cg.$inject=["eventBus","moddle","modeling"];Ve.exports(Cg,Se);var k8=500;function Tg(e,t,n,i,r){n.invoke(Se,this);function a(d){return At(d,["bpmn:ReceiveTask","bpmn:SendTask"])||B8(d,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function o(d){var f=e.getDefinitions(),m=f.get("rootElements");return!!Dt(m,yr({id:d.id}))}function s(d){if(P(d,"bpmn:ErrorEventDefinition"))return"errorRef";if(P(d,"bpmn:EscalationEventDefinition"))return"escalationRef";if(P(d,"bpmn:MessageEventDefinition"))return"messageRef";if(P(d,"bpmn:SignalEventDefinition"))return"signalRef"}function c(d){if(At(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.get("messageRef");var f=d.get("eventDefinitions"),m=f[0];return m.get(s(m))}function u(d,f){if(At(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.set("messageRef",f);var m=d.get("eventDefinitions"),v=m[0];return v.set(s(v),f)}this.executed("shape.create",function(d){var f=d.shape;if(!!a(f)){var m=Te(f),v=c(m),g;v&&!o(v)&&(g=e.getDefinitions().get("rootElements"),hn(g,v),d.addedRootElement=v)}},!0),this.reverted("shape.create",function(d){var f=d.addedRootElement;if(!!f){var m=e.getDefinitions().get("rootElements");fn(m,f)}},!0),t.on("copyPaste.copyElement",function(d){var f=d.descriptor,m=d.element;if(!!a(m)){var v=Te(m),g=c(v);g&&(f.referencedRootElement=g)}}),t.on("copyPaste.pasteElement",k8,function(d){var f=d.descriptor,m=f.businessObject;if(!!a(m)){var v=f.referencedRootElement;!v||(o(v)||(v=i.copyElement(v,r.create(v.$type))),u(m,v))}})}Tg.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Ve.exports(Tg,Se);function B8(e,t){return yt(t)||(t=[t]),Go(t,function(n){return Vd(e,n)})}function Pg(e){e.invoke(Se,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;P(i,"bpmn:Lane")&&!P(r,"bpmn:Lane")&&(n.parent=vd(i,"bpmn:Participant"))})}Pg.$inject=["injector"];Ve.exports(Pg,Se);var Ap=1500,L8=2e3;function HS(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Ap,function(i){var r=i.context,a=r.shape||i.shape,o=i.hover;P(o,"bpmn:Lane")&&!At(a,["bpmn:Lane","bpmn:Participant"])&&(i.hover=vr(o),i.hoverGfx=e.getGraphics(i.hover));var s=n.getRootElement();o!==s&&(a.labelTarget||P(a,"bpmn:Group"))&&(i.hover=s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Ap,function(i){var r=i.hover;P(r,"bpmn:Lane")&&(i.hover=vr(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],Ap,function(i){var r=i.context,a=i.hover,o=r.type;P(a,"bpmn:Lane")&&/reconnect/.test(o)&&(i.hover=vr(a)||a,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],Ap,function(i){var r=i.context,a=r.start;P(a,"bpmn:Lane")&&(r.start=vr(a)||a)}),t.on("shape.move.start",L8,function(i){var r=i.shape;P(r,"bpmn:Lane")&&(i.shape=vr(r)||r)})}HS.$inject=["elementRegistry","eventBus","canvas"];function Ag(e,t,n){Se.call(this,e),this.preExecute("shape.create",function(i){var r=i.context,a=r.shape;if(P(a,"bpmn:DataObjectReference")&&a.type!=="label"){var o=t.create("bpmn:DataObject");a.businessObject.dataObjectRef=o}})}Ag.$inject=["eventBus","bpmnFactory","moddle"];Ve.exports(Ag,Se);var dv=20,fv=20,jS=30,Rp=2e3;function Rg(e,t,n){Se.call(this,t),t.on(["create.start","shape.move.start"],Rp,function(r){var a=r.context,o=a.shape,s=e.getRootElement();if(!(!P(o,"bpmn:Participant")||!P(s,"bpmn:Process")||!s.children.length)){var c=s.children.filter(function(f){return!P(f,"bpmn:Group")&&!Vn(f)&&!F8(f)});if(!!c.length){var u=Un(c),d=$8(o,u);Y(o,d),a.createConstraints=z8(o,u)}}}),t.on("create.start",Rp,function(r){var a=r.context,o=a.shape,s=e.getRootElement(),c=e.getGraphics(s);function u(d){d.element=s,d.gfx=c}P(o,"bpmn:Participant")&&P(s,"bpmn:Process")&&(t.on("element.hover",Rp,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function i(){var r=e.getRootElement();return P(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",Rp,function(r){var a=r.elements,o=r.parent,s=H8(a),c;s&&P(o,"bpmn:Process")&&(r.parent=i(),c=r.hints=r.hints||{},c.participant=s,c.process=o,c.processRef=Te(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var a=r.parent,o=r.shape;P(o,"bpmn:Participant")&&P(a,"bpmn:Process")&&(r.parent=i(),r.process=a,r.processRef=Te(o).get("processRef"))},!0),this.execute("shape.create",function(r){var a=r.hints||{},o=r.process||a.process,s=r.shape,c=a.participant;o&&(!c||s===c)&&Te(s).set("processRef",Te(o))},!0),this.revert("shape.create",function(r){var a=r.hints||{},o=r.process||a.process,s=r.processRef||a.processRef,c=r.shape,u=a.participant;o&&(!u||c===u)&&Te(c).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var a=r.hints||{},o=r.process||r.hints.process,s=r.shape,c=a.participant;if(o){var u=o.children.slice();c?s===c&&n.moveElements(u,{x:0,y:0},c):n.moveElements(u,{x:0,y:0},s)}},!0)}Rg.$inject=["canvas","eventBus","modeling"];Ve.exports(Rg,Se);function $8(e,t){t={width:t.width+dv*2+jS,height:t.height+fv*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function z8(e,t){return t=Ke(t),{bottom:t.top+e.height/2-fv,left:t.right-e.width/2+dv,top:t.bottom-e.height/2+fv,right:t.left+e.width/2-dv-jS}}function F8(e){return!!e.waypoints}function H8(e){return Dt(e,function(t){return P(t,"bpmn:Participant")})}var w0="__targetRef_placeholder";function Mg(e,t){Se.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],S0(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],S0(a));function n(o,s,c){var u=o.get("dataInputAssociations");return Dt(u,function(d){return d!==c&&d.targetRef===s})}function i(o,s){var c=o.get("properties"),u=Dt(c,function(d){return d.name===w0});return!u&&s&&(u=t.create("bpmn:Property",{name:w0}),hn(c,u)),u}function r(o,s){var c=i(o);!c||n(o,c,s)||fn(o.get("properties"),c)}function a(o){var s=o.context,c=s.connection,u=c.businessObject,d=c.target,f=d&&d.businessObject,m=s.newTarget,v=m&&m.businessObject,g=s.oldTarget||s.target,y=g&&g.businessObject,E=c.businessObject,N;y&&y!==f&&r(y,u),v&&v!==f&&r(v,u),f?(N=i(f,!0),E.targetRef=N):E.targetRef=null}}Mg.$inject=["eventBus","bpmnFactory"];Ve.exports(Mg,Se);function S0(e){return function(t){var n=t.context,i=n.connection;if(P(i,"bpmn:DataInputAssociation"))return e(t)}}function lf(e){this._bpmnUpdater=e}lf.$inject=["bpmnUpdater"];lf.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,i=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)};lf.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,i=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)};function Dg(e,t,n,i){Se.call(this,i),t.registerHandler("dataStore.updateContainment",lf);function r(){return n.filter(function(s){return P(s,"bpmn:Participant")&&Te(s).processRef})[0]}function a(s){return s.children.filter(function(c){return P(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function o(s,c){var u=s.businessObject||s;if(c=c||r(),c){var d=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:u,newSemanticParent:d.processRef||d,newDiParent:d.di})}}this.preExecute("shape.create",function(s){var c=s.context,u=c.shape;P(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var c=s.context,u=c.shapes,d=u.filter(function(f){return P(f,"bpmn:DataStoreReference")});d.length&&(c.hints||(c.hints={}),c.hints.autoResize=u.filter(function(f){return!P(f,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var c=s.context,u=c.shape,d=u.parent;P(u,"bpmn:DataStoreReference")&&u.type!=="label"&&P(d,"bpmn:Collaboration")&&o(u)}),this.postExecute("shape.move",function(s){var c=s.context,u=c.shape,d=c.oldParent,f=u.parent;if(!P(d,"bpmn:Collaboration")&&P(u,"bpmn:DataStoreReference")&&u.type!=="label"&&P(f,"bpmn:Collaboration")){var m=P(d,"bpmn:Participant")?d:V8(d,"bpmn:Participant");o(u,m)}}),this.postExecute("shape.delete",function(s){var c=s.context,u=c.shape,d=e.getRootElement();At(u,["bpmn:Participant","bpmn:SubProcess"])&&P(d,"bpmn:Collaboration")&&a(d).filter(function(f){return j8(f,u)}).forEach(function(f){o(f)})}),this.postExecute("canvas.updateRoot",function(s){var c=s.context,u=c.oldRoot,d=c.newRoot,f=a(u);f.forEach(function(m){P(d,"bpmn:Process")&&o(m,d)})})}Dg.$inject=["canvas","commandStack","elementRegistry","eventBus"];Ve.exports(Dg,Se);function j8(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function V8(e,t){for(;e.parent;){if(P(e.parent,t))return e.parent;e=e.parent}}var U8=500;function Og(e,t,n){Se.call(this,e);function i(r,a){var o=Zo(a),s=[],c=[];if(Ko(o,function(m){return m.y>r.y?c.push(m):s.push(m),m.children}),!!o.length){var u;c.length&&s.length?u=r.height/2:u=r.height;var d,f;s.length&&(d=n.calculateAdjustments(s,"y",u,r.y-10),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:u},"s")),c.length&&(f=n.calculateAdjustments(c,"y",-u,r.y+r.height+10),n.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:-u},"n"))}}this.postExecuted("shape.delete",U8,function(r){var a=r.context,o=a.hints,s=a.shape,c=a.oldParent;!P(s,"bpmn:Lane")||o&&o.nested||i(s,c)})}Og.$inject=["eventBus","modeling","spaceTool"];Ve.exports(Og,Se);var C0=500;function cf(e,t){t.invoke(Se,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",C0,function(i){var r=i.elements;r.filter(function(a){var o=a.host;return T0(a,o)}).map(function(a){return r.indexOf(a)}).forEach(function(a){i.elements[a]=n.replaceShape(r[a])})},!0),this.preExecute("elements.move",C0,function(i){var r=i.shapes,a=i.newHost;r.forEach(function(o,s){var c=o.host;T0(o,G8(r,c)?c:a)&&(r[s]=n.replaceShape(o))})},!0)}cf.$inject=["bpmnReplace","injector"];Ve.exports(cf,Se);cf.prototype.replaceShape=function(e){var t=W8(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function W8(e){var t=Te(e),n=t.eventDefinitions;return n&&n[0]}function T0(e,t){return!Vn(e)&&P(e,"bpmn:BoundaryEvent")&&!t}function G8(e,t){return e.indexOf(t)!==-1}function Ig(e,t,n){Se.call(this,e);function i(r,a,o){var s=a.waypoints,c,u,d,f,m,v,g,y=r.outgoing.slice(),E=r.incoming.slice(),N;rt(o.width)?N=dt(o):N=o;var O=av(s,N);if(O){if(c=s.slice(0,O.index),u=s.slice(O.index+(O.bendpoint?1:0)),!c.length||!u.length)return;d=O.bendpoint?s[O.index]:N,(c.length===1||!P0(r,c[c.length-1]))&&c.push(A0(d)),(u.length===1||!P0(r,u[0]))&&u.unshift(A0(d))}f=a.source,m=a.target,t.canConnect(f,r,a)&&(n.reconnectEnd(a,r,c||N),v=a),t.canConnect(r,m,a)&&(v?g=n.connect(r,m,{type:a.type,waypoints:u}):(n.reconnectStart(a,r,u||N),g=a));var T=[].concat(v&&st(E,function(w){return w.source===v.source})||[],g&&st(y,function(w){return w.target===g.target})||[]);T.length&&n.removeElements(T)}this.preExecute("elements.move",function(r){var a=r.newParent,o=r.shapes,s=r.delta,c=o[0];if(!(!c||!a)){a&&a.waypoints&&(r.newParent=a=a.parent);var u=dt(c),d={x:u.x+s.x,y:u.y+s.y},f=Dt(a.children,function(m){var v=t.canInsert(o,m);return v&&av(m.waypoints,d)});f&&(r.targetFlow=f,r.position=d)}},!0),this.postExecuted("elements.move",function(r){var a=r.shapes,o=r.targetFlow,s=r.position;o&&i(a[0],o,s)},!0),this.preExecute("shape.create",function(r){var a=r.parent,o=r.shape;t.canInsert(o,a)&&(r.targetFlow=a,r.parent=a.parent)},!0),this.postExecuted("shape.create",function(r){var a=r.shape,o=r.targetFlow,s=r.position;o&&i(a,o,s)},!0)}Ve.exports(Ig,Se);Ig.$inject=["eventBus","bpmnRules","modeling"];function P0(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function A0(e){return Y({},e)}function Ng(e,t){Se.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.source,a=i.target,o=a.incoming.slice();i.hints&&i.hints.createElementsBehavior===!1||P(r,"bpmn:EventBasedGateway")&&a.incoming.length&&o.filter(ym).forEach(function(s){t.removeConnection(s)})}),this.preExecuted("shape.replace",function(n){var i=n.context.newShape,r,a;!P(i,"bpmn:EventBasedGateway")||(r=i.outgoing.filter(ym).map(function(o){return o.target}),a=r.reduce(function(o,s){var c=s.incoming.filter(ym);return o.concat(c)},[]),a.forEach(function(o){o.source!==i&&t.removeConnection(o)}))})}Ng.$inject=["eventBus","modeling"];Ve.exports(Ng,Se);function ym(e){return P(e,"bpmn:SequenceFlow")}var q8=2e3;function kg(e,t,n,i,r,a){r.invoke(Se,this);function o(){var f=t.getRootElement(),m=Te(f);return m.$parent}function s(f){var m=Te(f),v=m.categoryValueRef;if(!!v){var g=v.$parent;!v||(fn(g.categoryValue,v),g&&!g.categoryValue.length&&c(g))}}function c(f){var m=o();fn(m.get("rootElements"),f)}function u(){return n.filter(function(f){return P(f,"bpmn:Group")})}function d(f,m){return f.some(function(v){var g=Te(v);return g.categoryValueRef&&g.categoryValueRef===m})}this.executed("shape.delete",function(f){var m=f.context,v=m.shape;if(P(v,"bpmn:Group")){var g=Te(v),y=g.categoryValueRef,E=u();d(E,y)||s(v)}}),this.reverted("shape.delete",function(f){var m=f.context,v=m.shape;if(P(v,"bpmn:Group")){var g=Te(v),y=g.categoryValueRef,E=o(),N=y?y.$parent:null;hn(N.get("categoryValue"),y),hn(E.get("rootElements"),N)}}),this.execute("shape.create",function(f){var m=f.context,v=m.shape,g=Te(v);if(P(g,"bpmn:Group")&&!g.categoryValueRef){var y=o(),E=pv(y,e);g.categoryValueRef=E}}),this.revert("shape.create",function(f){var m=f.context,v=m.shape;P(v,"bpmn:Group")&&(s(v),delete Te(v).categoryValueRef)}),i.on("moddleCopy.canCopyProperty",q8,function(f){var m=f.property,v;if(P(m,"bpmn:CategoryValue"))return v=pv(o(),e),a.copyElement(m,v)})}kg.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"];Ve.exports(kg,Se);function hv(e,t,n,i){var r,a,o,s,c;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(a=e.y-n.y,o=e.x-n.x,c=(i.x-n.x)*a-(i.y-n.y)*o,s=c/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function VS(e){function t(i,r,a){var o={x:a.x,y:a.y-50},s={x:a.x-50,y:a.y},c=hv(i,r,a,o),u=hv(i,r,a,s),d;c&&u?R0(c,a)>R0(u,a)?d=u:d=c:d=c||u,i.original=d}function n(i){var r=i.waypoints;t(r[0],r[1],dt(i.source)),t(r[r.length-1],r[r.length-2],dt(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}VS.$inject=["eventBus"];function R0(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Bg(e){Se.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=Te(n.context.shape);At(i,t)&&!i.di.get("isHorizontal")&&i.di.set("isHorizontal",!0)})}Bg.$inject=["eventBus"];Ve.exports(Bg,Se);function US(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function M0(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function K8(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function Y8(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],a=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/a}function WS(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},a=Y8([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+a*r.x,y:n.y+a*r.y}}function X8(e,t){var n=WS(e,t),i={x:n.x-e.x,y:n.y-e.y};return US(i)}function xd(e,t){return US({x:e.x-t.x,y:e.y-t.y})}var GS=Math.sqrt,qS=Math.min,Z8=Math.max,D0=Math.abs;function O0(e){return Math.pow(e,2)}function rc(e,t){return GS(O0(e.x-t.x)+O0(e.y-t.y))}function J8(e,t){var n=0,i,r,a,o,s,c,u,d,f,m,v;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],N0(i,r)?u=[i]:(a=rc(e,i),o=rc(e,r),c=qS(a,o),u=Q8(i,r,e,c)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(d={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:N0(i,u[0])?n:n+1}),u.length===2&&(s=t4(u[0],u[1]),d={type:"segment",position:s,segmentIndex:n,relativeLocation:rc(i,s)/rc(i,r)}),f=rc(d.position,e),(!v||m>f)&&(v=d,m=f)}return v}function Q8(e,t,n,i){var r=t.x-e.x,a=t.y-e.y,o=n.x-e.x,s=n.y-e.y,c=r*r+a*a,u=r*o+a*s,d=o*o+s*s-i*i,f=u/c,m=d/c,v=f*f-m;if(v<0&&v>-1e-6&&(v=0),v<0)return[];var g=GS(v),y=-f+g,E=-f-g,N={x:e.x-r*y,y:e.y-a*y};if(v===0)return[N];var O={x:e.x-r*E,y:e.y-a*E};return[N,O].filter(function(T){return e4(T,e,t)})}function e4(e,t,n){return I0(e.x,t.x,n.x)&&I0(e.y,t.y,n.y)}function I0(e,t,n){return e>=qS(t,n)-bd&&e<=Z8(t,n)+bd}function t4(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var bd=.1;function N0(e,t){return D0(e.x-t.x)<=bd&&D0(e.y-t.y)<=bd}function n4(e,t,n,i){var r=n.segmentIndex,a=t.length-e.length;if(i.segmentMove){var o=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===o?s:r>=s?r+a<s?s:r+a:r}if(i.bendpointMove){var c=i.bendpointMove.insert,u=i.bendpointMove.bendpointIndex,d;if(a===0)return r;if(r>=u&&(d=c?r+1:r-1),r<u&&(d=r,c&&n.type!=="bendpoint"&&u-1===r)){var f=KS(t,u);f<n.relativeLocation&&d++}return d}return a===0?r:i.connectionStart?r===0?0:null:i.connectionEnd&&r===e.length-2?t.length-2:null}function i4(e,t,n,i){var r=0,a=0,o=r4(e),s=J8(o,n),c=s.segmentIndex,u=n4(n,t,s,i);if(u===null)return{x:r,y:a};if(u<0||u>t.length-2)return{x:r,y:a};var d=k0(n,c),f=k0(t,u),m=s.position,v=o4(d,m),g=a4(d,f);if(s.type==="bendpoint"){var y=t.length-n.length,E=s.bendpointIndex,N=n[E];if(t.indexOf(N)!==-1)return{x:r,y:a};if(y===0){var O=t[E];return{x:O.x-s.position.x,y:O.y-s.position.y}}y<0&&E!==0&&E<n.length-1&&(v=KS(n,E))}var T={x:(f[1].x-f[0].x)*v+f[0].x,y:(f[1].y-f[0].y)*v+f[0].y},w=K8({x:o.x-m.x,y:o.y-m.y},g);return r=T.x+w.x-o.x,a=T.y+w.y-o.y,Xa({x:r,y:a})}function KS(e,t){var n=xd(e[t-1],e[t]),i=xd(e[t],e[t+1]),r=n/(n+i);return r}function r4(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function a4(e,t){var n=M0(e),i=M0(t);return i-n}function k0(e,t){return[e[t],e[t+1]]}function o4(e,t){var n=xd(e[0],e[1]),i=xd(e[0],t);return n===0?0:i/n}function ru(e,t,n){var i=hc(t),r=hc(n),a=jr(e,i),o={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)};return Xa({x:r.x+o.x,y:r.y+o.y})}function B0(e,t,n){var i=hc(e),r=hc(t),a=hc(n),o=jr(e,i),s=jr(i,r),c=s4(i,t,n);if(c)return c;var u={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},d={x:a.x+u.x,y:a.y+u.y};return Xa({x:d.x+o.x-e.x,y:d.y+o.y-e.y})}function s4(e,t,n){var i=Ke(t),r=Ke(n);if(l4(i,r))return null;var a=Wn(t,e),o,s,c;if(a==="top")o={x:0,y:r.bottom-i.bottom};else if(a==="bottom")o={x:0,y:r.top-i.top};else if(a==="right")o={x:r.left-i.left,y:0};else if(a==="left")o={x:r.right-i.right,y:0};else return null;return s={x:e.x+o.x,y:e.y+o.y},c=Wn(n,s),c!==a?null:o}function l4(e,t){return c4(e,t)||u4(e,t)}function c4(e,t){return e.right!==t.right&&e.left!==t.left}function u4(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var p4={width:90,height:20},L0="name",$0="text";function Lg(e,t,n,i){Se.call(this,e),this.postExecute("element.updateProperties",function(a){var o=a.context,s=o.element,c=o.properties;if(L0 in c&&t.updateLabel(s,c[L0]),$0 in c&&P(s,"bpmn:TextAnnotation")){var u=i.getTextAnnotationBounds({x:s.x,y:s.y,width:s.width,height:s.height},c[$0]||"");t.updateLabel(s,c.text,u)}}),this.postExecute(["shape.create","connection.create"],function(a){var o=a.context,s=o.hints||{};if(s.createElementsBehavior!==!1){var c=o.shape||o.connection,u=c.businessObject;if(!(Vn(c)||!Ws(c))&&!!br(c)){var d=qd(c),f=i.getExternalLabelBounds(p4,br(c));t.createLabel(c,d,{id:u.id+"_label",businessObject:u,width:f.width,height:f.height})}}}),this.postExecute("shape.delete",function(a){var o=a.context,s=o.labelTarget,c=o.hints||{};s&&c.unsetLabel!==!1&&t.updateLabel(s,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(a){var o=a.context,s=o.shape,c,u;!s.labelTarget||!P(s.labelTarget||s,"bpmn:BaseElement")||(c=s.businessObject,u=c.di,u.label||(u.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),Y(u.label.bounds,{x:s.x,y:s.y,width:s.width,height:s.height}))});function r(a){var o=a.context,s=o.connection,c=s.label,u=Y({},o.hints),d=o.newWaypoints||s.waypoints,f=o.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),i4(c,d,f,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var o=a.context,s=o.hints||{};if(s.labelBehavior!==!1){var c=o.connection,u=c.label,d;!u||!u.parent||(d=r(a),t.moveShape(u,d))}}),this.postExecute(["shape.replace"],function(a){var o=a.context,s=o.newShape,c=o.oldShape,u=Te(s);u&&Ws(u)&&c.label&&s.label&&(s.label.x=c.label.x,s.label.y=c.label.y)}),this.postExecute("shape.resize",function(a){var o=a.context,s=o.shape,c=o.newBounds,u=o.oldBounds;if(Gd(s)){var d=s.label,f=dt(d),m=h4(u),v=f4(f,m),g=d4(v,u,c);t.moveShape(d,g)}})}Ve.exports(Lg,Se);Lg.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function d4(e,t,n){var i=ru(e,t,n);return Xa(jr(i,e))}function f4(e,t){if(!!t.length){var n=m4(e,t);return WS(e,n)}}function h4(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function m4(e,t){var n=t.map(function(r){return{line:r,distance:X8(e,r)}}),i=_r(n,"distance");return i[0].line}function uf(e,t,n){var i=df(e),r=XS(i,t),a=i[0];return r.length?r[r.length-1]:ru(a.original||a,n,t)}function pf(e,t,n){var i=df(e),r=XS(i,t),a=i[i.length-1];return r.length?r[0]:ru(a.original||a,n,t)}function $g(e,t,n){var i=df(e),r=YS(t,n),a=i[0];return ru(a.original||a,r,t)}function zg(e,t,n){var i=df(e),r=YS(t,n),a=i[i.length-1];return ru(a.original||a,r,t)}function YS(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function df(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function XS(e,t){var n=Nn(e,g4);return st(n,function(i){return v4(i,t)})}function v4(e,t){return Wn(t,e,1)==="intersect"}function g4(e){return e.original||e}function Fg(e,t){Se.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(!!y4(i,r)){var a=_4(i);a.incoming.forEach(function(o){var s=pf(o,r,i);t.reconnectEnd(o,r,s)}),a.outgoing.forEach(function(o){var s=uf(o,r,i);t.reconnectStart(o,r,s)})}},!0)}Fg.$inject=["eventBus","modeling"];Ve.exports(Fg,Se);function y4(e,t){return P(e,"bpmn:Participant")&&Ot(e)&&P(t,"bpmn:Participant")&&!Ot(t)}function _4(e){var t=kd([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(a){P(a,"bpmn:MessageFlow")&&n.push(a)}),r.outgoing.forEach(function(a){P(a,"bpmn:MessageFlow")&&i.push(a)}))},[]),{incoming:n,outgoing:i}}var x4="flow elements must be children of pools/participants";function ZS(e,t,n){function i(r,a,o){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:o||2e3,html:"<div>"+a+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var a=r.context,o=a.shape,s=a.target;P(s,"bpmn:Collaboration")&&P(o,"bpmn:FlowNode")&&i(r,n(x4))})}ZS.$inject=["eventBus","tooltips","translate"];function Hg(e,t,n,i){Se.call(this,e);var r=i.get("dragging",!1);function a(c){var u=c.source,d=c.target,f=c.parent;if(!!f){var m,v;P(c,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,d)||(v=!0),n.canConnectMessageFlow(u,d)&&(m="bpmn:MessageFlow")),P(c,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,d)||(v=!0),n.canConnectSequenceFlow(u,d)&&(m="bpmn:SequenceFlow")),P(c,"bpmn:Association")&&!n.canConnectAssociation(u,d)&&(v=!0),v&&t.removeConnection(c),m&&t.connect(u,d,{type:m,waypoints:c.waypoints.slice()})}}function o(c){var u=c.context,d=u.connection,f=u.newSource||d.source,m=u.newTarget||d.target,v,g;v=n.canConnect(f,m),!(!v||v.type===d.type)&&(g=t.connect(f,m,{type:v.type,waypoints:d.waypoints.slice()}),t.removeConnection(d),u.connection=g,r&&s(d,g))}function s(c,u){var d=r.context(),f=d&&d.payload.previousSelection,m;!f||!f.length||(m=f.indexOf(c),m!==-1&&f.splice(m,1,u))}this.postExecuted("elements.move",function(c){var u=c.closure,d=u.allConnections;G(d,a)},!0),this.preExecute("connection.reconnect",o),this.postExecuted("element.updateProperties",function(c){var u=c.context,d=u.properties,f=u.element,m=f.businessObject,v;d.default&&(v=Dt(f.outgoing,yr({id:f.businessObject.default.id})),v&&t.updateProperties(v,{conditionExpression:void 0})),d.conditionExpression&&m.sourceRef.default===m&&t.updateProperties(f.source,{default:void 0})})}Ve.exports(Hg,Se);Hg.$inject=["eventBus","modeling","bpmnRules","injector"];function jg(e,t){Se.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;P(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&t.makeProcess()},!0)}jg.$inject=["eventBus","modeling"];Ve.exports(jg,Se);function ff(e,t,n,i,r,a){i.invoke(Se,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(o){var s=o.context,c=s.parent,u=s.elements,d=t.canReplace(u,c);d&&this.replaceElements(u,d.replacements)},this),this.postExecuted(["elements.move"],500,function(o){var s=o.context,c=s.newParent,u=s.newHost,d=[];G(s.closure.topLevel,function(m){zi(m)?d=d.concat(m.children):d=d.concat(m)}),d.length===1&&u&&(c=u);var f=t.canReplace(d,c);f&&this.replaceElements(d,f.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(o){var s=o.context,c=s.oldShape,u=s.newShape,d=c.attachers,f;d&&d.length&&(f=t.canReplace(d,u),this.replaceElements(d,f.replacements))},this),this.postExecuted(["shape.replace"],1500,function(o){var s=o.context,c=s.oldShape,u=s.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(u,{id:c.id})})}Ve.exports(ff,Se);ff.prototype.replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;G(t,function(a){var o={type:a.newElementType},s=n.get(a.oldElementId),c=e.indexOf(s);e[c]=i.replaceElement(s,o,{select:!1})}),t&&r.select(e)};ff.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var b4=1500,$o={width:300,height:60},Mc={width:300,height:150},JS={width:140,height:120},QS={width:50,height:30};function eC(e){e.on("resize.start",b4,function(t){var n=t.context,i=n.shape,r=n.direction,a=n.balanced;(P(i,"bpmn:Lane")||P(i,"bpmn:Participant"))&&(n.resizeConstraints=A4(i,r,a)),P(i,"bpmn:Participant")&&(n.minDimensions=Mc),P(i,"bpmn:SubProcess")&&Ot(i)&&(n.minDimensions=JS),P(i,"bpmn:TextAnnotation")&&(n.minDimensions=QS)})}eC.$inject=["eventBus"];var Mp=Math.abs,E4=Math.min,w4=Math.max;function tC(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function Dp(e,t,n){return tC(e,t,n,E4)}function Op(e,t,n){return tC(e,t,n,w4)}var S4=20,C4=50,T4=20,P4=20;function A4(e,t,n){var i=vr(e),r=!0,a=!0,o=nf(i,[i]),s=Ke(e),c={},u={};/e/.test(t)?u.right=s.left+$o.width:/w/.test(t)&&(u.left=s.right-$o.width),o.forEach(function(f){var m=Ke(f);/n/.test(t)&&(m.top<s.top-10&&(r=!1),n&&Mp(s.top-m.bottom)<10&&Op(c,"top",m.top+$o.height),Mp(s.top-m.top)<5&&Dp(u,"top",m.bottom-$o.height)),/s/.test(t)&&(m.bottom>s.bottom+10&&(a=!1),n&&Mp(s.bottom-m.top)<10&&Dp(c,"bottom",m.bottom-$o.height),Mp(s.bottom-m.bottom)<5&&Op(u,"bottom",m.top+$o.height))});var d=i.children.filter(function(f){return!f.hidden&&!f.waypoints&&(P(f,"bpmn:FlowElement")||P(f,"bpmn:Artifact"))});return d.forEach(function(f){var m=Ke(f);r&&/n/.test(t)&&Dp(u,"top",m.top-T4),/e/.test(t)&&Op(u,"right",m.right+S4),a&&/s/.test(t)&&Op(u,"bottom",m.bottom+P4),/w/.test(t)&&Dp(u,"left",m.left-C4)}),{min:u,max:c}}var z0=1001;function nC(e,t){e.on("resize.start",z0+500,function(n){var i=n.context,r=i.shape;(P(r,"bpmn:Lane")||P(r,"bpmn:Participant"))&&(i.balanced=!Gs(n))}),e.on("resize.end",z0,function(n){var i=n.context,r=i.shape,a=i.canExecute,o=i.newBounds;if(P(r,"bpmn:Lane")||P(r,"bpmn:Participant"))return a&&(o=Kw(o),t.resizeLane(r,o,i.balanced)),!1})}nC.$inject=["eventBus","modeling"];function Vg(e,t,n){Se.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var a=r.incoming[0],o=r.outgoing[0];if(!(!P(a,"bpmn:SequenceFlow")||!P(o,"bpmn:SequenceFlow"))&&t.canConnect(a.source,o.target,a)){var s=R4(a.waypoints,o.waypoints);n.reconnectEnd(a,o.target,s)}}})}Ve.exports(Vg,Se);Vg.$inject=["eventBus","bpmnRules","modeling"];function Ms(e){return e.original||e}function R4(e,t){var n=hv(Ms(e[e.length-2]),Ms(e[e.length-1]),Ms(t[1]),Ms(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Ms(e[0]),Ms(t[t.length-1])]}var M4=Math.max;function iC(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,a={};return G(n,function(o){var s=o.id;P(o,"bpmn:Participant")&&(D4(i)?a[s]=Mc:a[s]={width:Mc.width,height:O4(o,r)}),P(o,"bpmn:SubProcess")&&Ot(o)&&(a[s]=JS),P(o,"bpmn:TextAnnotation")&&(a[s]=QS)}),a})}iC.$inject=["eventBus"];function D4(e){return e==="x"}function O4(e,t){var n;return I4(e)?(n=N4(e,t),M4(Mc.height,n)):Mc.height}function I4(e){return!!Zo(e).length}function N4(e,t){var n=Zo(e),i;return i=rC(n,t),e.height-i.height+$o.height}function rC(e,t){var n,i,r;for(n=0;n<e.length;n++)if(i=e[n],t>=i.y&&t<=i.y+i.height)return r=Zo(i),r.length?rC(r,t):i}function Ug(e,t){e.invoke(Se,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!P(r,"bpmn:SubProcess")||!P(i,"bpmn:Task")||!Ot(r))){var a=k4(r);t.createShape({type:"bpmn:StartEvent"},a,r)}})}Ug.$inject=["injector","modeling"];Ve.exports(Ug,Se);function k4(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}var _m=500;function Wg(e,t,n,i){Se.call(this,e);function r(s){s.length&&s.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function a(s,c){var u=s.children,d=c,f,m;return f=B4(u).concat([s]),m=TS(f),m?(d.width=Math.max(m.width,d.width),d.height=Math.max(m.height,d.height),d.x=m.x+(m.width-d.width)/2,d.y=m.y+(m.height-d.height)/2):(d.x=s.x+(s.width-d.width)/2,d.y=s.y+(s.height-d.height)/2),d}function o(s,c){return{x:s.x+(s.width-c.width)/2,y:s.y+(s.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],_m,function(s){var c=s.context,u=c.shape;!P(u,"bpmn:SubProcess")||(u.collapsed?Te(u).di.isExpanded=!1:(r(u.children),Te(u).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],_m,function(s){var c=s.context,u=c.shape;u.collapsed?Te(u).di.isExpanded=!1:Te(u).di.isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],_m,function(s){var c=s.context.shape,u=t._getDefaultSize(c),d;c.collapsed?d=o(c,u):d=a(c,u),n.resizeShape(c,d,null,{autoResize:c.collapsed?!1:"nwse"})})}Ve.exports(Wg,Se);Wg.$inject=["eventBus","elementFactory","modeling"];function B4(e){return e.filter(function(t){return!t.hidden})}function Gg(e,t,n,i){t.invoke(Se,this),this.preExecute("shape.delete",function(r){var a=r.context,o=a.shape,s=o.businessObject;Vn(o)||(P(o,"bpmn:Participant")&&Ot(o)&&n.ids.unclaim(s.processRef.id),i.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var a=r.context,o=a.connection,s=o.businessObject;i.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),a=r.businessObject;P(r,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}Ve.exports(Gg,Se);Gg.$inject=["canvas","injector","moddle","modeling"];var L4=500,$4=5e3;function qg(e,t,n){Se.call(this,e);var i;function r(){return i=i||new z4,i.enter(),i}function a(){if(!i)throw new Error(n("out of bounds release"));return i}function o(){if(!i)throw new Error(n("out of bounds release"));var c=i.leave();return c&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),c}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,$4,function(c){r()}),this.postExecuted(s,L4,function(c){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var u=c.context,d=u.shape,f=a();d.labelTarget||(P(d,"bpmn:Lane")&&f.addLane(d),P(d,"bpmn:FlowNode")&&f.addFlowNode(d))})}qg.$inject=["eventBus","modeling","translate"];Ve.exports(qg,Se);function z4(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Kg(e,t){Se.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,a=r.source;F4(r,a)&&t.updateProperties(a,{default:null})})}Ve.exports(Kg,Se);Kg.$inject=["eventBus","modeling"];function F4(e,t){if(!P(e,"bpmn:SequenceFlow"))return!1;var n=Te(t),i=Te(e);return n.get("default")===i}const H4={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",Eg],appendBehavior:["type",wg],associationBehavior:["type",Sg],attachEventBehavior:["type",sf],boundaryEventBehavior:["type",Cg],rootElementReferenceBehavior:["type",Tg],createBehavior:["type",Pg],fixHoverBehavior:["type",HS],createDataObjectBehavior:["type",Ag],createParticipantBehavior:["type",Rg],dataInputAssociationBehavior:["type",Mg],dataStoreBehavior:["type",Dg],deleteLaneBehavior:["type",Og],detachEventBehavior:["type",cf],dropOnFlowBehavior:["type",Ig],eventBasedGatewayBehavior:["type",Ng],groupBehavior:["type",kg],importDockingFix:["type",VS],isHorizontalFix:["type",Bg],labelBehavior:["type",Lg],messageFlowBehavior:["type",Fg],modelingFeedback:["type",ZS],replaceConnectionBehavior:["type",Hg],removeParticipantBehavior:["type",jg],replaceElementBehaviour:["type",ff],resizeBehavior:["type",eC],resizeLaneBehavior:["type",nC],removeElementBehavior:["type",Vg],toggleElementCollapseBehaviour:["type",Wg],spaceToolBehavior:["type",iC],subProcessStartEventBehavior:["type",Ug],unclaimIdBehavior:["type",Gg],updateFlowNodeRefsBehavior:["type",qg],unsetDefaultFlowBehavior:["type",Kg]};function aC(e,t){var n=Wn(e,t,-15);return n!=="intersect"?n:null}function Gn(e){co.call(this,e)}Ve.exports(Gn,co);Gn.$inject=["eventBus"];Gn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return j4(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,a=i.targetAttach;if(a)return!1;r&&(n.parent=r);try{return Jp(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Jp(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return dC(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return Ed(i)&&!wd(t,i)?!1:Wo(t,function(r){return Ed(r)?Jp(r.source,r.target,r):r.host?vc(r,r.host,null,n):yv(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return vc(n,t,null,i)||uC(n,t,i)||pC(n,t)||wd(n,t)}),this.addRule("shape.create",function(e){return yv(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return vc(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return vC(n,t)})};Gn.prototype.canConnectMessageFlow=hC;Gn.prototype.canConnectSequenceFlow=mC;Gn.prototype.canConnectDataAssociation=Zg;Gn.prototype.canConnectAssociation=fC;Gn.prototype.canMove=pC;Gn.prototype.canAttach=vc;Gn.prototype.canReplace=uC;Gn.prototype.canDrop=Ks;Gn.prototype.canInsert=wd;Gn.prototype.canCreate=yv;Gn.prototype.canConnect=Jp;Gn.prototype.canResize=dC;Gn.prototype.canCopy=vC;function j4(e){return mv(e)?null:At(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function mv(e){return!e||Vn(e)}function V4(e,t){return e===t}function F0(e){do{if(P(e,"bpmn:Process"))return Te(e);if(P(e,"bpmn:Participant"))return Te(e).processRef||Te(e)}while(e=e.parent)}function vv(e){return P(e,"bpmn:TextAnnotation")}function Yg(e){return P(e,"bpmn:Group")&&!e.labelTarget}function Xg(e){return P(e,"bpmn:BoundaryEvent")&&Fr(e,"bpmn:CompensateEventDefinition")}function hl(e){return Te(e).isForCompensation}function U4(e,t){var n=F0(e),i=F0(t);return n===i}function W4(e){return P(e,"bpmn:InteractionNode")&&!P(e,"bpmn:BoundaryEvent")&&(!P(e,"bpmn:Event")||P(e,"bpmn:ThrowEvent")&&oC(e,"bpmn:MessageEventDefinition"))}function G4(e){return P(e,"bpmn:InteractionNode")&&!hl(e)&&(!P(e,"bpmn:Event")||P(e,"bpmn:CatchEvent")&&oC(e,"bpmn:MessageEventDefinition"))&&!(P(e,"bpmn:BoundaryEvent")&&!Fr(e,"bpmn:MessageEventDefinition"))}function H0(e){for(var t=e;t=t.parent;){if(P(t,"bpmn:FlowElementsContainer"))return Te(t);if(P(t,"bpmn:Participant"))return Te(t).processRef}return null}function q4(e,t){var n=H0(e),i=H0(t);return n===i}function Fr(e,t){var n=Te(e);return!!Dt(n.eventDefinitions||[],function(i){return P(i,t)})}function oC(e,t){var n=Te(e);return(n.eventDefinitions||[]).every(function(i){return P(i,t)})}function K4(e){return P(e,"bpmn:FlowNode")&&!P(e,"bpmn:EndEvent")&&!zi(e)&&!(P(e,"bpmn:IntermediateThrowEvent")&&Fr(e,"bpmn:LinkEventDefinition"))&&!Xg(e)&&!hl(e)}function Y4(e){return P(e,"bpmn:FlowNode")&&!P(e,"bpmn:StartEvent")&&!P(e,"bpmn:BoundaryEvent")&&!zi(e)&&!(P(e,"bpmn:IntermediateCatchEvent")&&Fr(e,"bpmn:LinkEventDefinition"))&&!hl(e)}function j0(e){return P(e,"bpmn:ReceiveTask")||P(e,"bpmn:IntermediateCatchEvent")&&(Fr(e,"bpmn:MessageEventDefinition")||Fr(e,"bpmn:TimerEventDefinition")||Fr(e,"bpmn:ConditionalEventDefinition")||Fr(e,"bpmn:SignalEventDefinition"))}function Ed(e){return e.waypoints}function X4(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function gv(e,t){var n=X4(t);return n.indexOf(e)!==-1}function Jp(e,t,n){if(mv(e)||mv(t))return null;if(!P(n,"bpmn:DataAssociation")){if(hC(e,t))return{type:"bpmn:MessageFlow"};if(mC(e,t))return{type:"bpmn:SequenceFlow"}}var i=Zg(e,t);return i||(Xg(e)&&hl(t)?{type:"bpmn:Association",associationDirection:"One"}:fC(e,t)?{type:"bpmn:Association"}:!1)}function Ks(e,t,n){return Vn(e)||Yg(e)?!0:P(t,"bpmn:Participant")&&!Ot(t)?!1:P(e,"bpmn:Participant")?P(t,"bpmn:Process")||P(t,"bpmn:Collaboration"):At(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:P(e,"bpmn:Lane")?P(t,"bpmn:Participant")||P(t,"bpmn:Lane"):P(e,"bpmn:BoundaryEvent")&&!Z4(e)?!1:P(e,"bpmn:FlowElement")&&!P(e,"bpmn:DataStoreReference")?P(t,"bpmn:FlowElementsContainer")?Ot(t):At(t,["bpmn:Participant","bpmn:Lane"]):P(e,"bpmn:DataStoreReference")&&P(t,"bpmn:Collaboration")?Go(Te(t).get("participants"),function(i){return!!i.get("processRef")}):At(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?At(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):P(e,"bpmn:MessageFlow")?P(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function Z4(e){return Te(e).cancelActivity&&(sC(e)||lC(e))}function J4(e){return!Vn(e)&&P(e,"bpmn:BoundaryEvent")}function Q4(e){return P(e,"bpmn:Lane")}function e9(e){return J4(e)||P(e,"bpmn:IntermediateThrowEvent")&&sC(e)?!0:P(e,"bpmn:IntermediateCatchEvent")&&lC(e)}function sC(e){var t=Te(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function lC(e){return cC(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function cC(e,t){return t.some(function(n){return Fr(e,n)})}function t9(e){return P(e,"bpmn:ReceiveTask")&&Dt(e.incoming,function(t){return P(t.source,"bpmn:EventBasedGateway")})}function vc(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Vn(r)||!e9(r)||zi(t)||!P(t,"bpmn:Activity")||hl(t)||i&&!aC(i,t)||t9(t)?!1:"attach"}function uC(e,t,n){if(!t)return!1;var i={replacements:[]};return G(e,function(r){zi(t)||P(r,"bpmn:StartEvent")&&r.type!=="label"&&Ks(r,t)&&(cz(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(uz(r)||pz(r)||dz(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),cC(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&P(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),P(t,"bpmn:Transaction")||Fr(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(P(r,"bpmn:EndEvent")&&Ks(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),P(r,"bpmn:BoundaryEvent")&&vc(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function pC(e,t){return Go(e,Q4)?!1:t?e.every(function(n){return Ks(n,t)}):!0}function yv(e,t,n,i){return t?Vn(e)||Yg(e)?!0:V4(n,t)||n&&gv(n,t)?!1:Ks(e,t)||wd(e,t):!1}function dC(e,t){return P(e,"bpmn:SubProcess")?Ot(e)&&(!t||t.width>=100&&t.height>=80):P(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:P(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!(vv(e)||Yg(e))}function n9(e,t){var n=vv(e),i=vv(t);return(n||i)&&n!==i}function fC(e,t){return Ed(e)||Ed(t)?!1:Xg(e)&&hl(t)?!0:gv(t,e)||gv(e,t)?!1:n9(e,t)?!0:!!Zg(e,t)}function hC(e,t){return V0(e)&&!V0(t)?!1:W4(e)&&G4(t)&&!U4(e,t)}function mC(e,t){return j0(t)&&t.incoming.length>0&&a9(t.incoming)&&!P(e,"bpmn:EventBasedGateway")?!1:K4(e)&&Y4(t)&&q4(e,t)&&!(P(e,"bpmn:EventBasedGateway")&&!j0(t))}function Zg(e,t){return At(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&At(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:At(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&At(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function wd(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:At(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Vn(t)&&P(e,"bpmn:FlowNode")&&!P(e,"bpmn:BoundaryEvent")&&Ks(e,t.parent)}function i9(e,t){return e&&t&&e.indexOf(t)!==-1}function vC(e,t){return Vn(t)?!0:!(P(t,"bpmn:Lane")&&!i9(e,t.parent))}function r9(e){if(e&&e.source)return P(e.source,"bpmn:EventBasedGateway")}function a9(e){return e=e||[],e.some(r9)}function V0(e){return vd(e,"bpmn:Process")||vd(e,"bpmn:Collaboration")}const o9={__depends__:[Jr],__init__:["bpmnRules"],bpmnRules:["type",Gn]};var s9=2e3;function gC(e,t){e.on("saveXML.start",s9,n);function n(){var i=t.getRootElement(),r=Te(i).di,a,o;a=kd([i],!1),a=st(a,function(s){return s!==i&&!s.labelTarget}),o=Nn(a,Us),r.set("planeElement",o)}}gC.$inject=["eventBus","canvas"];const l9={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",gC]};function hf(e){Se.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,a=i.parent,o=t.getOrdering(r,a);o&&(o.parent!==void 0&&(i.parent=o.parent),i.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,a=i.newParent||r.parent,o=t.getOrdering(r,a);o&&(o.parent!==void 0&&(i.newParent=o.parent),i.newParentIndex=o.index)})}hf.prototype.getOrdering=function(e,t){return null};Ve.exports(hf,Se);function Jg(e,t,n){hf.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(s){if(s.labelTarget)return{level:10};var c=Dt(i,function(u){return At(s,[u.type])});return c&&c.order||{level:1}}function a(s){var c=s.order;if(c||(s.order=c=r(s)),!c)throw new Error("no order for <"+s.id+">");return c}function o(s,c,u){for(var d=c;d&&!At(d,u);)d=d.parent;if(!d)throw new Error("no parent for <"+s.id+"> in <"+(c&&c.id)+">");return d}this.getOrdering=function(s,c){if(s.labelTarget)return{parent:t.getRootElement(),index:-1};var u=a(s);u.containers&&(c=o(s,c,u.containers));var d=c.children.indexOf(s),f=Pw(c.children,function(m){return!s.labelTarget&&m.labelTarget?!1:u.level<a(m).level});return f!==-1&&d!==-1&&d<f&&(f-=1),{index:f,parent:c}}}Jg.$inject=["eventBus","canvas","translate"];Ve.exports(Jg,hf);const c9={__depends__:[Wd],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Jg]};function en(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}en.$inject=["eventBus","injector"];en.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)};en.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};en.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};en.prototype.undo=function(){var e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};en.prototype.redo=function(){var e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};en.prototype.register=function(e,t){this._setHandler(e,t)};en.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)};en.prototype.canUndo=function(){return!!this._getUndoAction()};en.prototype.canRedo=function(){return!!this._getRedoAction()};en.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};en.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};en.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})};en.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i=t?[e+"."+t,t]:[e],r,a,o;for(n=this._eventBus.createEvent(n),r=0;(a=i[r])&&(o=this._eventBus.fire("commandStack."+a,n),!n.cancelBubble);r++);return o};en.prototype._createId=function(){return this._uid++};en.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};en.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,a=this._getHandler(i);if(!a)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),a.preExecute&&a.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),a.execute&&n._markDirty(a.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),a.postExecute&&a.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)};en.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};en.prototype._popAction=function(){var e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:Aw("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};en.prototype._markDirty=function(e){var t=this._currentExecution;!e||(e=yt(e)?e:[e],t.dirty=t.dirty.concat(e))};en.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};en.prototype._revertedAction=function(e){this._stackIdx--};en.prototype._getHandler=function(e){return this._handlerMap[e]};en.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const u9={commandStack:["type",en]};var p9=new rg("tt");function d9(e){var t=Vt('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function f9(e,t,n){Y(e.style,{left:t+"px",top:n+"px"})}function Qg(e,t){e.style.display=t===!1?"none":""}var yC="djs-tooltip",xm="."+yC;function ui(e,t){this._eventBus=e,this._canvas=t,this._ids=p9,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=d9(t.getContainer());var n=this;$i.bind(this._tooltipRoot,xm,"mousedown",function(i){i.stopPropagation()}),$i.bind(this._tooltipRoot,xm,"mouseover",function(i){n.trigger("mouseover",i)}),$i.bind(this._tooltipRoot,xm,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}ui.$inject=["eventBus","canvas"];ui.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=Y({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};ui.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(oi(n,"data-tooltip-id"));!i||(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};ui.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};ui.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};ui.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};ui.prototype.remove=function(e){var t=this.get(e);t&&(Wr(t.html),Wr(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};ui.prototype.show=function(){Qg(this._tooltipRoot)};ui.prototype.hide=function(){Qg(this._tooltipRoot,!1)};ui.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};ui.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Hi(n)&&(n=Vt(n)),i=Vt('<div data-tooltip-id="'+t+'" class="'+yC+'" style="position: absolute">'),i.appendChild(n),e.type&&Wt(i).add("djs-tooltip-"+e.type),e.className&&Wt(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};ui.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;f9(n,t.x,t.y)};ui.prototype._updateTooltipVisibilty=function(e){G(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),Qg(i,r))})};ui.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const h9={__init__:["tooltips"],tooltips:["type",ui]};function Bs(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(!!e){for(var n;n=e[0];)t(n);return e}}var m9=250,U0=1400;function ey(e,t,n){Se.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",U0,function(r){var a=r.context,o=a.shapes,s=a.validatedShapes;a.shapes=W0(o),a.validatedShapes=W0(s)}),i&&t.on("shape.move.start",m9,function(r){var a=r.context,o=a.shapes,s=[];G(o,function(c){G(c.labels,function(u){!u.hidden&&a.shapes.indexOf(u)===-1&&s.push(u),c.labelTarget&&s.push(c)})}),G(s,function(c){i.makeDraggable(a,c,!0)})}),this.preExecuted("elements.move",U0,function(r){var a=r.context,o=a.closure,s=o.enclosedElements,c=[];G(s,function(u){G(u.labels,function(d){s[d.id]||c.push(d)})}),o.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var a=r.context,o=a.connection||a.shape;Bs(o.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var a=r.context,o=a.shape,s=o.labelTarget;s&&(a.labelTargetIndex=Gv(s.labels,o),a.labelTarget=s,o.labelTarget=null)}),this.revert("shape.delete",function(r){var a=r.context,o=a.shape,s=a.labelTarget,c=a.labelTargetIndex;s&&(hn(s.labels,o,c),o.labelTarget=s)})}Ve.exports(ey,Se);ey.$inject=["injector","eventBus","modeling"];function W0(e){return st(e,function(t){return e.indexOf(t.labelTarget)===-1})}const v9={__init__:["labelSupport"],labelSupport:["type",ey]};var g9=251,G0=1401,q0="attach-ok";function ty(e,t,n,i,r){Se.call(this,t);var a=e.get("movePreview",!1);t.on("shape.move.start",G0,function(o){var s=o.context,c=s.shapes,u=s.validatedShapes;s.shapes=y9(c),s.validatedShapes=_9(u)}),a&&t.on("shape.move.start",g9,function(o){var s=o.context,c=s.shapes,u=_v(c);G(u,function(d){a.makeDraggable(s,d,!0),G(d.labels,function(f){a.makeDraggable(s,f,!0)})})}),a&&t.on("shape.move.start",function(o){var s=o.context,c=s.shapes;if(c.length===1){var u=c[0],d=u.host;d&&(n.addMarker(d,q0),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(d,q0)}))}}),this.preExecuted("elements.move",G0,function(o){var s=o.context,c=s.closure,u=s.shapes,d=_v(u);G(d,function(f){c.add(f,c.topLevel[f.host.id])})}),this.postExecuted("elements.move",function(o){var s=o.context,c=s.shapes,u=s.newHost,d;u&&c.length!==1||(u?d=c:d=st(c,function(f){var m=f.host;return x9(f)&&!b9(c,m)}),G(d,function(f){r.updateAttachment(f,u)}))}),this.postExecuted("elements.move",function(o){var s=o.context.shapes;G(s,function(c){G(c.attachers,function(u){G(u.outgoing.slice(),function(d){var f=i.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});f||r.removeConnection(d)}),G(u.incoming.slice(),function(d){var f=i.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});f||r.removeConnection(d)})})})}),this.postExecute("shape.create",function(o){var s=o.context,c=s.shape,u=s.host;u&&r.updateAttachment(c,u)}),this.postExecute("shape.replace",function(o){var s=o.context,c=s.oldShape,u=s.newShape;Bs(c.attachers,function(d){var f=i.allowed("elements.move",{target:u,shapes:[d]});f==="attach"?r.updateAttachment(d,u):r.removeShape(d)}),u.attachers.length&&G(u.attachers,function(d){var f=B0(d,c,u);r.moveShape(d,f,d.parent)})}),this.postExecute("shape.resize",function(o){var s=o.context,c=s.shape,u=s.oldBounds,d=s.newBounds,f=c.attachers,m=s.hints||{};m.attachSupport!==!1&&G(f,function(v){var g=B0(v,u,d);r.moveShape(v,g,v.parent),G(v.labels,function(y){r.moveShape(y,g,y.parent)})})}),this.preExecute("shape.delete",function(o){var s=o.context.shape;Bs(s.attachers,function(c){r.removeShape(c)}),s.host&&r.updateAttachment(s,null)})}Ve.exports(ty,Se);ty.$inject=["injector","eventBus","canvas","rules","modeling"];function _v(e){return sd(Nn(e,function(t){return t.attachers||[]}))}function y9(e){var t=_v(e);return tL("id",e,t)}function _9(e){var t=tl(e,"id");return st(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function x9(e){return!!e.host}function b9(e,t){return e.indexOf(t)!==-1}const E9={__depends__:[Jr],__init__:["attachSupport"],attachSupport:["type",ty]};var w9=250;function Qo(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}Qo.$inject=["eventBus","dragging"];Qo.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Qo.prototype.isActive=function(e){return e&&this._active===e};Qo.prototype.length=function(e){return this._tools.length};Qo.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Qo.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(a){var o=a.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null),i.cancel();return}this.setActive(e)},this),G(t,function(a){r.push(a+".ended"),r.push(a+".canceled")}),n.on(r,w9,function(a){!this._active||S9(a)||this.setActive(null)},this)};function S9(e){var t=e.originalEvent&&e.originalEvent.target;return t&&qo(t,'.group[data-group="tools"]')}const mf={__depends__:[Ca],__init__:["toolManager"],toolManager:["type",Qo]};function C9(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function T9(e,t){var n=[];return G(e.concat(t),function(i){var r=i.incoming,a=i.outgoing;G(r.concat(a),function(o){var s=o.source,c=o.target;(ac(e,s)||ac(e,c)||ac(t,s)||ac(t,c))&&(ac(n,o)||n.push(o))})}),n}function ac(e,t){return e.indexOf(t)!==-1}function P9(e,t,n){var i=e.x,r=e.y,a=e.width,o=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:a,height:o-c};case"s":return{x:i,y:r,width:a,height:o+c};case"w":return{x:i+s,y:r,width:a-s,height:o};case"e":return{x:i,y:r,width:a+s,height:o};default:throw new Error("unknown direction: "+t)}}var bm=Math.abs,A9=Math.round,fa={x:"width",y:"height"},_C="crosshair",Ip={n:"top",w:"left",s:"bottom",e:"right"},R9=1500,K0={n:"s",w:"e",s:"n",e:"w"},Np=20;function Aa(e,t,n,i,r,a,o){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=a,this._mouse=o;var s=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(c){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(c.originalEvent)})}),n.on("spaceTool.move",R9,function(c){var u=c.context,d=u.initialized;d||(d=u.initialized=s.init(c,u)),d&&X0(c)}),n.on("spaceTool.end",function(c){var u=c.context,d=u.axis,f=u.direction,m=u.movingShapes,v=u.resizingShapes,g=u.start;if(!!u.initialized){X0(c);var y={x:0,y:0};y[d]=A9(c["d"+d]),s.makeSpace(m,v,y,f,g),n.once("spaceTool.ended",function(E){s.activateSelection(E.originalEvent,!0,!0)})}})}Aa.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Aa.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:_C,data:{context:{reactivate:n}},trapClick:!1})};Aa.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:_C,data:{context:{}}})};Aa.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};Aa.prototype.init=function(e,t){var n=bm(e.dx)>bm(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(bm(i)<5)return!1;i<0&&(i*=-1),Gs(e)&&(i*=-1);var a=C9(n,i),o=this._canvas.getRootElement(),s=kd(o,!0),c=this.calculateAdjustments(s,n,i,r),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:c.resizingShapes,start:r}),d=M9(c,n,a,r,u);return Y(t,c,{axis:n,direction:a,spaceToolConstraints:d,start:r}),Xd("resize-"+(n==="x"?"ew":"ns")),!0};Aa.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,a=[],o=[];return G(e,function(s){if(!(!s.parent||xv(s))){var c=s[t],u=c+s[fa[t]];if(n>0&&c>i||n<0&&u<i)return a.push(s);if(c<i&&u>i&&r.allowed("shape.resize",{shape:s}))return o.push(s)}}),{movingShapes:a,resizingShapes:o}};Aa.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Aa.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)};function Y0(e){return{top:e.top-Np,right:e.right+Np,bottom:e.bottom+Np,left:e.left-Np}}function X0(e){var t=e.context,n=t.spaceToolConstraints;if(!!n){var i,r;rt(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),rt(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),rt(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),rt(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function M9(e,t,n,i,r){var a=e.movingShapes,o=e.resizingShapes;if(!!o.length){var s={},c,u;return G(o,function(d){var f=Ke(d),m=st(d.children,function(O){return!xv(O)&&!Z0(O)&&!Em(a,O)&&!Em(o,O)}),v=st(d.children,function(O){return!xv(O)&&!Z0(O)&&Em(a,O)}),g,y,E;m.length&&(y=Y0(Ke(Un(m))),g=i-f[Ip[n]]+y[Ip[n]],n==="n"?s.bottom=u=rt(u)?Math.min(u,g):g:n==="w"?s.right=u=rt(u)?Math.min(u,g):g:n==="s"?s.top=c=rt(c)?Math.max(c,g):g:n==="e"&&(s.left=c=rt(c)?Math.max(c,g):g)),v.length&&(E=Y0(Ke(Un(v))),g=i-E[Ip[K0[n]]]+f[Ip[K0[n]]],n==="n"?s.bottom=u=rt(u)?Math.min(u,g):g:n==="w"?s.right=u=rt(u)?Math.min(u,g):g:n==="s"?s.top=c=rt(c)?Math.max(c,g):g:n==="e"&&(s.left=c=rt(c)?Math.max(c,g):g));var N=r&&r[d.id];N&&(n==="n"?(g=i+d[fa[t]]-N[fa[t]],s.bottom=u=rt(u)?Math.min(u,g):g):n==="w"?(g=i+d[fa[t]]-N[fa[t]],s.right=u=rt(u)?Math.min(u,g):g):n==="s"?(g=i-d[fa[t]]+N[fa[t]],s.top=c=rt(c)?Math.max(c,g):g):n==="e"&&(g=i-d[fa[t]]+N[fa[t]],s.left=c=rt(c)?Math.max(c,g):g))}),s}}function Em(e,t){return e.indexOf(t)!==-1}function xv(e){return!!e.waypoints}function Z0(e){return!!e.labelTarget}var wm="djs-dragging",J0="djs-resizing",D9=250,kp=Math.max;function xC(e,t,n,i,r){function a(o,s){G(o,function(c){r.addDragger(c,s),n.addMarker(c,wm)})}e.on("spaceTool.selection.start",function(o){var s=n.getLayer("space"),c=o.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},d=Le("g");ve(d,i.cls("djs-crosshair-group",["no-events"])),Ye(s,d);var f=Le("path");ve(f,"d",u.x),mt(f).add("djs-crosshair"),Ye(d,f);var m=Le("path");ve(m,"d",u.y),mt(m).add("djs-crosshair"),Ye(d,m),c.crosshairGroup=d}),e.on("spaceTool.selection.move",function(o){var s=o.context.crosshairGroup;bi(s,o.x,o.y)}),e.on("spaceTool.selection.cleanup",function(o){var s=o.context,c=s.crosshairGroup;c&&dn(c)}),e.on("spaceTool.move",D9,function(o){var s=o.context,c=s.line,u=s.axis,d=s.movingShapes,f=s.resizingShapes;if(!!s.initialized){if(!s.dragGroup){var m=n.getLayer("space");c=Le("path"),ve(c,"d","M0,0 L0,0"),mt(c).add("djs-crosshair"),Ye(m,c),s.line=c;var v=Le("g");ve(v,i.cls("djs-drag-group",["no-events"])),Ye(n.getActiveLayer(),v),a(d,v);var g=s.movingConnections=t.filter(function(w){var R=!1;G(d,function(W){G(W.outgoing,function(Q){w===Q&&(R=!0)})});var L=!1;G(d,function(W){G(W.incoming,function(Q){w===Q&&(L=!0)})});var H=!1;G(f,function(W){G(W.outgoing,function(Q){w===Q&&(H=!0)})});var $=!1;return G(f,function(W){G(W.incoming,function(Q){w===Q&&($=!0)})}),O9(w)&&(R||H)&&(L||$)});a(g,v),s.dragGroup=v}if(!s.frameGroup){var y=Le("g");ve(y,i.cls("djs-frame-group",["no-events"])),Ye(n.getActiveLayer(),y);var E=[];G(f,function(w){var R=r.addFrame(w,y),L=R.getBBox();E.push({element:R,initialBounds:L}),n.addMarker(w,J0)}),s.frameGroup=y,s.frames=E}var N={x:"M"+o.x+", -10000 L"+o.x+", 10000",y:"M -10000, "+o.y+" L 10000, "+o.y};ve(c,{d:N[u]});var O={x:"y",y:"x"},T={x:o.dx,y:o.dy};T[O[s.axis]]=0,bi(s.dragGroup,T.x,T.y),G(s.frames,function(w){var R=w.element,L=w.initialBounds,H,$;s.direction==="e"?ve(R,{width:kp(L.width+T.x,5)}):(H=kp(L.width-T.x,5),ve(R,{width:H,x:L.x+L.width-H})),s.direction==="s"?ve(R,{height:kp(L.height+T.y,5)}):($=kp(L.height-T.y,5),ve(R,{height:$,y:L.y+L.height-$}))})}}),e.on("spaceTool.cleanup",function(o){var s=o.context,c=s.movingShapes,u=s.movingConnections,d=s.resizingShapes,f=s.line,m=s.dragGroup,v=s.frameGroup;G(c,function(g){n.removeMarker(g,wm)}),G(u,function(g){n.removeMarker(g,wm)}),m&&(dn(f),dn(m)),G(d,function(g){n.removeMarker(g,J0)}),v&&dn(v)})}xC.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];function O9(e){return e.waypoints}const bC={__init__:["spaceToolPreview"],__depends__:[Ca,Jr,mf,Zc,Qc],spaceTool:["type",Aa],spaceToolPreview:["type",xC]};function ur(e){this._model=e}ur.$inject=["moddle"];ur.prototype._needsId=function(e){return At(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};ur.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;P(e,"bpmn:Activity")?t="Activity":P(e,"bpmn:Event")?t="Event":P(e,"bpmn:Gateway")?t="Gateway":At(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};ur.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};ur.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};ur.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",Y({bpmnElement:e,bounds:this.createDiBounds(t)},n))};ur.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};ur.prototype.createDiWaypoints=function(e){var t=this;return Nn(e,function(n){return t.createDiWaypoint(n)})};ur.prototype.createDiWaypoint=function(e){return this.create("dc:Point",xr(e,["x","y"]))};ur.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",Y({bpmnElement:e,waypoint:this.createDiWaypoints(t)},n))};ur.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})};function Ri(e,t,n,i){Se.call(this,e),this._bpmnFactory=t,this._translate=i;var r=this;function a(v){var g=v.context,y=g.hints||{},E;!g.cropped&&y.createElementsBehavior!==!1&&(E=g.connection,E.waypoints=n.getCroppedWaypoints(E),g.cropped=!0)}this.executed(["connection.layout","connection.create"],a),this.reverted(["connection.layout"],function(v){delete v.context.cropped});function o(v){var g=v.context;r.updateParent(g.shape||g.connection,g.oldParent)}function s(v){var g=v.context,y=g.shape||g.connection,E=g.parent||g.newParent;r.updateParent(y,E)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],nr(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],nr(s));function c(v){var g=v.context,y=g.oldRoot,E=y.children;G(E,function(N){P(N,"bpmn:BaseElement")&&r.updateParent(N)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function u(v){var g=v.context.shape;!P(g,"bpmn:BaseElement")||r.updateBounds(g)}this.executed(["shape.move","shape.create","shape.resize"],nr(function(v){v.context.shape.type!=="label"&&u(v)})),this.reverted(["shape.move","shape.create","shape.resize"],nr(function(v){v.context.shape.type!=="label"&&u(v)})),e.on("shape.changed",function(v){v.element.type==="label"&&u({context:{shape:v.element}})});function d(v){r.updateConnection(v.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],nr(d)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],nr(d));function f(v){r.updateConnectionWaypoints(v.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],nr(f)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],nr(f)),this.executed("connection.reconnect",nr(function(v){var g=v.context,y=g.connection,E=g.oldSource,N=g.newSource,O=Te(y),T=Te(E),w=Te(N);O.conditionExpression&&!At(w,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(g.oldConditionExpression=O.conditionExpression,delete O.conditionExpression),E!==N&&T.default===O&&(g.oldDefault=T.default,delete T.default)})),this.reverted("connection.reconnect",nr(function(v){var g=v.context,y=g.connection,E=g.oldSource,N=g.newSource,O=Te(y),T=Te(E),w=Te(N);g.oldConditionExpression&&(O.conditionExpression=g.oldConditionExpression),g.oldDefault&&(T.default=g.oldDefault,delete w.default)}));function m(v){r.updateAttachment(v.context)}this.executed(["element.updateAttachment"],nr(m)),this.reverted(["element.updateAttachment"],nr(m))}Ve.exports(Ri,Se);Ri.$inject=["eventBus","bpmnFactory","connectionDocking","translate"];Ri.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};Ri.prototype.updateParent=function(e,t){if(!(e instanceof Ld)&&!(P(e,"bpmn:DataStoreReference")&&e.parent&&P(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=n&&n.businessObject,a=r&&r.di;P(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),P(e,"bpmn:DataOutputAssociation")&&(e.source?r=e.source.businessObject:r=null),P(e,"bpmn:DataInputAssociation")&&(e.target?r=e.target.businessObject:r=null),this.updateSemanticParent(i,r),P(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,a)}};Ri.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof Ld?this._getLabel(t):t,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),Y(i,{x:e.x,y:e.y,width:e.width,height:e.height})};Ri.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;P(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),fn(i,e)),P(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),hn(r,e))}};Ri.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)};Ri.prototype.updateDiParent=function(e,t){if(t&&!P(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(fn(n,e),e.$parent=null)}};function I9(e){for(;e&&!P(e,"bpmn:Definitions");)e=e.$parent;return e}Ri.prototype.getLaneSet=function(e){var t,n;return P(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(P(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Ri.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t&&!((P(e,"bpmn:DataInput")||P(e,"bpmn:DataOutput"))&&(P(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(P(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(P(e,"bpmn:FlowElement")){if(t){if(P(t,"bpmn:Participant"))t=t.processRef;else if(P(t,"bpmn:Lane"))do t=t.$parent.$parent;while(P(t,"bpmn:Lane"))}i="flowElements"}else if(P(e,"bpmn:Artifact")){for(;t&&!P(t,"bpmn:Process")&&!P(t,"bpmn:SubProcess")&&!P(t,"bpmn:Collaboration");)if(P(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(P(e,"bpmn:MessageFlow"))i="messageFlows";else if(P(e,"bpmn:Participant")){i="participants";var a=e.processRef,o;a&&(o=I9(e.$parent||t),e.$parent&&(fn(o.get("rootElements"),a),a.$parent=null),t&&(hn(o.get("rootElements"),a),a.$parent=o))}else P(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":P(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var s;if(e.$parent&&(s=e.$parent.get(i),fn(s,e)),t?(s=t.get(i),s.push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);fn(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}};Ri.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Ri.prototype.updateConnection=function(e){var t=e.connection,n=Te(t),i=Te(t.source),r=Te(t.target),a;if(P(n,"bpmn:DataAssociation"))P(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,a=e.parent||e.newParent||r,this.updateSemanticParent(n,r,a)):P(n,"bpmn:DataOutputAssociation")&&(a=e.parent||e.newParent||i,this.updateSemanticParent(n,i,a),n.targetRef=r);else{var o=P(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(o&&(fn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==r&&(o&&(fn(n.targetRef&&n.targetRef.get("incoming"),n),r&&r.get("incoming")&&r.get("incoming").push(n)),n.targetRef=r)}this.updateConnectionWaypoints(t),this.updateDiConnection(n.di,i,r)};Ri.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function nr(e){return function(t){var n=t.context,i=n.shape||n.connection;P(i,"bpmn:BaseElement")&&e(t)}}function fo(e,t,n){Ea.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}Ve.exports(fo,Ea);fo.$inject=["bpmnFactory","moddle","translate"];fo.prototype.baseCreate=Ea.prototype.create;fo.prototype.create=function(e,t){return e==="label"?this.baseCreate(e,Y({type:"label"},Pc,t)):this.createBpmnElement(e,t)};fo.prototype.createBpmnElement=function(e,t){var n,i=this._translate;t=t||{};var r=t.businessObject;if(!r){if(!t.type)throw new Error(i("no shape type specified"));r=this._bpmnFactory.create(t.type)}r.di||(e==="root"?r.di=this._bpmnFactory.createDiPlane(r,[],{id:r.id+"_di"}):e==="connection"?r.di=this._bpmnFactory.createDiEdge(r,[],{id:r.id+"_di"}):r.di=this._bpmnFactory.createDiShape(r,{},{id:r.id+"_di"})),P(r,"bpmn:Group")&&(t=Y({isFrame:!0},t)),t.di&&(Y(r.di,t.di),delete t.di),N9(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&EC(r.di,t,"isExpanded"),P(r,"bpmn:ExclusiveGateway")&&(r.di.isMarkerVisible=!0);var a,o;return t.eventDefinitionType&&(a=r.get("eventDefinitions")||[],o=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(o.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(o),o.$parent=r,r.eventDefinitions=a,delete t.eventDefinitionType),n=this._getDefaultSize(r),t=Y({businessObject:r,id:r.id},n,t),this.baseCreate(e,t)};fo.prototype._getDefaultSize=function(e){return P(e,"bpmn:SubProcess")?Ot(e)?{width:350,height:200}:{width:100,height:80}:P(e,"bpmn:Task")?{width:100,height:80}:P(e,"bpmn:Gateway")?{width:50,height:50}:P(e,"bpmn:Event")?{width:36,height:36}:P(e,"bpmn:Participant")?Ot(e)?{width:600,height:250}:{width:400,height:60}:P(e,"bpmn:Lane")?{width:400,height:100}:P(e,"bpmn:DataObjectReference")?{width:36,height:50}:P(e,"bpmn:DataStoreReference")?{width:50,height:50}:P(e,"bpmn:TextAnnotation")?{width:100,height:30}:P(e,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};fo.prototype.createParticipantShape=function(e){return kn(e)||(e={isExpanded:e}),e=Y({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function N9(e,t,n){G(n,function(i){t[i]!==void 0&&EC(e,t,i)})}function EC(e,t,n){e[n]=t[n],delete t[n]}function vf(e,t){this._modeling=e,this._canvas=t}vf.$inject=["modeling","canvas"];vf.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;G(n,function(r){var a={x:0,y:0};i.left?a.x=i.left-r.x:i.right?a.x=i.right-r.width-r.x:i.center?a.x=i.center-Math.round(r.width/2)-r.x:i.top?a.y=i.top-r.y:i.bottom?a.y=i.bottom-r.height-r.y:i.middle&&(a.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],a,r.parent)})};vf.prototype.postExecute=function(e){};function gf(e){this._modeling=e}gf.$inject=["modeling"];gf.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};gf.prototype.postExecute=function(e){var t=e.hints||{};k9(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function k9(e,t){return Go(e.outgoing,function(n){return n.target===t})}function yf(e,t){this._canvas=e,this._layouter=t}yf.$inject=["canvas","layouter"];yf.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,a=e.parentIndex,o=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,o)),this._canvas.addConnection(t,r,a),t};yf.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Bp=Math.round;function ny(e){this._modeling=e}ny.$inject=["modeling"];ny.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,a=e.hints,o=this._modeling;G(t,function(d){rt(d.x)||(d.x=0),rt(d.y)||(d.y=0)});var s=Un(t);G(t,function(d){Q0(d)&&(d.waypoints=Nn(d.waypoints,function(f){return{x:Bp(f.x-s.x-s.width/2+r.x),y:Bp(f.y-s.y-s.height/2+r.y)}})),Y(d,{x:Bp(d.x-s.x-s.width/2+r.x),y:Bp(d.y-s.y-s.height/2+r.y)})});var c=Fw(t),u={};G(t,function(d){if(Q0(d)){u[d.id]=rt(i)?o.createConnection(u[d.source.id],u[d.target.id],i,d,d.parent||n,a):o.createConnection(u[d.source.id],u[d.target.id],d,d.parent||n,a);return}var f=Y({},a);c.indexOf(d)===-1&&(f.autoResize=!1),u[d.id]=rt(i)?o.createShape(d,xr(d,["x","y","width","height"]),d.parent||n,i,f):o.createShape(d,xr(d,["x","y","width","height"]),d.parent||n,f)}),e.elements=$v(u)};function Q0(e){return!!e.waypoints}var eE=Math.round;function ho(e){this._canvas=e}ho.$inject=["canvas"];ho.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?Y(t,n):Y(t,{x:n.x-eE(t.width/2),y:n.y-eE(t.height/2)}),this._canvas.addShape(t,i,r),t};ho.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function au(e){ho.call(this,e)}Ve.exports(au,ho);au.$inject=["canvas"];var B9=ho.prototype.execute;au.prototype.execute=function(e){var t=e.shape;return $9(t),t.labelTarget=e.labelTarget,B9.call(this,e)};var L9=ho.prototype.revert;au.prototype.revert=function(e){return e.shape.labelTarget=null,L9.call(this,e)};function $9(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function _f(e,t){this._canvas=e,this._modeling=t}_f.$inject=["canvas","modeling"];_f.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Gv(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};_f.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,hn(n.children,t,i),this._canvas.addConnection(t,n),t};function iy(e,t){this._modeling=e,this._elementRegistry=t}iy.$inject=["modeling","elementRegistry"];iy.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;G(i,function(r){!n.get(r.id)||(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function ou(e,t){this._canvas=e,this._modeling=t}ou.$inject=["canvas","modeling"];ou.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Bs(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Bs(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Bs(n.children,function(i){z9(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};ou.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Gv(i.children,n),t.removeShape(n),n};ou.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return hn(i.children,n,r),t.addShape(n,i),n};function z9(e){return e.waypoints}function xf(e){this._modeling=e}xf.$inject=["modeling"];var tE={x:"y",y:"x"};xf.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function a(E,N){E.range.min=Math.min(N[i],E.range.min),E.range.max=Math.max(N[i]+N[r],E.range.max)}function o(E){return E[i]+E[r]/2}function s(E){return E.length-1}function c(E){return E.max-E.min}function u(E,N){var O={y:0};O[i]=E-o(N),O[i]&&(O[tE[i]]=0,t.moveElements([N],O,N.parent))}var d=n[0],f=s(n),m=n[f],v,g,y=0;G(n,function(E,N){var O,T,w;if(E.elements.length<2){N&&N!==n.length-1&&(a(E,E.elements[0]),y+=c(E.range));return}O=_r(E.elements,i),T=O[0],N===f&&(T=O[s(O)]),w=o(T),E.range=null,G(O,function(R){if(u(w,R),E.range===null){E.range={min:R[i],max:R[i]+R[r]};return}a(E,R)}),N&&N!==n.length-1&&(y+=c(E.range))}),g=Math.abs(m.range.min-d.range.max),v=Math.round((g-y)/(n.length-1)),!(v<n.length-1)&&G(n,function(E,N){var O={},T;E===d||E===m||(T=n[N-1],E.range.max=0,G(E.elements,function(w,R){O[tE[i]]=0,O[i]=T.range.max-w[i]+v,E.range.min!==w[i]&&(O[i]+=w[i]-E.range.min),O[i]&&t.moveElements([w],O,w.parent),E.range.max=Math.max(w[i]+w[r],R?E.range.max:0)}))})};xf.prototype.postExecute=function(e){};function bf(e,t){this._layouter=e,this._canvas=t}bf.$inject=["layouter","canvas"];bf.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return Y(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};bf.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function ry(){}ry.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=fn(a.children,t),hn(i.children,t,r),t.parent=i,G(t.waypoints,function(o){o.x+=n.x,o.y+=n.y,o.original&&(o.original.x+=n.x,o.original.y+=n.y)}),t};ry.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,a=e.delta;return fn(n.children,t),hn(i.children,t,r),t.parent=i,G(t.waypoints,function(o){o.x-=a.x,o.y-=a.y,o.original&&(o.original.x-=a.x,o.original.y-=a.y)}),t};function ay(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}ay.prototype.add=function(e,t){return this.addAll([e],t)};ay.prototype.addAll=function(e,t){var n=zL(e,!!t,this);return Y(this,n),this};function su(e){this._modeling=e}su.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};su.prototype.moveClosure=function(e,t,n,i,r){var a=this._modeling,o=e.allShapes,s=e.allConnections,c=e.enclosedConnections,u=e.topLevel,d=!1;r&&r.parent===n&&(d=!0),G(o,function(f){a.moveShape(f,t,u[f.id]&&!d&&n,{recurse:!1,layout:!1})}),G(s,function(f){var m=!!o[f.source.id],v=!!o[f.target.id];c[f.id]&&m&&v?a.moveConnection(f,t,u[f.id]&&!d&&n):a.layoutConnection(f,{connectionStart:m&&$g(f,f.source,t),connectionEnd:v&&zg(f,f.target,t)})})};su.prototype.getClosure=function(e){return new ay().addAll(e,!0)};function Ef(e){this._helper=new su(e)}Ef.$inject=["modeling"];Ef.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Ef.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function es(e){this._modeling=e,this._helper=new su(e)}es.$inject=["modeling"];es.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldBounds=xr(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=fn(a.children,t),hn(i.children,t,r),Y(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};es.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(G(t.incoming,function(a){r.layoutConnection(a,{connectionEnd:zg(a,t,n)})}),G(t.outgoing,function(a){r.layoutConnection(a,{connectionStart:$g(a,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};es.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return hn(n.children,t,i),Y(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};es.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};es.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function lu(e){this._modeling=e}lu.$inject=["modeling"];lu.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return yt(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};lu.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,a=e.hints||{},o={};a.connectionStart&&(o.connectionStart=a.connectionStart),a.connectionEnd&&(o.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!i||a.docking==="source")&&(o.connectionStart=o.connectionStart||nE(yt(r)?r[0]:r)),i&&(!n||a.docking==="target")&&(o.connectionEnd=o.connectionEnd||nE(yt(r)?r[r.length-1]:r)),a.newWaypoints&&(o.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,o))};lu.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function nE(e){return e.original||e}function Ra(e,t){this._modeling=e,this._rules=t}Ra.$inject=["modeling","rules"];Ra.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,a=e.newData,o=e.hints||{},s;function c(g,y,E){return i.allowed("connection.reconnect",{connection:E,source:g,target:y})}var u={x:a.x,y:a.y},d={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(a,u,r.parent,o),r.host&&n.updateAttachment(s,r.host);var f;o.moveChildren!==!1&&(f=r.children.slice(),n.moveElements(f,{x:0,y:0},s,o));var m=r.incoming.slice(),v=r.outgoing.slice();G(m,function(g){var y=g.source,E=c(y,s,g);E&&t.reconnectEnd(g,s,pf(g,s,d),o)}),G(v,function(g){var y=g.target,E=c(s,y,g);E&&t.reconnectStart(g,s,uf(g,s,d),o)})};Ra.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Ra.prototype.execute=function(e){};Ra.prototype.revert=function(e){};Ra.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};Ra.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};Ra.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function cu(e){this._modeling=e}cu.$inject=["modeling"];cu.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},Y(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};cu.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(G(n.incoming,function(a){t.layoutConnection(a,{connectionEnd:pf(a,n,i)})}),G(n.outgoing,function(a){t.layoutConnection(a,{connectionStart:uf(a,n,i)})}))};cu.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return Y(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function mo(e){this._modeling=e}mo.$inject=["modeling"];mo.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,a=e.start,o={};this.moveShapes(i,t),G(r,function(s){o[s.id]=H9(s)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(T9(i,r),t,n,a,i,r,o)};mo.prototype.execute=function(){};mo.prototype.revert=function(){};mo.prototype.moveShapes=function(e,t){var n=this;G(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};mo.prototype.resizeShapes=function(e,t,n){var i=this;G(e,function(r){var a=P9(r,n,t);i._modeling.resizeShape(r,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})};mo.prototype.updateConnectionWaypoints=function(e,t,n,i,r,a,o){var s=this,c=r.concat(a);G(e,function(u){var d=u.source,f=u.target,m=F9(u),v=wC(n),g={labelBehavior:!1};qa(c,d)&&qa(c,f)?(m=Nn(m,function(y){return rE(y,i,n)&&(y[v]=y[v]+t[v]),y.original&&rE(y.original,i,n)&&(y.original[v]=y.original[v]+t[v]),y}),s._modeling.updateWaypoints(u,m,{labelBehavior:!1})):(qa(c,d)||qa(c,f))&&(qa(r,d)?g.connectionStart=$g(u,d,t):qa(r,f)?g.connectionEnd=zg(u,f,t):qa(a,d)?g.connectionStart=uf(u,d,o[d.id]):qa(a,f)&&(g.connectionEnd=pf(u,f,o[f.id])),s._modeling.layoutConnection(u,g))})};function iE(e){return Y({},e)}function F9(e){return Nn(e.waypoints,function(t){return t=iE(t),t.original&&(t.original=iE(t.original)),t})}function wC(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function rE(e,t,n){var i=wC(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function qa(e,t){return e.indexOf(t)!==-1}function H9(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function wf(e){this._modeling=e}wf.$inject=["modeling"];wf.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=SC(n),t.collapsed=!t.collapsed;var i=CC(n,t.collapsed);return[t].concat(i)};wf.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=TC(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function SC(e){var t={};return G(e,function(n){t[n.id]=n.hidden,n.children&&(t=Y({},t,SC(n.children)))}),t}function CC(e,t){var n=[];return G(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(CC(i.children,i.collapsed||t)))}),n}function TC(e,t){var n=[];return G(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(TC(i.children,t)))}),n}function Sf(e){this._modeling=e}Sf.$inject=["modeling"];Sf.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=PC(i,t),AC(n,t),t.host=n,t};Sf.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,PC(n,t),AC(i,t,r),t};function PC(e,t){return fn(e&&e.attachers,t)}function AC(e,t,n){if(!!e){var i=e.attachers;i||(e.attachers=i=[]),hn(i,t,n)}}function oy(){}oy.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};oy.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function kt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}kt.$inject=["eventBus","elementFactory","commandStack"];kt.prototype.getHandlers=function(){return{"shape.append":gf,"shape.create":ho,"shape.delete":ou,"shape.move":es,"shape.resize":cu,"shape.replace":Ra,"shape.toggleCollapse":wf,spaceTool:mo,"label.create":au,"connection.create":yf,"connection.delete":_f,"connection.move":ry,"connection.layout":bf,"connection.updateWaypoints":oy,"connection.reconnect":lu,"elements.create":ny,"elements.move":Ef,"elements.delete":iy,"elements.distribute":xf,"elements.align":vf,"element.updateAttachment":Sf}};kt.prototype.registerHandlers=function(e){G(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};kt.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var a={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",a)};kt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};kt.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,a=n,o;r===!0?(o=n,a=n.parent):r===!1&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:i};this._commandStack.execute("elements.move",s)};kt.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var a={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",a)};kt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};kt.prototype.createConnection=function(e,t,n,i,r,a){typeof n=="object"&&(a=r,r=i,i=n,n=void 0),i=this._create("connection",i);var o={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:a};return this._commandStack.execute("connection.create",o),o.connection};kt.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var a=r.attach,o,s;e=this._create("shape",e),a?(o=n.parent,s=n):o=n;var c={position:t,shape:e,parent:o,parentIndex:i,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape};kt.prototype.createElements=function(e,t,n,i,r){yt(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var a={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",a),a.elements};kt.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};kt.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var a={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",a),a.shape};kt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};kt.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};kt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};kt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};kt.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};kt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};kt.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};kt.prototype.createSpace=function(e,t,n,i,r){var a={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",a)};kt.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};kt.prototype.reconnect=function(e,t,n,i,r){var a={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",a)};kt.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,Y(i,{docking:"source"}))};kt.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,Y(i,{docking:"target"}))};kt.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};kt.prototype._create=function(e,t){return t instanceof Vc?t:this._elementFactory.create(e,t)};kt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function uu(e){this._elementRegistry=e}uu.$inject=["elementRegistry"];uu.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this.getVisualReferences(n).concat(t),a=e.oldProperties||j9(n,ld(i));return RC(n,i),e.oldProperties=a,e.changed=r,r};uu.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return RC(n,t),i};uu.prototype.getVisualReferences=function(e){var t=this._elementRegistry;return P(e,"bpmn:DataObject")?V9(e,t):[]};function j9(e,t){return ji(t,function(n,i){return n[i]=e.get(i),n},{})}function RC(e,t){G(t,function(n,i){e.set(i,n)})}function V9(e,t){return t.filter(function(n){return P(n,"bpmn:DataObjectReference")&&Te(n).dataObjectRef===e})}var oc="default",_a="id",MC="di",U9={width:0,height:0};function pu(e,t,n,i,r){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=r}pu.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"];pu.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r=this._elementRegistry,a=this._moddle.ids,o=t.businessObject,s=Y9(e.properties),c=e.oldProperties||W9(o,s);return DC(s,o)&&(a.unclaim(o[_a]),r.updateId(t,s[_a]),a.claim(s[_a],o)),oc in s&&(s[oc]&&n.push(r.get(s[oc].id)),o[oc]&&n.push(r.get(o[oc].id))),OC(o,s),e.oldProperties=c,e.changed=n,n};pu.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&Te(n).name;if(!!i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,U9)}};pu.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,a=this._elementRegistry,o=this._moddle.ids;return OC(r,i),DC(n,r)&&(o.unclaim(n[_a]),a.updateId(t,i[_a]),o.claim(i[_a],r)),e.changed};function DC(e,t){return _a in e&&e[_a]!==t[_a]}function W9(e,t){var n=ld(t);return ji(n,function(i,r){return r!==MC?i[r]=e.get(r):i[r]=G9(e.di,ld(t.di)),i},{})}function G9(e,t){return ji(t,function(n,i){return n[i]=e.get(i),n},{})}function OC(e,t){G(t,function(n,i){i!==MC?e.set(i,n):e.di&&q9(e.di,n)})}function q9(e,t){G(t,function(n,i){e.set(i,n)})}var K9=["default"];function Y9(e){var t=Y({},e);return K9.forEach(function(n){n in e&&(t[n]=Te(t[n]))}),t}function Cf(e,t){this._canvas=e,this._modeling=t}Cf.$inject=["canvas","modeling"];Cf.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),a=r.businessObject,o=a.$parent,s=a.di;t.setRootElement(n,!0),hn(o.rootElements,i),i.$parent=o,fn(o.rootElements,a),a.$parent=null,a.di=null,s.bpmnElement=i,i.di=s,e.oldRoot=r};Cf.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,a=r.businessObject,o=i.$parent,s=i.di;t.setRootElement(r,!0),fn(o.rootElements,i),i.$parent=null,hn(o.rootElements,a),a.$parent=o,i.di=null,s.bpmnElement=a,a.di=s};function sy(e,t){this._modeling=e,this._spaceTool=t}sy.$inject=["modeling","spaceTool"];sy.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,a=vr(i),o=a===i,s=o?i:i.parent,c=Zo(s);c.length||n.createShape({type:"bpmn:Lane"},{x:i.x+Is,y:i.y,width:i.width-Is,height:i.height},s);var u=[];Ko(a,function(y){return u.push(y),y.label&&u.push(y.label),y===i?[]:st(y.children,function(E){return E!==i})});var d=r==="top"?-120:120,f=r==="top"?i.y:i.y+i.height,m=f+(r==="top"?10:-10),v=r==="top"?"n":"s",g=t.calculateAdjustments(u,"y",d,m);t.makeSpace(g.movingShapes,g.resizingShapes,{x:0,y:d},v,m),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(o?Is:0),y:f-(r==="top"?120:0),width:i.width-(o?Is:0),height:120},s)};function ly(e,t){this._modeling=e,this._translate=t}ly.$inject=["modeling","translate"];ly.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,a=Zo(i),o=a.length;if(o>r)throw new Error(n("more than {count} child lanes",{count:r}));var s=Math.round(i.height/r),c,u,d,f,m;for(m=0;m<r;m++)c=i.y+m*s,m===r-1?u=i.height-s*m:u=s,d={x:i.x+Is,y:c,width:i.width-Is,height:u},m<o?t.resizeShape(a[m],d):(f={type:"bpmn:Lane"},t.createShape(f,d,i))};function du(e,t){this._modeling=e,this._spaceTool=t}du.$inject=["modeling","spaceTool"];du.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};du.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=$3(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};du.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=Ke(e),r=Ke(t),a=CS(r,i),o=vr(e),s=[],c=[];Ko(o,function(g){return s.push(g),(P(g,"bpmn:Lane")||P(g,"bpmn:Participant"))&&c.push(g),g.children});var u,d,f,m,v;(a.bottom||a.top)&&(u=a.bottom||a.top,d=e.y+(a.bottom?e.height:0)+(a.bottom?-10:10),f=a.bottom?"s":"n",m=a.top>0||a.bottom<0?-u:u,v=n.calculateAdjustments(s,"y",m,d),n.makeSpace(v.movingShapes,v.resizingShapes,{x:0,y:u},f)),(a.left||a.right)&&(u=a.right||a.left,d=e.x+(a.right?e.width:0)+(a.right?-10:100),f=a.right?"e":"w",m=a.left>0||a.right<0?-u:u,v=n.calculateAdjustments(c,"x",m,d),n.makeSpace(v.movingShapes,v.resizingShapes,{x:u,y:0},f))};var Dc="flowNodeRef",cy="lanes";function fu(e){this._elementRegistry=e}fu.$inject=["elementRegistry"];fu.prototype.computeUpdates=function(e,t){var n=[],i=[],r={},a=[];function o(d,f){var m=Ke(f),v={x:d.x+d.width/2,y:d.y+d.height/2};return v.x>m.left&&v.x<m.right&&v.y>m.top&&v.y<m.bottom}function s(d){n.indexOf(d)===-1&&(a.push(d),n.push(d))}function c(d){var f=vr(d);return r[f.id]||(r[f.id]=nf(f)),r[f.id]}function u(d){if(!d.parent)return[];var f=c(d);return f.filter(function(m){return o(d,m)}).map(function(m){return m.businessObject})}return t.forEach(function(d){var f=vr(d);if(!(!f||n.indexOf(f)!==-1)){var m=f.children.filter(function(v){return P(v,"bpmn:FlowNode")});m.forEach(s),n.push(f)}}),e.forEach(s),a.forEach(function(d){var f=d.businessObject,m=f.get(cy),v=m.slice(),g=u(d);i.push({flowNode:f,remove:v,add:g})}),t.forEach(function(d){var f=d.businessObject;d.parent||f.get(Dc).forEach(function(m){i.push({flowNode:m,remove:[f],add:[]})})}),i};fu.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(cy);n.remove.forEach(function(a){fn(r,a),fn(a.get(Dc),i)}),n.add.forEach(function(a){hn(r,a),hn(a.get(Dc),i)})})};fu.prototype.revert=function(e){var t=e.updates;t.forEach(function(n){var i=n.flowNode,r=i.get(cy);n.add.forEach(function(a){fn(r,a),fn(a.get(Dc),i)}),n.remove.forEach(function(a){hn(r,a),hn(a.get(Dc),i)})})};function Tf(e){this._moddle=e}Tf.$inject=["moddle"];Tf.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.claim(n,i):t.unclaim(n)};Tf.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.unclaim(n):t.claim(n,i)};var X9={fill:void 0,stroke:void 0};function uy(e){this._commandStack=e,this._normalizeColor=function(t){if(!!t){if(Hi(t)){var n=Z9(t);if(n)return n}throw new Error("invalid color value: "+t)}}}uy.$inject=["commandStack"];uy.prototype.postExecute=function(e){var t=e.elements,n=e.colors||X9,i=this,r={};"fill"in n&&Y(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&Y(r,{"border-color":this._normalizeColor(n.stroke)}),G(t,function(a){var o=J9(a)?xr(r,["border-color"]):r;Q9(o),a.labelTarget?i._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:a.businessObject.di.label,properties:{color:r["background-color"]}}):i._commandStack.execute("element.updateProperties",{element:a,properties:{di:o}})})};function Z9(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function J9(e){return!!e.waypoints}function Q9(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var e7={width:0,height:0};function IC(e,t){function n(s,c){var u=s.label||s,d=s.labelTarget||s;return hz(u,c),[u,d]}function i(s){var c=s.element,u=c.businessObject,d=s.newLabel;if(!Vn(c)&&Ws(c)&&!Gd(c)&&!aE(d)){var f=7,m=qd(c);m={x:m.x,y:m.y+f},e.createLabel(c,m,{id:u.id+"_label",businessObject:u})}}function r(s){return s.oldLabel=br(s.element),n(s.element,s.newLabel)}function a(s){return n(s.element,s.oldLabel)}function o(s){var c=s.element,u=c.label||c,d=s.newLabel,f=s.newBounds,m=s.hints||{};if(!(!Vn(u)&&!P(u,"bpmn:TextAnnotation"))){if(Vn(u)&&aE(d)){m.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var v=br(u);typeof f>"u"&&(f=t.getExternalLabelBounds(u,v)),f&&e.resizeShape(u,f,e7)}}this.preExecute=i,this.execute=r,this.revert=a,this.postExecute=o}IC.$inject=["modeling","textRenderer"];function aE(e){return!e||!e.trim()}function qn(e,t,n,i){kt.call(this,e,t,n),this._bpmnRules=i}Ve.exports(qn,kt);qn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];qn.prototype.getHandlers=function(){var e=kt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=uu,e["element.updateProperties"]=pu,e["canvas.updateRoot"]=Cf,e["lane.add"]=sy,e["lane.resize"]=du,e["lane.split"]=ly,e["lane.updateRefs"]=fu,e["id.updateClaim"]=Tf,e["element.setColor"]=uy,e["element.updateLabel"]=IC,e};qn.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};qn.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};qn.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};qn.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};qn.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};qn.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};qn.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};qn.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};qn.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};qn.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};this._commandStack.execute("canvas.updateRoot",t)};qn.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};qn.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};qn.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function NC(){}NC.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||dt(t.source||e.source),t.connectionEnd||dt(t.target||e.target)]};var Lp=20,t7=5,Sd=Math.round,oE=20,n7={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function i7(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function r7(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function kC(e,t,n){var i=Wn(t,e,t7),r=n.split(":")[0],a=Sd((t.x-e.x)/2+e.x),o=Sd((t.y-e.y)/2+e.y),s,c,u=r7(r,i),d=/h|r|l/.test(r),f=!1,m=!1;return u?(s=d?{x:a,y:e.y}:{x:e.x,y:o},c=d?"h:h":"v:v"):(f=i7(i,r),c=d?"h:v":"v:h",f?d?(m=o===e.y,s={x:e.x+Lp*(/l/.test(r)?-1:1),y:m?o+Lp:o}):(m=a===e.x,s={x:m?a+Lp:a,y:e.y+Lp*(/t/.test(r)?-1:1)}):s={x:a,y:o}),{waypoints:py(e,s,c).concat(s),directions:c,turnNextDirections:m}}function a7(e,t,n){return kC(e,t,n)}function o7(e,t,n){var i=kC(t,e,sE(n));return{waypoints:i.waypoints.slice().reverse(),directions:sE(i.directions),turnNextDirections:i.turnNextDirections}}function s7(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,a=py(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:a,directions:r}}function sE(e){return e.split(":").reverse().join(":")}function l7(e,t,n){var i=Sd((t.x-e.x)/2+e.x),r=Sd((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function py(e,t,n){if(n=n||"h:h",!g7(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(BC(n)){var i=a7(e,t,n),r=o7(e,t,n),a=s7(i,r);return[].concat(i.waypoints,a.waypoints,r.waypoints)}return l7(e,t,n)}function c7(e,t,n){var i=py(e,t,n);return i.unshift(e),i.push(t),LC(i)}function u7(e,t,n,i,r){var a=r&&r.preferredLayouts||[],o=eL(a,"straight")[0]||"h:h",s=n7[o]||0,c=Wn(e,t,s),u=v7(c,o);n=n||dt(e),i=i||dt(t);var d=u.split(":"),f=cE(n,e,d[0],y7(c)),m=cE(i,t,d[1],c);return c7(f,m,u)}function p7(e,t,n,i,r,a){yt(n)&&(r=n,a=i,n=dt(e),i=dt(t)),a=Y({preferredLayouts:[]},a),r=r||[];var o=a.preferredLayouts,s=o.indexOf("straight")!==-1,c;return c=s&&f7(e,t,n,i,a),c||(c=a.connectionEnd&&m7(t,e,i,r),c)||(c=a.connectionStart&&h7(e,t,n,r),c)?c:!a.connectionStart&&!a.connectionEnd&&r&&r.length?r:u7(e,t,n,i,a)}function d7(e,t,n){return e>=t&&e<=n}function lE(e,t,n){var i={x:"width",y:"height"};return d7(t[e],n[e],n[e]+n[i[e]])}function f7(e,t,n,i,r){var a={},o,s;return s=Wn(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(o="x"),/left|right/.test(s)&&(o="y"),r.preserveDocking==="target"?lE(o,i,e)?(a[o]=i[o],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:i.x,y:i.y}]):null:lE(o,n,t)?(a[o]=n[o],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y,original:{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y}}]):null):null}function h7(e,t,n,i){return dy(e,t,n,i)}function m7(e,t,n,i){var r=i.slice().reverse();return r=dy(e,t,n,r),r?r.reverse():null}function dy(e,t,n,i){function r(d){return d.length<3?!0:d.length>4?!1:!!Dt(d,function(f,m){var v=d[m-1];return v&&jc(f,v)<3})}function a(d,f,m){var v=ga(f,d);switch(v){case"v":return{x:m.x,y:d.y};case"h":return{x:d.x,y:m.y}}return{x:d.x,y:d.y}}function o(d,f,m){var v;for(v=d.length-2;v!==0;v--)if(eb(d[v],f,oE)||eb(d[v],m,oE))return d.slice(v);return d}if(r(i))return null;var s=i[0],c=i.slice(),u;return c[0]=n,c[1]=a(c[1],s,n),u=o(c,e,t),u!==c&&(c=dy(e,t,n,u)),c&&ga(c)?null:c}function v7(e,t){if(BC(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function g7(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function BC(e){return e&&/t|r|b|l/.test(e)}function y7(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function cE(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function LC(e){return e.reduce(function(t,n,i){var r=t[t.length-1],a=e[i+1];return qv(r,a,n,0)||t.push(n),t},[])}var _7=-10,x7=40,fy={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Qp={top:"t",right:"r",bottom:"b",left:"l"};function hy(){}Ve.exports(hy,NC);hy.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,a=t.connectionStart,o=t.connectionEnd,s,c;return a||(a=uE(r&&r[0],n)),o||(o=uE(r&&r[r.length-1],i)),(P(e,"bpmn:Association")||P(e,"bpmn:DataAssociation"))&&r&&!pE(n,i)?[].concat([a],r.slice(1,-1),[o]):(P(e,"bpmn:MessageFlow")?s=E7(n,i):(P(e,"bpmn:SequenceFlow")||pE(n,i))&&(n===i?s={preferredLayouts:M7(n,e)}:P(n,"bpmn:BoundaryEvent")?s={preferredLayouts:D7(n,i,o)}:Oc(n)||Oc(i)?s=S7(n):P(n,"bpmn:Gateway")?s={preferredLayouts:["v:h"]}:P(i,"bpmn:Gateway")?s={preferredLayouts:["h:v"]}:s={preferredLayouts:["h:h"]}),s&&(s=Y(s,t),c=LC(p7(n,i,a,o,r,s))),c||[a,o])};function b7(e){var t=e.host;return Wn(dt(e),t,_7)}function E7(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:w7(e,t)}}function w7(e,t){return P(t,"bpmn:Participant")?"source":P(e,"bpmn:Participant")?"target":Oc(t)?"source":Oc(e)||P(t,"bpmn:Event")?"target":P(e,"bpmn:Event")?"source":null}function S7(e){return{preferredLayouts:["straight","h:h"],preserveDocking:C7(e)}}function C7(e){return Oc(e)?"target":"source"}function uE(e,t){return e?e.original||e:dt(t)}function pE(e,t){return P(t,"bpmn:Activity")&&P(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Oc(e){return P(e,"bpmn:SubProcess")&&Ot(e)}function gc(e,t){return e===t}function T7(e,t){return t.indexOf(e)!==-1}function yc(e){var t=/right|left/.exec(e);return t&&t[0]}function Fo(e){var t=/top|bottom/.exec(e);return t&&t[0]}function P7(e,t){return fy[e]===t}function A7(e,t){var n=yc(e),i=fy[n];return t.indexOf(i)!==-1}function R7(e,t){var n=Fo(e),i=fy[n];return t.indexOf(i)!==-1}function bv(e){return e==="right"||e==="left"}function M7(e,t){var n=t.waypoints,i=n&&n.length&&Wn(n[0],e);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function D7(e,t,n){var i=dt(e),r=dt(t),a=b7(e),o,s,c=gc(e.host,t),u=T7(a,["top","right","bottom","left"]),d=Wn(r,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?O7(a,u,e,t,n):(o=I7(a,d,u),s=N7(a,d,u),[o+":"+s])}function O7(e,t,n,i,r){var a=t?e:Fo(e),o=Qp[a],s;return t?bv(e)?s=dE("y",n,i,r)?"h":"b":s=dE("x",n,i,r)?"v":"l":s="v",[o+":"+s]}function dE(e,t,n,i){var r=x7;return!(Sm(e,i,n,r)||Sm(e,i,{x:n.x+n.width,y:n.y+n.height},r)||Sm(e,i,dt(t),r))}function Sm(e,t,n,i){return Math.abs(t[e]-n[e])<i}function I7(e,t,n){return n?Qp[e]:gc(Fo(e),Fo(t))||P7(yc(e),yc(t))?Qp[Fo(e)]:Qp[yc(e)]}function N7(e,t,n){return n?bv(e)?A7(e,t)||gc(e,t)?"h":"v":R7(e,t)||gc(e,t)?"v":"h":bv(t)||gc(Fo(e),Fo(t))&&yc(t)?"h":"v"}function fE(e){return Y({original:e.point.original||e.point},e.actual)}function vo(e,t){this._elementRegistry=e,this._graphicsFactory=t}vo.$inject=["elementRegistry","graphicsFactory"];vo.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),a=e.waypoints.slice(i.idx+1,r.idx);return a.unshift(fE(i)),a.push(fE(r)),a};vo.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,a,o;return r=n?0:i.length-1,a=i[r],o=this._getIntersection(t,e,n),{point:a,actual:o||a,idx:r}};vo.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return Jm(i,r,n)};vo.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};vo.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};vo.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const k7={__init__:["modeling","bpmnUpdater"],__depends__:[H4,o9,l9,c9,SS,u9,h9,v9,E9,Xr,kS,bC],bpmnFactory:["type",ur],bpmnUpdater:["type",Ri],elementFactory:["type",fo],modeling:["type",qn],layouter:["type",hy],connectionDocking:["type",vo]};var B7=500,L7=1250,$7=1500,Cd=Math.round;function z7(e){return{x:e.x+Cd(e.width/2),y:e.y+Cd(e.height/2)}}function $C(e,t,n,i,r){function a(s,c,u,d){return r.allowed("elements.move",{shapes:s,delta:c,position:u,target:d})}e.on("shape.move.start",$7,function(s){var c=s.context,u=s.shape,d=i.get().slice();d.indexOf(u)===-1&&(d=[u]),d=F7(d),Y(c,{shapes:d,validatedShapes:d,shape:u})}),e.on("shape.move.start",L7,function(s){var c=s.context,u=c.validatedShapes,d;if(d=c.canExecute=a(u),!d)return!1}),e.on("shape.move.move",B7,function(s){var c=s.context,u=c.validatedShapes,d=s.hover,f={x:s.dx,y:s.dy},m={x:s.x,y:s.y},v;if(v=a(u,f,m,d),c.delta=f,c.canExecute=v,v===null){c.target=null;return}c.target=d}),e.on("shape.move.end",function(s){var c=s.context,u=c.delta,d=c.canExecute,f=d==="attach",m=c.shapes;if(d===!1)return!1;u.x=Cd(u.x),u.y=Cd(u.y),!(u.x===0&&u.y===0)&&n.moveElements(m,u,c.target,{primaryShape:c.shape,attach:f})}),e.on("element.mousedown",function(s){if(!!so(s)){var c=cl(s);if(!c)throw new Error("must supply DOM mousedown event");return o(c,s.element)}});function o(s,c,u,d){if(kn(u)&&(d=u,u=!1),!(c.waypoints||!c.parent)){var f=z7(c);return t.init(s,f,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:c,context:d||{}}}),!0}}this.start=o}$C.$inject=["eventBus","dragging","modeling","selection","rules"];function F7(e){var t=tl(e,"id");return st(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var hE=499,Cm="djs-dragging",mE="drop-ok",vE="drop-not-ok",gE="new-parent",yE="attach-ok";function zC(e,t,n,i){function r(c){var u=a(c),d=H7(u);return d}function a(c){var u=kd(c,!0),d=Nn(u,function(f){return(f.incoming||[]).concat(f.outgoing||[])});return sd(u.concat(d))}function o(c,u){[yE,mE,vE,gE].forEach(function(d){d===u?t.addMarker(c,d):t.removeMarker(c,d)})}function s(c,u,d){i.addDragger(u,c.dragGroup),d&&t.addMarker(u,Cm),c.allDraggedElements?c.allDraggedElements.push(u):c.allDraggedElements=[u]}e.on("shape.move.start",hE,function(c){var u=c.context,d=u.shapes,f=u.allDraggedElements,m=r(d);if(!u.dragGroup){var v=Le("g");ve(v,n.cls("djs-drag-group",["no-events"]));var g=t.getActiveLayer();Ye(g,v),u.dragGroup=v}m.forEach(function(y){i.addDragger(y,u.dragGroup)}),f?f=sd([f,a(d)]):f=a(d),G(f,function(y){t.addMarker(y,Cm)}),u.allDraggedElements=f,u.differentParents=j7(d)}),e.on("shape.move.move",hE,function(c){var u=c.context,d=u.dragGroup,f=u.target,m=u.shape.parent,v=u.canExecute;f&&(v==="attach"?o(f,yE):u.canExecute&&f&&f.id!==m.id?o(f,gE):o(f,u.canExecute?mE:vE)),bi(d,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var u=c.context,d=u.target;d&&o(d,null)}),e.on("shape.move.cleanup",function(c){var u=c.context,d=u.allDraggedElements,f=u.dragGroup;G(d,function(m){t.removeMarker(m,Cm)}),f&&dn(f)}),this.makeDraggable=s}zC.$inject=["eventBus","canvas","styles","previewSupport"];function H7(e){var t=st(e,function(n){return V7(n)?Dt(e,yr({id:n.source.id}))&&Dt(e,yr({id:n.target.id})):!0});return t}function j7(e){return Cc(tl(e,function(t){return t.parent&&t.parent.id}))!==1}function V7(e){return e.waypoints}const U7={__depends__:[Kc,Xr,D1,Jr,Ca,Zc],__init__:["move","movePreview"],move:["type",$C],movePreview:["type",zC]};var FC=".djs-palette-toggle",HC=".entry",W7=FC+", "+HC,Ev="djs-palette-",G7="shown",wv="open",_E="two-column",q7=1e3;function bn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}bn.$inject=["eventBus","canvas"];bn.prototype.registerProvider=function(e,t){t||(t=e,e=q7),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};bn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(Y7,{})};bn.prototype._rebuild=function(){if(!!this._diagramInitialized){var e=this._getProviders();!e.length||(this._container||this._init(),this._update())}};bn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=Vt(bn.HTML_MARKUP);n.appendChild(i),Wt(n).add(Ev+G7),$i.bind(i,W7,"click",function(r){var a=r.delegateTarget;if(cd(a,FC))return e.toggle();e.trigger("click",r)}),Ie.bind(i,"mousedown",function(r){r.stopPropagation()}),$i.bind(i,HC,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};bn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};bn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,a=Wt(n),o=Wt(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),a.toggle(_E,r),o.toggle(Ev+_E,r),"open"in e&&(a.toggle(wv,e.open),o.toggle(Ev+wv,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};bn.prototype._update=function(){var e=Ft(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Id(e),G(t,function(n,i){var r=n.group||"default",a=Ft("[data-group="+r+"]",e);a||(a=Vt('<div class="group" data-group="'+r+'"></div>'),e.appendChild(a));var o=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=Vt(o);a.appendChild(s),n.separator||(oi(s,"data-action",i),n.title&&oi(s,"title",n.title),n.className&&K7(s,n.className),n.imageUrl&&s.appendChild(Vt('<img src="'+n.imageUrl+'">')))}),this.open()};bn.prototype.trigger=function(e,t,n){var i=this._entries,r,a,o,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();r=i[oi(s,"data-action")],r&&(a=r.action,o=t.originalEvent||t,Qn(a)?e==="click"&&a(o,n):a[e]&&a[e](o,n),t.preventDefault())};bn.prototype._layoutChanged=function(){this._toggleState({})};bn.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};bn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};bn.prototype.open=function(){this._toggleState({open:!0})};bn.prototype.toggle=function(e){this.isOpen()?this.close():this.open()};bn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};bn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ft(".djs-palette-entries",this._container),this._toolsContainer=Ft("[data-group=tools]",t)),n=this._toolsContainer,G(n.children,function(i){var r=i.getAttribute("data-action");if(!!r){var a=Wt(i);r=r.replace("-tool",""),a.contains("entry")&&r===e?a.add("highlighted-entry"):a.remove("highlighted-entry")}})};bn.prototype.isOpen=function(){return Wt(this._container).has(wv)};bn.prototype._getParentContainer=function(){return this._canvas.getContainer()};bn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function K7(e,t){var n=Wt(e),i=yt(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function Y7(e,t){var n=t.getPaletteEntries();return Qn(n)?n(e):(G(n,function(i,r){e[r]=i}),e)}const X7={__init__:["palette"],palette:["type",bn]};var jC="crosshair";function ts(e,t,n,i,r,a,o){this._selection=r,this._dragging=n,this._mouse=o;var s=this,c={create:function(u){var d=t.getActiveLayer(),f;f=u.frame=Le("rect"),ve(f,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Ye(d,f)},update:function(u){var d=u.frame,f=u.bbox;ve(d,{x:f.x,y:f.y,width:f.width,height:f.height})},remove:function(u){u.frame&&dn(u.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var d=u.originalEvent.target;!u.hover&&!(d instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",function(u){var d=Tm(u),f=i.filter(function(m){return m});s.select(f,d)}),e.on("lasso.start",function(u){var d=u.context;d.bbox=Tm(u),c.create(d)}),e.on("lasso.move",function(u){var d=u.context;d.bbox=Tm(u),c.update(d)}),e.on("lasso.cleanup",function(u){var d=u.context;c.remove(d)}),e.on("element.mousedown",1500,function(u){if(!!R1(u))return s.activateLasso(u.originalEvent),!0})}ts.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];ts.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:jC,data:{context:{}}})};ts.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:jC,data:{context:{}}})};ts.prototype.select=function(e,t){var n=FL(e,t);this._selection.select($v(n))};ts.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};ts.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Tm(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const Z7={__depends__:[mf,Qc],__init__:["lassoTool"],lassoTool:["type",ts]};var Pm=1500,VC="grab";function ml(e,t,n,i,r,a){this._dragging=n,this._mouse=a;var o=this,s=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Pm,function(c){if(!!Gs(c))return o.activateMove(c.originalEvent,!0),!1}),s&&s.addListener(Pm,function(c){if(!(!xE(c.keyEvent)||o.isActive())){var u=o._mouse.getLastMoveEvent();o.activateMove(u,!!u)}},"keyboard.keydown"),s&&s.addListener(Pm,function(c){!xE(c.keyEvent)||!o.isActive()||o.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var u=c.originalEvent.target;if(!c.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){o.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var u=t.viewbox().scale;t.scroll({dx:c.dx*u,dy:c.dy*u})}),e.on("hand.move.end",function(c){var u=c.context,d=u.reactivate;return!Gs(c)&&d&&e.once("hand.move.ended",function(f){o.activateHand(f.originalEvent,!0,!0)}),!1})}ml.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ml.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:VC,data:{context:n||{}}})};ml.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:VC,data:{context:{reactivate:n}}})};ml.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};ml.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function xE(e){return gr(" ",e)}const J7={__depends__:[mf,Qc],__init__:["handTool"],handTool:["type",ml]};var bE="connect-ok",EE="connect-not-ok";function vl(e,t,n,i,r,a,o){var s=this;this._dragging=t,this._rules=a,this._mouse=o,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var u=c.context,d=c.hover,f=u.canStartConnect=s.canStartConnect(d);f!==null&&(u.startTarget=d,i.addMarker(d,f?bE:EE))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var u=c.context.startTarget,d=c.context.canStartConnect;u&&i.removeMarker(u,d?bE:EE)}),e.on(["global-connect.ended"],function(c){var u=c.context,d=u.startTarget,f={x:c.x,y:c.y},m=s.canStartConnect(d);if(!!m)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,d,f)}),!1})}vl.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];vl.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};vl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};vl.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};vl.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const Q7={__depends__:[mg,Jr,Ca,mf,Qc],globalConnect:["type",vl]};function my(e,t,n,i,r,a,o,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=a,this._globalConnect=o,this._translate=s,e.registerProvider(this)}my.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];my.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,r=this._spaceTool,a=this._lassoTool,o=this._handTool,s=this._globalConnect,c=this._translate;function u(m,v,g,y,E){function N(T){var w=i.createShape(Y({type:m},E));E&&(w.businessObject.di.isExpanded=E.isExpanded),n.start(T,w)}var O=m.replace(/^bpmn:/,"");return{group:v,className:g,title:y||c("Create {type}",{type:O}),action:{dragstart:N,click:N}}}function d(m){var v=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),g=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:v});n.start(m,[v,g],{hints:{autoSelect:[v]}})}function f(m){n.start(m,i.createParticipantShape())}return Y(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate the hand tool"),action:{click:function(m){o.activateHand(m)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate the lasso tool"),action:{click:function(m){a.activateSelection(m)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate the create/remove space tool"),action:{click:function(m){r.activateSelection(m)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate the global connect tool"),action:{click:function(m){s.start(m)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":u("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create StartEvent")),"create.intermediate-event":u("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create Intermediate/Boundary Event")),"create.end-event":u("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create EndEvent")),"create.exclusive-gateway":u("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create Gateway")),"create.task":u("bpmn:Task","activity","bpmn-icon-task",c("Create Task")),"create.data-object":u("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create DataObjectReference")),"create.data-store":u("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded SubProcess"),action:{dragstart:d,click:d}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create Pool/Participant"),action:{dragstart:f,click:f}},"create.group":u("bpmn:Group","artifact","bpmn-icon-group",c("Create Group"))}),t};const eH={__depends__:[X7,Qd,bC,Z7,J7,Q7,Wd],__init__:["paletteProvider"],paletteProvider:["type",my]};var tH=250;function vy(e,t,n,i,r){Se.call(this,e);function a(s){var c=s.canExecute.replacements;G(c,function(u){var d=u.oldElementId,f={type:u.newElementType};if(!s.visualReplacements[d]){var m=t.get(d);Y(f,{x:m.x,y:m.y});var v=n.createShape(f);i.addShape(v,m.parent);var g=Ft('[data-element-id="'+Rc(m.id)+'"]',s.dragGroup);g&&ve(g,{display:"none"});var y=r.addDragger(v,s.dragGroup);s.visualReplacements[d]=y,i.removeShape(v)}})}function o(s){var c=s.visualReplacements;G(c,function(u,d){var f=Ft('[data-element-id="'+Rc(d)+'"]',s.dragGroup);f&&ve(f,{display:"inline"}),u.remove(),c[d]&&delete c[d]})}e.on("shape.move.move",tH,function(s){var c=s.context,u=c.canExecute;c.visualReplacements||(c.visualReplacements={}),u&&u.replacements?a(c):o(c)})}vy.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Ve.exports(vy,Se);const nH={__depends__:[Zc],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",vy]};var iH=1250,Am=40,rH=20,aH=10,wE=20,UC=["x","y"],oH=Math.abs;function WC(e){e.on(["connect.hover","connect.move","connect.end"],iH,function(t){var n=t.context,i=n.canExecute,r=n.start,a=n.hover,o=n.source,s=n.target;t.originalEvent&&Fi(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&a&&sH(t,a,pH(a)),a&&uH(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=ir(r),At(a,["bpmn:Event","bpmn:Gateway"])&&SE(t,ir(a)),At(a,["bpmn:Task","bpmn:SubProcess"])&&lH(t,a),P(o,"bpmn:BoundaryEvent")&&s===o.host&&cH(t)):GC(i,"bpmn:MessageFlow")?(P(r,"bpmn:Event")&&(n.connectionStart=ir(r)),P(a,"bpmn:Event")&&SE(t,ir(a))):n.connectionStart=n.initialConnectionStart)})}WC.$inject=["eventBus"];function sH(e,t,n){UC.forEach(function(i){var r=qC(i,t);e[i]<t[i]+n?Tn(e,i,t[i]+n):e[i]>t[i]+r-n&&Tn(e,i,t[i]+r-n)})}function lH(e,t){var n=ir(t);UC.forEach(function(i){dH(e,t,i)&&Tn(e,i,n[i])})}function cH(e){var t=e.context,n=t.source,i=t.target;if(!fH(t)){var r=ir(n),a=Wn(r,i,-10),o=[];/top|bottom/.test(a)&&o.push("x"),/left|right/.test(a)&&o.push("y"),o.forEach(function(s){var c=e[s],u;oH(c-r[s])<Am&&(c>r[s]?u=r[s]+Am:u=r[s]-Am,Tn(e,s,u))})}}function SE(e,t){Tn(e,"x",t.x),Tn(e,"y",t.y)}function GC(e,t){return e&&e.type===t}function uH(e,t){return Go(t,function(n){return GC(e,n)})}function qC(e,t){return e==="x"?t.width:t.height}function pH(e){return P(e,"bpmn:Task")?aH:rH}function dH(e,t,n){return e[n]>t[n]+wE&&e[n]<t[n]+qC(n,t)-wE}function fH(e){var t=e.hover,n=e.source;return t&&n&&t===n}function go(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}go.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};go.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};go.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};go.prototype.getSnapLocations=function(){return this._snapLocations};go.prototype.setSnapLocations=function(e){this._snapLocations=e};go.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Pf,n.initDefaults(this._defaultSnaps)),n};function Pf(e){this._snapValues={}}Pf.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Pf.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&T6(e[n],r[n],i)};Pf.prototype.initDefaults=function(e){var t=this;G(e||{},function(n,i){G(n,function(r){t.add(i,r)})})};var hH=1250;function Qr(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],hH,function(r){var a=r.context,o=a.shape,s=a.snapContext,c=a.target;if(!(r.originalEvent&&Fi(r.originalEvent))&&!(qs(r)||!c)){var u=s.pointsForTarget(c);u.initialized||(u=i.addSnapTargetPoints(u,o,c),u.initialized=!0),n.snap(r,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Qr.$inject=["elementRegistry","eventBus","snapping"];Qr.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new go);var a;t.get(i.id)?a=ir(i,e):a={x:e.x+ir(i).x,y:e.y+ir(i).y};var o={x:a.x-i.width/2,y:a.y-i.height/2},s={x:a.x+i.width/2,y:a.y+i.height/2};return r.setSnapOrigin("mid",{x:a.x-e.x,y:a.y-e.y}),Sv(i)||(r.setSnapOrigin("top-left",{x:o.x-e.x,y:o.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r};Qr.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return G(i,function(r){if(Sv(r)){Sv(t)&&e.add("mid",ir(r));return}if(mH(r)){if(r.waypoints.length<3)return;var a=r.waypoints.slice(1,-1);G(a,function(o){e.add("mid",o)});return}e.add("mid",ir(r))}),!rt(t.x)||!rt(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",ir(t)),e};Qr.prototype.getSnapTargets=function(e,t){return dS(t).filter(function(n){return!vH(n)})};function mH(e){return!!e.waypoints}function vH(e){return!!e.hidden}function Sv(e){return!!e.labelTarget}var CE=1500;function gl(e,t){t.invoke(Qr,this),e.on(["create.move","create.end"],CE,xH),e.on(["create.move","create.end","shape.move.move","shape.move.end"],CE,function(n){var i=n.context,r=i.canExecute,a=i.target,o=r&&(r==="attach"||r.attach);o&&!qs(n)&&gH(n,a)})}Ve.exports(gl,Qr);gl.$inject=["eventBus","injector"];gl.prototype.initSnap=function(e){var t=Qr.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return G(n.outgoing,function(r){var a=r.waypoints[0];a=a.original||a,t.setSnapOrigin(r.id+"-docking",PE(a,i,e))}),G(n.incoming,function(r){var a=r.waypoints[r.waypoints.length-1];a=a.original||a,t.setSnapOrigin(r.id+"-docking",PE(a,i,e))}),P(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};gl.prototype.addSnapTargetPoints=function(e,t,n){Qr.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);G(i,function(a){(_H(a)||yH([t,a],"bpmn:TextAnnotation"))&&(e.add("top-left",uS(a)),e.add("bottom-right",pS(a)))});var r=this._elementRegistry;return G(t.incoming,function(a){if(r.get(t.id)){TE(i,a.source)||e.add("mid",dt(a.source));var o=a.waypoints[0];e.add(a.id+"-docking",o.original||o)}}),G(t.outgoing,function(a){if(r.get(t.id)){TE(i,a.target)||e.add("mid",dt(a.target));var o=a.waypoints[a.waypoints.length-1];e.add(a.id+"-docking",o.original||o)}}),P(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};gl.prototype.getSnapTargets=function(e,t){return Qr.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!P(n,"bpmn:Lane")})};function gH(e,t){var n=Ke(t),i=aC(e,t),r=e.context,a=r.shape,o;a.parent?o={x:0,y:0}:o=dt(a),/top/.test(i)?Tn(e,"y",n.top-o.y):/bottom/.test(i)&&Tn(e,"y",n.bottom-o.y),/left/.test(i)?Tn(e,"x",n.left-o.x):/right/.test(i)&&Tn(e,"x",n.right-o.x)}function yH(e,t){return e.every(function(n){return P(n,t)})}function _H(e){return P(e,"bpmn:SubProcess")&&Ot(e)?!0:P(e,"bpmn:Participant")}function xH(e){var t=e.context,n=t.createConstraints;if(!!n){var i=n.top,r=n.right,a=n.bottom,o=n.left;(o&&o>=e.x||r&&r<=e.x)&&Tn(e,"x",e.x),(i&&i>=e.y||a&&a<=e.y)&&Tn(e,"y",e.y)}}function TE(e,t){return e.indexOf(t)!==-1}function PE(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var bH=1250;function hu(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],bH,function(i){var r=i.context,a=r.shape,o=a.parent,s=r.direction,c=r.snapContext;if(!(i.originalEvent&&Fi(i.originalEvent))&&!qs(i)){var u=c.pointsForTarget(o);u.initialized||(u=n.addSnapTargetPoints(u,a,o,s),u.initialized=!0),TH(s)&&Tn(i,"x",i.x),PH(s)&&Tn(i,"y",i.y),t.snap(i,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}hu.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new go);var a=KC(n,i);return r.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),r};hu.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return G(r,function(a){e.add("corner",pS(a)),e.add("corner",uS(a))}),e.add("corner",KC(t,i)),e};hu.$inject=["eventBus","snapping"];hu.prototype.getSnapTargets=function(e,t){return dS(t).filter(function(n){return!EH(n,e)&&!wH(n)&&!SH(n)&&!CH(n)})};function KC(e,t){var n=dt(e),i=Ke(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function EH(e,t){return e.host===t}function wH(e){return!!e.waypoints}function SH(e){return!!e.hidden}function CH(e){return!!e.labelTarget}function TH(e){return e==="n"||e==="s"}function PH(e){return e==="e"||e==="w"}var AH=7,RH=1e3;function yo(e){this._canvas=e,this._asyncHide=Rw(ai(this.hide,this),RH)}yo.$inject=["canvas"];yo.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),a={x:qs(e,"x"),y:qs(e,"y")};G(r,function(o){var s=i.getSnapOrigin(o),c={x:e.x+s.x,y:e.y+s.y};if(G(["x","y"],function(u){var d;a[u]||(d=t.snap(c,o,u,AH),d!==void 0&&(a[u]={value:d,originValue:d-s[u]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),G(["x","y"],function(o){var s=a[o];kn(s)&&Tn(e,o,s.originValue)})};yo.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Le("path");return ve(n,{d:"M0,0 L0,0"}),mt(n).add("djs-snap-line"),Ye(t,n),{update:function(i){rt(i)?e==="horizontal"?ve(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):ve(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):ve(n,{display:"none"})}}};yo.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};yo.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};yo.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};yo.prototype.hide=function(){G(this._snapLines,function(e){e.update()})};const MH={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Qr],resizeSnapping:["type",hu],snapping:["type",yo]},DH={__depends__:[MH],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",WC],createMoveSnapping:["type",gl]};function Xe(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=Vt(Xe.BOX_HTML),this._searchInput=Ft(Xe.INPUT_SELECTOR,this._container),this._resultsContainer=Ft(Xe.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}Xe.$inject=["canvas","eventBus","overlays","selection"];Xe.prototype._bindEvents=function(){var e=this;function t(n,i,r,a){e._eventMaps.push({el:n,type:r,listener:$i.bind(n,i,r,a)})}t(document,"html","click",function(n){e.close()}),t(this._container,Xe.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Xe.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Xe.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Xe.INPUT_SELECTOR,"keydown",function(n){n.keyCode===38&&n.preventDefault(),n.keyCode===40&&n.preventDefault()}),t(this._container,Xe.INPUT_SELECTOR,"keyup",function(n){if(n.keyCode===27)return e.close();if(n.keyCode===13){var i=e._getCurrentResult();return i?e._select(i):e.close()}if(n.keyCode===38)return e._scrollToDirection(!0);if(n.keyCode===40)return e._scrollToDirection();n.keyCode===37||n.keyCode===39||e._search(n.delegateTarget.value)})};Xe.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){$i.unbind(e.el,e.type,e.listener)})};Xe.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(!!n.length){n.forEach(function(r){var a=r.element.id,o=t._createResultNode(r,a);t._results[a]={element:r.element,node:o}});var i=Ft(Xe.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}};Xe.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(!!t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Xe.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};Xe.prototype._clearResults=function(){Id(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")};Xe.prototype._getCurrentResult=function(){return Ft(Xe.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Xe.prototype._createResultNode=function(e,t){var n=Vt(Xe.RESULT_HTML);return e.primaryTokens.length>0&&AE(n,e.primaryTokens,Xe.RESULT_PRIMARY_HTML),AE(n,e.secondaryTokens,Xe.RESULT_SECONDARY_HTML),oi(n,Xe.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Xe.prototype.registerProvider=function(e){this._searchProvider=e};Xe.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Wt(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Xe.prototype.close=function(){!this.isOpen()||(this._unbindEvents(),this._open=!1,Wt(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))};Xe.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Xe.prototype.isOpen=function(){return this._open};Xe.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Wt(t).remove(Xe.RESULT_SELECTED_CLASS);var n=oi(e,Xe.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Wt(e).add(Xe.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}};Xe.prototype._select=function(e){var t=oi(e,Xe.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Xe.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=Un(e),n=OH(t);this._overlayId=this._overlays.add(e,n)}};function OH(e){var t=6,n=e.width+t*2,i=e.height+t*2,r=["width: "+n+"px","height: "+i+"px"].join("; ");return{position:{bottom:i-t,right:n-t},show:!0,html:'<div style="'+r+'" class="'+Xe.OVERLAY_CLASS+'"></div>'}}function AE(e,t,n){var i=IH(t),r=Vt(n);r.innerHTML=i,e.appendChild(r)}function IH(e){var t="";return e.forEach(function(n){n.matched?t+='<strong class="'+Xe.RESULT_HIGHLIGHT_CLASS+'">'+Db(n.matched)+"</strong>":t+=Db(n.normal)}),t!==""?t:null}Xe.CONTAINER_SELECTOR=".djs-search-container";Xe.INPUT_SELECTOR=".djs-search-input input";Xe.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Xe.RESULT_SELECTOR=".djs-search-result";Xe.RESULT_SELECTED_CLASS="djs-search-result-selected";Xe.RESULT_SELECTED_SELECTOR="."+Xe.RESULT_SELECTED_CLASS;Xe.RESULT_ID_ATTRIBUTE="data-result-id";Xe.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Xe.OVERLAY_CLASS="djs-search-overlay";Xe.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>';Xe.RESULT_HTML='<div class="djs-search-result"></div>';Xe.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Xe.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const NH={__depends__:[ag,Xr],searchPad:["type",Xe]};function gy(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}gy.$inject=["elementRegistry","searchPad","canvas"];gy.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=st(n,function(i){return i!==t}),n=Nn(n,function(i){return{primaryTokens:ME(br(i),e),secondaryTokens:ME(i.id,e),element:i}}),n=st(n,function(i){return RE(i.primaryTokens)||RE(i.secondaryTokens)}),n=_r(n,function(i){return br(i.element)+i.element.id}),n};function RE(e){var t=st(e,function(n){return!!n.matched});return t.length>0}function ME(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}const kH={__depends__:[NH],__init__:["bpmnSearch"],bpmnSearch:["type",gy]};var BH='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Vr(e){qc.call(this,e)}Ve.exports(Vr,qc);Vr.Viewer=lo;Vr.NavigatedViewer=Ac;Vr.prototype.createDiagram=ll(function(){return this.importXML(BH)});Vr.prototype._interactionModules=[$1,j1,kF,W1];Vr.prototype._modelingModules=[LF,QF,p6,a6,A6,mg,N6,z3,ES,Qd,j3,W3,l8,p8,d8,g8,A8,k7,U7,eH,nH,$S,DH,kH];Vr.prototype._modules=[].concat(lo.prototype._modules,Vr.prototype._interactionModules,Vr.prototype._modelingModules);j([]);j([]);const Ic=j([]),YC=()=>LB({page:{current:1,size:999}}).then(e=>{Ic.value=e.sort((t,n)=>t.sort-n.sort),console.log("======queryEvents=====",e)}).catch(e=>{Ic.value=[]}),cc=e=>{const t=Td[e.$type];if(t&&t.value){const n=Ic.value.filter(r=>r.selectSign===1&&t.value.includes(r.nodeEventType)),i=ZC(n);e.extensionElements.values||(e.extensionElements.values=[]),e.extensionElements.values.push(...i)}},LH=e=>{let t;xi.exports.get(e,"loopCharacteristics",!1)?t=Td["bpmn:UserTask-multiple"]:t=Td["bpmn:UserTask"];const n=Ic.value.filter(r=>r.selectSign===1&&t.value.includes(r.nodeEventType)),i=ZC(n);e.extensionElements.values||(e.extensionElements.values=[]),e.extensionElements.values.push(...i)},$H=e=>{const t=Td[e.$type];return t&&t.value?t.value:[]},XC=(e={},t="0")=>{const{id:n,eventType:i,listenerId:r,listenerName:a,listenerType:o,wfEventParamList:s=[],listenerImpl:c,defaultTrigVal:u,selectMust:d}=e,f=["revoke","rejected","before_complete","suspend_process","end_process","activate_process","delete_process"].includes(u)?"netwisd":"camunda";return jt(`${f}:${i===1?"ExecutionListener":"TaskListener"}`,{fields:(s||[]).map(({id:v,paramName:g,paramType:y,paramId:E,paramDefalutValue:N,isPullDown:O})=>jt(`${f}:Field`,{name:E,id:v,paramName:g,[`${y}`]:N||"",isPullDown:O})),class:c,event:u,eventId:n,eventName:a,eventSubmitSign:"0",listenerId:r,listenerType:o,listenerImpl:c,id:r,eventSelectMust:`${d}`||"0",order:t})},ZC=e=>e.map((t,n)=>XC(t,t.sort||`${n}`)),zH=e=>{const[t,n]=e.$type.split(":"),i=t==="netwisd"?"camunda":"netwisd";return jt(`${i}:${n}`,{fields:(e.fields||[]).map(({string:r,expression:a,id:o,isPullDown:s,name:c,paramName:u})=>jt(`${i}:Field`,{string:r,expression:a,id:o,isPullDown:s,name:c,paramName:u})),class:e.class,event:e.event,eventId:e.eventId,eventName:e.eventName,eventSubmitSign:e.eventSubmitSign,listenerId:e.listenerId,listenerType:e.listenerType,listenerImpl:e.listenerImpl,id:e.id,eventSelectMust:e.eventSelectMust,order:e.order})},FH=e=>{const t=[...eT,...tT].find(n=>n.value===e);return t?t.label:"-"},HH=e=>["camunda:TaskListener","netwisd:TaskListener"].includes(e)?eT:tT,Af="1522100449434222594",jH=sn(()=>{const e=xe.value.extensionElements.values.find(n=>n.eventId===Af);return e?e.fields.find(n=>n.name==="msgSwitch").string==="on":!1}),Cv=e=>{const t=xe.value.extensionElements.values.find(i=>i.eventId===Af);if(!t)return;const n=t.fields.find(i=>i.name==="msgSwitch");n.string=e?"on":"off",e||JC([])},VH=sn(()=>{const e=xe.value.extensionElements.values.find(n=>n.eventId===Af);if(!e)return[];const t=e.fields.find(n=>n.name==="sendType");return t.string?t.string.split(","):[]}),JC=e=>{const t=xe.value.extensionElements.values.find(i=>i.eventId===Af);if(!t)return;const n=t.fields.find(i=>i.name==="sendType");n.string=e.join(","),n.string?Cv(!0):Cv(!1)},Rf="1522101216320765953",UH=sn(()=>{const e=xe.value.extensionElements.values.find(n=>n.eventId===Rf);return e?e.fields.find(n=>n.name==="msgSwitch").string==="on":!1}),Tv=e=>{const t=xe.value.extensionElements.values.find(i=>i.eventId===Rf);if(!t)return;const n=t.fields.find(i=>i.name==="msgSwitch");n.string=e?"on":"off",e||QC([])},WH=sn(()=>{const e=xe.value.extensionElements.values.find(n=>n.eventId===Rf);if(!e)return[];const t=e.fields.find(n=>n.name==="sendType");return t.string?t.string.split(","):[]}),QC=e=>{const t=xe.value.extensionElements.values.find(i=>i.eventId===Rf);if(!t)return;const n=t.fields.find(i=>i.name==="sendType");n.string=e.join(","),n.string?Tv(!0):Tv(!1)},eT=[{value:"create",label:"\u521B\u5EFA"},{value:"assignment",label:"\u7B7E\u6536"},{value:"revoke",label:"\u64A4\u56DE"},{value:"rejected",label:"\u88AB\u9A73\u56DE"},{value:"before_complete",label:"\u63D0\u4EA4\u524D"},{value:"complete",label:"\u5B8C\u6210"},{value:"delete",label:"\u5220\u9664"},{value:"update",label:"\u4FEE\u6539"}],tT=[{value:"start",label:"\u5F00\u59CB"},{value:"end",label:"\u7ED3\u675F"},{value:"suspend_process",label:"\u6D41\u7A0B\u6302\u8D77"},{value:"end_process",label:"\u6D41\u7A0B\u7EC8\u6B62"},{value:"activate_process",label:"\u6D41\u7A0B\u6FC0\u6D3B"},{value:"delete_process",label:"\u6D41\u7A0B\u5220\u9664"}],GH=e=>{const t=qH.find(n=>n.value===e);return t?t.label:"-"},qH=[{value:"8",label:"\u5168\u90E8\u8282\u70B9\u7C7B\u578B"},{value:"0",label:"\u6D41\u7A0B\u5B9A\u4E49"},{value:"13",label:"\u6D41\u7A0B\u5B9A\u4E49-\u5B50\u6D41\u7A0B"},{value:"14",label:"\u6D41\u7A0B\u5B9A\u4E49-\u5185\u5D4C\u5B50\u6D41\u7A0B"},{value:"15",label:"\u6D41\u7A0B\u5B9A\u4E49-\u5916\u5D4C\u6D41\u7A0B"},{value:"12",label:"\u7528\u6237\u4EFB\u52A1"},{value:"1",label:"\u7528\u6237\u4EFB\u52A1-\u5355\u5B9E\u4F8B"},{value:"2",label:"\u7528\u6237\u4EFB\u52A1-\u591A\u5B9E\u4F8B"},{value:"3",label:"\u5E8F\u5217\u6D41"},{value:"4",label:"\u5F00\u59CB"},{value:"5",label:"\u7ED3\u675F"},{value:"6",label:"\u5B50\u6D41\u7A0B"},{value:"7",label:"\u7F51\u5173"}],Td={"bpmn:Process":{value:["8","0"]},"bpmn:UserTask":{value:["8","1","12"]},"bpmn:UserTask-single":{value:["8","1"]},"bpmn:UserTask-multiple":{value:["8","2","12"]},"bpmn:SequenceFlow":{value:["8","3"]},"bpmn:StartEvent":{value:["8","4"]},"bpmn:EndEvent":{value:["8","5"]},"bpmn:SubProcess":{value:["8","13","14"]},"bpmn:CallActivity":{value:["8","13","15"]},"bpmn:ExclusiveGateway":{value:["8","7"]}},Ys={createShape:(e,t)=>{const n=Nt(Ma(),"netwisd:Form");return e.createShape({type:"bpmn:UserTask",businessObject:t.create("bpmn:UserTask",{name:"","netwisd:selectRule":"0","netwisd:batchRule":"0","netwisd:cancelRule":"1","netwisd:returnRule":"1",candidateUsers:"${wfAssignee}",extensionElements:t.create("bpmn:ExtensionElements",{values:[t.create("netwisd:Form",{id:n.id,formName:n.formName,formNameCh:n.formNameCh,pageUrl:n.pageUrl,cptId:n.cptId,cptFullName:n.cptFullName,values:[]}),t.create("netwisd:HumanExps",{values:[]}),t.create("netwisd:Buttons",{values:[]}),t.create("netwisd:Vars",{values:[]})]})})})}},Xs={createShape:(e,t)=>e.createShape({type:"bpmn:CallActivity",businessObject:t.create("bpmn:CallActivity",{calledElementBinding:"version","netwisd:isLookOver":"0","netwisd:isLookMe":"0",extensionElements:t.create("bpmn:ExtensionElements",{values:[t.create("camunda:In",{businessKey:"sub_#{execution.processBusinessKey}"}),t.create("camunda:In",{source:"wfCamundaProcessId",target:"wfCamundaProcessId","netwisd:readOnly":"1"}),t.create("camunda:In",{source:"wfProcessId",target:"wfProcessId","netwisd:readOnly":"1"}),t.create("camunda:In",{source:"wfAssignee",target:"wfAssignee","netwisd:readOnly":"1"}),t.create("camunda:In",{source:"wfCallActivityDefId",target:"wfCallActivityDefId","netwisd:readOnly":"1"}),t.create("camunda:In",{source:"wfLocalAssignee",target:"wfLocalAssignee","netwisd:readOnly":"1"}),t.create("camunda:In",{source:"wfActInsId",target:"wfActInsId","netwisd:readOnly":"1"}),t.create("netwisd:HumanExps",{values:[],mustFlag:"default"}),t.create("netwisd:Forms",{values:[],mustFlag:"default"}),t.create("netwisd:Buttons",{values:[],mustFlag:"default"}),t.create("netwisd:Vars",{values:[],mustFlag:"default"})]})})})},Zs={createShape:(e,t)=>e.createShape({type:"bpmn:ExclusiveGateway",businessObject:t.create("bpmn:ExclusiveGateway",{name:"\u6392\u5B83\u7F51\u5173",extensionElements:t.create("bpmn:ExtensionElements",{values:[]})})})},DE={createShape:(e,t)=>e.createShape({type:"bpmn:ParallelGateway",businessObject:t.create("bpmn:ParallelGateway",{name:"",extensionElements:t.create("bpmn:ExtensionElements",{values:[]})})})},OE={createShape:(e,t)=>e.createShape({type:"bpmn:InclusiveGateway",businessObject:t.create("bpmn:InclusiveGateway",{name:"",extensionElements:t.create("bpmn:ExtensionElements",{values:[]})})})},Js={createShape:(e,t)=>e.createShape({type:"bpmn:EndEvent",businessObject:t.create("bpmn:EndEvent",{name:"\u7ED3\u675F",extensionElements:t.create("bpmn:ExtensionElements",{values:[]})})})};class nT{constructor(t,n,i,r,a,o,s){this.create=i,this.elementFactory=r,this.translate=o,this.bpmnFactory=s,t.autoPlace!==!1&&(this.autoPlace=a.get("autoPlace",!1)),n.registerProvider(this)}getContextPadEntries(t){const n=!["bpmn:SequenceFlow","bpmn:EndEvent"].includes(t.type),r={"append.intermediate-event":{className:"contextPad-hide"},"append.text-annotation":{className:"contextPad-hide"},"append.append-task":{className:"contextPad-hide"},replace:{className:"contextPad-hide"},...n?{"append.userTask":{group:"model",className:"bpmn-icon-user-task",title:"\u4EFB\u52A1\u8282\u70B9",action:{dragstart:(a,o)=>{const s=Ys.createShape(this.elementFactory,this.bpmnFactory);this.create.start(a,s,{source:o})},click:(a,o)=>{const s=Ys.createShape(this.elementFactory,this.bpmnFactory);this.autoPlace?this.autoPlace.append(o,s):this.create.start(a,s,{source:o})}}},"append.callActivity":{group:"model",className:"bpmn-icon-call-activity",title:"\u5916\u94FE\u6D41\u7A0B",action:{dragstart:(a,o)=>{const s=Xs.createShape(this.elementFactory,this.bpmnFactory);this.create.start(a,s,{source:o})},click:(a,o)=>{const s=Xs.createShape(this.elementFactory,this.bpmnFactory);this.autoPlace?this.autoPlace.append(o,s):this.create.start(a,s,{source:o})}}},"append.gateway":{group:"default",className:"bpmn-icon-gateway-xor",title:"\u8DEF\u7531",action:{dragstart:(a,o)=>{const s=Zs.createShape(this.elementFactory,this.bpmnFactory);this.create.start(a,s,{source:o})},click:(a,o)=>{const s=Zs.createShape(this.elementFactory,this.bpmnFactory);this.autoPlace?this.autoPlace.append(o,s):this.create.start(a,s,{source:o})}}},"append.end-event":{group:"model",className:"bpmn-icon-end-event-none",title:"\u7ED3\u675F",action:{dragstart:(a,o)=>{const s=Js.createShape(this.elementFactory,this.bpmnFactory);this.create.start(a,s,{source:o})},click:(a,o)=>{const s=Js.createShape(this.elementFactory,this.bpmnFactory);this.autoPlace?this.autoPlace.append(o,s):this.create.start(a,s,{source:o})}}}}:{}};return t.type==="bpmn:UserTask"&&(r["copy.form-item"]={group:"edit",className:"ivu-icon ivu-icon-md-copy",title:"\u590D\u5236\u8282\u70B9\u8868\u5355\u914D\u7F6E",action:{dragstart:(a,o)=>{},click:(a,o)=>{}}}),r}}nT.$inject=["config","contextPad","create","elementFactory","injector","translate","bpmnFactory"];const KH={__init__:["customContextPad"],customContextPad:["type",nT]},YH=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-call-activity",title:i(""),action:{dragstart:function(r){const a=Xs.createShape(n,e);t.start(r,a)},click:function(r){const a=Xs.createShape(n,e);t.start(r,a)}}}),XH="create.call-activity",ZH=YH,JH=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:XH,palette:ZH},Symbol.toStringTag,{value:"Module"})),IE={createShape:(e,t)=>e.createShape({type:"bpmn:UserTask",businessObject:t.create("bpmn:UserTask",{"netwisd:icon":"entry bpmn-icon-user-task",candidateUsers:"${wfAssignee}",extensionElements:t.create("bpmn:ExtensionElements",{values:[t.create("camunda:TaskListener",{class:"com.netwisd.base.wf.event.listener.MessageListener",event:"create",id:"messageListener"}),t.create("camunda:TaskListener",{class:"com.netwisd.base.wf.event.listener.InvokeListener",event:"create",id:"invokeListener",fields:[t.create("camunda:Field",{name:"fixedValue",string:"http://localhost:8007/test/handle"})]}),t.create("camunda:TaskListener",{class:"com.netwisd.base.wf.event.listener.WfTaskListener",event:"create",id:"wfTaskListener","netwisd:class":"com.netwisd.base.wf.event.listener.WfTaskListener"}),t.create("netwisd:Test",{testx:"1111"})]})})})},QH=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){t.start(r,IE.createShape(n,e))},click:function(r){t.start(r,IE.createShape(n,e))}}}),ej="create.user-task",tj=QH,nj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:ej,palette:tj},Symbol.toStringTag,{value:"Module"})),ij=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){const a=Js.createShape(n,e);t.start(r,a)},click:function(r){const a=Js.createShape(n,e);t.start(r,a)}}}),rj="create.end-event",aj=ij,oj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:rj,palette:aj},Symbol.toStringTag,{value:"Module"})),sj=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){const a=Zs.createShape(n,e);t.start(r,a)},click:function(r){const a=Zs.createShape(n,e);t.start(r,a)}}}),lj="create.user-task",cj=sj,uj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:lj,palette:cj},Symbol.toStringTag,{value:"Module"})),pj=({bpmnFactory:e,create:t,elementFactory:n,translate:i,globalConnect:r,eventBus:a})=>({group:"tools",className:"bpmn-icon-connection-multi",title:i(""),action:{click:function(o){console.log("connection",o,r),console.log(r.start(o))}}}),dj="global-connect-tool",fj=pj,hj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:dj,palette:fj},Symbol.toStringTag,{value:"Module"})),mj=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){const a=OE.createShape(n,e);t.start(r,a)},click:function(r){const a=OE.createShape(n,e);t.start(r,a)}}}),vj="create.user-task",gj=mj,yj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:vj,palette:gj},Symbol.toStringTag,{value:"Module"})),_j=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){const a=DE.createShape(n,e);t.start(r,a)},click:function(r){const a=DE.createShape(n,e);t.start(r,a)}}}),xj="create.user-task",bj=_j,Ej=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:xj,palette:bj},Symbol.toStringTag,{value:"Module"})),NE={createShape:(e,t)=>e.createShape({type:"bpmn:ServiceTask",icon:"entry bpmn-icon-service-task",businessObject:t.create("bpmn:UserTask",{candidateUsers:"${wfAssignee}",extensionElements:t.create("bpmn:ExtensionElements",{values:[t.create("camunda:TaskListener",{class:"com.netwisd.demo.delegate.listener.MessageListener",event:"create",id:"messageListener"}),t.create("camunda:TaskListener",{class:"com.netwisd.demo.delegate.listener.InvokeListener",event:"create",id:"invokeListener",fields:[t.create("camunda:Field",{name:"fixedValue",string:"http://localhost:8007/test/handle"})]}),t.create("camunda:TaskListener",{class:"com.netwisd.demo.delegate.listener.WfTaskListener",event:"create",id:"wfTaskListener"})]})})})},wj=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-service-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){t.start(r,NE.createShape(n,e))},click:function(r){t.start(r,NE.createShape(n,e))}}}),Sj="create.service-task",Cj=wj,Tj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:Sj,palette:Cj},Symbol.toStringTag,{value:"Module"})),Pj=({bpmnFactory:e,create:t,elementFactory:n,translate:i})=>({group:"activity",className:"entry bpmn-icon-user-task",title:i("\u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B\u4E3Alindaidai-task\u7684\u4EFB\u52A1\u8282\u70B9"),action:{dragstart:function(r){const a=Ys.createShape(n,e);t.start(r,a)},click:function(r){const a=Ys.createShape(n,e);t.start(r,a)}}}),Aj="create.user-task",Rj=Pj,Mj=Object.freeze(Object.defineProperty({__proto__:null,paletteKey:Aj,palette:Rj},Symbol.toStringTag,{value:"Module"})),kE=Object.assign({"./callActivity/config.js":JH,"./def/config.js":nj,"./endEvent/config.js":oj,"./exclusiveGateway/config.js":uj,"./global-connect-tool/config.js":hj,"./inclusiveGateway/config.js":yj,"./parallelGateway/config.js":Ej,"./serviceTask/config.js":Tj,"./userTask/config.js":Mj}),Dj=[];Object.keys(kE).forEach(e=>{const t=kE[e];Dj.push({key:t.paletteKey,palette:t.palette})});class iT{constructor(t,n,i,r,a,o,s){this.bpmnFactory=t,this.create=n,this.elementFactory=i,this.translate=a,this.globalConnect=o,this.eventBus=s,r.registerProvider(this)}getPaletteEntries(t){const{bpmnFactory:n,create:i,elementFactory:r,translate:a,globalConnect:o,eventBus:s}=this,c={"create.end-event":{group:"activity",className:"entry bpmn-icon-end-event-none",title:a("\u521B\u5EFA\u7ED3\u675F\u8282\u70B9"),action:{dragstart:function(u){const d=Js.createShape(r,n);i.start(u,d)},click:function(u){const d=Js.createShape(r,n);i.start(u,d)}}},"create.user-task":{group:"activity",className:"entry bpmn-icon-user-task",title:a("\u521B\u5EFA\u7528\u6237\u8282\u70B9"),action:{dragstart:function(u){const d=Ys.createShape(r,n);i.start(u,d)},click:function(u){const d=Ys.createShape(r,n);i.start(u,d)}}},"create.call-activity":{group:"activity",className:"entry bpmn-icon-call-activity",title:a("\u521B\u5EFA\u5916\u94FE\u6D41\u7A0B"),action:{dragstart:function(u){const d=Xs.createShape(r,n);i.start(u,d)},click:function(u){const d=Xs.createShape(r,n);i.start(u,d)}}},"create.exclusive-gateway":{group:"gateway",className:"bpmn-icon-gateway-xor",title:"\u8DEF\u7531",action:{dragstart:(u,d)=>{const f=Zs.createShape(this.elementFactory,this.bpmnFactory);this.create.start(u,f,{source:d})},click:(u,d)=>{const f=Zs.createShape(this.elementFactory,this.bpmnFactory);this.autoPlace?this.autoPlace.append(d,f):this.create.start(u,f,{source:d})}}},"gateway-separator":{group:"gateway",separator:!0}};return c["create.task"]={group:"activity",className:"palette-hide"},c["create.subprocess-expanded"]={group:"activity",className:"palette-hide"},c["create.intermediate-event"]={group:"activity",className:"palette-hide"},console.log("=====rrr=====",c),c["activity-separator"]={group:"activity",separator:!0},c}}iT.$inject=["bpmnFactory","create","elementFactory","palette","translate","globalConnect","eventBus"];const Oj={__init__:["customPalette"],customPalette:["type",iT]};function Ij(e){return e.childNodes[0]}var $p=50,BE={min:.2,max:4},Nj=10,kj=.1,Bj=250;function pi(e,t,n,i,r){var a=this;this._canvas=i,this._elementRegistry=r,this._eventBus=n,this._injector=t,this._state={isOpen:void 0,isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null,svgClientRect:null,parentClientRect:null,zoomDelta:0},this._init(),this.toggle(e&&e.open||!1);function o(d){(!a._state._svgClientRect||Fp(a._state._svgClientRect))&&(a._state._svgClientRect=a._svg.getBoundingClientRect());var f=zp({x:d.clientX-a._state._svgClientRect.left,y:d.clientY-a._state._svgClientRect.top},a._svg,a._lastViewbox);Rm(f,a._canvas),a._update()}Ie.bind(this._svg,"click",function(d){d.preventDefault(),d.stopPropagation(),o(d)});function s(d){return function(m){(!a._state._svgClientRect||Fp(a._state._svgClientRect))&&(a._state._svgClientRect=a._svg.getBoundingClientRect()),d&&o(m);var v=zp({x:m.clientX-a._state._svgClientRect.left,y:m.clientY-a._state._svgClientRect.top},a._svg,a._lastViewbox),g=i.viewbox(),y=$j(v,g),E=a._viewportDom.getBoundingClientRect(),N={x:m.clientX-E.left+1,y:m.clientY-E.top+1};Y(a._state,{cachedViewbox:g,initialDragPosition:{x:m.clientX,y:m.clientY},isDragging:!0,offsetViewport:y,offsetViewportDom:N,viewportClientRect:a._viewport.getBoundingClientRect(),parentClientRect:a._parent.getBoundingClientRect()}),Ie.bind(document,"mousemove",c),Ie.bind(document,"mouseup",u)}}function c(d){if(a._state.isDragging){(!a._state._svgClientRect||Fp(a._state._svgClientRect))&&(a._state._svgClientRect=a._svg.getBoundingClientRect());var f=a._state.offsetViewportDom,m=a._state.viewportClientRect,v=a._state.parentClientRect;Y(a._viewportDom.style,{top:d.clientY-f.y-v.top+"px",left:d.clientX-f.x-v.left+"px"});var g=rT(v,{top:d.clientY-f.y-v.top,left:d.clientX-f.x-v.left,width:m.width,height:m.height});Y(a._overlay.style,{clipPath:g});var y=zp({x:d.clientX-a._state._svgClientRect.left,y:d.clientY-a._state._svgClientRect.top},a._svg,a._lastViewbox);Rm({x:y.x-a._state.offsetViewport.x,y:y.y-a._state.offsetViewport.y},a._canvas)}}function u(d){a._state.isDragging&&(a._state.initialDragPosition.x===d.clientX&&a._state.initialDragPosition.y===d.clientY&&o(d),a._update(),Y(a._state,{cachedViewbox:null,initialDragPosition:null,isDragging:!1,offsetViewport:null,offsetViewportDom:null}),Ie.unbind(document,"mousemove",c),Ie.unbind(document,"mouseup",u))}Ie.bind(this._viewportDom,"mousedown",s(!1)),Ie.bind(this._svg,"mousedown",s(!0)),Ie.bind(this._parent,"wheel",function(d){if(d.preventDefault(),d.stopPropagation(),!!d.ctrlKey&&((!a._state._svgClientRect||Fp(a._state._svgClientRect))&&(a._state._svgClientRect=a._svg.getBoundingClientRect()),!!jj(d,a._state._svgClientRect))){var f=d.deltaMode===0?.02:.32,m=Math.sqrt(Math.pow(d.deltaY,2)+Math.pow(d.deltaX,2))*Vj(d.deltaY)*-f;if(a._state.zoomDelta+=m,Math.abs(a._state.zoomDelta)>kj){var v=m>0?1:-1,g=Math.log(i.zoom())/Math.log(10),y=Uj(BE,Nj*2),E=Math.round(g/y)*y;E+=y*v;var N=Math.pow(10,E);i.zoom(Wj(BE,N),O),a._state.zoomDelta=0;var O=zp({x:d.clientX-a._state._svgClientRect.left,y:d.clientY-a._state._svgClientRect.top},a._svg,a._lastViewbox);Rm(O,a._canvas),a._update()}}}),Ie.bind(this._toggle,"click",function(d){d.preventDefault(),d.stopPropagation(),a.toggle()}),n.on(["shape.added","connection.added"],function(d){var f=d.element;a._addElement(f),a._update()}),n.on(["shape.removed","connection.removed"],function(d){var f=d.element;a._removeElement(f),a._update()}),n.on("elements.changed",Bj,function(d){var f=d.elements;f.forEach(function(m){a._updateElement(m)}),a._update()}),n.on("element.updateId",function(d){var f=d.element,m=d.newId;a._updateElementId(f,m)}),n.on("canvas.viewbox.changed",function(){a._state.isDragging||a._update()}),n.on("canvas.resized",function(){document.body.contains(a._parent)&&(a._state.isDragging||a._update(),a._state._svgClientRect=a._svg.getBoundingClientRect())}),n.on(["root.set","plane.set"],function(d){a._clear();var f=d.element||d.plane.rootElement;f.children.forEach(function(m){a._addElement(m)}),a._update()})}pi.$inject=["config.minimap","injector","eventBus","canvas","elementRegistry"];pi.prototype._init=function(){var e=this._canvas,t=e.getContainer(),n=this._parent=document.createElement("div");Wt(n).add("djs-minimap"),t.appendChild(n);var i=this._toggle=document.createElement("div");Wt(i).add("toggle"),n.appendChild(i);var r=this._map=document.createElement("div");Wt(r).add("map"),n.appendChild(r);var a=this._svg=Le("svg");ve(a,{width:"100%",height:"100%"}),Ye(r,a);var o=this._elementsGroup=Le("g");Ye(a,o);var s=this._viewportGroup=Le("g");Ye(a,s);var c=this._viewport=Le("rect");mt(c).add("viewport"),Ye(s,c),Ie.bind(n,"mousedown",function(f){f.stopPropagation()});var u=this._viewportDom=document.createElement("div");Wt(u).add("viewport-dom"),this._parent.appendChild(u);var d=this._overlay=document.createElement("div");Wt(d).add("overlay"),this._parent.appendChild(d)};pi.prototype._update=function(){var e=this._canvas.viewbox(),t=e.inner,n=e.outer;if(!!aT(e)){var i,r,a,o,s=n.width-t.width,c=n.height-t.height;t.width<n.width?(i=t.x-s/2,a=n.width,t.x+t.width<n.width&&(i=Math.min(0,t.x))):(i=t.x,a=t.width),t.height<n.height?(r=t.y-c/2,o=n.height,t.y+t.height<n.height&&(r=Math.min(0,t.y))):(r=t.y,o=t.height),i=i-$p,r=r-$p,a=a+$p*2,o=o+$p*2,this._lastViewbox={x:i,y:r,width:a,height:o},ve(this._svg,{viewBox:i+", "+r+", "+a+", "+o}),ve(this._viewport,{x:e.x,y:e.y,width:e.width,height:e.height});var u=this._state._parentClientRect=this._parent.getBoundingClientRect(),d=this._viewport.getBoundingClientRect(),f={top:d.top-u.top,left:d.left-u.left,width:d.width,height:d.height};Y(this._viewportDom.style,{top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"});var m=rT(u,f);Y(this._overlay.style,{clipPath:m})}};pi.prototype.open=function(){Y(this._state,{isOpen:!0}),Wt(this._parent).add("open");var e=this._injector.get("translate",!1)||function(t){return t};oi(this._toggle,"title",e("Close minimap")),this._update(),this._eventBus.fire("minimap.toggle",{open:!0})};pi.prototype.close=function(){Y(this._state,{isOpen:!1}),Wt(this._parent).remove("open");var e=this._injector.get("translate",!1)||function(t){return t};oi(this._toggle,"title",e("Open minimap")),this._eventBus.fire("minimap.toggle",{open:!1})};pi.prototype.toggle=function(e){var t=this.isOpen();typeof e>"u"&&(e=!t),e!=t&&(e?this.open():this.close())};pi.prototype.isOpen=function(){return this._state.isOpen};pi.prototype._updateElement=function(e){try{e.parent!==void 0&&e.parent!==null&&(this._removeElement(e),this._addElement(e))}catch(t){console.warn("Minimap#_updateElement errored",t)}};pi.prototype._updateElementId=function(e,t){try{var n=Ft("#"+Rc(e.id),this._elementsGroup);n&&(n.id=t)}catch(i){console.warn("Minimap#_updateElementId errored",i)}};pi.prototype.isOnActivePlane=function(e){var t=this._canvas;return t.findRoot?t.findRoot(e)===t.getRootElement():t.findPlane?t.findPlane(e)===t.getActivePlane():!0};pi.prototype._addElement=function(e){var t=this;if(this._removeElement(e),!!this.isOnActivePlane(e)){var n,i,r,a=this._createElement(e),o=Ft("#"+Rc(e.parent.id),this._elementsGroup);if(a){var s=this._elementRegistry.getGraphics(e),c=this._elementRegistry.getGraphics(e.parent),u=Fj(s,c);return u!=="undefined"?o?o.childNodes.length>u?$E(a,o,u):$E(a,o,o.childNodes.length-1):this._elementsGroup.appendChild(a):this._elementsGroup.appendChild(a),Lj(e)?(n=e.parent,i=0,r=0,typeof n.x<"u"&&typeof n.y<"u"&&(i=-n.x,r=-n.y),ve(a,{transform:"translate("+i+" "+r+")"})):(i=e.x,r=e.y,o&&(n=e.parent,i-=n.x,r-=n.y),ve(a,{transform:"translate("+i+" "+r+")"})),e.children&&e.children.length&&e.children.forEach(function(d){t._addElement(d)}),a}}};pi.prototype._removeElement=function(e){var t=this._svg.getElementById(e.id);t&&dn(t)};pi.prototype._createElement=function(e){var t=this._elementRegistry.getGraphics(e),n;if(t&&(n=Ij(t),n)){var i=Vv(n);return ve(i,{id:e.id}),i}};pi.prototype._clear=function(){Nd(this._elementsGroup)};function Lj(e){return e.waypoints}function $j(e,t){var n={x:t.x+t.width/2,y:t.y+t.height/2};return{x:e.x-n.x,y:e.y-n.y}}function zp(e,t,n){var i=t.getBoundingClientRect(),r=zj(n,i.width/i.height),a=LE(e.x,0,i.width,r.x,r.x+r.width),o=LE(e.y,0,i.height,r.y,r.y+r.height);return{x:a,y:o}}function Rm(e,t){var n=t.viewbox(),i=n.width,r=n.height;t.viewbox({x:e.x-i/2,y:e.y-r/2,width:i,height:r})}function zj(e,t){var n=e.width/e.height,i=Y({},{x:e.x,y:e.y,width:e.width,height:e.height});if(n>t){var r=i.width*(1/t),a=i.y-(r-i.height)/2;Y(i,{y:a,height:r})}else if(n<t){var o=i.height*t,s=i.x-(o-i.width)/2;Y(i,{x:s,width:o})}return i}function LE(e,t,n,i,r){var a=n-t,o=r-i;return(e-t)*o/a+i}function Fj(e,t){var n=Ft(".djs-children",t.parentNode);if(!!n){var i=[].slice.call(n.childNodes),r=-1;return i.forEach(function(a,o){Ft(".djs-element",a)===e&&(r=o)}),r}}function $E(e,t,n){var i=Hj(t),r=[].slice.call(i.childNodes),a=r[n];a?t.insertBefore(e,a.nextSibling):t.appendChild(e)}function Hj(e){var t=Ft(".children",e);return t||(t=Le("g",{class:"children"}),Ye(e,t)),t}function Fp(e){return e.width===0&&e.height===0}function jj(e,t){return e.x>t.left&&e.x<t.left+t.width&&e.y>t.top&&e.y<t.top+t.height}var Vj=Math.sign||function(e){return e>=0?1:-1};function Uj(e,t){var n=Math.log(e.min)/Math.log(10),i=Math.log(e.max)/Math.log(10),r=Math.abs(n)+Math.abs(i);return r/t}function Wj(e,t){return Math.max(e.min,Math.min(e.max,t))}function rT(e,t){var n=[Mr(t.left,t.top),Mr(t.left+t.width,t.top),Mr(t.left+t.width,t.top+t.height),Mr(t.left,t.top+t.height),Mr(t.left,e.height),Mr(e.width,e.height),Mr(e.width,0),Mr(0,0),Mr(0,e.height),Mr(t.left,e.height)].join(", ");return"polygon("+n+")"}function Mr(e,t){return e+"px "+t+"px"}function aT(e){return Wo(e,function(t){return kn(t)?aT(t):rt(t)&&isFinite(t)})}var Gj={__init__:["minimap"],minimap:["type",pi]};const qj=[Gj,KH,Oj],Kj="Camunda",Yj="http://camunda.org/schema/1.0/bpmn",Xj="camunda",Zj={tagAlias:"lowerCase"},Jj=[],Qj=[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","camunda:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinitionExtension",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinitionExtension",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"ErrorEventDefinition",superClass:["bpmn:ErrorEventDefinition","Element"],properties:[{name:"expression",isAttr:!0,type:"String"}],meta:{allowedIn:["bpmn:ServiceTask"]}},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"camunda:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"},{name:"formRef",isAttr:!0,type:"String"},{name:"formRefBinding",isAttr:!0,type:"String"},{name:"formRefVersion",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Collaboration","bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"},{name:"modelerTemplateVersion",isAttr:!0,type:"Integer"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinitionExtension",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["camunda:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","camunda:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","camunda:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["camunda:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0},{name:"id",type:"String",isAttr:!0},{name:"eventDefinitions",type:"bpmn:TimerEventDefinition",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinitionExtension",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvents",isAttr:!0,type:"String"}]}],eV=[],tV={name:Kj,uri:Yj,prefix:Xj,xml:Zj,associations:Jj,types:Qj,emumerations:eV},nV={name:"Netwisd",uri:"http://netwisd.org/schema/1.0/bpmn",prefix:"netwisd",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"Process",extends:["bpmn:Process"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:procdefNameAbbr",ns:{localName:"procdefNameAbbr",name:"netwisd:procdefNameAbbr",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:procdefTypeName",ns:{localName:"procdefTypeName",name:"netwisd:procdefTypeName",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:procdefTypeId",ns:{localName:"procdefTypeId",name:"netwisd:procdefTypeId",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:remark",ns:{localName:"remark",name:"netwisd:remark",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:icon",ns:{localName:"icon",name:"netwisd:icon",prefix:"netwisd"},type:"String"}]},{name:"UserTask",extends:["bpmn:UserTask"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:dueDay",ns:{localName:"dueDay",name:"netwisd:dueDay",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:selectRule",ns:{localName:"selectRule",name:"netwisd:selectRule",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:batchRule",ns:{localName:"batchRule",name:"netwisd:batchRule",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:cancelRule",ns:{localName:"cancelRule",name:"netwisd:cancelRule",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:returnRule",ns:{localName:"returnRule",name:"netwisd:returnRule",prefix:"netwisd"},type:"String"}]},{name:"Passing",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],properties:[{name:"passingRate",isAttr:!0,ns:{localName:"passingRate",name:"netwisd:passingRate",prefix:"netwisd"},type:"String"},{name:"passingHandle",isAttr:!0,ns:{localName:"passingHandle",name:"netwisd:passingHandle",prefix:"netwisd"},type:"String"},{name:"unpassingHandle",isAttr:!0,ns:{localName:"unpassingHandle",name:"netwisd:unpassingHandle",prefix:"netwisd"},type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:isLookOver",ns:{localName:"isLookOver",name:"netwisd:isLookOver",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:isLookMe",ns:{localName:"isLookMe",name:"netwisd:isLookMe",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:inited",ns:{localName:"inited",name:"netwisd:inited",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:cmdChildLogProcdefId",ns:{localName:"cmdChildLogProcdefId",name:"netwisd:cmdChildLogProcdefId",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:ctmChildLogProcdefId",ns:{localName:"ctmChildLogProcdefId",name:"netwisd:ctmChildLogProcdefId",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:childProcdefName",ns:{localName:"childProcdefName",name:"netwisd:childProcdefName",prefix:"netwisd"},type:"String"}]},{name:"In",extends:["camunda:In"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:readOnly",ns:{localName:"readOnly",name:"netwisd:readOnly",prefix:"netwisd"},type:"String"}]},{name:"Out",extends:["camunda:Out"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:readOnly",ns:{localName:"readOnly",name:"netwisd:readOnly",prefix:"netwisd"},type:"String"}]},{name:"FieldParameter",extends:["camunda:Field"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:id",ns:{localName:"id",name:"netwisd:id",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:isPullDown",ns:{localName:"isPullDown",name:"netwisd:isPullDown",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:paramName",ns:{localName:"paramName",name:"netwisd:paramName",prefix:"netwisd"},type:"String"}]},{name:"ListenerParameter",extends:["camunda:ExecutionListener","camunda:TaskListener"],isAbstract:!0,properties:[{isAttr:!0,name:"netwisd:eventId",ns:{localName:"eventId",name:"netwisd:eventId",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:eventName",ns:{localName:"eventName",name:"netwisd:eventName",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:eventSubmitSign",ns:{localName:"eventSubmitSign",name:"netwisd:eventSubmitSign",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:listenerId",ns:{localName:"listenerId",name:"netwisd:listenerId",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:listenerType",ns:{localName:"listenerType",name:"netwisd:listenerType",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:listenerImpl",ns:{localName:"listenerImpl",name:"netwisd:listenerImpl",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:eventSelectMust",ns:{localName:"eventSelectMust",name:"netwisd:eventSelectMust",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:openApiPath",ns:{localName:"openApiPath",name:"netwisd:openApiPath",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:openApiMthDes",ns:{localName:"openApiMthDes",name:"netwisd:openApiMthDes",prefix:"netwisd"},type:"String"},{isAttr:!0,name:"netwisd:order",ns:{localName:"order",name:"netwisd:order",prefix:"netwisd"},type:"String"}]},{name:"Form",superClass:["Element"],meta:{allowedIn:["bpmn:Process","bpmn:UserTask"]},properties:[{name:"values",type:"Field",isMany:!0},{name:"id",isAttr:!0,type:"String"},{name:"pageUrl",isAttr:!0,type:"String"},{name:"formName",isAttr:!0,type:"String"},{name:"formNameCh",isAttr:!0,type:"String"},{name:"cptId",isAttr:!0,type:"String"},{name:"cptFullName",isAttr:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["netwisd:Form","netwisd:TaskListener","netwisd:ExecutionListener"]},properties:[{name:"modelFieldId",isAttr:!0,type:"String"},{name:"id",isAttr:!0,type:"String"},{name:"javaName",isAttr:!0,type:"String"},{name:"nameCh",isAttr:!0,type:"String"},{name:"isMoreRow",isAttr:!0,type:"String"},{name:"dbType",isAttr:!0,type:"String"},{name:"powerCode",isAttr:!0,type:"String"},{name:"orm",isAttr:!0,type:"String"},{name:"isOrm",isAttr:!0,type:"String"},{name:"sourceName",isAttr:!0,type:"String"},{name:"javaType",isAttr:!0,type:"String"},{name:"varId",isAttr:!0,type:"String"},{name:"varName",isAttr:!0,type:"String"},{name:"varType",isAttr:!0,type:"String"},{name:"isView",isAttr:!0,type:"String"},{name:"isWrite",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"paramName",isAttr:!0,type:"String"},{name:"isPullDown",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"string",type:"String"}]},{name:"Test",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"testx",isAttr:!0,type:"String"}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:Process","bpmn:StartEvent","bpmn:UserTask","bpmn:SequenceFlow","bpmn:EndEvent"]},properties:[{name:"class",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"eventId",isAttr:!0,type:"String"},{name:"eventName",isAttr:!0,type:"String"},{name:"eventSubmitSign",isAttr:!0,type:"String"},{name:"listenerId",isAttr:!0,type:"String"},{name:"listenerImpl",isAttr:!0,type:"String"},{name:"eventSelectMust",isAttr:!0,type:"String"},{name:"order",isAttr:!0,type:"String"},{name:"fields",type:"Field",isMany:!0}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Process","bpmn:StartEvent","bpmn:UserTask","bpmn:SequenceFlow","bpmn:EndEvent"]},properties:[{name:"class",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"eventId",isAttr:!0,type:"String"},{name:"eventName",isAttr:!0,type:"String"},{name:"eventSubmitSign",isAttr:!0,type:"String"},{name:"listenerId",isAttr:!0,type:"String"},{name:"listenerImpl",isAttr:!0,type:"String"},{name:"eventSelectMust",isAttr:!0,type:"String"},{name:"order",isAttr:!0,type:"String"},{name:"fields",type:"Field",isMany:!0}]},{name:"Buttons",superClass:["Element"],meta:{allowedIn:["bpmn:Process"]},properties:[{name:"values",type:"Button",isMany:!0}]},{name:"Button",superClass:["Element"],meta:{allowedIn:["netwisd:Buttons"]},properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"code",isAttr:!0,type:"String"},{name:"isEnable",isAttr:!0,type:"String"}]},{name:"HumanExps",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"values",type:"HumanExp",isMany:!0}]},{name:"HumanExp",superClass:["Element"],meta:{allowedIn:["netwisd:HumanExps"]},properties:[{name:"expreId",isAttr:!0,type:"String"},{name:"expreName",isAttr:!0,type:"String"},{name:"expreExpression",isAttr:!0,type:"String"},{name:"bizType",isAttr:!0,type:"String"},{name:"bizId",isAttr:!0,type:"String"},{name:"bizText",isAttr:!0,type:"String"},{name:"values",type:"HumanExpParam",isMany:!0}]},{name:"HumanExpParam",superClass:["Element"],meta:{allowedIn:["netwisd:HumanExp"]},properties:[{name:"expreParamName",isAttr:!0,type:"String"},{name:"expreParamDesc",isAttr:!0,type:"String"},{name:"expreParamId",isAttr:!0,type:"String"},{name:"expreParamValue",isAttr:!0,type:"String"},{name:"expreParamValueText",isAttr:!0,type:"String"},{name:"expreParamValueId",isAttr:!0,type:"String"},{name:"expreParamSource",isAttr:!0,type:"String"},{name:"expreParamVarType",isAttr:!0,type:"String"},{name:"dbId",isAttr:!0,type:"String"}]},{name:"Vars",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask","bpmn:SequenceFlow"]},properties:[{name:"values",type:"Var",isMany:!0}]},{name:"Var",superClass:["Element"],meta:{allowedIn:["netwisd:Vars"]},properties:[{name:"actionScope",isAttr:!0,type:"String"},{name:"formId",isAttr:!0,type:"String"},{name:"modelFieldId",isAttr:!0,type:"String"},{name:"isMoreRow",isAttr:!0,type:"String"},{name:"formName",isAttr:!0,type:"String"},{name:"javaName",isAttr:!0,type:"String"},{name:"expreJavaName",isAttr:!0,type:"String"},{name:"nameCh",isAttr:!0,type:"String"}]},{name:"SequExps",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"id",isAttr:!0,type:"String"},{name:"expression",isAttr:!0,type:"String"},{name:"dbId",isAttr:!0,type:"String"}]},{name:"SequExpText",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"body",isBody:!0,type:"String"}]}],emumerations:[]},iV={camunda:tV,netwisd:nV},Pv=j(null),rV=async()=>{await new Promise(e=>{Li(Pv,()=>{e()})}),window.__BPMN_MODDLE__=new Vr({container:Pv.value,keyboard:{bindTo:window},additionalModules:qj,moddleExtensions:iV})},xe=j(null);Li(xe,(e,t)=>{e===t?window.__BPMN_ELEMENT_SELECT__&&Sc(window.__BPMN_ELEMENT_SELECT__.element,{"netwisd:isChange":"1"}):window.__BPMN_ELEMENT_SELECT__&&Sc(window.__BPMN_ELEMENT_SELECT__.element,{})},{deep:!0});const ed=j({}),Hp=e=>window.__BPMN_MODDLE__.importXML(e),oT=(e={format:!0})=>window.__BPMN_MODDLE__.saveXML(e),aV=async()=>{await rV(),lV()},oV=()=>{const e=window.__BPMN_ELEMENT_SELECT__.element.businessObject;return e.extensionElements.values||(e.extensionElements.values=[]),e},Ma=()=>window.__BPMN_MODDLE__.getDefinitions().rootElements[0],sV=(e=[])=>e.length===0?window.__BPMN_MODDLE__.getDefinitions().rootElements[0].flowElements:window.__BPMN_MODDLE__.getDefinitions().rootElements[0].flowElements.filter(t=>e.includes(t.$type)),Ls=e=>{Sc(window.__BPMN_ELEMENT_SELECT__.element,e)},lV=()=>{const e=window.__BPMN_MODDLE__.get("eventBus");console.log("eventBus",e),e.on("hand.end",(...t)=>{console.log("hand.end",t)}),e.on("connection.remove",(...t)=>{console.log("\u5220\u9664\u94FE\u63A5",t),ed.value={},window.__BPMN_ELEMENT_SELECT__=null,xe.value=null}),e.on("shape.remove",t=>{console.log("\u5220\u9664\u5143\u7D20",t),t.element.type!=="label"&&(ed.value={},window.__BPMN_ELEMENT_SELECT__=null,xe.value=null)}),e.on("element.click",t=>{console.log("\u5355\u51FB\u5143\u7D20",t),ed.value={id:t.element.id,tagName:t.element.type.replace(":","-")},window.__BPMN_ELEMENT_SELECT__=t,xe.value=t.element.businessObject}),e.on("element.dblclick",(...t)=>{console.log("\u53CC\u51FB\u5143\u7D20",t)}),e.on("copyPaste.copyElement",749,t=>{console.log("=====copyPaste.copyElement=====",t)}),e.on("copyPaste.pasteElement",function(t){}),e.on("shape.added",(t,...n)=>{console.log("\u6DFB\u52A0\u5143\u7D20",t,n),t.element.type!=="label"&&(t.element.businessObject.extensionElements||(t.element.businessObject.extensionElements=jt("bpmn:ExtensionElements",{values:[]})),window.__BPMN_ELEMENT_SELECT__=t,xe.value=t.element.businessObject,console.log("=\u662F\u5426\u5DF2\u7ECF\u521D\u59CB\u5316=",window.__BPMN_XML_INITED),(window.__BPMN_XML_INITED||window.__BPMN_XML_INIT_OF_DEFEVENT)&&cc(t.element.businessObject))}),e.on("connection.added",t=>{console.log("\u6DFB\u52A0\u94FE\u63A5",t.element),t.element.businessObject.extensionElements||(t.element.businessObject.extensionElements=jt("bpmn:ExtensionElements",{values:[jt("netwisd:SequExpText",{body:'{"id":"1","name":"root","type":3,"children":[]}'}),jt("netwisd:Vars",{values:[]})]})),(window.__BPMN_XML_INITED||window.__BPMN_XML_INIT_OF_DEFEVENT)&&cc(t.element.businessObject)})},sT=hw.parseQuery,yy=j(""),cV=async()=>{const e=sT(window.location.search.substr(1));yy.value=e.action;let t="",n="";switch(window.__BPMN_XML_INITED=!1,window.__BPMN_XML_INIT_OF_DEFEVENT=!1,e.action){case"create":window.__BPMN_XML_INIT_OF_DEFEVENT=!0,t=await kB().then(i=>i),await Hp(t),cc(Ma());break;case"createVersion":n=e.camundaProcdefId,t=await Wx(e.camundaProcdefId).then(i=>i),await Hp(t);break;case"clone":n=e.camundaProcdefId,t=await Wx(e.camundaProcdefId).then(i=>i),await Hp(t);break;case"edit":n=e.camundaProcdefId,t=await qB(n).then(i=>i),await Hp(t);break}console.log("====importXML over====="),window.__BPMN_XML_INITED=!0},lT=j(!1),ha=j([]),Mm=async(e=0)=>{lT.value=!0;const n={data:await oT().then(r=>(ha.value.push({type:"success",text:"\u83B7\u53D6XML\u6570\u636E\u6210\u529F"}),r.xml)).catch(r=>{ha.value.push({type:"error",text:"\u83B7\u53D6XML\u6570\u636E\u5931\u8D25"})})};switch(yy.value){case"edit":const r=sT(window.location.search.substr(1));n.procDefId=r.procDefId;break;case"createVersion":n.isNewVer=1,n.isCurrentVer=e;break}ha.value.push({type:"warning",text:"\u5F00\u59CB\u4FDD\u5B58\u6D41\u7A0B"});let i=await GB(n).then(r=>(ha.value.push({type:"success",text:"\u6D41\u7A0B\u4FDD\u5B58\u6210\u529F"}),r)).catch(r=>(ha.value.push({type:"error",text:"\u6D41\u7A0B\u4FDD\u5B58\u5931\u8D25"}),r));if(!i){await ha.value.push({type:"warning",text:"\u5F00\u59CB\u5173\u8054\u529F\u80FD"});const r=Ma();YB(Nt(r,"netwisd:Form").cptId,r.id).then(a=>(ha.value.push({type:"success",text:"\u5173\u8054\u529F\u80FD\u6210\u529F"}),!0)).catch(a=>(ha.value.push({type:"error",text:"\u5173\u8054\u529F\u80FD\u5931\u8D25"}),!1))}return i},uV=async()=>{await aV(),await YC(),await cV()},pV={props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne},setup(){return{SndSaveVisible:lT,SndSaveMsg:ha}}};function dV(e,t,n,i,r,a){const o=D("n-button"),s=D("n-modal");return fe(),Ge(s,{show:i.SndSaveVisible,"onUpdate:show":t[1]||(t[1]=c=>i.SndSaveVisible=c),preset:"dialog",style:{width:"400px"},"show-icon":!1,"mask-closable":!1,closable:!1},{icon:C(()=>[]),header:C(()=>[_e(" \u5904\u7406\u4E2D... ")]),action:C(()=>[x(o,{type:"default",size:"small",onClick:t[0]||(t[0]=c=>i.SndSaveVisible=!1)},{default:C(()=>[_e(" \u5173\u95ED ")]),_:1})]),default:C(()=>[U("div",null,[(fe(!0),lt(on,null,Od(i.SndSaveMsg,(c,u)=>(fe(),lt("div",{key:u},pn(c.text),1))),128))])]),_:1},8,["show"])}const fV=Pe(pV,[["render",dV]]),cT=j(!1),_c=j([]),Jn=({text:e,icon:t="icon-jinggao",fun:n=()=>{}})=>{_c.value.push({text:e,icon:t,fun:n})},hV=()=>{_c.value=[],console.log("====\u68C0\u6D4B===",window.__BPMN_MODDLE__.getDefinitions());const e=window.__BPMN_MODDLE__.getDefinitions().rootElements[0];e.id||Jn({text:"\u6D41\u7A0B\u5B9A\u4E49KEY\u4E0D\u80FD\u4E3A\u7A7A"}),e.name||Jn({text:"\u6D41\u7A0B\u5B9A\u4E49\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}),e.procdefNameAbbr||Jn({text:"\u7B80\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}),e.procdefTypeId||Jn({text:"\u6D41\u7A0B\u5206\u7C7B\u672A\u9009\u62E9"}),e.versionTag||Jn({text:"\u6D41\u7A0B\u7248\u672C\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A"}),e.icon||Jn({text:"\u6D41\u7A0B\u56FE\u6807\u672A\u9009\u62E9"});const t=e.extensionElements.values.find(n=>n.$type==="netwisd:Form");return t&&(!t.values||!t.values.length)&&Jn({text:"\u6D41\u7A0B\u672A\u9009\u62E9\u8868\u5355"}),e.extensionElements.values&&e.extensionElements.values.filter(n=>["camunda:TaskListener","camunda:ExecutionListener","netwisd:TaskListener","netwisd:ExecutionListener"].includes(n.$type)).forEach(n=>{(n.listenerId==="bizListener"||n.listenerId==="bizDelegate")&&(n.fields.every(i=>i.expression||i.string)||Jn({text:`\u6D41\u7A0B\u4E2D'${n.eventName}'\u4E8B\u4EF6\u672A\u9009\u62E9\u53C2\u6570`}))}),e.flowElements.forEach(n=>{if(n.$type==="bpmn:UserTask"){n.name||Jn({text:`${n.id}\u7528\u6237\u8282\u70B9\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A`});const i=n.extensionElements.values.find(r=>r.$type==="netwisd:HumanExps");n.id!=="firstNode"&&(!i||!i.values||!i.values.length)&&Jn({text:`${n.name}\u7528\u6237\u8282\u70B9\u81F3\u5C11\u542B\u6709\u4E00\u4E2A\u4EBA\u5458\u8868\u8FBE\u5F0F`})}else n.$type==="bpmn:ExclusiveGateway"?((!n.outgoing||n.outgoing.length<2)&&Jn({text:`${n.name}\u7F51\u5173\u81F3\u5C11\u542B\u6709\u4E24\u4E2A\u94FE\u63A5`}),n.outgoing&&n.outgoing.forEach(i=>{n.default?i.id!==n.default.id&&!i.conditionExpression&&Jn({text:`${n.name}\u7F51\u5173\u540E\u7684\u94FE\u63A5\u5FC5\u987B\u8BBE\u7F6E\u8868\u8FBE\u5F0F`}):i.conditionExpression||Jn({text:`${n.name}\u7F51\u5173\u540E\u7684\u94FE\u63A5\u5FC5\u987B\u8BBE\u7F6E\u8868\u8FBE\u5F0F`})})):n.$type==="bpmn:CallActivity"&&(n.name||Jn({text:`${n.id}\u5916\u94FE\u6D41\u7A0B\u8282\u70B9\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A`}),n.cmdChildLogProcdefId||Jn({text:`${n.name||n.id}\u5916\u94FE\u6D41\u7A0B\u8282\u70B9\u672A\u9009\u62E9\u6D41\u7A0B`}));n.extensionElements.values&&n.extensionElements.values.filter(i=>["camunda:TaskListener","camunda:ExecutionListener","netwisd:TaskListener","netwisd:ExecutionListener"].includes(i.$type)).forEach(i=>{(i.listenerId==="bizListener"||i.listenerId==="bizDelegate")&&(i.fields.every(r=>r.expression||r.string)||Jn({text:`${n.name||n.id} \u5143\u7D20\u4E2D'${i.eventName}'\u4E8B\u4EF6\u672A\u9009\u62E9\u53C2\u6570`}))})}),_c.value.length&&(cT.value=!0),!_c.value.length},mV={props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne},setup(){return{visible:cT,msg:_c}}};const vV={class:"v-msgs"};function gV(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-button"),c=D("n-modal");return fe(),Ge(c,{show:i.visible,"onUpdate:show":t[1]||(t[1]=u=>i.visible=u),preset:"dialog",style:{width:"500px"},"show-icon":!1,"mask-closable":!1,closable:!1},{header:C(()=>[_e(" \u6D41\u7A0B\u6A21\u578B\u9A8C\u8BC1 ")]),action:C(()=>[x(s,{type:"default",size:"small",onClick:t[0]||(t[0]=u=>i.visible=!1)},{default:C(()=>[_e(" \u5173\u95ED ")]),_:1})]),default:C(()=>[U("div",vV,[(fe(!0),lt(on,null,Od(i.msg,(u,d)=>(fe(),lt("div",{class:"v-msg",key:d},[x(o,{name:u.icon,size:16,style:{"margin-right":"5px"},color:"#e91e63"},null,8,["name"]),_e(pn(u.text),1)]))),128))])]),_:1},8,["show"])}const yV=Pe(mV,[["render",gV]]),_V={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NMessageProvider:mw,NNotificationProvider:vw,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NDivider:AN,NMenu:qN,NDropdown:KN,NConfigProvider:Kt,PLoading:fV,Verification:yV},props:{},setup(e){const t=RN(),n=MN();return j(!1),{fileOptions:[{label:"\u65B0\u5EFA\u6587\u4EF6",key:"createWebSite"},{type:"divider",key:"d2"},{label:"\u6253\u5F00\u6587\u4EF6",key:"openWebSite"},{label:"\u6253\u5F00\u6700\u8FD1\u6587\u4EF6",key:"openxWebSite"},{type:"divider",key:"d3"},{label:()=>["\u63D0\u4EA4\u4FDD\u5B58",te(we,{name:"icon-request",size:16,style:"margin-left: 3px",color:"#67c23a"})],key:"saveProc"},{label:"\u5BFC\u51FA\u6587\u4EF6JSON",key:"exportJson"},{label:"\u5BFC\u51FA\u5DE5\u7A0B",key:"exportCode",disabled:!0},{type:"divider",key:"d4"},{label:"\u9000\u51FA (\u56DE\u5230\u5217\u8868\u9875)",key:"exit"}],handleFile:async c=>{switch(c){case"saveProc":if(!hV())return;const u=await new Promise(d=>{yy.value==="createVersion"?n.warning({title:"\u63D0\u793A",content:"\u662F\u5426\u5E94\u7528\u5F53\u524D\u7248\u672C?",positiveText:"\u4F7F\u7528",negativeText:"\u4E0D\u4F7F\u7528",onPositiveClick:()=>{Mm(1).then(f=>d(f))},onNegativeClick:()=>{Mm().then(f=>d(f))}}):Mm().then(f=>d(f))});u?t.error(u.message):window.location.href="/web-wf/pages/procdef.html#/";break;case"exit":window.location.href="/web-wf/pages/procdef.html#/";break}},handleRun:c=>{},runOptions:[{label:"\u9884\u89C8",key:"preview"}],editOptions:[{label:"\u65B0\u5EFA\u9875\u9762",key:"createPage"},{label:"\u65B0\u5EFA\u8DEF\u7531",key:"createRoute"}],menuTheme:{Button:{heightSmall:"32px",fontSizeSmall:"14px",textColor:"#333",color:"#0000000",border:"#0000000",borderHover:"1px solid #0000000",borderPressed:"1px solid #0000000",textColorFocus:"#000",colorFocus:"#bbb",borderFocus:"1px solid #0000000"},Dropdown:{optionHeightSmall:"26px",peers:{Popover:{space:"0px",boxShadow:"1px 1px 8px 0px #000"}}}}}}};const xV=U("span",{class:"header-menu-btn"},"\u6D41\u7A0B(F)",-1),bV=U("span",{class:"header-menu-btn"},"\u7F16\u8F91(E)",-1),EV=U("span",{class:"header-menu-btn"},"\u6D4B\u8BD5(R)",-1);function wV(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-dropdown"),c=D("n-config-provider"),u=D("p-loading"),d=D("verification");return fe(),lt(on,null,[x(c,{"theme-overrides":i.menuTheme,class:"header-menu"},{default:C(()=>[x(o,{name:"icon-y-wfeditor",size:22,style:{"margin-right":"5px"}}),x(s,{size:"small",options:i.fileOptions,placement:"bottom-start",trigger:"click",width:200,onSelect:i.handleFile},{default:C(()=>[xV]),_:1},8,["options","onSelect"]),x(s,{size:"small",options:i.editOptions,placement:"bottom-start",trigger:"click",width:200},{default:C(()=>[bV]),_:1},8,["options"]),x(s,{size:"small",options:i.runOptions,placement:"bottom-start",trigger:"click",width:200,onSelect:i.handleRun},{default:C(()=>[EV]),_:1},8,["options","onSelect"])]),_:1},8,["theme-overrides"]),x(u),x(d)],64)}const SV=Pe(_V,[["render",wV]]),CV={components:{},props:{},setup(){return{dom:Pv}}};const TV={ref:"dom",class:"design-viewer",style:{}};function PV(e,t,n,i,r,a){return fe(),lt("div",TV,null,512)}const AV=Pe(CV,[["render",PV]]);var _y={exports:{}};function xy(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&xy(n)}),e}_y.exports=xy;_y.exports.default=xy;class zE{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function uT(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ya(e,...t){const n=Object.create(null);for(const i in e)n[i]=e[i];return t.forEach(function(i){for(const r in i)n[r]=i[r]}),n}const RV="</span>",FE=e=>!!e.scope||e.sublanguage&&e.language,MV=(e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((i,r)=>`${i}${"_".repeat(r+1)}`)].join(" ")}return`${t}${e}`};class DV{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=uT(t)}openNode(t){if(!FE(t))return;let n="";t.sublanguage?n=`language-${t.language}`:n=MV(t.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(t){!FE(t)||(this.buffer+=RV)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const HE=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class by{constructor(){this.rootNode=HE(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=HE({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(i=>this._walk(t,i)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{by._collapse(n)})))}}class OV extends by{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const i=t.root;i.sublanguage=!0,i.language=n,this.add(i)}toHTML(){return new DV(this,this.options).value()}finalize(){return!0}}function Nc(e){return e?typeof e=="string"?e:e.source:null}function pT(e){return ns("(?=",e,")")}function IV(e){return ns("(?:",e,")*")}function NV(e){return ns("(?:",e,")?")}function ns(...e){return e.map(n=>Nc(n)).join("")}function kV(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Ey(...e){return"("+(kV(e).capture?"":"?:")+e.map(i=>Nc(i)).join("|")+")"}function dT(e){return new RegExp(e.toString()+"|").exec("").length-1}function BV(e,t){const n=e&&e.exec(t);return n&&n.index===0}const LV=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function wy(e,{joinWith:t}){let n=0;return e.map(i=>{n+=1;const r=n;let a=Nc(i),o="";for(;a.length>0;){const s=LV.exec(a);if(!s){o+=a;break}o+=a.substring(0,s.index),a=a.substring(s.index+s[0].length),s[0][0]==="\\"&&s[1]?o+="\\"+String(Number(s[1])+r):(o+=s[0],s[0]==="("&&n++)}return o}).map(i=>`(${i})`).join(t)}const $V=/\b\B/,fT="[a-zA-Z]\\w*",Sy="[a-zA-Z_]\\w*",hT="\\b\\d+(\\.\\d+)?",mT="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",vT="\\b(0b[01]+)",zV="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",FV=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=ns(t,/.*\b/,e.binary,/\b.*/)),Ya({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},e)},kc={begin:"\\\\[\\s\\S]",relevance:0},HV={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[kc]},jV={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[kc]},VV={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Mf=function(e,t,n={}){const i=Ya({scope:"comment",begin:e,end:t,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=Ey("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:ns(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},UV=Mf("//","$"),WV=Mf("/\\*","\\*/"),GV=Mf("#","$"),qV={scope:"number",begin:hT,relevance:0},KV={scope:"number",begin:mT,relevance:0},YV={scope:"number",begin:vT,relevance:0},XV={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[kc,{begin:/\[/,end:/\]/,relevance:0,contains:[kc]}]}]},ZV={scope:"title",begin:fT,relevance:0},JV={scope:"title",begin:Sy,relevance:0},QV={begin:"\\.\\s*"+Sy,relevance:0},eU=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var jp=Object.freeze({__proto__:null,MATCH_NOTHING_RE:$V,IDENT_RE:fT,UNDERSCORE_IDENT_RE:Sy,NUMBER_RE:hT,C_NUMBER_RE:mT,BINARY_NUMBER_RE:vT,RE_STARTERS_RE:zV,SHEBANG:FV,BACKSLASH_ESCAPE:kc,APOS_STRING_MODE:HV,QUOTE_STRING_MODE:jV,PHRASAL_WORDS_MODE:VV,COMMENT:Mf,C_LINE_COMMENT_MODE:UV,C_BLOCK_COMMENT_MODE:WV,HASH_COMMENT_MODE:GV,NUMBER_MODE:qV,C_NUMBER_MODE:KV,BINARY_NUMBER_MODE:YV,REGEXP_MODE:XV,TITLE_MODE:ZV,UNDERSCORE_TITLE_MODE:JV,METHOD_GUARD:QV,END_SAME_AS_BEGIN:eU});function tU(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function nU(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function iU(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=tU,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function rU(e,t){!Array.isArray(e.illegal)||(e.illegal=Ey(...e.illegal))}function aU(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function oU(e,t){e.relevance===void 0&&(e.relevance=1)}const sU=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(i=>{delete e[i]}),e.keywords=n.keywords,e.begin=ns(n.beforeMatch,pT(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},lU=["of","and","for","in","not","or","if","then","parent","list","value"],cU="keyword";function gT(e,t,n=cU){const i=Object.create(null);return typeof e=="string"?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach(function(a){Object.assign(i,gT(e[a],t,a))}),i;function r(a,o){t&&(o=o.map(s=>s.toLowerCase())),o.forEach(function(s){const c=s.split("|");i[c[0]]=[a,uU(c[0],c[1])]})}}function uU(e,t){return t?Number(t):pU(e)?0:1}function pU(e){return lU.includes(e.toLowerCase())}const jE={},Ho=e=>{console.error(e)},VE=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Ds=(e,t)=>{jE[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),jE[`${e}/${t}`]=!0)},Pd=new Error;function yT(e,t,{key:n}){let i=0;const r=e[n],a={},o={};for(let s=1;s<=t.length;s++)o[s+i]=r[s],a[s+i]=!0,i+=dT(t[s-1]);e[n]=o,e[n]._emit=a,e[n]._multi=!0}function dU(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Ho("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Pd;if(typeof e.beginScope!="object"||e.beginScope===null)throw Ho("beginScope must be object"),Pd;yT(e,e.begin,{key:"beginScope"}),e.begin=wy(e.begin,{joinWith:""})}}function fU(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Ho("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Pd;if(typeof e.endScope!="object"||e.endScope===null)throw Ho("endScope must be object"),Pd;yT(e,e.end,{key:"endScope"}),e.end=wy(e.end,{joinWith:""})}}function hU(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function mU(e){hU(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),dU(e),fU(e)}function vU(e){function t(o,s){return new RegExp(Nc(o),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(s?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(s,c){c.position=this.position++,this.matchIndexes[this.matchAt]=c,this.regexes.push([c,s]),this.matchAt+=dT(s)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const s=this.regexes.map(c=>c[1]);this.matcherRe=t(wy(s,{joinWith:"|"}),!0),this.lastIndex=0}exec(s){this.matcherRe.lastIndex=this.lastIndex;const c=this.matcherRe.exec(s);if(!c)return null;const u=c.findIndex((f,m)=>m>0&&f!==void 0),d=this.matchIndexes[u];return c.splice(0,u),Object.assign(c,d)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(s){if(this.multiRegexes[s])return this.multiRegexes[s];const c=new n;return this.rules.slice(s).forEach(([u,d])=>c.addRule(u,d)),c.compile(),this.multiRegexes[s]=c,c}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(s,c){this.rules.push([s,c]),c.type==="begin"&&this.count++}exec(s){const c=this.getMatcher(this.regexIndex);c.lastIndex=this.lastIndex;let u=c.exec(s);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,u=d.exec(s)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function r(o){const s=new i;return o.contains.forEach(c=>s.addRule(c.begin,{rule:c,type:"begin"})),o.terminatorEnd&&s.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&s.addRule(o.illegal,{type:"illegal"}),s}function a(o,s){const c=o;if(o.isCompiled)return c;[nU,aU,mU,sU].forEach(d=>d(o,s)),e.compilerExtensions.forEach(d=>d(o,s)),o.__beforeBegin=null,[iU,rU,oU].forEach(d=>d(o,s)),o.isCompiled=!0;let u=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),u=o.keywords.$pattern,delete o.keywords.$pattern),u=u||/\w+/,o.keywords&&(o.keywords=gT(o.keywords,e.case_insensitive)),c.keywordPatternRe=t(u,!0),s&&(o.begin||(o.begin=/\B|\b/),c.beginRe=t(c.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(c.endRe=t(c.end)),c.terminatorEnd=Nc(c.end)||"",o.endsWithParent&&s.terminatorEnd&&(c.terminatorEnd+=(o.end?"|":"")+s.terminatorEnd)),o.illegal&&(c.illegalRe=t(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(d){return gU(d==="self"?o:d)})),o.contains.forEach(function(d){a(d,c)}),o.starts&&a(o.starts,s),c.matcher=r(c),c}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ya(e.classNameAliases||{}),a(e)}function _T(e){return e?e.endsWithParent||_T(e.starts):!1}function gU(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Ya(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:_T(e)?Ya(e,{starts:e.starts?Ya(e.starts):null}):Object.isFrozen(e)?Ya(e):e}var yU="11.6.0";class _U extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const Dm=uT,UE=Ya,WE=Symbol("nomatch"),xU=7,bU=function(e){const t=Object.create(null),n=Object.create(null),i=[];let r=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let s={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:OV};function c(re){return s.noHighlightRe.test(re)}function u(re){let ce=re.className+" ";ce+=re.parentNode?re.parentNode.className:"";const B=s.languageDetectRe.exec(ce);if(B){const b=W(B[1]);return b||(VE(a.replace("{}",B[1])),VE("Falling back to no-highlight mode for this block.",re)),b?B[1]:"no-highlight"}return ce.split(/\s+/).find(b=>c(b)||W(b))}function d(re,ce,B){let b="",z="";typeof ce=="object"?(b=re,B=ce.ignoreIllegals,z=ce.language):(Ds("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ds("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),z=re,b=ce),B===void 0&&(B=!0);const K={code:b,language:z};ke("before:highlight",K);const se=K.result?K.result:f(K.language,K.code,B);return se.code=K.code,ke("after:highlight",se),se}function f(re,ce,B,b){const z=Object.create(null);function K(de,We){return de.keywords[We]}function se(){if(!Ae.keywords){Mt.addText(Me);return}let de=0;Ae.keywordPatternRe.lastIndex=0;let We=Ae.keywordPatternRe.exec(Me),it="";for(;We;){it+=Me.substring(de,We.index);const _t=ot.case_insensitive?We[0].toLowerCase():We[0],rn=K(Ae,_t);if(rn){const[Kn,Sr]=rn;if(Mt.addText(it),it="",z[_t]=(z[_t]||0)+1,z[_t]<=xU&&(Tt+=Sr),Kn.startsWith("_"))it+=We[0];else{const ea=ot.classNameAliases[Kn]||Kn;Mt.addKeyword(We[0],ea)}}else it+=We[0];de=Ae.keywordPatternRe.lastIndex,We=Ae.keywordPatternRe.exec(Me)}it+=Me.substring(de),Mt.addText(it)}function Z(){if(Me==="")return;let de=null;if(typeof Ae.subLanguage=="string"){if(!t[Ae.subLanguage]){Mt.addText(Me);return}de=f(Ae.subLanguage,Me,!0,Bt[Ae.subLanguage]),Bt[Ae.subLanguage]=de._top}else de=v(Me,Ae.subLanguage.length?Ae.subLanguage:null);Ae.relevance>0&&(Tt+=de.relevance),Mt.addSublanguage(de._emitter,de.language)}function ee(){Ae.subLanguage!=null?Z():se(),Me=""}function me(de,We){let it=1;const _t=We.length-1;for(;it<=_t;){if(!de._emit[it]){it++;continue}const rn=ot.classNameAliases[de[it]]||de[it],Kn=We[it];rn?Mt.addKeyword(Kn,rn):(Me=Kn,se(),Me=""),it++}}function qe(de,We){return de.scope&&typeof de.scope=="string"&&Mt.openNode(ot.classNameAliases[de.scope]||de.scope),de.beginScope&&(de.beginScope._wrap?(Mt.addKeyword(Me,ot.classNameAliases[de.beginScope._wrap]||de.beginScope._wrap),Me=""):de.beginScope._multi&&(me(de.beginScope,We),Me="")),Ae=Object.create(de,{parent:{value:Ae}}),Ae}function Je(de,We,it){let _t=BV(de.endRe,it);if(_t){if(de["on:end"]){const rn=new zE(de);de["on:end"](We,rn),rn.isMatchIgnored&&(_t=!1)}if(_t){for(;de.endsParent&&de.parent;)de=de.parent;return de}}if(de.endsWithParent)return Je(de.parent,We,it)}function St(de){return Ae.matcher.regexIndex===0?(Me+=de[0],1):(Be=!0,0)}function tt(de){const We=de[0],it=de.rule,_t=new zE(it),rn=[it.__beforeBegin,it["on:begin"]];for(const Kn of rn)if(!!Kn&&(Kn(de,_t),_t.isMatchIgnored))return St(We);return it.skip?Me+=We:(it.excludeBegin&&(Me+=We),ee(),!it.returnBegin&&!it.excludeBegin&&(Me=We)),qe(it,de),it.returnBegin?0:We.length}function ut(de){const We=de[0],it=ce.substring(de.index),_t=Je(Ae,de,it);if(!_t)return WE;const rn=Ae;Ae.endScope&&Ae.endScope._wrap?(ee(),Mt.addKeyword(We,Ae.endScope._wrap)):Ae.endScope&&Ae.endScope._multi?(ee(),me(Ae.endScope,de)):rn.skip?Me+=We:(rn.returnEnd||rn.excludeEnd||(Me+=We),ee(),rn.excludeEnd&&(Me=We));do Ae.scope&&Mt.closeNode(),!Ae.skip&&!Ae.subLanguage&&(Tt+=Ae.relevance),Ae=Ae.parent;while(Ae!==_t.parent);return _t.starts&&qe(_t.starts,de),rn.returnEnd?0:We.length}function Xt(){const de=[];for(let We=Ae;We!==ot;We=We.parent)We.scope&&de.unshift(We.scope);de.forEach(We=>Mt.openNode(We))}let Ht={};function wt(de,We){const it=We&&We[0];if(Me+=de,it==null)return ee(),0;if(Ht.type==="begin"&&We.type==="end"&&Ht.index===We.index&&it===""){if(Me+=ce.slice(We.index,We.index+1),!r){const _t=new Error(`0 width match regex (${re})`);throw _t.languageName=re,_t.badRule=Ht.rule,_t}return 1}if(Ht=We,We.type==="begin")return tt(We);if(We.type==="illegal"&&!B){const _t=new Error('Illegal lexeme "'+it+'" for mode "'+(Ae.scope||"<unnamed>")+'"');throw _t.mode=Ae,_t}else if(We.type==="end"){const _t=ut(We);if(_t!==WE)return _t}if(We.type==="illegal"&&it==="")return 1;if(ln>1e5&&ln>We.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Me+=it,it.length}const ot=W(re);if(!ot)throw Ho(a.replace("{}",re)),new Error('Unknown language: "'+re+'"');const nn=vU(ot);let gn="",Ae=b||nn;const Bt={},Mt=new s.__emitter(s);Xt();let Me="",Tt=0,Dn=0,ln=0,Be=!1;try{for(Ae.matcher.considerAll();;){ln++,Be?Be=!1:Ae.matcher.considerAll(),Ae.matcher.lastIndex=Dn;const de=Ae.matcher.exec(ce);if(!de)break;const We=ce.substring(Dn,de.index),it=wt(We,de);Dn=de.index+it}return wt(ce.substring(Dn)),Mt.closeAllNodes(),Mt.finalize(),gn=Mt.toHTML(),{language:re,value:gn,relevance:Tt,illegal:!1,_emitter:Mt,_top:Ae}}catch(de){if(de.message&&de.message.includes("Illegal"))return{language:re,value:Dm(ce),illegal:!0,relevance:0,_illegalBy:{message:de.message,index:Dn,context:ce.slice(Dn-100,Dn+100),mode:de.mode,resultSoFar:gn},_emitter:Mt};if(r)return{language:re,value:Dm(ce),illegal:!1,relevance:0,errorRaised:de,_emitter:Mt,_top:Ae};throw de}}function m(re){const ce={value:Dm(re),illegal:!1,relevance:0,_top:o,_emitter:new s.__emitter(s)};return ce._emitter.addText(re),ce}function v(re,ce){ce=ce||s.languages||Object.keys(t);const B=m(re),b=ce.filter(W).filter(pe).map(ee=>f(ee,re,!1));b.unshift(B);const z=b.sort((ee,me)=>{if(ee.relevance!==me.relevance)return me.relevance-ee.relevance;if(ee.language&&me.language){if(W(ee.language).supersetOf===me.language)return 1;if(W(me.language).supersetOf===ee.language)return-1}return 0}),[K,se]=z,Z=K;return Z.secondBest=se,Z}function g(re,ce,B){const b=ce&&n[ce]||B;re.classList.add("hljs"),re.classList.add(`language-${b}`)}function y(re){let ce=null;const B=u(re);if(c(B))return;if(ke("before:highlightElement",{el:re,language:B}),re.children.length>0&&(s.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(re)),s.throwUnescapedHTML))throw new _U("One of your code blocks includes unescaped HTML.",re.innerHTML);ce=re;const b=ce.textContent,z=B?d(b,{language:B,ignoreIllegals:!0}):v(b);re.innerHTML=z.value,g(re,B,z.language),re.result={language:z.language,re:z.relevance,relevance:z.relevance},z.secondBest&&(re.secondBest={language:z.secondBest.language,relevance:z.secondBest.relevance}),ke("after:highlightElement",{el:re,result:z,text:b})}function E(re){s=UE(s,re)}const N=()=>{w(),Ds("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function O(){w(),Ds("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let T=!1;function w(){if(document.readyState==="loading"){T=!0;return}document.querySelectorAll(s.cssSelector).forEach(y)}function R(){T&&w()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function L(re,ce){let B=null;try{B=ce(e)}catch(b){if(Ho("Language definition for '{}' could not be registered.".replace("{}",re)),r)Ho(b);else throw b;B=o}B.name||(B.name=re),t[re]=B,B.rawDefinition=ce.bind(null,e),B.aliases&&Q(B.aliases,{languageName:re})}function H(re){delete t[re];for(const ce of Object.keys(n))n[ce]===re&&delete n[ce]}function $(){return Object.keys(t)}function W(re){return re=(re||"").toLowerCase(),t[re]||t[n[re]]}function Q(re,{languageName:ce}){typeof re=="string"&&(re=[re]),re.forEach(B=>{n[B.toLowerCase()]=ce})}function pe(re){const ce=W(re);return ce&&!ce.disableAutodetect}function oe(re){re["before:highlightBlock"]&&!re["before:highlightElement"]&&(re["before:highlightElement"]=ce=>{re["before:highlightBlock"](Object.assign({block:ce.el},ce))}),re["after:highlightBlock"]&&!re["after:highlightElement"]&&(re["after:highlightElement"]=ce=>{re["after:highlightBlock"](Object.assign({block:ce.el},ce))})}function be(re){oe(re),i.push(re)}function ke(re,ce){const B=re;i.forEach(function(b){b[B]&&b[B](ce)})}function Yt(re){return Ds("10.7.0","highlightBlock will be removed entirely in v12.0"),Ds("10.7.0","Please use highlightElement now."),y(re)}Object.assign(e,{highlight:d,highlightAuto:v,highlightAll:w,highlightElement:y,highlightBlock:Yt,configure:E,initHighlighting:N,initHighlightingOnLoad:O,registerLanguage:L,unregisterLanguage:H,listLanguages:$,getLanguage:W,registerAliases:Q,autoDetection:pe,inherit:UE,addPlugin:be}),e.debugMode=function(){r=!1},e.safeMode=function(){r=!0},e.versionString=yU,e.regex={concat:ns,lookahead:pT,either:Ey,optional:NV,anyNumberOfTimes:IV};for(const re in jp)typeof jp[re]=="object"&&_y.exports(jp[re]);return Object.assign(e,jp),e};var Bc=bU({}),EU=Bc;Bc.HighlightJS=Bc;Bc.default=Bc;const xT=EU;xT.configure({useBR:!0});const wU={components:{NCode:GN},props:{},setup(e){const t=j("");return oT().then(n=>{t.value=n.xml}),{code:t,hljs:xT}}};const SU={style:{overflow:"scroll",height:"100%",width:"100%"}};function CU(e,t,n,i,r,a){const o=D("n-code");return fe(),lt("div",SU,[x(o,{language:"xml",code:i.code,hljs:i.hljs},null,8,["code","hljs"])])}const TU=Pe(wU,[["render",CU]]),PU={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NForm:Bn,NFormItem:Ln,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSelect:$t},props:{},setup(e,t){const n=j({eventType:"",listenerName:"",listenerId:"",procdefTypeName:""}),i=j(!1),r=j(!1),a=j(null),o=j([]);j([]);const s=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{border:!0,pageSize:20,pageSizes:[10,20,50],perfect:!0},proxyConfig:{props:{total:"total"},ajax:{query:({page:f})=>BB({...n.value,selectMust:0,nodeEventType:d.value.join(","),page:{current:f.currentPage,size:f.pageSize}}).then(async m=>({result:m.records,total:m.total}))}},columns:[{title:"\u6D41\u7A0B\u5206\u7C7B",field:"procdefTypeName",width:80},{field:"listenerName",title:"\u4E8B\u4EF6\u540D\u79F0",showOverflow:"title"},{field:"listenerId",title:"\u4E8B\u4EF6ID",showOverflow:"title"},{field:"eventType",title:"\u4E8B\u4EF6\u5206\u7C7B",showOverflow:!0,width:60,slots:{default:({row:f})=>f.eventType?"\u6267\u884C\u4E8B\u4EF6":"\u4EFB\u52A1\u4E8B\u4EF6"}},{field:"nodeEventType",title:"\u8282\u70B9\u7C7B\u578B",showOverflow:!0,slots:{default:({row:f})=>GH(f.nodeEventType)}},{field:"defaultTrigVal",title:"\u9ED8\u8BA4\u5468\u671F",showOverflow:!0,slots:{default:({row:f})=>FH(f.defaultTrigVal)}},{field:"startEnable",title:"\u64CD\u4F5C",width:70,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:f})=>{const m=o.value.indexOf(f);return m>=0?[te(ye,{text:!0,size:"small",type:"success",onClick:()=>{o.value.splice(m,1)},style:"margin-right: 5px;"},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{text:!0,size:"small",color:"#1890ff",onClick:()=>{t.emit("update:callback",f)},style:"margin-right: 5px;"},{default:()=>"\u6DFB\u52A0"})]}}}]}),c=()=>{t.emit("update:callback",o.value),r.value=!1},u=()=>{},d=j([]);return{searchForm:n,props:e,isLoading:i,gridEventRef:a,gridOption:s,selectedEvents:o,visible:r,show(f){d.value=f,r.value=!0},handleModalComplete:c,handleClearForm:u}}};const AU=e=>(mn("data-v-df844d94"),e=e(),vn(),e),RU=AU(()=>U("div",null," \u9009\u62E9\u4E8B\u4EF6 ",-1)),MU={class:"nw-modal-action"};function DU(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-input"),c=D("n-form-item"),u=D("n-select"),d=D("n-button"),f=D("n-form"),m=D("n-layout-header"),v=D("vxe-grid"),g=D("n-layout-content"),y=D("n-layout"),E=D("n-spin"),N=D("n-modal");return fe(),Ge(N,{class:"nw-modal",show:i.visible,"onUpdate:show":t[7]||(t[7]=O=>i.visible=O),preset:"dialog",style:{width:"900px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[x(o,{name:"icon-event",size:22,color:"rgb(103, 194, 58)"})]),header:C(()=>[RU]),default:C(()=>[x(E,{show:i.isLoading},{default:C(()=>[x(y,{class:"nw-modal-layout"},{default:C(()=>[x(m,{style:{padding:"0 5px"}},{default:C(()=>[x(f,{class:"header-form",inline:"",ref:"formRef","label-placement":"left","label-width":60,size:"small",style:{padding:"5px 0"}},{default:C(()=>[x(c,{label:"\u6D41\u7A0B\u5206\u7C7B",path:"inputValue","show-feedback":!1},{default:C(()=>[x(s,{placeholder:"",value:i.searchForm.procdefTypeName,"onUpdate:value":t[0]||(t[0]=O=>i.searchForm.procdefTypeName=O)},null,8,["value"])]),_:1}),x(c,{label:"\u4E8B\u4EF6\u5206\u7C7B",path:"inputValue","show-feedback":!1},{default:C(()=>[x(u,{value:i.searchForm.eventType,"onUpdate:value":t[1]||(t[1]=O=>i.searchForm.eventType=O),style:{width:"120px"},placeholder:"",options:[{label:"\u5168\u90E8",value:""},{label:"\u4EFB\u52A1\u4E8B\u4EF6",value:0},{label:"\u6267\u884C\u4E8B\u4EF6",value:1}]},null,8,["value"])]),_:1}),x(c,{label:"\u4E8B\u4EF6\u540D\u79F0",path:"inputValue","show-feedback":!1},{default:C(()=>[x(s,{placeholder:"",value:i.searchForm.listenerName,"onUpdate:value":t[2]||(t[2]=O=>i.searchForm.listenerName=O)},null,8,["value"])]),_:1}),x(c,{label:"\u4E8B\u4EF6ID",path:"inputValue","show-feedback":!1},{default:C(()=>[x(s,{placeholder:"",value:i.searchForm.listenerId,"onUpdate:value":t[3]||(t[3]=O=>i.searchForm.listenerId=O)},null,8,["value"])]),_:1}),x(c,{label:"",path:"inputValue","show-feedback":!1},{default:C(()=>[x(d,{type:"warning",size:"small",style:{"margin-right":"5px"},onClick:t[4]||(t[4]=()=>{i.searchForm={eventType:"",listenerName:"",listenerId:""},i.gridEventRef.commitProxy("query")})},{default:C(()=>[_e("\u91CD\u7F6E")]),_:1}),x(d,{type:"info",size:"small",style:{"margin-right":"15px"},onClick:t[5]||(t[5]=()=>{i.gridEventRef.commitProxy("query")})},{default:C(()=>[_e("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1},512)]),_:1}),x(g,null,{default:C(()=>[x(v,Et({class:"nw-vxe-grid",ref:"gridEventRef"},i.gridOption),null,16)]),_:1})]),_:1}),U("div",MU,[x(d,{size:"small",onClick:t[6]||(t[6]=O=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["show"])}const OU=Pe(PU,[["render",DU],["__scopeId","data-v-df844d94"]]),IU={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NForm:Bn,NFormItem:Ln,NInputGroup:at,NInput:Oe,NSpin:Ne,NSelect:$t,NRadio:ci,NRadioGroup:li,NModal:je,NButton:ye,NwIcon:we,EventModal:OU,NwOpenapiPick:Ew},props:{size:{type:String,default:"small"},value:{type:Object,default:()=>({})},element:{type:Object,defalt:()=>({})}},setup(e){const t=j(null),n=j(null),i=j(null),r=sn(()=>od(xe.value,["camunda:ExecutionListener","netwisd:ExecutionListener","camunda:TaskListener","netwisd:TaskListener"]).filter(y=>+y.order>=0).sort((y,E)=>y.order-E.order)),a=j(null),o=j([]),s=j(!0),c=j({"cell-click":({row:y})=>{a.value=y,o.value=y.fields,y.eventSelectMust==="0"?s.value=!0:s.value=!1}}),u=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},rowClassName:({row:y})=>a.value===y?"event-active":"",data:r,columns:[{title:"\u5DF2\u9009\u4E8B\u4EF6",field:"formNameCh",slots:{default:({row:y})=>[te("div",{class:"event-row"},te("div",{class:"event-row-left"},y.$type.split(":")[1]==="ExecutionListener"?te("div",{class:"event-row-left-icon",style:"background: #2080f0;",title:"\u4EFB\u52A1\u4E8B\u4EF6"},"E"):te("div",{class:"event-row-left-icon",style:"background: #18a058;",title:"\u6267\u884C\u4E8B\u4EF6"},"T"),y.eventName),te("div",{class:"event-row-right"},te("div",{class:"action-order"},y.order!=="0"?te(we,{class:"action-order-up",name:"icon-n-n-up",size:10,onClick:E=>{E.stopPropagation(),v(y)}}):"",y.order!==f()?te(we,{class:"action-order-down",name:"icon-n-n-down",size:10,onClick:E=>{E.stopPropagation(),g(y)}}):""),te("div",{class:"action-remove"},y.eventSelectMust==="0"?te(ye,{text:!0,type:"error",onClick:E=>{E.stopPropagation(),console.log("====row===",y);const N=xe.value.extensionElements.values;N.splice(N.indexOf(y),1),a.value===y&&(a.value=null),m()},title:"\u5220\u9664"},{default:()=>te(we,{name:"icon-n-y-close",size:10})}):"")))]}}]});j(""),j([]);const d=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,resizable:!0,border:!0,tableMenu:{},data:o,columns:[{title:"",width:25,className:"input-cell",slots:{default:({row:y})=>[te("div",{title:`${y.paramName} (${y.name})`,style:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"},y.expression===void 0?te(we,{name:"icon-n-y-abc",size:20}):te(we,{name:"icon-n-y-expression",size:18}))]}},{title:"\u53C2\u6570\u540D (ID) ",width:130,field:"paramName",slots:{default:({row:y})=>[te("div",{title:`${y.paramName} (${y.name})`,style:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"},y.paramName," (",y.name,")")]}},{title:"\u9ED8\u8BA4\u503C",field:"name",width:200,className:"input-cell",slots:{default:({row:y})=>{const E=y.expression===void 0?"string":"expression";return y[E]}}}]}),f=()=>{const y=B2(od(xe.value,["camunda:ExecutionListener","netwisd:ExecutionListener","camunda:TaskListener","netwisd:TaskListener"]),E=>E.order);return y<0?-1:y},m=()=>{r.value.forEach((y,E)=>{y.order=`${E}`})},v=y=>{const E=`${+y.order-1}`,N=r.value.find(O=>O.order===E);N.order=y.order,y.order=E},g=y=>{const E=`${+y.order+1}`,N=r.value.find(O=>O.order===E);N.order=y.order,y.order=E};return{props:e,eventModalRef:t,gridSelectedRef:n,gridSelectedOption:u,gridSelectedEvent:c,gridParamterRef:i,gridParamterOption:d,isDefaultEvent:s,InterfacesCallback(y){let E=o.value.find(T=>T.name==="serviceId");E&&(E.expression===void 0?E.string=y.sysCode:E.expression=y.sysCode);let N=o.value.find(T=>T.name==="bizTag");const O=y.mthPath.split("/").pop();N&&(N.expression===void 0?N.string=O:N.expression=O),a.value.openApiPath=y.mthPath,a.value.openApiMthDes=y.mthDescription},handleModalShow(){console.log("====events=======",r),t.value.show($H(xe.value))},handleModalComplete(y){const E=xe.value.extensionElements.values;E.push(XC(y,`${1+ +f()}`)),a.value&&(a.value=E.find(N=>N.order===a.value.order))},handleClear(){},currentEvent:a,getEnumerateEvent:HH,updateEvent(y){const E=["revoke","rejected","before_complete","suspend_process","end_process","activate_process","delete_process"],N=E.includes(y),O=E.includes(a.value.event);if(a.value.event=y,console.log("currentEvent.value==",a.value),N^O){console.log(xe.value.extensionElements.values,a.value);let T=-1;xe.value.extensionElements.values.find((w,R)=>{const L=w.order===a.value.order;return L&&(T=R),L}),a.value=xe.value.extensionElements.values[T]=zH(a.value)}}}}};const NU={style:{padding:"5px"}},kU={style:{display:"flex","justify-content":"space-between",padding:"5px 0"}},BU=U("div",{style:{display:"flex","align-items":"center","font-size":"12px"}},[U("div",{class:"event-row-left-icon",style:{background:"#2080f0"}},"E"),_e(" \u6267\u884C\u4E8B\u4EF6 \xA0 \xA0 "),U("div",{class:"event-row-left-icon",style:{background:"#18a058"}},"T"),_e(" \u4EFB\u52A1\u4E8B\u4EF6 ")],-1),LU={style:{height:"206px","border-bottom":"1px solid #ccc",overflow:"hidden"}},$U={key:1,style:{height:"120px"}},zU={key:0,style:{display:"flex","justify-content":"end","align-items":"center",margin:"0 10px 5px 0"}},FU=U("div",null,null,-1);function HU(e,t,n,i,r,a){const o=D("n-button"),s=D("vxe-grid"),c=D("n-input"),u=D("n-form-item"),d=D("n-select"),f=D("n-radio"),m=D("n-radio-group"),v=D("n-form"),g=D("NwOpenapiPick"),y=D("event-modal");return fe(),lt(on,null,[U("div",NU,[U("div",kU,[x(o,{type:"info",size:"small",onClick:i.handleModalShow},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["onClick"]),BU]),U("div",LU,[x(s,Et({class:"nw-vxe-grid",ref:"gridSelectedRef"},i.gridSelectedOption,$c(i.gridSelectedEvent),{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),i.currentEvent?(fe(),Ge(v,{key:0,model:i.currentEvent,ref:"formRef","label-placement":"top","label-width":60,size:"small"},{default:C(()=>[x(u,{label:"\u4E8B\u4EF6\u540D\u79F0",path:"eventName"},{default:C(()=>[x(c,{placeholder:"",disabled:"",value:i.currentEvent.eventName},null,8,["value"])]),_:1}),x(u,{label:"\u4E8B\u4EF6\u5206\u7C7B",path:"inputValue"},{default:C(()=>[x(c,{placeholder:"",disabled:"",value:i.currentEvent.$type},null,8,["value"])]),_:1}),x(u,{label:"\u76D1\u542CID",path:"listenerId"},{default:C(()=>[x(c,{placeholder:"",disabled:"",value:i.currentEvent.listenerId},null,8,["value"])]),_:1}),x(u,{label:"\u81EA\u5B9A\u4E49RestUrl",path:"listenerImpl"},{default:C(()=>[x(c,{placeholder:"",disabled:"",value:i.currentEvent.listenerImpl},null,8,["value"])]),_:1}),x(u,{label:"\u4E8B\u4EF6\u7C7B\u578B",path:"listenerImpl"},{default:C(()=>[x(d,{disabled:i.currentEvent.eventSelectMust==="1",placeholder:"",value:i.currentEvent.event,options:i.getEnumerateEvent(i.currentEvent.$type),"onUpdate:value":i.updateEvent},null,8,["disabled","value","options","onUpdate:value"])]),_:1}),i.currentEvent.$type.split(":")[1]==="TaskListener"?(fe(),Ge(u,{key:0,label:"\u5931\u8D25\u662F\u5426\u56DE\u6EDA",path:"eventSubmitSign"},{default:C(()=>[x(m,{disabled:i.currentEvent.eventSelectMust==="1",value:i.currentEvent.eventSubmitSign,"onUpdate:value":t[0]||(t[0]=E=>i.currentEvent.eventSubmitSign=E)},{default:C(()=>[x(f,{value:"1"},{default:C(()=>[_e(" \u662F ")]),_:1}),x(f,{value:"0"},{default:C(()=>[_e(" \u5426 ")]),_:1})]),_:1},8,["disabled","value"])]),_:1})):Cn("",!0)]),_:1},8,["model"])):Cn("",!0),i.currentEvent?(fe(),lt("div",$U,[i.isDefaultEvent?(fe(),lt("div",zU,[U("div",null,[x(g,{size:"small",label:"\u9009\u62E9\u63A5\u53E3",onCallback:i.InterfacesCallback,bizType:i.currentEvent.$type.split(":")[1]==="TaskListener"?"wfEventTaskApi":"wfEventExeApi"},null,8,["onCallback","bizType"])])])):Cn("",!0),x(s,Et({class:"nw-vxe-grid",ref:"gridParamterRef"},i.gridParamterOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])):Cn("",!0)]),FU,x(y,{ref:"eventModalRef","onUpdate:callback":i.handleModalComplete},null,8,["onUpdate:callback"])],64)}const Da=Pe(IU,[["render",HU]]),jU={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{},setup(e,t){const n=j(!1),i=j(!1),r=j(null),a=j([]),o=async d=>jB(d).then(f=>f);j([]);const s=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!1,tableMenu:{},pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:d})=>HB({page:{current:d.currentPage,size:d.pageSize}}).then(async f=>({result:f.records,total:f.total}))}},expandConfig:{reserve:!0,lazy:!0,showIcon:!1,loadMethod({row:d}){return d._isLoading=!0,o(d.camundaProcdefKey).then(f=>{d._isLoading=!1,d._verisonList=f})}},columns:[{title:"\u6D41\u7A0B\u5206\u7C7B",minWidth:100,field:"procdefTypeName"},{title:"\u6D41\u7A0B\u540D\u79F0",showOverflow:"title",minWidth:200,type:"expand",slots:{default:({row:d})=>`${d.procdefName}`,content:({row:d})=>te("div",{class:"process-version-list"},d._verisonList.length?d._verisonList.map(f=>te("div",{class:"version-item",onClick:()=>{c(f)}},te("div",{class:"version-item-icon"},te(we,{size:40,name:f.icon}),te("div",{class:"version-item-icon-v"},"v",f.procdefVersion)),te("div",{class:"version-item-text"},te("div",null,f.procdefName),te("div",null,te(Ov,{type:"success",size:"small",round:!0},{default:()=>f.versionTag})),te(ye,{type:"info",size:"small"},{default:()=>"\u9009\u62E9"})))):te("div",null,"\u6CA1\u6709\u5176\u4ED6\u7248\u672C"))}},{field:"camundaProcdefKey",title:"\u6D41\u7A0BKey",minWidth:150},{field:"procdefVersion",title:"\u7248\u672C",width:50,slots:{default:({row:d,rowIndex:f})=>`v${d.procdefVersion}`}},{field:"versionTag",title:"\u7248\u672CTag",width:80},{title:"\u64CD\u4F5C",width:180,slots:{default:({row:d,rowIndex:f,$table:m,...v},...g)=>[te(ye,{loading:d._isLoading,style:"margin-right: 5px;",type:"warning",size:"small",onClick:()=>{console.log(d,v,g),m.setRowExpand(d,!m.isExpandByRow(d))}},{default:()=>"\u5176\u4ED6\u7248\u672C"}),te(ye,{type:"info",size:"small",onClick:()=>{c(d)}},{default:()=>"\u9009\u62E9"})]}}]}),c=d=>{t.emit("update:callback",d),i.value=!1};return{props:e,isLoading:n,gridProcessRef:r,gridOption:s,selectedEvents:a,visible:i,show(d=[]){i.value=!0,n.value=!0,YC().then(()=>{n.value=!1,a.value=Ic.value.filter(f=>d.includes(f.id))})},handleModalComplete:c,handleClearForm:()=>{}}}};const VU=U("div",null," \u9009\u62E9\u6D41\u7A0B ",-1),UU={class:"nw-modal-action"};function WU(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-spin"),d=D("n-modal");return fe(),Ge(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[x(o,{name:"icon-y-form",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[VU]),default:C(()=>[x(u,{show:i.isLoading},{default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridProcessRef"},i.gridOption),null,16),U("div",UU,[x(c,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["show"])}const GU=Pe(jU,[["render",WU]]),qU={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,ProcessModal:GU,NTag:Ov},props:{childProcdefName:{type:String,default:""},calledElementVersion:{type:String,default:""},calledElement:{type:String,default:""}},setup(e,t){const n=j(!1),i=j(null);return{props:e,visible:n,processModalRef:i,show(){i.value.show(e.value)},callback(r){console.log("==callback==",r),t.emit("update:calledElement",r.camundaProcdefKey),t.emit("update:calledElementVersion",r.procdefVersion),t.emit("update:cmdChildLogProcdefId",r.camundaProcdefId),t.emit("update:ctmChildLogProcdefId",r.id),t.emit("update:childProcdefName",r.procdefName)}}}};const KU={class:"process-overview",style:{border:"1px solid #ccc"}},YU={class:"process-overview-header"},XU={class:"version"},ZU={key:1},JU=U("div",{class:"process-overview-body"},[U("div",{class:"xtext"},"\u8FD9\u91CC\u5E94\u8BE5\u662F\u7F29\u7565\u56FE")],-1);function QU(e,t,n,i,r,a){const o=D("process-modal");return fe(),lt(on,null,[U("div",KU,[U("div",YU,[i.props.calledElement?(fe(),lt(on,{key:0},[U("div",null,pn(i.props.childProcdefName),1),U("div",XU,"v"+pn(i.props.calledElementVersion),1)],64)):Cn("",!0),i.props.calledElement?Cn("",!0):(fe(),lt("div",ZU," \u672A\u9009\u62E9\u6D41\u7A0B "))]),JU]),x(o,{ref:"processModalRef","onUpdate:callback":i.callback},null,8,["onUpdate:callback"])],64)}const eW=Pe(qU,[["render",QU]]);j();const tW=e=>{const t=Nt(xe.value,"netwisd:Vars");if(!(t.values||[]).find(i=>e.expreParamValueId===`${i.formId}.${i.modelFieldId}`)){t.values||(t.values=[]);const[i,r]=e.expreParamValueId.split("."),[a,...o]=e.expreParamValue.split(".");t.values.push(jt("netwisd:Var",{formName:a,javaName:o.join("."),expreJavaName:e.expreParamValue,actionScope:"0",modelFieldId:r,formId:i,nameCh:e.expreParamValueText,isMoreRow:"0",isOrm:"0"}))}},nW=()=>{const e=Nt(xe.value,"netwisd:Vars");e.values=[];const t=Nt(xe.value,"netwisd:HumanExps");t.values&&t.values.length?t.values.forEach(n=>{n.values&&n.values.filter(i=>{i.expreParamSource==="form_field"&&tW(i)})}):e.values=[]},iW=e=>{const t=Nt(xe.value,"netwisd:Vars");t.values=[];const n={};hw.recursion([e],{callBack:i=>(i.type==="exp"&&i.cache.length&&i.cache.filter(r=>r.expreParamSource==="form_field").forEach(r=>{const[a,o]=r.expreParamValueId.split("."),[s,...c]=r.expreParamValue.split(".");n[r.expreParamValue]=jt("netwisd:Var",{formName:s,javaName:c.join("."),expreJavaName:r.expreParamValue,actionScope:"0",modelFieldId:o,formId:a,nameCh:r.expreParamValueText,isMoreRow:"0",isOrm:"0"})}),1)}),t.values=Object.values(n)},rW=e=>xi.exports.get(bT.find(t=>t.value===e),"label","-"),bT=[{value:"user",label:"\u4EBA\u5458",component:"ValueUsers"},{value:"role",label:"\u89D2\u8272",component:"ValueRole"},{value:"post",label:"\u5C97\u4F4D",component:"ValuePost"},{value:"duty",label:"\u804C\u52A1",component:"ValueDuty"},{value:"dept",label:"\u90E8\u95E8",component:"ValueDept"},{value:"mechanism",label:"\u673A\u6784",component:"ValueMechanism"},{value:"builtinrole",label:"\u8D44\u6E90\u7EC4",component:"ValueInput"},{value:"boolean",label:"Boolean",component:"ValueInput"},{value:"string",label:"String",component:"ValueInput"},{value:"integer",label:"Integer",component:"ValueInput"},{value:"long",label:"Long",component:"ValueInput"},{value:"double",label:"Double",component:"ValueInput"},{value:"date",label:"Date",component:"ValueInput"},{value:"list",label:"List",component:"ValueInput"}],aW=e=>{const t=bT.find(n=>n.value===e);return t?t.component:""},oW=[{expreExpression:"wfUserExpression.innerExpression()",expreName:"\u83B7\u53D6\u6D41\u7A0B\u53D1\u8D77\u4EBA",resultType:null,paramVarGenerics:null,bizType:"innerExpression",paramterList:[{paramType:"STANDARD_EXPRE",expreParamVarType:"string",expreParamName:"innerUserExp",expreParamDesc:"\u53D1\u8D77\u4EBA",expreParamValue:"start_user"}]},{expreExpression:"wfUserExpression.innerExpression()",expreName:"\u83B7\u53D6\u6D41\u7A0B\u4E0A\u4E00\u4E2A\u8282\u70B9\u529E\u7406\u4EBA",resultType:null,paramVarGenerics:null,bizType:"innerExpression",paramterList:[{paramType:"STANDARD_EXPRE",expreParamVarType:"string",expreParamName:"innerUserExp",expreParamDesc:"\u4E0A\u4E00\u4E2A\u8282\u70B9\u529E\u7406\u4EBA",expreParamValue:"last_user"}]}],GE=j(!1),ET=j([]),Nr=j([]),kr=j(null),Br=j(null),Lr=j(null),sW=()=>(GE.value=!0,VB().then(e=>{GE.value=!1,ET.value=[...oW,...e]}));j([]);const wT={Tag:{heightSmall:"14px"},Input:{fontSizeSmall:"12px",heightSmall:"20px",textColorDisabled:"#4d4d4d"},Button:{heightSmall:"20px",fontSizeSmall:"12px"},Select:{peers:{InternalSelection:{heightSmall:"20px",fontSizeSmall:"12px",menuBoxShadow:"1px 0px 7px 1px #000"},InternalSelectMenu:{optionFontSizeSmall:"12px",optionHeightSmall:"14px",peers:{}},Empty:{fontSizeSmall:"12px",iconSizeSmall:"20px"}}}},lW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},emits:["callback"],setup(e,t){const n=Nt(xe.value,"netwisd:Forms"),i=j(!1),r=j(!1),a=j(null),o={rowId:"id",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!1},s=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n.values?n.values.filter(c=>c.values&&c.values.length):[],expandConfig:{expandAll:!0,reserve:!0},columns:[{title:"\u8868\u5355\u540D\u79F0",type:"expand",slots:{default:({row:c})=>te("span",{style:"font-weight:bold"},c.formNameCh),content:({row:c})=>{console.log("===content===",c);const u=j(null);return Mn().then(()=>{u.value.refreshColumn()}),te(Iv,{ref:d=>u.value=d,class:"nw-vxe-grid",...o,data:c.values,columns:[{title:"\u5B57\u6BB5\u540D",field:"nameCh",slots:{default:({row:d})=>`${c.formNameCh} \u2192 ${d.nameCh}`}},{title:"\u5B57\u6BB5\u7F16\u7801",field:"javaName",width:120},{title:"\u7C7B\u578B",field:"dbType",width:70},{title:"\u662F\u5426\u6620\u5C04",field:"powerCode",width:70,slots:{default:({row:d})=>d.powerCode==="1"?"\u662F":"\u5426"}},{title:"\u64CD\u4F5C",width:54,slots:{default:({row:d})=>[te(ye,{size:"small",type:"info",onClick:()=>{t.emit("callback",`${c.formName}.${d.javaName}`,`${c.formNameCh} \u2192 ${d.nameCh}`,`${c.id}.${d.modelFieldId}`),r.value=!1}},{default:()=>"\u9009\u62E9"})]}}],style:`\r
                    border: 1px solid #ccc;\r
                    moz-user-select: -moz-none;\r
                    -moz-user-select: none;\r
                    -o-user-select:none;\r
                    -khtml-user-select:none;\r
                    -webkit-user-select:none;\r
                    -ms-user-select:none;\r
                    user-select:none;\r
                `})}}},{field:"formName",title:"\u8868\u5355\u7F16\u7801"}]});return{props:e,isLoading:i,gridFormRef:a,gridFormOption:s,visible:r,show(c){r.value=!0}}}};const ST=e=>(mn("data-v-25e37f5d"),e=e(),vn(),e),cW=ST(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),uW=ST(()=>U("div",null," \u9009\u62E9\u8868\u5355\u5B57\u6BB5 ",-1)),pW={class:"nw-modal-action"};function dW(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-modal");return fe(),Ge(u,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=d=>i.visible=d),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[cW,x(o,{name:"icon-field",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[uW]),default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridFormOption),null,16),U("div",pW,[x(c,{size:"small",onClick:t[0]||(t[0]=d=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])}const fW=Pe(lW,[["render",dW],["__scopeId","data-v-25e37f5d"]]),hW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},emits:["callback"],setup(e,t){const n=Nt(Ma(),"netwisd:Forms");n.values||(n.values=[]);const i=j(!1),r=j(!1),a=j(null),o={rowId:"id",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!1},s=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n.values.filter(c=>c.values&&c.values.length),expandConfig:{expandAll:!0,reserve:!0},columns:[{title:"\u8868\u5355\u540D\u79F0",type:"expand",slots:{default:({row:c})=>te("span",{style:"font-weight:bold"},c.formNameCh),content:({row:c})=>{console.log("===content===",c);const u=j(null);return Mn().then(()=>{u.value.refreshColumn()}),te(Iv,{ref:d=>u.value=d,class:"nw-vxe-grid",...o,data:c.values,columns:[{title:"\u5B57\u6BB5\u540D",field:"nameCh",slots:{default:({row:d})=>`${c.formNameCh} \u2192 ${d.nameCh}`}},{title:"\u5B57\u6BB5\u7F16\u7801",field:"javaName",width:120},{title:"\u7C7B\u578B",field:"dbType",width:70},{title:"\u64CD\u4F5C",width:54,slots:{default:({row:d})=>[te(ye,{size:"small",type:"info",onClick:()=>{t.emit("callback",`${c.formName}.${d.javaName}`,`${c.formNameCh} \u2192 ${d.nameCh}`),r.value=!1}},{default:()=>"\u9009\u62E9"})]}}],style:`\r
                    border: 1px solid #ccc;\r
                    moz-user-select: -moz-none;\r
                    -moz-user-select: none;\r
                    -o-user-select:none;\r
                    -khtml-user-select:none;\r
                    -webkit-user-select:none;\r
                    -ms-user-select:none;\r
                    user-select:none;\r
                `})}}},{field:"formName",title:"\u8868\u5355\u7F16\u7801"}]});return{props:e,isLoading:i,gridFormRef:a,gridFormOption:s,visible:r,show(c){r.value=!0}}}};const CT=e=>(mn("data-v-a1c88b00"),e=e(),vn(),e),mW=CT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),vW=CT(()=>U("div",null," \u9009\u62E9\u8868\u5355\u5B57\u6BB5 ",-1)),gW={class:"nw-modal-action"};function yW(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-modal");return fe(),Ge(u,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=d=>i.visible=d),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[mW,x(o,{name:"icon-orm",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[vW]),default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridFormOption),null,16),U("div",gW,[x(c,{size:"small",onClick:t[0]||(t[0]=d=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])}const TT=Pe(hW,[["render",yW],["__scopeId","data-v-a1c88b00"]]),_W={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},emits:["callback"],setup(e,t){const n=Nt(Ma(),"netwisd:Form");Nt(xe.value,"netwisd:Forms");const i=j(!1),r=j(!1),a=j(null),o=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n.values,columns:[{field:"nameCh",title:"\u5B57\u6BB5\u540D\u79F0",width:150},{field:"javaName",title:"\u5B57\u6BB5\u7F16\u7801"},{field:"javaType",title:"\u7C7B\u578B",width:70,showOverflow:!0},{title:"\u64CD\u4F5C",width:54,slots:{default:({row:s})=>[te(ye,{size:"small",type:"info",onClick:()=>{console.log("====row======",n,s),t.emit("callback",`${n.formName}.${s.javaName}`,`${n.formNameCh} \u2192 ${s.nameCh}`,`${n.id}.${s.modelFieldId}`),r.value=!1}},{default:()=>"\u9009\u62E9"})]}}]});return{props:e,isLoading:i,gridFormRef:a,gridFormOption:o,visible:r,show(s){r.value=!0}}}};const PT=e=>(mn("data-v-19966386"),e=e(),vn(),e),xW=PT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),bW=PT(()=>U("div",null," \u9009\u62E9\u8868\u5355\u5B57\u6BB5 ",-1)),EW={class:"nw-modal-action"};function wW(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-modal");return fe(),Ge(u,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=d=>i.visible=d),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[xW,x(o,{name:"icon-field",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[bW]),default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridFormOption),null,16),U("div",EW,[x(c,{size:"small",onClick:t[0]||(t[0]=d=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])}const AT=Pe(_W,[["render",wW],["__scopeId","data-v-19966386"]]),SW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,PickFormFieldModal:fW,PickFormOrmModal:TT,PickFieldModal:AT},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource","updateExpreParamValueId"],setup(e,t){const n=j(null),i=j(null),r=j(null);return{PickFormFieldModalRef:n,PickFormOrmModalRef:i,PickFieldModalRef:r,props:e,handleModal:()=>{e.expreParamSource==="form_field"?r.value.show():e.expreParamSource==="orm_field"&&i.value.show()},updateValue(o){t.emit("updateValue",o)},updateFormOrmValue(o,s){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s)},updateFieldValue(o,s,c){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),t.emit("updateExpreParamValueId",c)},updateFormFieldValue(o,s,c){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),t.emit("updateExpreParamValueId",c)},updateExpreParamSource(o){o!==e.expreParamSource&&(t.emit("updateValue",""),t.emit("updateExpreParamValueText","")),t.emit("updateExpreParamSource",o)}}}};const CW={class:"value-input"};function TW(e,t,n,i,r,a){const o=D("n-input"),s=D("n-select"),c=D("n-button"),u=D("pick-field-modal");return fe(),lt(on,null,[U("div",CW,[i.props.expreParamSource==="hand_field"?(fe(),Ge(o,{key:0,size:"small",value:i.props.value,"onUpdate:value":i.updateValue,disabled:i.props.disabled},null,8,["value","onUpdate:value","disabled"])):Cn("",!0),i.props.expreParamSource!=="hand_field"?(fe(),Ge(o,{key:1,disabled:"",size:"small",value:i.props.expreParamValueText,placeholder:""},null,8,["value"])):Cn("",!0),x(s,{disabled:i.props.disabled,value:i.props.expreParamSource,"onUpdate:value":i.updateExpreParamSource,size:"small",style:{width:"190px"},options:[{label:"\u624B\u52A8\u8F93\u5165",value:"hand_field"},{label:"\u8868\u5355\u5B57\u6BB5",value:"form_field"}]},null,8,["disabled","value","onUpdate:value"]),x(c,{disabled:i.props.expreParamSource==="hand_field"||i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(u,{ref:"PickFieldModalRef",onCallback:i.updateFieldValue},null,8,["onCallback"])],64)}const RT=Pe(SW,[["render",TW],["__scopeId","data-v-674aeb10"]]),PW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},emits:["callback"],setup(e,t){const n=j({actionOrgType:[]}),i=j(null),r=j([]),a=j(!0),o=j(!1),s=()=>{a.value=!0,zc({isDefault:0,status:1,orgType:n.value.orgType}).then(u=>{a.value=!1,r.value=u})},c=j({rowId:"id",rowKey:!1,size:"mini",height:"350px",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,treeConfig:{indent:20,accordion:!1,line:!0,expandAll:!0,children:"kids"},tableMenu:{},scrollY:{enabled:!0},data:r,columns:[{field:"name",treeNode:!0,showOverflow:!0,slots:{default:({row:u})=>n.value.actionOrgType.includes(u.orgType)?[te("div",{style:"display:flex; justify-content: space-between;"},u.orgName,te(ye,{size:"small",type:"info",onClick:()=>{console.log("=====callback===",u),t.emit("callback",u.id,u.orgName),o.value=!1}},{default:()=>"\u9009\u62E9"}))]:u.orgName}}]});return{option:n,props:e,gridRef:i,isLoading:a,gridOption:c,visible:o,show(u={modalTitle:"\u673A\u6784\u9009\u62E9",orgType:1,actionOrgType:[1]}){r.value=[],n.value=u,o.value=!0},onAfterEnter(){Mn().then(()=>{s()})}}}};const AW=e=>(mn("data-v-62e900a4"),e=e(),vn(),e),RW=AW(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),MW={class:"nw-modal-action"};function DW(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-modal");return fe(),Ge(u,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=d=>i.visible=d),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0,"on-after-enter":i.onAfterEnter},{icon:C(()=>[RW,x(o,{name:"icon-jigou",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[U("div",null,pn(i.option.modalTitle),1)]),default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridRef"},i.gridOption,{loading:i.isLoading,style:{"padding-top":"5px",border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16,["loading"]),U("div",MW,[x(c,{size:"small",onClick:t[0]||(t[0]=d=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show","on-after-enter"])}const MT=Pe(PW,[["render",DW],["__scopeId","data-v-62e900a4"]]),OW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},isOrg:{type:Boolean,default:!0},actionOrgType:{type:Array,default:()=>[1]},value:{type:Array,default:()=>[]}},emits:["callback"],setup(e,t){const n=j(null),i=j([]),r=j(!0);(()=>{r.value=!0,zc({isDefault:0,status:1,orgType:e.isOrg?1:null}).then(s=>{r.value=!1,i.value=s})})();const o=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,treeConfig:{indent:15,accordion:!1,line:!0,children:"kids"},tableMenu:{},data:i,columns:[{field:"name",treeNode:!0,showOverflow:!0,slots:{default:({row:s})=>e.actionOrgType.includes(s.orgType)?[te("div",{style:"display:flex; justify-content: space-between;    align-items: center;"},te("div",null,te(we,{name:s.orgType===1?"icon-jigou":"icon-bumen2",size:16,style:"margin-right: 5px;"}),s.orgName),e.value.includes(s.id)?te(ye,{size:"small",type:"success",onClick:()=>{t.emit("callback",!1,s.id,s.orgName)}},{default:()=>"\u5DF2\u9009\u62E9"}):te(ye,{size:"small",type:"info",onClick:()=>{t.emit("callback",!0,s.id,s.orgName)}},{default:()=>"\u9009\u62E9"}))]:[te("div",{style:"display:flex; justify-content: space-between;    align-items: center;"},te("div",null,te(we,{name:s.orgType===1?"icon-jigou":"icon-bumen2",size:16,style:"margin-right: 5px;"}),s.orgName))]}}]});return{props:e,gridRef:n,isLoading:r,gridOption:o}}};const IW={class:"org-tree"},NW={class:"org-tree-header"},kW={class:"org-tree-content"};function BW(e,t,n,i,r,a){const o=D("n-input"),s=D("vxe-grid");return fe(),lt("div",IW,[U("div",NW,[x(o,{size:"small"})]),U("div",kW,[x(s,Et({class:"nw-vxe-grid-tree",ref:"gridRef"},i.gridOption,{loading:i.isLoading}),null,16,["loading"])])])}const Df=Pe(OW,[["render",BW]]),LW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,MechanismModal:MT,MechanismGrid:Df},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0},r=sn(()=>[e.value]);return{visible:n,props:e,handleModal:i,callback(a,o,s){a&&(t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),Mn().then(()=>{n.value=!1}))},selected:r}}};const DT=e=>(mn("data-v-3d447b3b"),e=e(),vn(),e),$W={class:"value-input"},zW=DT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),FW=DT(()=>U("div",null," \u673A\u6784\u9009\u62E9 ",-1)),HW={style:{height:"400px"}},jW={class:"nw-modal-action"};function VW(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("mechanism-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",$W,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u673A\u6784"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[zW,x(c,{name:"icon-jigou",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[FW]),default:C(()=>[U("div",HW,[x(u,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])]),U("div",jW,[x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const UW=Pe(LW,[["render",VW],["__scopeId","data-v-3d447b3b"]]),WW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,MechanismModal:MT,MechanismGrid:Df},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0},r=sn(()=>[e.value]);return{visible:n,props:e,handleModal:i,callback(a,o,s){a&&(t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),Mn().then(()=>{n.value=!1}))},selected:r}}};const OT=e=>(mn("data-v-d9b1af93"),e=e(),vn(),e),GW={class:"value-input"},qW=OT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),KW=OT(()=>U("div",null," \u90E8\u95E8\u9009\u62E9 ",-1)),YW={style:{height:"400px"}},XW={class:"nw-modal-action"};function ZW(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("mechanism-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",GW,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u90E8\u95E8"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[qW,x(c,{name:"icon-bumen2",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[KW]),default:C(()=>[U("div",YW,[x(u,{isOrg:!1,value:i.selected,onCallback:i.callback,actionOrgType:[2]},null,8,["value","onCallback"])]),U("div",XW,[x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const JW=Pe(WW,[["render",ZW],["__scopeId","data-v-d9b1af93"]]),QW={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},emits:["callback"],setup(e,t){const n=j(null),i=j(null),r=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,treeConfig:{indent:15,accordion:!1,line:!0,children:"kids"},tableMenu:{},rowClassName:({row:c})=>c===n.value?"form-active":"",proxyConfig:{props:{list:"list"},ajax:{query:()=>zc({isDefault:0,status:1}).then(async c=>({list:c}))}},columns:[{treeNode:!0,showOverflow:!0,slots:{default:({row:c})=>[te("div",{style:"display:flex; justify-content: space-between;    align-items: center;"},te("div",null,te(we,{name:c.orgType===1?"icon-jigou":"icon-bumen2",size:16,style:"margin-right: 5px;"}),te(ye,{text:!0,size:"small",onClick:()=>{n.value=c,a.value.commitProxy("query")}},{default:()=>c.orgName})))]}}]}),a=j(null),o=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:c})=>KB({parentOrgId:n.value?n.value.id:"0",page:{current:c.currentPage,size:c.pageSize}}).then(async u=>(console.log("========dddd=",u.records),{result:u.records,total:u.total}))}},columns:[{field:"userNameCh",title:"\u59D3\u540D",width:130},{showOverflow:"title",field:"parentOrgName",title:"\u6240\u5C5E\u673A\u6784"},{showOverflow:"title",field:"parentDeptName",title:"\u6240\u5C5E\u90E8\u95E8"},{width:65,slots:{default:({row:c})=>e.value.find((d,f)=>d.id===c.id)?[te(ye,{type:"success",size:"small",onClick:()=>{t.emit("callback",!1,c.id,c.userNameCh,c.userName,c)}},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{type:"info",size:"small",onClick:()=>{t.emit("callback",!0,c.id,c.userNameCh,c.userName,c)}},{default:()=>"\u9009\u62E9"})]}}]}),s=j({"cell-click":({row:c})=>{}});return{actionOrg:n,gridOrgRef:i,gridOrgOption:r,gridUsersRef:a,gridUsersOption:o,gridOrgEvent:s,props:e,sizeChange(){}}}};const eG=e=>(mn("data-v-a95c5796"),e=e(),vn(),e),tG=eG(()=>U("div",{class:"nw-modal-table-title"}," \u7EC4\u7EC7\u673A\u6784 ",-1)),nG={style:{height:"calc(100% - 36px)"}},iG={class:"nw-modal-table-title"},rG={style:{height:"calc(100% - 36px)"}};function aG(e,t,n,i,r,a){const o=D("vxe-grid"),s=D("d-splitter-pane"),c=D("d-splitter");return fe(),Ge(c,{class:"nw-layout-content-splitter",splitBarSize:"1px",style:{height:"600px"}},{DSplitterPane:C(()=>[x(s,{class:"splitter-bpmn-view",size:"300px",minSize:"330px",onSizeChange:i.sizeChange},{default:C(()=>[tG,U("div",nG,[x(o,Et({class:"nw-vxe-grid-tree",ref:"gridOrgRef"},i.gridOrgOption,$c(i.gridOrgEvent)),null,16)])]),_:1},8,["onSizeChange"]),x(s,{class:"splitter-bpmn-attrs",minSize:"300px"},{default:C(()=>[U("div",iG," \u4EBA\u5458\u5217\u8868\uFF08"+pn(i.actionOrg?i.actionOrg.orgName:"\u6240\u6709")+"\uFF09 ",1),U("div",rG,[x(o,Et({class:"nw-vxe-grid",ref:"gridUsersRef"},i.gridUsersOption),null,16)])]),_:1})]),_:1})}const IT=Pe(QW,[["render",aG],["__scopeId","data-v-a95c5796"]]),oG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,UserGrid:IT},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0;const o=e.value.split(","),s=e.expreParamValueText.split(",");r.value=o.filter(c=>c).map((c,u)=>({id:c,name:s[u]}))},r=j([]);return{visible:n,props:e,handleModal:i,handleModalComplete:()=>{t.emit("updateValue",r.value.map(o=>o.id).join(",")),t.emit("updateExpreParamValueText",r.value.map(o=>o.name).join(",")),Mn().then(()=>{n.value=!1})},callback(o,s,c){if(o)r.value.push({id:s,name:c});else{const u=r.value.findIndex(d=>d.id===s);u>=0&&r.value.splice(u,1)}},selected:r}}};const NT=e=>(mn("data-v-afaf9f58"),e=e(),vn(),e),sG={class:"value-input"},lG=NT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),cG=NT(()=>U("div",null," \u4EBA\u5458\u9009\u62E9 ",-1)),uG={style:{height:"400px"}},pG={class:"nw-modal-action"};function dG(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("user-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",sG,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u4EBA\u5458"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[lG,x(c,{name:"icon-yonghu",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[cG]),default:C(()=>[U("div",uG,[x(u,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])]),U("div",pG,[x(s,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const fG=Pe(oG,[["render",dG],["__scopeId","data-v-afaf9f58"]]),hG=e=>Pn({url:"/main/mdmDuty/list",method:"post",data:e}),mG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},emits:["callback"],setup(e,t){const n=j(null),i=j(null),r=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,treeConfig:{indent:15,accordion:!1,line:!0,children:"kids"},tableMenu:{},rowClassName:({row:c})=>c===n.value?"form-active":"",proxyConfig:{props:{list:"list"},ajax:{query:()=>zc({isDefault:0,status:1}).then(async c=>({list:c}))}},columns:[{treeNode:!0,showOverflow:!0,slots:{default:({row:c})=>[te("div",{style:"display:flex; justify-content: space-between;    align-items: center;"},te("div",null,te(we,{name:c.orgType===1?"icon-jigou":"icon-bumen2",size:16,style:"margin-right: 5px;"}),te(ye,{text:!0,size:"small",onClick:()=>{n.value=c,a.value.commitProxy("query")}},{default:()=>c.orgName})))]}}]}),a=j(null),o=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:c})=>hG({parentOrgId:n.value?n.value.id:"0",page:{current:c.currentPage,size:c.pageSize}}).then(async u=>(console.log("========dddd=",u.records),{result:u.records,total:u.total}))}},columns:[{field:"dutyName",title:"\u804C\u52A1\u540D\u79F0"},{field:"dutyCode",title:"\u804C\u52A1\u7F16\u53F7",showHeaderOverflow:!0},{field:"dutyUpName",title:"\u4E0A\u7EA7\u804C\u52A1",showOverflow:!0},{field:"parentDeptName",title:"\u90E8\u95E8",showOverflow:!0},{field:"status",title:"\u542F\u7528\u72B6\u6001",showOverflow:!0,slots:{default:({row:c})=>[te("span",null,c.status==1?"\u542F\u7528":"\u7981\u7528")]}},{field:"masterNumber",title:"\u804C\u52A1\u4EBA\u6570",showOverflow:!0},{field:"partNumber",title:"\u517C\u5C97\u4EBA\u6570",showOverflow:!0},{width:65,slots:{default:({row:c})=>e.value.find((d,f)=>d.id===c.id)?[te(ye,{type:"success",size:"small",onClick:()=>{t.emit("callback",!1,c.id,c.dutyName,c.dutyCode,c)}},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{type:"info",size:"small",onClick:()=>{t.emit("callback",!0,c.id,c.dutyName,c.dutyCode,c)}},{default:()=>"\u9009\u62E9"})]}}]}),s=j({"cell-click":({row:c})=>{}});return{actionOrg:n,gridOrgRef:i,gridOrgOption:r,gridUsersRef:a,gridUsersOption:o,gridOrgEvent:s,props:e,sizeChange(){}}}};const vG=e=>(mn("data-v-b6d63f1e"),e=e(),vn(),e),gG=vG(()=>U("div",{class:"nw-modal-table-title"}," \u7EC4\u7EC7\u673A\u6784 ",-1)),yG={style:{height:"calc(100% - 36px)"}},_G={class:"nw-modal-table-title"},xG={style:{height:"calc(100% - 36px)"}};function bG(e,t,n,i,r,a){const o=D("vxe-grid"),s=D("d-splitter-pane"),c=D("d-splitter");return fe(),Ge(c,{class:"nw-layout-content-splitter",splitBarSize:"1px",style:{height:"600px"}},{DSplitterPane:C(()=>[x(s,{class:"splitter-bpmn-view",size:"300px",minSize:"300px",onSizeChange:i.sizeChange},{default:C(()=>[gG,U("div",yG,[x(o,Et({class:"nw-vxe-grid-tree",ref:"gridOrgRef"},i.gridOrgOption,$c(i.gridOrgEvent)),null,16)])]),_:1},8,["onSizeChange"]),x(s,{class:"splitter-bpmn-attrs",minSize:"300px"},{default:C(()=>[U("div",_G," \u804C\u52A1\u5217\u8868\uFF08"+pn(i.actionOrg?i.actionOrg.orgName:"\u6240\u6709")+"\uFF09 ",1),U("div",xG,[x(o,Et({class:"nw-vxe-grid",ref:"gridUsersRef"},i.gridUsersOption),null,16)])]),_:1})]),_:1})}const EG=Pe(mG,[["render",bG],["__scopeId","data-v-b6d63f1e"]]),wG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,DutyGrid:EG},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0;const o=e.value.split(","),s=e.expreParamValueText.split(",");r.value=o.filter(c=>c).map((c,u)=>({id:c,name:s[u]}))},r=j([]);return{visible:n,props:e,handleModal:i,handleModalComplete:()=>{t.emit("updateValue",r.value.map(o=>o.id).join(",")),t.emit("updateExpreParamValueText",r.value.map(o=>o.name).join(",")),Mn().then(()=>{n.value=!1})},callback(o,s,c){if(o)r.value.push({id:s,name:c});else{const u=r.value.findIndex(d=>d.id===s);u>=0&&r.value.splice(u,1)}},selected:r}}};const kT=e=>(mn("data-v-de6a1248"),e=e(),vn(),e),SG={class:"value-input"},CG=kT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),TG=kT(()=>U("div",null," \u804C\u52A1\u9009\u62E9 ",-1)),PG={style:{height:"400px"}},AG={class:"nw-modal-action"};function RG(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("duty-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",SG,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u804C\u52A1"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[CG,x(c,{name:"icon-yonghu",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[TG]),default:C(()=>[U("div",PG,[x(u,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])]),U("div",AG,[x(s,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const MG=Pe(wG,[["render",RG],["__scopeId","data-v-de6a1248"]]),DG=e=>Pn({url:"/main/mdmPost/list",method:"post",data:e}),OG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},emits:["callback"],setup(e,t){const n=j(null),i=j(null),r=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,treeConfig:{indent:15,accordion:!1,line:!0,children:"kids"},tableMenu:{},rowClassName:({row:c})=>c===n.value?"form-active":"",proxyConfig:{props:{list:"list"},ajax:{query:()=>zc({isDefault:0,status:1}).then(async c=>({list:c}))}},columns:[{treeNode:!0,showOverflow:!0,slots:{default:({row:c})=>[te("div",{style:"display:flex; justify-content: space-between;    align-items: center;"},te("div",null,te(we,{name:c.orgType===1?"icon-jigou":"icon-bumen2",size:16,style:"margin-right: 5px;"}),te(ye,{text:!0,size:"small",onClick:()=>{n.value=c,a.value.commitProxy("query")}},{default:()=>c.orgName})))]}}]}),a=j(null),o=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:c})=>DG({parentOrgId:n.value?n.value.id:"0",page:{current:c.currentPage,size:c.pageSize}}).then(async u=>(console.log("========dddd=",u.records),{result:u.records,total:u.total}))}},columns:[{field:"postName",title:"\u5C97\u4F4D\u540D\u79F0",showOverflow:"title"},{width:130,field:"postCode",title:"\u5C97\u4F4D\u7F16\u53F7",showHeaderOverflow:!0},{width:130,field:"parentDeptName",title:"\u90E8\u95E8",showOverflow:"title"},{field:"status",title:"\u542F\u7528\u72B6\u6001",showOverflow:!0,width:60,slots:{default:({row:c})=>[te("span",null,c.status==1?"\u542F\u7528":"\u7981\u7528")]}},{field:"masterNumber",title:"\u5C97\u4F4D\u4EBA\u6570",width:60,showOverflow:!0},{field:"partNumber",title:"\u517C\u5C97\u4EBA\u6570",width:60,showOverflow:!0},{width:65,slots:{default:({row:c})=>e.value.find((d,f)=>d.id===c.id)?[te(ye,{type:"success",size:"small",onClick:()=>{t.emit("callback",!1,c.id,c.postName,c.postCode,c)}},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{type:"info",size:"small",onClick:()=>{t.emit("callback",!0,c.id,c.postName,c.postCode,c)}},{default:()=>"\u9009\u62E9"})]}}]}),s=j({"cell-click":({row:c})=>{}});return{actionOrg:n,gridOrgRef:i,gridOrgOption:r,gridUsersRef:a,gridUsersOption:o,gridOrgEvent:s,props:e,sizeChange(){}}}};const IG=e=>(mn("data-v-6f756724"),e=e(),vn(),e),NG=IG(()=>U("div",{class:"nw-modal-table-title"},"\u7EC4\u7EC7\u673A\u6784",-1)),kG={style:{height:"calc(100% - 36px)"}},BG={class:"nw-modal-table-title"},LG={style:{height:"calc(100% - 36px)"}};function $G(e,t,n,i,r,a){const o=D("vxe-grid"),s=D("d-splitter-pane"),c=D("d-splitter");return fe(),Ge(c,{class:"nw-layout-content-splitter",splitBarSize:"1px",style:{height:"600px"}},{DSplitterPane:C(()=>[x(s,{class:"splitter-bpmn-view",size:"300px",minSize:"300px",onSizeChange:i.sizeChange},{default:C(()=>[NG,U("div",kG,[x(o,Et({class:"nw-vxe-grid-tree",ref:"gridOrgRef"},i.gridOrgOption,$c(i.gridOrgEvent)),null,16)])]),_:1},8,["onSizeChange"]),x(s,{class:"splitter-bpmn-attrs",minSize:"300px"},{default:C(()=>[U("div",BG," \u804C\u52A1\u5217\u8868\uFF08"+pn(i.actionOrg?i.actionOrg.orgName:"\u6240\u6709")+"\uFF09 ",1),U("div",LG,[x(o,Et({class:"nw-vxe-grid",ref:"gridUsersRef"},i.gridUsersOption),null,16)])]),_:1})]),_:1})}const zG=Pe(OG,[["render",$G],["__scopeId","data-v-6f756724"]]),FG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,PostGrid:zG},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0;const o=e.value.split(","),s=e.expreParamValueText.split(",");r.value=o.filter(c=>c).map((c,u)=>({id:c,name:s[u]}))},r=j([]);return{visible:n,props:e,handleModal:i,handleModalComplete:()=>{t.emit("updateValue",r.value.map(o=>o.id).join(",")),t.emit("updateExpreParamValueText",r.value.map(o=>o.name).join(",")),Mn().then(()=>{n.value=!1})},callback(o,s,c){if(o)r.value.push({id:s,name:c});else{const u=r.value.findIndex(d=>d.id===s);u>=0&&r.value.splice(u,1)}},selected:r}}};const BT=e=>(mn("data-v-b0c26c18"),e=e(),vn(),e),HG={class:"value-input"},jG=BT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),VG=BT(()=>U("div",null," \u5C97\u4F4D\u9009\u62E9 ",-1)),UG={style:{height:"400px"}},WG={class:"nw-modal-action"};function GG(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("post-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",HG,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u5C97\u4F4D"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"1100px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[jG,x(c,{name:"icon-yonghu",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[VG]),default:C(()=>[U("div",UG,[x(u,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])]),U("div",WG,[x(s,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const qG=Pe(FG,[["render",GG],["__scopeId","data-v-b0c26c18"]]),KG=e=>Pn({url:"/main/mdmRole/list",method:"post",data:e}),YG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{multiple:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},emits:["callback"],setup(e,t){const n=j(null),i=j({rowId:"id",rowKey:!1,size:"mini",height:"auto",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:r})=>KG({page:{current:r.currentPage,size:r.pageSize}}).then(async a=>(console.log("========dddd=",a.records),{result:a.records,total:a.total}))}},columns:[{field:"roleName",title:"\u540D\u79F0"},{field:"roleCode",title:"\u7F16\u7801",showHeaderOverflow:!0},{field:"sysName",title:"\u5B50\u7CFB\u7EDF\u540D\u79F0",showHeaderOverflow:!0},{field:"status",title:"\u542F\u7528\u72B6\u6001",showOverflow:!0,slots:{default:({row:r})=>[te("span",null,r.status==1?"\u542F\u7528":"\u7981\u7528")]}},{width:65,slots:{default:({row:r})=>e.value.find((o,s)=>o.id===r.id)?[te(ye,{type:"success",size:"small",onClick:()=>{t.emit("callback",!1,r.id,r.roleName,r.roleCode,r)}},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{type:"info",size:"small",onClick:()=>{t.emit("callback",!0,r.id,r.roleName,r.roleCode,r)}},{default:()=>"\u9009\u62E9"})]}}]});return{gridRef:n,gridOption:i,props:e,sizeChange(){}}}};function XG(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),Ge(o,Et({class:"nw-vxe-grid",ref:"gridRef"},i.gridOption),null,16)}const ZG=Pe(YG,[["render",XG],["__scopeId","data-v-2af6554a"]]),JG={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,RoleGrid:ZG},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource"],setup(e,t){const n=j(!1),i=()=>{n.value=!0;const o=e.value.split(","),s=e.expreParamValueText.split(",");r.value=o.filter(c=>c).map((c,u)=>({id:c,name:s[u]}))},r=j([]);return{visible:n,props:e,handleModal:i,handleModalComplete:()=>{t.emit("updateValue",r.value.map(o=>o.id).join(",")),t.emit("updateExpreParamValueText",r.value.map(o=>o.name).join(",")),Mn().then(()=>{n.value=!1})},callback(o,s,c){if(o)r.value.push({id:s,name:c});else{const u=r.value.findIndex(d=>d.id===s);u>=0&&r.value.splice(u,1)}},selected:r}}};const LT=e=>(mn("data-v-ca888e15"),e=e(),vn(),e),QG={class:"value-input"},eq=LT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),tq=LT(()=>U("div",null," \u89D2\u8272\u9009\u62E9 ",-1)),nq={style:{height:"400px"}},iq={class:"nw-modal-action"};function rq(e,t,n,i,r,a){const o=D("n-input"),s=D("n-button"),c=D("nw-icon"),u=D("role-grid"),d=D("n-modal");return fe(),lt(on,null,[U("div",QG,[x(o,{size:"small",value:i.props.expreParamValueText,disabled:"",placeholder:"\u9009\u62E9\u804C\u52A1"},null,8,["value"]),x(s,{disabled:i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(d,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=f=>i.visible=f),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[eq,x(c,{name:"icon-yonghu",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[tq]),default:C(()=>[U("div",nq,[x(u,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])]),U("div",iq,[x(s,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(s,{size:"small",onClick:t[0]||(t[0]=f=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])],64)}const aq=Pe(JG,[["render",rq],["__scopeId","data-v-ca888e15"]]),oq={ValueInput:RT,ValueMechanism:UW,ValueDept:JW,ValueUsers:fG,ValueDuty:MG,ValuePost:qG,ValueRole:aq},sq={emits:["add"],components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{},setup(e,t){const n=j(null),i=j(null);sW();const r={rowId:"id",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!1},a=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:ET,columns:[{title:"\u8868\u8FBE\u5F0F\u4EE3\u7801",field:"expreExpression",showOverflow:"title",minWidth:200},{title:"\u8868\u8FBE\u5F0F\u540D\u79F0",field:"expreName",minWidth:150},{title:"\u64CD\u4F5C",width:50,fixed:"right",slots:{default:({row:c})=>[te(ye,{loading:c.loading,text:!0,size:"small",type:"info",onClick:()=>{console.log("=====rowrow=====",c);const u=jt("netwisd:HumanExp",{expreName:c.expreName,expreExpression:c.expreExpression,bizType:c.bizType==="innerExpression"?"innerExpression":"mdmExpression",isCache:!0,values:c.paramterList.map(d=>jt("netwisd:HumanExpParam",{expreParamValue:d.expreParamValue||"",expreParamSource:"hand_field",expreParamName:d.expreParamName,expreParamDesc:d.expreParamDesc,expreParamVarType:d.expreParamVarType}))});Nr.value=[...Nr.value,u],i.value.setRowExpand(u,!0)}},{default:()=>"\u4F7F\u7528"})]}}]}),o=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!1,tableMenu:{},data:Nr,expandConfig:{expandAll:!0,reserve:!0},columns:[{title:"\u8868\u8FBE\u5F0F",showOverflow:"title",minWidth:200,type:"expand",slots:{default:({row:c})=>`${c.expreExpression}`,content:({row:c})=>{console.log("===content===",c);const u=j(null);return Mn().then(()=>{u.value.refreshColumn()}),te(Iv,{ref:d=>u.value=d,class:"nw-vxe-grid",...r,data:c.values,columns:[{title:"\u53C2\u6570\u540D",field:"expreParamDesc",width:120},{title:"\u7C7B\u578B",field:"expreParamVarType",width:70,slots:{default:({row:d})=>rW(d.expreParamVarType)}},{title:"\u503C",slots:{default:({row:d})=>{const f=aW(d.expreParamVarType),m=oq[f];return d.expreParamDesc==="METH"&&(d.expreParamValue=d.expreParamName),d.expreParamDesc==="METH"||d.expreParamName==="innerUserExp"?d.expreParamValue:f==="ValueInput"?te(RT,{value:d.expreParamValue,expreParamSource:d.expreParamSource,expreParamValueText:d.expreParamValueText,onUpdateValue:v=>{d.expreParamValue=v},onUpdateExpreParamSource:v=>{d.expreParamSource=v},onUpdateExpreParamValueText:v=>{d.expreParamValueText=v},onUpdateExpreParamValueId:v=>{d.expreParamValueId=v}}):m?te(m,{value:d.expreParamValue,expreParamSource:d.expreParamSource,expreParamValueText:d.expreParamValueText,onUpdateValue:v=>{d.expreParamValue=v},onUpdateExpreParamSource:v=>{d.expreParamSource=v},onUpdateExpreParamValueText:v=>{d.expreParamValueText=v}}):""}}}],style:`\r
                      border: 1px solid #ccc;\r
                      moz-user-select: -moz-none;\r
                      -moz-user-select: none;\r
                      -o-user-select:none;\r
                      -khtml-user-select:none;\r
                      -webkit-user-select:none;\r
                      -ms-user-select:none;\r
                      user-select:none;\r
                  `})}}},{title:"\u8868\u8FBE\u5F0F\u540D\u79F0",field:"expreName",minWidth:100},{title:"\u64CD\u4F5C",width:50,slots:{default:({row:c,rowIndex:u})=>[te(ye,{text:!0,type:"error",onClick:()=>{Nr.value=Nr.value.filter(d=>d!==c)}},{default:()=>"\u5220\u9664"})]}}]}),s=()=>{n.value.refreshColumn(),i.value.refreshColumn()};return{theme:wT,gridExpressRef:n,gridExpressOption:a,gridCacheExpressRef:i,gridCacheExpressOption:o,resize:s,sizeChange(){s()},UserExpressionCache:Nr}}};function lq(e,t,n,i,r,a){const o=D("vxe-grid"),s=D("d-splitter-pane"),c=D("d-splitter");return fe(),Ge(c,{class:"nw-layout-content-splitter",splitBarSize:"1px"},{DSplitterPane:C(()=>[x(s,{class:"splitter-bpmn-view",size:"450px",minSize:"330px",onSizeChange:i.sizeChange,style:{padding:"0 5px 5px 5px"}},{default:C(()=>[x(o,Et({class:"nw-vxe-grid",ref:"gridExpressRef"},i.gridExpressOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),_:1},8,["onSizeChange"]),x(s,{class:"splitter-bpmn-attrs",minSize:"200px",style:{}},{default:C(()=>[x(o,Et({class:"nw-vxe-grid",ref:"gridCacheExpressRef"},i.gridCacheExpressOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),_:1})]),_:1})}const cq=Pe(sq,[["render",lq]]),uq={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt,MechanismGrid:Df},props:{},emits:["callback"],setup(e,t){return{selected:sn(()=>kr.value.bizId.split(",").filter(r=>r)),callback:(r,a,o)=>{const s=kr.value.bizId.split(",").filter(d=>d),c=kr.value.bizText.split(",").filter(d=>d),u=s.indexOf(a);r?u<0&&(s.push(a),c.push(o)):u>=0&&(s.splice(u,1),c.splice(u,1)),kr.value.bizId=s.join(","),kr.value.bizText=c.join(","),kr.value.expreName=`\u673A\u6784(${s.length})`}}}};function pq(e,t,n,i,r,a){const o=D("mechanism-grid");return fe(),Ge(o,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])}const dq=Pe(uq,[["render",pq],["__scopeId","data-v-f19d24a5"]]),fq={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt,MechanismGrid:Df},props:{},emits:["callback"],setup(e,t){return{selected:sn(()=>Br.value.bizId.split(",").filter(r=>r)),callback:(r,a,o)=>{const s=Br.value.bizId.split(",").filter(d=>d),c=Br.value.bizText.split(",").filter(d=>d),u=s.indexOf(a);r?u<0&&(s.push(a),c.push(o)):u>=0&&(s.splice(u,1),c.splice(u,1)),Br.value.bizId=s.join(","),Br.value.bizText=c.join(","),Br.value.expreName=`\u90E8\u95E8(${s.length})`}}}};function hq(e,t,n,i,r,a){const o=D("mechanism-grid");return fe(),Ge(o,{isOrg:!1,actionOrgType:[2],value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])}const mq=Pe(fq,[["render",hq],["__scopeId","data-v-dfdc98db"]]),vq={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt,UserGrid:IT},props:{},emits:["callback"],setup(e,t){return{selected:sn(()=>Lr.value.bizId.split(",").filter(r=>r).map(r=>({id:r}))),callback:(r,a,o)=>{const s=Lr.value.bizId.split(",").filter(d=>d),c=Lr.value.bizText.split(",").filter(d=>d),u=s.indexOf(a);r?u<0&&(s.push(a),c.push(o)):u>=0&&(s.splice(u,1),c.splice(u,1)),Lr.value.bizId=s.join(","),Lr.value.bizText=c.join(","),Lr.value.expreName=`\u4EBA\u5458(${s.length})`}}}};function gq(e,t,n,i,r,a){const o=D("user-grid");return fe(),Ge(o,{value:i.selected,onCallback:i.callback},null,8,["value","onCallback"])}const yq=Pe(vq,[["render",gq],["__scopeId","data-v-81c61dfa"]]),_q={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NBadge:_w,NwIcon:we,NSwitch:Gt,NTabs:Kr,NTabPane:Yr,Exp:cq,Mechanism:dq,Dept:mq,Users:yq,NTag:Ov},props:{},setup(e,t){const n=j(null),i=j(!1),r=j(!1);return{theme:wT,props:e,isLoading:i,actionForm:n,visible:r,async show(){r.value=!0;const s=Nt(oV(),"netwisd:HumanExps"),c=await Gx()._model.toXML(s).then(d=>d.xml),u=await Gx()._model.fromXML(c,"netwisd:HumanExps").then(d=>d.rootElement);u.values||(u.values=[]),Nr.value=u.values.filter(d=>d.bizType==="mdmExpression"||d.bizType==="innerExpression"),kr.value=u.values.find(d=>d.bizType==="organ")||jt("netwisd:HumanExp",{expreName:"",bizId:"",bizText:"",bizType:"organ"}),Br.value=u.values.find(d=>d.bizType==="dept")||jt("netwisd:HumanExp",{expreName:"",bizId:"",bizText:"",bizType:"dept"}),Lr.value=u.values.find(d=>d.bizType==="empl")||jt("netwisd:HumanExp",{expreName:"",bizId:"",bizText:"",bizType:"empl"})},handleModalComplete:()=>{console.log("=====UserExpressionCache=====",Nr);const s=[...Nr.value];kr.value.bizId&&s.push(kr.value),Br.value.bizId&&s.push(Br.value),Lr.value.bizId&&s.push(Lr.value),t.emit("update:callback",s),r.value=!1},handleClearForm:()=>{},sizeChange(){},UserExpressionCache:Nr,MechanismCache:kr,DeptCache:Br,UsersCache:Lr}}};const $T=e=>(mn("data-v-34b1b209"),e=e(),vn(),e),xq=$T(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),bq=$T(()=>U("div",null," \u9009\u62E9\u4EBA\u5458\u89C4\u5219 ",-1)),Eq={class:"nw-modal-action"};function wq(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-tag"),c=D("exp"),u=D("n-tab-pane"),d=D("n-tabs"),f=D("n-button"),m=D("n-modal"),v=D("n-config-provider");return fe(),Ge(v,{abstract:"","theme-overrides":i.theme},{default:C(()=>[x(m,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=g=>i.visible=g),preset:"dialog",style:{width:"1000px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[xq,x(o,{name:"icon-bumen2",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[bq]),default:C(()=>[U("div",null,[x(d,{class:"nw-tabs",size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(u,{name:"exp"},{tab:C(()=>[_e(" \u8868\u8FBE\u5F0F "),i.UserExpressionCache.length?(fe(),Ge(s,{key:0,type:"error",size:"small",round:"",style:{"margin-left":"3px"}},{default:C(()=>[_e(pn(i.UserExpressionCache.length),1)]),_:1})):Cn("",!0)]),default:C(()=>[x(c)]),_:1})]),_:1})]),U("div",Eq,[x(f,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(f,{size:"small",onClick:t[0]||(t[0]=g=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["theme-overrides"])}const Sq=Pe(_q,[["render",wq],["__scopeId","data-v-34b1b209"]]),Cq={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,FormModal:Sq},props:{},setup(e){const t=j(null),n=j(null);j([]),j([]);const i=Nt(xe.value,"netwisd:HumanExps");i.values||(i.values=[]),j(i.values),console.log("netwisdHumanExps==",i);const r=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:i.values,columns:[{title:"\u4EBA\u5458\u914D\u7F6E",field:"expreName",slots:{default:({row:u})=>[te("div",{style:"display: flex;justify-content: space-between;"},te("div",null,u.expreName),te("div",null,te(ye,{text:!0,type:"error",onClick:()=>{s(u)},title:"\u5220\u9664"},{default:()=>te(we,{name:"icon-guanbichuangkou",size:8})})))]}}]}),a=()=>{t.value.show(i)},o=u=>{i.values.splice(0),i.values.push(...u),console.log("netwisdHumanExps.values==",i.values),nW(),n.value.reloadData(i.values)},s=u=>{const d=i.values.indexOf(u);d>=0&&i.values.splice(d,1),n.value.reloadData(i.values)};return{formModalRef:t,props:e,gridHumanRef:n,gridHumanOption:r,handleModalShow:a,handleModalComplete:o,handleClearHuman:()=>{i.values.splice(0),n.value.reloadData(i.values)}}}};const Tq={style:{padding:"5px",height:"calc(100% - 10px)"}},Pq={style:{display:"flex","justify-content":"space-between",padding:"5px 0"}},Aq={style:{height:"calc(100% - 36px)","border-bottom":"1px solid #ccc",overflow:"hidden"}};function Rq(e,t,n,i,r,a){const o=D("n-button"),s=D("vxe-grid"),c=D("form-modal");return fe(),lt(on,null,[U("div",Tq,[U("div",Pq,[x(o,{type:"info",size:"small",onClick:i.handleModalShow},{default:C(()=>[_e("\u8BBE\u7F6E")]),_:1},8,["onClick"]),x(o,{type:"error",size:"small",onClick:i.handleClearHuman},{default:C(()=>[_e("\u6E05\u9664\u6240\u6709")]),_:1},8,["onClick"])]),U("div",Aq,[x(s,Et({class:"nw-vxe-grid",ref:"gridHumanRef"},i.gridHumanOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])]),x(c,{ref:"formModalRef","onUpdate:callback":i.handleModalComplete},null,8,["onUpdate:callback"])],64)}const zT=Pe(Cq,[["render",Rq]]),Mq={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{},setup(e){const t=[{value:"source",label:"Source"},{value:"sourceExpression",label:"Source Expression"},{value:"all",label:"All"}],n=y=>y.source!==void 0?"source":y.sourceExpression!==void 0?"sourceExpression":y.variables==="all"?"all":"",i=y=>y.source!==void 0?y.source:y.sourceExpression!==void 0?y.sourceExpression:"",r=sn(()=>od(xe.value,["camunda:In"]).filter(y=>!y.businessKey)),a=sn(()=>od(xe.value,["camunda:Out"])),o=j(null),s=j(null);j([]),j([]);const c=Nt(xe.value,"netwisd:HumanExps");c.values||(c.values=[]),j(c.values),console.log("netwisdHumanExps==",c);const u=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,showHeader:!1,tableMenu:{},expandConfig:{reserve:!0,showIcon:!1},data:r,columns:[{title:"",field:"expreName",type:"expand",slots:{default:({row:y,$table:E})=>[te("div",{class:"variables-fx",onClick:()=>{E.setRowExpand(y,!E.isExpandByRow(y))}},te("div",{class:"variables-fx-text",title:`${y.source||y.sourceExpression||"<empty>"}:=${y.target||"<empty>"}`},y.source||y.sourceExpression||"<empty>",":=",y.target||"<empty>"),te("div",{class:"variables-fx-control"},y.readOnly==="0"?te(ye,{text:!0,type:"error",onClick:N=>{N.stopPropagation(),f(y)},title:"\u5220\u9664"},{default:()=>te(we,{name:"icon-guanbichuangkou",size:8})}):""))],content:({row:y})=>te("div",{class:"variables-form"},te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u7C7B\u578B"),te("span",{class:"variables-form-item-blank"},te($t,{size:"small",placeholder:"\u9009\u62E9\u7C7B\u578B",options:t,value:n(y),onUpdateValue:E=>{const N=n(y);N!==E&&(delete y[N],E==="all"?y.variables="all":y[E]="")}}))),te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u6E90"),te("span",{class:"variables-form-item-blank"},te(Oe,{size:"small",placeholder:"",value:i(y),onUpdateValue:E=>{const N=n(y);N!=="all"&&(y[N]=E)}}))),te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u76EE\u6807"),te("span",{class:"variables-form-item-blank"},te(Oe,{size:"small",placeholder:"",value:y.target,onUpdateValue:E=>y.target=E}))))}}]}),d=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,showHeader:!1,tableMenu:{},expandConfig:{reserve:!0,showIcon:!1},data:a,columns:[{title:"",field:"expreName",type:"expand",slots:{default:({row:y,$table:E})=>[te("div",{class:"variables-fx",onClick:()=>{E.setRowExpand(y,!E.isExpandByRow(y))}},te("div",{class:"variables-fx-text",title:`${y.source||y.sourceExpression||"<empty>"}:=${y.target||"<empty>"}`},y.source||y.sourceExpression||"<empty>",":=",y.target||"<empty>"),te("div",{class:"variables-fx-control"},te(ye,{text:!0,type:"error",onClick:N=>{N.stopPropagation(),f(y)},title:"\u5220\u9664"},{default:()=>te(we,{name:"icon-guanbichuangkou",size:8})})))],content:({row:y})=>te("div",{class:"variables-form"},te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u7C7B\u578B"),te("span",{class:"variables-form-item-blank"},te($t,{size:"small",placeholder:"\u9009\u62E9\u7C7B\u578B",options:t,value:n(y),onUpdateValue:E=>{const N=n(y);N!==E&&(delete y[N],E==="all"?y.variables="all":y[E]="")}}))),te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u6E90"),te("span",{class:"variables-form-item-blank"},te(Oe,{size:"small",placeholder:"",value:i(y),onUpdateValue:E=>{const N=n(y);N!=="all"&&(y[N]=E)}}))),te("div",{class:"variables-form-item"},te("span",{class:"variables-form-item-label"},"\u76EE\u6807"),te("span",{class:"variables-form-item-blank"},te(Oe,{size:"small",placeholder:"",value:y.target,onUpdateValue:E=>y.target=E}))))}}]}),f=y=>{const E=xe.value.extensionElements.values;E.splice(E.indexOf(y),1)};return{props:e,gridInRef:o,gridOutRef:s,gridInOption:u,gridOutOption:d,handleClearHuman:()=>{c.values.splice(0)},handleCreateIn:()=>{xe.value.extensionElements.values.push(jt("camunda:In",{source:"",target:"",readOnly:"0"}))},handleCreateOut:()=>{xe.value.extensionElements.values.push(jt("camunda:Out",{source:"",target:"",readOnly:"0"}))}}}};const Dq={style:{padding:"0 5px",height:"calc(100%)"}},Oq={style:{display:"flex","font-size":"14px","font-weight":"bold","justify-content":"space-between",padding:"5px 0"}},Iq={style:{height:"calc(50% - 36px)","border-bottom":"1px solid #ccc",overflow:"hidden"}},Nq={style:{display:"flex","font-size":"12px","font-weight":"bold","justify-content":"space-between",padding:"5px 0"}},kq={style:{height:"calc(50% - 36px)","border-bottom":"1px solid #ccc",overflow:"hidden"}};function Bq(e,t,n,i,r,a){const o=D("n-button"),s=D("vxe-grid");return fe(),lt("div",Dq,[U("div",Oq,[U("div",null,[_e(" \u8F93\u5165\u6620\u5C04 "),x(o,{type:"info",size:"small",onClick:i.handleCreateIn},{default:C(()=>[_e(" \u6DFB\u52A0 ")]),_:1},8,["onClick"])])]),U("div",Iq,[x(s,Et({class:"nw-vxe-grid",ref:"gridInRef"},i.gridInOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),U("div",Nq,[U("div",null,[_e(" \u8F93\u51FA\u6620\u5C04 "),x(o,{type:"info",size:"small",onClick:i.handleCreateOut},{default:C(()=>[_e(" \u6DFB\u52A0 ")]),_:1},8,["onClick"])])]),U("div",kq,[x(s,Et({class:"nw-vxe-grid",ref:"gridOutRef"},i.gridOutOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])])}const Lq=Pe(Mq,[["render",Bq]]),$q={name:"bpmn-CallActivity",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NInputNumber:xw,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne,NSwitch:Gt,NSlider:bw,PanelEvent:Da,PickProcess:eW,PickHuman:zT,PickCallActivityVariables:Lq},setup(){return{pickProcessRef:j(null),actionElBusinessObject:xe,isMultiInstance:sn(()=>!!xe.value.loopCharacteristics),setMultiInstance(t){t?xe.value.loopCharacteristics=jt("bpmn:MultiInstanceLoopCharacteristics",{"camunda:collection":"wfAssignee","camunda:elementVariable":"wfLocalAssignee"}):xe.value.loopCharacteristics=null}}}},zq=U("div",null,"\u9009\u62E9\u6D41\u7A0B",-1),Fq={class:"pro-properties-panel-content"},Hq={class:"pro-properties-panel-content"};function jq(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-button"),u=D("pick-process"),d=D("n-switch"),f=D("n-form"),m=D("n-layout"),v=D("n-tab-pane"),g=D("pick-call-activity-variables"),y=D("pick-human"),E=D("panel-event"),N=D("n-tabs");return fe(),Ge(N,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(v,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(m,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=O=>i.actionElBusinessObject.name=O)},null,8,["value"])]),_:1}),x(s,{label:"\u9009\u62E9\u6D41\u7A0B",path:"inputValue","label-style":"align-items: center"},{label:C(()=>[zq,x(c,{style:{"margin-left":"5px"},type:"info",size:"small",onClick:t[1]||(t[1]=O=>i.pickProcessRef.show())},{default:C(()=>[_e("\u9009\u62E9")]),_:1})]),default:C(()=>[x(u,{ref:"pickProcessRef",calledElement:i.actionElBusinessObject.calledElement,"onUpdate:calledElement":t[2]||(t[2]=O=>i.actionElBusinessObject.calledElement=O),childProcdefName:i.actionElBusinessObject.childProcdefName,"onUpdate:childProcdefName":t[3]||(t[3]=O=>i.actionElBusinessObject.childProcdefName=O),calledElementVersion:i.actionElBusinessObject.calledElementVersion,"onUpdate:calledElementVersion":t[4]||(t[4]=O=>i.actionElBusinessObject.calledElementVersion=O),"onUpdate:cmdChildLogProcdefId":t[5]||(t[5]=O=>i.actionElBusinessObject.cmdChildLogProcdefId=O),"onUpdate:ctmChildLogProcdefId":t[6]||(t[6]=O=>i.actionElBusinessObject.ctmChildLogProcdefId=O)},null,8,["calledElement","childProcdefName","calledElementVersion"])]),_:1}),x(s,{label:"\u591A\u4EFB\u52A1\u5B50\u6D41\u7A0B","label-style":"align-items: center;",path:"inputValue"},{default:C(()=>[x(d,{size:"small",value:i.isMultiInstance,"onUpdate:value":i.setMultiInstance},null,8,["value","onUpdate:value"])]),_:1}),x(s,{label:"\u53EF\u67E5\u770B\u4E3B\u6D41\u7A0B\u65E5\u5FD7","label-style":"align-items: center;",path:"inputValue"},{default:C(()=>[x(d,{size:"small",value:i.actionElBusinessObject.isLookOver==="1","onUpdate:value":t[7]||(t[7]=O=>i.actionElBusinessObject.isLookOver=O?"1":"0")},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(v,{name:"button",tab:"\u53D8\u91CF\u6620\u5C04"},{default:C(()=>[U("div",Fq,[x(g)])]),_:1}),x(v,{name:"human",tab:"\u4EBA\u5458"},{default:C(()=>[U("div",Hq,[x(y)])]),_:1}),x(v,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(m,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(E)]),_:1})]),_:1}),x(v,{name:"vars",tab:"\u53D8\u91CF"})]),_:1})}const Vq=Pe($q,[["render",jq]]),Uq=Object.freeze(Object.defineProperty({__proto__:null,default:Vq},Symbol.toStringTag,{value:"Module"})),Wq={name:"bpmn-EndEvent",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne,NSwitch:Gt,PanelEvent:Da},setup(){return{actionElBusinessObject:xe}}};function Gq(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-form"),u=D("n-layout"),d=D("n-tab-pane"),f=D("panel-event"),m=D("n-tabs");return fe(),Ge(m,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(d,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(c,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=v=>i.actionElBusinessObject.name=v)},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(d,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f)]),_:1})]),_:1})]),_:1})}const qq=Pe(Wq,[["render",Gq]]),Kq=Object.freeze(Object.defineProperty({__proto__:null,default:qq},Symbol.toStringTag,{value:"Module"})),Yq={name:"bpmn-ExclusiveGateway",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NSpin:Ne,NSwitch:Gt,PanelEvent:Da},setup(){return{actionElBusinessObject:xe,updateActionElProperties:Ls}}};function Xq(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-form"),u=D("n-layout"),d=D("n-tab-pane"),f=D("panel-event"),m=D("n-tabs");return fe(),Ge(m,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(d,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(c,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=v=>{i.actionElBusinessObject.name=v,i.updateActionElProperties({name:v})})},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(d,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f)]),_:1})]),_:1})]),_:1})}const Zq=Pe(Yq,[["render",Xq]]),Jq=Object.freeze(Object.defineProperty({__proto__:null,default:Zq},Symbol.toStringTag,{value:"Module"})),Qq={name:"bpmn-InclusiveGateway",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NSpin:Ne,NSwitch:Gt,PanelEvent:Da},setup(){return{actionElBusinessObject:xe,updateActionElProperties:Ls}}};function eK(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-form"),u=D("n-layout"),d=D("n-tab-pane"),f=D("panel-event"),m=D("n-tabs");return fe(),Ge(m,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(d,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(c,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=v=>{i.actionElBusinessObject.name=v,i.updateActionElProperties({name:v})})},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(d,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f)]),_:1})]),_:1})]),_:1})}const tK=Pe(Qq,[["render",eK]]),nK=Object.freeze(Object.defineProperty({__proto__:null,default:tK},Symbol.toStringTag,{value:"Module"})),iK={name:"bpmn-ParallelGateway",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NSpin:Ne,NSwitch:Gt,PanelEvent:Da},setup(){return{actionElBusinessObject:xe,updateActionElProperties:Ls}}};function rK(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-form"),u=D("n-layout"),d=D("n-tab-pane"),f=D("panel-event"),m=D("n-tabs");return fe(),Ge(m,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(d,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(c,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=v=>{i.actionElBusinessObject.name=v,i.updateActionElProperties({name:v})})},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(d,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f)]),_:1})]),_:1})]),_:1})}const aK=Pe(iK,[["render",rK]]),oK=Object.freeze(Object.defineProperty({__proto__:null,default:aK},Symbol.toStringTag,{value:"Module"})),sK={components:{NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NwDic:qr},props:{size:{type:String,default:"small"}},setup(e){return{props:e,queryAllDefType:$m}}};function lK(e,t,n,i,r,a){const o=D("nw-dic");return fe(),Ge(o,{size:"small",request:{XHR:i.queryAllDefType,params:{}},response:{dataMethod:s=>s.map(({id:c,procdefTypeName:u})=>({value:c,label:u}))},placeholder:"\u8BF7\u9009\u62E9\u95E8\u6237"},null,8,["request","response"])}const cK=Pe(sK,[["render",lK]]),uK={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NwPickCpts:ww},props:{},setup(e){const t=j(!1),n=j(null),i=j(null),r=j(null),a=j([]),o=j([]),s=j([]),c=j({}),u=j(""),d=Nt(xe.value,"netwisd:Form");d.values||(d.values=[]),j(d.values),console.log("netwisdForms==",d);const f=j([]),m=()=>{request({url:"/main/dictTree/childList/MODEL_CLASSIFY",method:"get"}).then(W=>{o.value=[{dictName:"\u6240\u6709",kids:W}],Mn().then(()=>{i.value.setAllTreeExpand(!0)})})},v=()=>{f.value=[],s.value=[],request({url:"/main/form/page",method:"post",data:{page:{current:1,size:999}}}).then(W=>{s.value=W.records,f.value=s.value.filter(Q=>d.values.find(pe=>pe.id===Q.id))})},g=j({rowId:"key",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!0,cellCalssName:"",treeConfig:{indent:15,accordion:!1,line:!0,expandAll:!0,children:"kids"},data:o,columns:[{treeNode:!0,slots:{default:({row:W})=>[te("div",{style:"display:flex;justify-content: space-between;cursor: pointer",onClick:()=>{W.id?c.value={modelTypeId:W.id}:c.value={},u.value=W.id||""},class:{groupFormActive:u.value===(W.id||"")}},te("span",null,W.dictName),te("div",{style:"display:none"},te(ye,{text:!0,size:"small",type:"error"},{default:()=>te(we,{name:"icon-guanbichuangkou",size:8,color:"rgb(103, 194, 58)"})}),te(ye,{text:!0,size:"small",type:"error"},{default:()=>te(we,{name:"icon-guanbichuangkou",size:8,color:"rgb(103, 194, 58)"})})))]}}]}),y=j({rowId:"id",rowKey:!1,height:"100%",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:sn(()=>u.value?s.value.filter(W=>W.modelTypeId===u.value):s.value),columns:[{title:"\u8868\u5355\u540D\u79F0",field:"formNameCh",width:130},{title:"\u8868\u5355CODE",field:"formName"},{title:"\u6A21\u578B\u5206\u7C7B",field:"modelTypeName"},{field:"startEnable",title:"\u64CD\u4F5C",width:70,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:W})=>{const Q=f.value.indexOf(W);return Q>=0?[te(ye,{text:!0,type:"success",onClick:()=>{f.value.splice(Q,1)},style:"margin-right: 5px;"},{default:()=>"\u5DF2\u9009\u62E9"})]:[te(ye,{text:!0,color:"#1890ff",onClick:()=>{f.value.push(W)},style:"margin-right: 5px;"},{default:()=>"\u9009\u62E9"})]}}}]}),E=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:d.values,columns:[{title:"\u8868\u5355\u5B57\u6BB5",field:"formNameCh",slots:{default:({row:W})=>[te("div",{style:"display: flex;justify-content: space-between;"},te("div",null,W.nameCh," (",W.nameCh,")"),te("div",null))]}}]}),N=()=>{t.value=!0,m(),c.value={},v()},O=()=>{console.log("selectedFor===",f.value),xe.value.extensionElements,d.values.splice(0),d.values.push(...f.value.map(W=>jt("netwisd:Form",{id:W.id,formName:W.formName,formNameCh:W.formNameCh,pageUrl:W.formType===3||W.formType===4?W.pageUrl:`/html/model/vue-runtime.html?formId=${W.id}`}))),w(d.values),t.value=!1},T=()=>{d.values.splice(0),w(d.values),n.value.reloadData(d.values)},w=(W,Q)=>{sV(["bpmn:UserTask"]).forEach(pe=>{const oe=Nt(pe,"netwisd:Form");oe.id=Q.formId,oe.formName=Q.formName,oe.formNameCh=Q.formNameCh,oe.pageUrl=Q.formUrl,oe.cptId=Q.id,oe.cptFullName=Q.fullName,oe.values&&oe.values.splice(0)})},R=(W,Q,pe)=>{if(Q)for(var oe in Q){var be=pe+"."+oe;let ke={name:be,nameCh:Q[oe].description,javaType:Q[oe].type};W.value.push(ke),Q[oe].type==="array"&&Q[oe].items&&R(W,Q[oe].items.properties,be),Q[oe].type==="object"&&Q[oe].properties&&R(W,Q[oe].properties,be)}},L=async W=>{await UB(W).then(Q=>{let pe=JSON.parse(Q.isTransform===1?Q.interfaceJsonSchema:Q.jsonSchema);console.log(pe),a.value=[];for(var oe in pe){let Yt={name:oe,nameCh:pe[oe].description,javaType:pe[oe].type};if(a.value.push(Yt),pe[oe].type==="array"){let re=pe[oe].name;pe[re].items&&pe[re].items.properties&&R(a,pe[re].items.properties,oe)}if(pe[oe].type==="object"){let re=pe[oe].name;pe[re].properties&&R(a,pe[re].properties,oe)}}console.log(a),console.log(a.value),d.values.splice(0);for(var be in a.value){var ke=jt("netwisd:Field",{modelFieldId:1,nameCh:a.value[be].nameCh,javaName:a.value[be].name,javaType:a.value[be].javaType,isOrm:"1"});d.values.push(ke)}})},H=j(d.formName),$=()=>{H.value=Nt(Ma(),"netwisd:Form").cptFullName};return{cptName:H,setCptName:$,async cptsCallback(W){d.values.splice(0),d.id=W.formId,d.formName=W.formName,d.formNameCh=W.formNameCh,d.pageUrl=W.formUrl,d.cptId=W.id,d.cptFullName=W.fullName,w(d,W),await L(W.formId),n.value.reloadData(d.values),$()},props:e,gridSelectedRef:n,gridFormGroupRef:i,gridFormRef:r,gridOption:y,gridFormGroupOption:g,gridSelectedOption:E,visible:t,handleModalShow:N,handleModalComplete:O,handleClearForm:T,updateShow(W){}}}};const pK={style:{padding:"5px",height:"calc(100% - 10px)"}},dK={style:{display:"flex","justify-content":"space-between",padding:"5px 0"}},fK={style:{height:"calc(100% - 46px)","border-bottom":"1px solid #ccc",overflow:"hidden"}},hK=U("div",null," \u9009\u62E9\u8868\u5355 ",-1),mK={class:"nw-modal-action"};function vK(e,t,n,i,r,a){const o=D("NwPickCpts"),s=D("vxe-grid"),c=D("nw-icon"),u=D("n-layout-sider"),d=D("n-layout-content"),f=D("n-layout"),m=D("n-button"),v=D("n-modal");return fe(),lt(on,null,[U("div",pK,[U("div",dK,[x(o,{fullName:i.cptName,onCallback:i.cptsCallback},null,8,["fullName","onCallback"])]),U("div",fK,[x(s,Et({class:"nw-vxe-grid",ref:"gridSelectedRef"},i.gridSelectedOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])]),x(v,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=g=>i.visible=g),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0,"on-after-enter":i.updateShow},{icon:C(()=>[x(c,{name:"icon-y-form",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[hK]),default:C(()=>[x(f,{"has-sider":"",class:"nw-modal-layout",style:{height:"500px"}},{default:C(()=>[x(u,{bordered:"",width:170,class:"nw-modal-layout-sider"}),x(d,null,{default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridOption),null,16)]),_:1})]),_:1}),U("div",mK,[x(m,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(m,{size:"small",onClick:t[0]||(t[0]=g=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show","on-after-enter"])],64)}const gK=Pe(uK,[["render",vK]]),yK={name:"bpmn-Process",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NTreeSelect:DN,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne,PickProcdefType:cK,PickForm:gK,PanelEvent:Da,NwIconPick:ON},setup(){const e=j([]);return(()=>{$m().then(n=>{e.value=n})})(),{actionElBusinessObject:xe,queryAllDefType:$m,typeTree:e,updateProcdefType(n,i){xe.value.procdefTypeId=n,xe.value.procdefTypeName=i.procdefTypeName},updateProcdefKey(n){(n===""||n.indexOf("_")<0&&/[\w\u4E00-\u9FA5]+$/.test(n))&&(xe.value.id=n)}}}},_K={class:"pro-properties-panel-content"};function xK(e,t,n,i,r,a){const o=D("n-tree-select"),s=D("n-form-item"),c=D("n-input"),u=D("nw-icon-pick"),d=D("n-form"),f=D("n-layout"),m=D("n-tab-pane"),v=D("panel-event"),g=D("pick-form"),y=D("n-tabs");return fe(),Ge(y,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(m,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(f,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(d,{model:i.actionElBusinessObject,ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u6D41\u7A0B\u5206\u7C7B",path:"inputValue"},{default:C(()=>[x(o,{size:"small",options:i.typeTree,value:i.actionElBusinessObject.procdefTypeId,"onUpdate:value":i.updateProcdefType,"children-field":"kids","key-field":"id","label-field":"procdefTypeName"},null,8,["options","value","onUpdate:value"])]),_:1}),x(s,{label:"\u6D41\u7A0B\u5B9A\u4E49KEY",path:"inputValue"},{default:C(()=>[x(c,{placeholder:"",value:i.actionElBusinessObject.id,"onUpdate:value":t[0]||(t[0]=E=>i.updateProcdefKey(E))},null,8,["value"])]),_:1}),x(s,{label:"\u7B80\u79F0",path:"inputValue"},{default:C(()=>[x(c,{placeholder:"",value:i.actionElBusinessObject.procdefNameAbbr,"onUpdate:value":t[1]||(t[1]=E=>i.actionElBusinessObject.procdefNameAbbr=E)},null,8,["value"])]),_:1}),x(s,{label:"\u6D41\u7A0B\u5B9A\u4E49\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(c,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[2]||(t[2]=E=>i.actionElBusinessObject.name=E)},null,8,["value"])]),_:1}),x(s,{label:"\u7248\u672C\u6807\u8BC6",path:"inputValue"},{default:C(()=>[x(c,{placeholder:"",value:i.actionElBusinessObject.versionTag,"onUpdate:value":t[3]||(t[3]=E=>i.actionElBusinessObject.versionTag=E)},null,8,["value"])]),_:1}),x(s,{label:"\u56FE\u6807",path:"inputValue"},{default:C(()=>[x(u,{value:i.actionElBusinessObject.icon,"onUpdate:value":t[4]||(t[4]=E=>i.actionElBusinessObject.icon=E)},null,8,["value"])]),_:1}),x(s,{label:"\u5907\u6CE8",path:"inputValue"},{default:C(()=>[x(c,{type:"textarea",placeholder:"",value:i.actionElBusinessObject.remark,"onUpdate:value":t[5]||(t[5]=E=>i.actionElBusinessObject.remark=E)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),x(m,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(f,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(v)]),_:1})]),_:1}),x(m,{name:"form",tab:"\u8868\u5355"},{default:C(()=>[U("div",_K,[x(g)])]),_:1})]),_:1})}const bK=Pe(yK,[["render",xK]]),EK=Object.freeze(Object.defineProperty({__proto__:null,default:bK},Symbol.toStringTag,{value:"Module"})),wK={id:"1",name:"root1",type:3,children:[{id:"11",name:"\u9886\u5BFC",type:2,children:[{id:"111",name:"\u673A\u6784\u8FC7\u6EE4",type:5,children:[{type:"group",children:[{type:"exp",text:"get"},{type:"group",children:[{type:"exp",text:"get"}]}]},{type:"logic",text:">="},{type:"number",text:"3"}]},{id:"112",name:"\u673A\u6784\u8FC7\u6EE42",type:5,children:[]},{id:"113",name:"\u673A\u6784\u8FC7\u6EE43",type:5,children:[]},{id:"114",name:"\u673A\u6784\u8FC7\u6EE44",type:5,children:[]}]},{id:"12",name:"\u804C\u5458",type:3,children:[{id:"121",name:"\u5C97\u4F4D\u8FC7\u6EE4",type:5,children:[]},{id:"122",name:"\u804C\u4F4D\u8FC7\u6EE4",type:5,children:[]}]},{id:"13",name:"\u5176\u4ED6\u4EBA\u5458",type:3,children:[{id:"131",name:"\u6761\u4EF61",type:5,children:[]},{id:"132",name:"\u6761\u4EF62",type:5,children:[]}]}]},SK=()=>xe.value.id,FT=(e,t="code")=>e.type==="group"?`(${e.children.map(i=>FT(i,t)).join(" ")})`:t==="code"?e.code:e.text,Of=(e,t="code")=>{if(e.type===5)return`(${e.children.map(i=>FT(i,t)).join(" ")})`;{let n="";return e.type===2?n=" || ":n=" && ",e.children?`(${e.children.map(r=>Of(r,t)).join(n)})`:1}},$r=j(null),Ns=j({}),ma=j(null);Li(ma,e=>{e&&$r.value.drawn()},{deep:!0});const zr=j(null),_i=j(-1),CK=j(null),Ad=()=>{ma.value=null,zr.value=null,_i.value=-1,CK.value=null},TK=e=>xi.exports.get(PK.find(t=>t.value===e),"label","-"),PK=[{value:-1,label:"UserExpressionVO"},{value:0,label:"\u6807\u51C6(\u5185\u7F6E)"},{value:1,label:"Boolean"},{value:2,label:"String"},{value:3,label:"Integer"},{value:4,label:"Long"},{value:5,label:"Double"},{value:6,label:"List"}],AK=e=>xi.exports.get(RK.find(t=>t.value===e),"label","-"),RK=[{value:"boolean",label:"Boolean"},{value:"string",label:"String"},{value:"Integer",label:"Integer"},{value:"long",label:"Long"},{value:"double",label:"Double"},{value:"date",label:"Date"},{value:"list",label:"List"}],MK={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{value:{type:Object,default:()=>({})}},setup(e){return{expStr:sn(()=>Of(e.value))}}};const DK={class:"express-view"};function OK(e,t,n,i,r,a){return fe(),lt("div",DK,pn(i.expStr),1)}const HT=Pe(MK,[["render",OK],["__scopeId","data-v-edd42168"]]);class Os{constructor(t,n={}){this.option={duration:450,dx:104,dy:60,...n},this.render={exp:()=>"",...n.render||{}},this.eventBus=this.option.eventBus||{createNode:()=>{},deleteNode:()=>{}},this.el=t,this.contianerD3Dom,this.svgD3Dom,this.nodeD3Dom,this.actionD3Dom,this.setDiagonal("Smooth"),this.setLayout("tree-fat"),this.contianerD3Dom=Ja(t),this.contianerD3Dom.html(""),this.contianerD3Dom.style("flex","1").style("position","relative").style("height","100%").style("width","100%"),this.coordD3Dom=this.contianerD3Dom.append("div").style("position","absolute").style("left","50%").style("top","50%"),this.svgD3Dom=this.coordD3Dom.append("svg"),this.svgD3Dom.style("position","absolute").style("left","0").style("top","0").style("overflow","visible").style("user-select","none"),this.linkD3Dom=this.svgD3Dom.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",1).attr("stroke-width",1.5),this.guideLink=this.svgD3Dom.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.8).attr("stroke-width",1.5),this.guideBox=this.svgD3Dom.append("g").attr("fill","none").attr("stroke","#999").attr("stroke-opacity",.8).attr("stroke-width",1.5).append("rect").classed("graph-edit-graph-box-action",!0).style("fill","none").style("stroke","#ff9800").style("stroke-width","3").style("stroke-dasharray","10").style("stroke-dashoffset","0").style("display","none"),this.nodeD3Dom=this.coordD3Dom.append("div"),this.nodeD3Dom.style("position","absolute").style("left","0").style("top","0").style("height","100%").style("width","100%").style("user-select","none"),this.actionD3Dom=this.coordD3Dom.append("div"),this.actionD3Dom.style("position","absolute").style("left","0").style("top","0").style("height","100%").style("width","100%").style("user-select","none"),this.dragEl=null,this.guideLinkData={},this.guideNodeData={};const i=this;this.drag=W2().on("start",function(r,a){a.data.isHide=!0,i.drawn()}).on("drag",(...r)=>{console.log("drag",r)}).on("end",function(r,a){a.data.isHide=!1,i.drawn()})}init(){}setDiagonal(t){switch(t){case"Line":this.diagonal=({source:n,target:i})=>{const r={x:(i.x+n.x)/2,y:(i.y+n.y)/2},a={x:(r.x+n.x)/2,y:(r.y+n.y)/2},o={x:(i.x+r.x)/2,y:(i.y+r.y)/2};return`M${n.x} ${n.y}
                    C${n.x} ${n.y} ${a.x} ${a.y} ${a.x} ${a.y}
                    C${a.x} ${a.y} ${r.x} ${r.y} ${r.x} ${r.y}
                    C${r.x} ${r.y} ${o.x} ${o.y} ${o.x} ${o.y}
                    C${o.x} ${o.y} ${i.x} ${i.y} ${i.x} ${i.y}
                    `};break;case"RightAngle":this.diagonal=({source:n,target:i})=>{const r={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return`M${n.x} ${n.y}
                    C${n.x} ${n.y} ${r.x} ${n.y} ${r.x} ${n.y}
                    C${r.x} ${n.y} ${r.x} ${r.y} ${r.x} ${r.y}
                    C${r.x} ${r.y} ${r.x} ${i.y} ${r.x} ${i.y}
                    C${r.x} ${i.y} ${i.x} ${i.y} ${i.x} ${i.y}
                    `};break;case"Smooth":this.diagonal=({source:n,target:i})=>{const r=Math.abs(i.x-n.x),a={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return`M${n.x} ${n.y}
                    C${n.x} ${n.y} ${n.x} ${n.y} ${n.x} ${n.y}
                    C${n.x+r/3} ${n.y} ${a.x} ${a.y} ${a.x} ${a.y}
                    C${a.x} ${a.y} ${i.x-r/3} ${i.y} ${i.x} ${i.y}
                    C${i.x} ${i.y} ${i.x} ${i.y} ${i.x} ${i.y}
                    `};break}}setLayout(t){this.layout=t,t==="tree-thin"?this.treeFactory=Cw().nodeSize([this.option.dy,this.option.dx]).separation((n,i)=>{if(this.layout==="tree-thin")return 1;const r=n.children,a=i.children,o=r&&r.length,s=a&&a.length;if(o^s){if(o)return Math.floor(r.length/2)+1;if(s)return Math.floor(a.length/2)+1}else return 1}):t==="tree-fat"?this.treeFactory=n=>{Vx().nodeSize([this.option.dy,this.option.dx]).separation(()=>1)(n),n.eachBefore(i=>{console.log("===node===",i,i.y,this.option.dx,i.depth),i.y=this.option.dx*i.depth})}:t==="cluster"&&(this.treeFactory=Vx().nodeSize([this.option.dy,this.option.dx]).separation(()=>1))}renderActionElBox(){this.editExp&&this.editExpDom?this.guideBox.attr("width",this.editExpDom.clientWidth).attr("height",26).attr("x",this.editExp.x).attr("y",this.editExp.y).style("display",""):this.guideBox.style("display","none")}loadData(t){this.dataCache=t,this.reload()}reload(){this.treeRoot=Lv(this.dataCache,t=>t.type!==5?t.children:null),this.treeRoot.x0=0,this.treeRoot.y0=0,this.treeRoot.descendants().forEach((t,n)=>{t.CACHE_children=t.children,t.id=t.data.id})}drawnGuide(){}drawn(t=this.treeRoot){this.transition=this.coordD3Dom.transition().duration(this.option.duration).on("end",()=>{}),this.nodes=this.treeRoot.descendants().reverse(),this.links=this.treeRoot.links(),this.treeFactory(this.treeRoot),this.treeRoot.eachBefore(m=>{const v=m.y;m.y=m.x,m.x=v});const{top:n,bottom:i,left:r,right:a}=this.getBoundNode(),o=a.x-r.x,s=i.y- -n.y;n.y,-i.y,this.treeRoot.eachBefore(m=>{m.x=m.x-o/2,m.y=m.y-s/2});const c=this.nodeD3Dom.selectAll("div").data(this.nodes,m=>m.id);c.call(IK,this);const u=c.enter().append("div").classed("node",!0).style("transform",m=>`translate(${t.x0}px,${t.y0}px)`).style("opacity",0).on("click",(m,v)=>{v.data.type===5?(this.editExp=v.data,this.eventBus.onStartEditExp(v.data)):(v.children=v.children?null:v.CACHE_children,this.drawn(v))});u.call(NK,this),c.merge(u).transition(this.transition).style("opacity",1).style("transform",m=>`translate(${m.x}px,${m.y}px)`),c.exit().transition(this.transition).remove().style("opacity",0).style("transform",m=>`translate(${t.x}px,${t.y}px)`);const d=this.linkD3Dom.selectAll("path").data(this.links,m=>m.target.id).style("display",m=>m.target.data.isHide?"none":""),f=d.enter().append("path").attr("d",m=>{const v={x:t.x0,y:t.y0};return this.diagonal({source:v,target:v})}).style("display",m=>m.target.data.isHide?"none":"");d.merge(f).transition(this.transition).attr("d",this.diagonal),d.exit().transition(this.transition).remove().attr("d",m=>{const v={x:t.x,y:t.y};return this.diagonal({source:v,target:v})}),this.treeRoot.eachBefore(m=>{m.x0=m.x,m.y0=m.y})}getBoundNode(){let t=this.treeRoot,n=this.treeRoot,i=this.treeRoot,r=this.treeRoot;return this.treeRoot.eachBefore(a=>{a.y<t.y&&(t=a),a.y>n.y&&(n=a),a.x<i.x&&(i=a),a.x>r.x&&(r=a)}),{top:t,bottom:n,left:i,right:r}}}Cs(Os,"cache"),Cs(Os,"tagetCache"),Cs(Os,"dragEnabled",!1),Cs(Os,"targetEnabled",!1),Cs(Os,"zIndex",1);const IK=function(e,t){e.classed("node-hide",a=>!!a.data.isHide),e.classed("action",a=>t.editExp===a.data);const n=e.select(".node-body");n.each(function(a,o,s){if(a.data.type===5){const c=t.render.exp(a.data);Ja(this).select(".node-exp-text").classed("show",t.layout==="tree-fat"||t.layout==="cluster").attr("title",c).html(()=>c)}else Ja(this).select(".node-exp-text").remove()});const i=n.select(".node-action-body"),r=i.select(".node-menu");jT(r,t),i.select(".node-body-icon").classed("node-body-jiaoji",a=>a.data.type===3).classed("node-body-bingji",a=>a.data.type===2).classed("node-body-expression",a=>a.data.type===5).html(a=>`
    <svg class="icon" aria-hidden="true" >
        <use xlink:href="#${VT(a.data.type)}"></use>
    </svg>
    `),n.select(".node-body-text").text(a=>a.data.name)},NK=function(e,t){e.html(""),e.classed("node-hide",o=>!!o.data.isHide),e.classed("action",o=>t.editExp===o.data);const n=e.append("x.div").classed("node-body",!0);n.each(function(o,s,c){if(o.data.type===5){const u=t.render.exp(o.data);Ja(this).append("exp.div").classed("node-exp-text",!0).classed("show",t.layout==="tree-fat"||t.layout==="cluster").attr("title",u).html(()=>u).on("click",function(d,f){d.stopPropagation(),t.editExp=f.data,t.eventBus.onStartEditExp(f.data)})}});const i=n.append("node.div").style("display","flex").style("flex-direction","column").style("align-items","center").classed("node-action-body",!0),r=i.append("node.div").classed("node-menu",!0);jT(r,t),i.append("node.div").classed("node-body-icon",!0).classed("node-body-jiaoji",o=>o.data.type===3).classed("node-body-bingji",o=>o.data.type===2).classed("node-body-expression",o=>o.data.type===5).html(o=>`
    <svg class="icon" aria-hidden="true" >
        <use xlink:href="#${VT(o.data.type)}"></use>
    </svg>
    `).each(function(o,s,c){o.data.type}),n.append("node.div").classed("node-body-text",!0).text(o=>o.data.name)},jT=(e,t)=>{e.html(""),e.append("node.div").classed("btn",!0).classed("btn-l",!0).style("background","#009688").classed("btn-hide",n=>n.data.type===3).html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-y-jiaoji"></use>
        </svg>
    `).on("click",function(n,i,...r){console.log(this,n,i,...r),n.stopPropagation(),i.data.type===2?i.data.type=3:(i.data.type=3,i.data.name="",i.data.children=[]),t.reload(),t.drawn(i),t.eventBus.onChange("edit",i.data)}),e.append("node.div").classed("btn",!0).classed("btn-l",!0).style("background","#2196f3").classed("btn-hide",n=>n.data.type!==3).html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-y-bingji"></use>
        </svg>
    `).on("click",(n,i)=>{n.stopPropagation(),i.data.type===3?i.data.type=2:(i.data.type=2,i.data.name="",i.data.children=[]),t.reload(),t.drawn(i),t.eventBus.onChange("edit",i.data)}),e.append("node.div").classed("btn",!0).classed("btn-r",!0).style("background","#2196f3").classed("btn-hide",n=>n.data.type!==5).html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-y-bingji"></use>
        </svg>
    `).on("click",(n,i)=>{n.stopPropagation(),i.data.type===3?i.data.type=2:(i.data.type=2,i.data.name="",i.data.children=[]),t.reload(),t.drawn(i),t.eventBus.onChange("edit",i.data)}),e.append("node.div").classed("btn",!0).classed("btn-r",!0).style("background","#9c27b0").classed("btn-hide",n=>n.data.type===5).html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-y-expression"></use>
        </svg>
    `).on("click",(n,i)=>{n.stopPropagation(),i.data.type=5,i.data.name="",i.data.children=[],t.reload(),t.drawn(i),t.eventBus.onChange("edit",i.data)}),e.append("node.div").classed("btn",!0).classed("btn-u",!0).classed("btn-hide",n=>n.data.type===5).style("background","#607d8b").attr("title","\u6DFB\u52A0\u5B50").html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-y-add"></use>
        </svg>
    `).on("click",(n,i)=>{n.stopPropagation(),i.data.children||(i.data.children=[]);const r={id:`${new Date().getTime()}`,name:"",type:5,children:[]};i.data.children.push(r),t.eventBus.onCreated(r,i.data),t.reload(),t.drawn(i),t.eventBus.onChange("create",r)}),e.append("node.div").classed("btn",!0).classed("btn-u",!0).classed("btn-hide",n=>n.data.type!==5).style("background","#607d8b").attr("title","\u7F16\u8F91\u8868\u8FBE\u5F0F").html(n=>`
        <svg class="icon" aria-hidden="true" >
            <use xlink:href="#icon-n-n-calc"></use>
        </svg>
    `).on("click",function(n,i){n.stopPropagation(),t.editExp=i.data,t.eventBus.onStartEditExp(i.data)}),e.append("node.div").classed("btn",!0).classed("btn-d",!0).attr("title","\u5220\u9664").html(`
    <svg class="icon" aria-hidden="true" >
        <use xlink:href="#icon-n-y-shanchu"></use>
    </svg>
    `).on("click",(n,i)=>{n.stopPropagation(),console.log("delete",i);const r=i.parent.data.children.findIndex(a=>a.id===i.id);i.parent.data.children.splice(r,1),t.reload(),t.drawn(i),t.eventBus.onChange("delete",i.data)})},VT=function(e){let t="";switch(e){case 2:t="icon-n-y-bingji";break;case 3:t="icon-n-y-jiaoji";break;case 5:t="icon-n-y-expression";break}return t},kK={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{value:{type:Object,default:()=>({})}},setup(e){return{setLayout(t){$r.value.setLayout(t),$r.value.drawn()},setDiagonal(t){$r.value.setDiagonal(t),$r.value.drawn()},cancelEdit(){Ad(),$r.value.editExp=null,$r.value.drawn()}}}};const UT=e=>(mn("data-v-7be59938"),e=e(),vn(),e),BK={class:"graph-tools"},LK={class:"graph-tools-left"},$K=UT(()=>U("div",{class:"graph-tools-hr"},"\xA0",-1)),zK=UT(()=>U("div",{class:"graph-tools-hr"},"\xA0",-1)),FK={class:"graph-tools-right"};function HK(e,t,n,i,r,a){const o=D("nw-icon");return fe(),lt("div",BK,[U("div",LK,[U("div",{class:"graph-tools-btn",title:"\u6811\u5F62\uFF08\u8BE6\u7EC6\uFF09",onClick:t[0]||(t[0]=s=>i.setLayout("tree-fat"))},[x(o,{name:"icon-n-y-tree-fat",size:20})]),U("div",{class:"graph-tools-btn",title:"\u7C07\u5E03\u5C40",onClick:t[1]||(t[1]=s=>i.setLayout("cluster"))},[x(o,{name:"icon-n-y-layout-cluster",size:20})]),U("div",{class:"graph-tools-btn",title:"\u6811\u5F62\uFF08\u7B80\u5355\uFF09",onClick:t[2]||(t[2]=s=>i.setLayout("tree-thin"))},[x(o,{name:"icon-n-y-layout-tree-thin",size:20})]),$K,U("div",{class:"graph-tools-btn",title:"\u76F4\u7EBF",onClick:t[3]||(t[3]=s=>i.setDiagonal("Line"))},[x(o,{name:"icon-n-y-xianduan",size:18})]),U("div",{class:"graph-tools-btn",title:"\u6298\u7EBF",onClick:t[4]||(t[4]=s=>i.setDiagonal("RightAngle"))},[x(o,{name:"icon-n-y-zhexian",size:18})]),U("div",{class:"graph-tools-btn",title:"\u66F2\u7EBF",onClick:t[5]||(t[5]=s=>i.setDiagonal("Smooth"))},[x(o,{name:"icon-n-y-quxian",size:18})]),zK]),U("div",FK,[U("div",{class:"graph-tools-btn",title:"\u53D6\u6D88\u7F16\u8F91\u8868\u8FBE\u5F0F",onClick:t[6]||(t[6]=(...s)=>i.cancelEdit&&i.cancelEdit(...s))},[x(o,{name:"icon-n-y-cancel-edit",size:18})])])])}const jK=Pe(kK,[["render",HK],["__scopeId","data-v-7be59938"]]),VK=50,UK=124;Cw().nodeSize([VK,UK]);Tw().x(e=>e.y).y(e=>e.x);Tw().x(e=>e.x).y(e=>e.y);const WK={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,ExpressText:HT,GraphTools:jK},props:{},setup(e){let t;const n=j(null);return{expressionCache:Ns,graph:n,render:()=>{$r.value=t=new Os(n.value,{render:{exp:r=>Of(r,"text")},eventBus:{onCreated(){},onChange(r,a,o,s){r==="edit"?a===ma.value&&(Ad(),$r.value.editExp=null):r==="delete"&&a===ma.value&&(Ad(),$r.value.editExp=null)},onStartEditExp(r){ma.value=r,zr.value=ma.value,_i.value=ma.value.children.length-1}}}),t.loadData(Ns.value),t.drawn()},data:wK,reDrawn(){t.drawn()}}}};const GK={class:"graph-edit"},qK={class:"graph-edit-tools"},KK={ref:"graph",class:"graph-edit-viewer"},YK={class:"graph-edit-footer"},XK={class:"legends"},ZK={class:"legend"},JK={class:"legend-icon",style:{background:"#009688"}},QK={class:"legend"},eY={class:"legend-icon",style:{background:"#2196f3"}},tY={class:"legend"},nY={class:"legend-icon",style:{background:"#9c27b0"}};function iY(e,t,n,i,r,a){const o=D("graph-tools"),s=D("nw-icon");return fe(),lt("div",GK,[U("div",qK,[x(o)]),U("div",KK,null,512),U("div",YK,[U("div",XK,[U("div",ZK,[U("div",JK,[x(s,{name:"icon-n-y-jiaoji",size:16,color:"#fff"})]),_e(" \u4EA4\u96C6( and ) ")]),U("div",QK,[U("div",eY,[x(s,{name:"icon-n-y-bingji",size:16,color:"#fff"})]),_e(" \u5E76\u96C6( or ) ")]),U("div",tY,[U("div",nY,[x(s,{name:"icon-n-y-expression",size:16,color:"#fff"})]),_e(" \u8868\u8FBE\u5F0F ")])])])])}const rY=Pe(WK,[["render",iY]]),aY={And:{Node:{type:"logic",text:"and",code:"&&"},Fun:()=>{}},Or:{Node:{type:"logic",text:"or",code:"||"}},In:{Node:{type:"logic",text:"in",code:"in"}},"Not in":{Node:{type:"logic",text:"not in",code:"not in"}},"!":{Node:{type:"logic",text:"!",code:"!"}},"!=":{Node:{type:"logic",text:"!=",code:"!="}},"<":{Node:{type:"logic",text:"<",code:"<"}},"<=":{Node:{type:"logic",text:"<=",code:"<="}},">":{Node:{type:"logic",text:">",code:">"}},">=":{Node:{type:"logic",text:">=",code:">="}},"=":{Node:{type:"logic",text:"==",code:"=="}},"( )":{Node:{type:"group",children:[]}},"+":{Node:{type:"operation",text:"+",code:"+"}},"-":{Node:{type:"operation",text:"-",code:"-"}},x:{Node:{type:"operation",text:"\xD7",code:"*"}},"/":{Node:{type:"operation",text:"\xF7",code:"/"}},String:{Node:{type:"String",text:"",code:""}},Number:{Node:{type:"Number",text:"",code:""}},Array:{Node:{type:"Array",text:"[]",code:"[]"}}},oY={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},setup(e,t){const n=j([]),i=j(null),r=j([]),a=j({}),o=j(!1),s=j(!1),c=j(null),u=j(null),d=y=>{o.value=!0,FB(y.id).then(E=>{o.value=!1,E.fieldList.forEach(N=>{N.childTableSetKey&&(N.javaName=`${N.childTableSetKey}.${N.javaName}`)}),r.value=E.fieldList})},f=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n,rowClassName:({row:y})=>i.value&&y.id===i.value.id?"form-active":"",columns:[{title:"\u8868\u5355\u540D\u79F0",field:"formNameCh"},{field:"formName",title:"\u8868\u5355\u7F16\u7801"},{field:"",title:"\u64CD\u4F5C",width:120,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:y})=>[te(ye,{text:!0,size:"small",color:"#1890ff",onClick:()=>{i.value=y,console.log("row",y),a.value[y.id]={el:y,fields:[]},d(y)},style:"margin-right: 5px;"},{default:()=>"\u9009\u62E9"})]}}]}),m=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:r,columns:[{field:"nameCh",title:"\u5B57\u6BB5\u540D\u79F0",width:150},{field:"javaName",title:"\u5B57\u6BB5\u7F16\u7801"},{field:"dbType",title:"\u7C7B\u578B",width:70,showOverflow:!0},{field:"startEnable",title:"\u64CD\u4F5C",width:70,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:y})=>[te(ye,{size:"small",color:"#1890ff",onClick:()=>{console.log("=====actionForm.value====",i.value,y),t.emit("callback",`${i.value.formName}.${y.javaName}`,`${i.value.formNameCh} \u2192 ${y.nameCh}`,`${i.value.id}.${y.id}`),s.value=!1},style:"margin-right: 5px;"},{default:()=>"\u9009\u62E9"})]}}]});return{props:e,isLoading:o,gridFormRef:c,gridFormItemRef:u,gridFormOption:f,gridFormItemOption:m,actionForm:i,visible:s,show(y=[]){console.log("====selectedForms====",y),i.value=null,s.value=!0,n.value=Nt(Ma(),"netwisd:Forms").values},handleModalComplete:()=>{const y=Object.values(a.value).map(({el:E,fields:N=[]})=>(console.log("====fields=====",N),jt("netwisd:Form",{id:E.id,formName:E.formName,formNameCh:E.formNameCh,values:N.filter(O=>O.isSelected).map(O=>jt("netwisd:Field",{modelFieldId:O.id,nameCh:O.nameCh,javaName:O.javaName,dbType:O.dbType,powerCode:O.powerCode,isOrm:`${+O.isOrm}`,isMoreRow:"0"}))})));t.emit("update:callback",y),s.value=!1},handleClearForm:()=>{},sizeChange(){c.value.refreshColumn(),u.value.refreshColumn()}}}};const Cy=e=>(mn("data-v-944491f7"),e=e(),vn(),e),sY=Cy(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),lY=Cy(()=>U("div",null," \u8868\u5355\u5B57\u6BB5\u9009\u62E9 ",-1)),cY=Cy(()=>U("div",{class:"nw-modal-table-title"}," \u8868\u5355\u5217\u8868 ",-1)),uY={class:"nw-modal-table-title"},pY={key:1,class:"unselect-form"};function dY(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("d-splitter-pane"),u=D("n-spin"),d=D("d-splitter"),f=D("n-modal");return fe(),Ge(f,{class:"nw-modal",show:i.visible,"onUpdate:show":t[0]||(t[0]=m=>i.visible=m),preset:"dialog",style:{width:"900px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[sY,x(o,{name:"icon-y-form",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[lY]),default:C(()=>[x(d,{class:"nw-layout-content-splitter",splitBarSize:"1px",style:{height:"600px"}},{DSplitterPane:C(()=>[x(c,{class:"splitter-bpmn-view",size:"400px",minSize:"330px",onSizeChange:i.sizeChange},{default:C(()=>[cY,x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridFormOption),null,16)]),_:1},8,["onSizeChange"]),x(c,{class:"splitter-bpmn-attrs",minSize:"300px"},{default:C(()=>[i.actionForm?(fe(),Ge(u,{key:0,show:i.isLoading},{default:C(()=>[U("div",uY,pn(i.actionForm.formNameCh)+" \u8868\u5355\u5B57\u6BB5 ",1),x(s,Et({class:"nw-vxe-grid",ref:"gridFormItemRef"},i.gridFormItemOption),null,16)]),_:1},8,["show"])):Cn("",!0),i.actionForm?Cn("",!0):(fe(),lt("div",pY," \u5DE6\u4FA7\u9009\u62E9\u8868\u5355 "))]),_:1})]),_:1})]),_:1},8,["show"])}const fY=Pe(oY,[["render",dY],["__scopeId","data-v-944491f7"]]),hY={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NSelect:$t,NwIcon:we,PickFormOrmModal:TT,PickFormAllFieldModal:fY,PickFieldModal:AT},props:{value:{type:String,default:""},expreParamValueText:{type:String,default:""},expreParamSource:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["updateValue","updateExpreParamValueText","updateExpreParamSource","updateExpreParamValueId"],setup(e,t){const n=j(null),i=j(null),r=j(null);return{PickFormAllFieldModalRef:n,PickFormOrmModalRef:i,PickFieldModalRef:r,props:e,handleModal:()=>{e.expreParamSource==="form_field"?r.value.show():e.expreParamSource},updateValue(o){t.emit("updateValue",o)},updateFormOrmValue(o,s){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s)},updateFieldValue(o,s,c){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),t.emit("updateExpreParamValueId",c)},updateFormFieldValue(o,s,c){t.emit("updateValue",o),t.emit("updateExpreParamValueText",s),t.emit("updateExpreParamValueId",c)},updateExpreParamSource(o){o!==e.expreParamSource&&(t.emit("updateValue",""),t.emit("updateExpreParamValueText","")),t.emit("updateExpreParamSource",o)},theme:{Tag:{heightSmall:"14px"},Input:{color:null,colorFocus:null,textColor:null,border:null,borderHover:null,borderFocus:null,caretColor:null,fontSizeSmall:"12px",heightSmall:"24px",textColorDisabled:"#4d4d4d"},Button:{heightSmall:"24px",fontSizeSmall:"12px"},Select:{peers:{InternalSelection:{paddingSingle:"0px 20px 0px 8px",heightSmall:"24px",fontSizeSmall:"12px",menuBoxShadow:"1px 0px 7px 1px #000"},InternalSelectMenu:{optionFontSizeSmall:"12px",optionHeightSmall:"14px",peers:{}},Empty:{fontSizeSmall:"12px",iconSizeSmall:"20px"}}}}}}};const mY={class:"value-input"};function vY(e,t,n,i,r,a){const o=D("n-input"),s=D("n-select"),c=D("n-button"),u=D("pick-field-modal"),d=D("n-config-provider");return fe(),Ge(d,{abstract:"",namespace:"splic","theme-overrides":i.theme},{default:C(()=>[U("div",mY,[i.props.expreParamSource==="hand_field"?(fe(),Ge(o,{key:0,size:"small",value:i.props.value,"onUpdate:value":i.updateValue,disabled:i.props.disabled},null,8,["value","onUpdate:value","disabled"])):Cn("",!0),i.props.expreParamSource!=="hand_field"?(fe(),Ge(o,{key:1,disabled:"",size:"small",value:i.props.expreParamValueText,placeholder:""},null,8,["value"])):Cn("",!0),x(s,{disabled:i.props.disabled,value:i.props.expreParamSource,"onUpdate:value":i.updateExpreParamSource,size:"small",style:{width:"190px"},options:[{label:"\u624B\u52A8\u8F93\u5165",value:"hand_field"},{label:"\u8868\u5355\u5B57\u6BB5",value:"form_field"}]},null,8,["disabled","value","onUpdate:value"]),x(c,{disabled:i.props.expreParamSource==="hand_field"||i.props.disabled,size:"small",type:"info",onClick:i.handleModal},{default:C(()=>[_e("\u9009\u62E9")]),_:1},8,["disabled","onClick"])]),x(u,{ref:"PickFieldModalRef",onCallback:i.updateFieldValue},null,8,["onCallback"])]),_:1},8,["theme-overrides"])}const gY=Pe(hY,[["render",vY],["__scopeId","data-v-44c9a50d"]]),Dr=j(null),qE=(e,t,n=!1)=>{const[i,r,...a]=t;if(!t.length)return"";const o=a.map(c=>({paramId:c.paramId,paramValue:c.expreParamValue,paramType:c.expreParamSource})),[s]=e.code.split("(");return`${s}(taskId,'${i.expreParamValue}','${r.expreParamValue}','${n?"[...]":JSON.stringify(o)}',${SK()})`},yY={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NBadge:_w,NSpin:Ne,NSelect:$t,NModal:je,NButton:ye,NwIcon:we,NPopover:IN},props:{value:{type:Object,default:()=>({})}},setup(e,t){const n=j(null),i=j([]),r=sn(()=>qE(e.value,i.value)),a=sn(()=>qE(e.value,i.value,!0)),o=()=>{e.value.cache?(i.value=xi.exports.cloneDeep(e.value.cache),console.log("=====paramList.value======",i.value),u()):$B(e.value.expId).then(f=>{const m=f.expreParamList.filter(v=>v.isDel);i.value=[{paramName:"serviceId",expreParamValue:null},{paramName:"bizTag",expreParamValue:null},...m.map((v,g)=>({paramId:v.paramId,paramName:v.paramName,paramVarType:v.paramVarType,expreParamSource:"hand_field",expreParamValue:null,expreParamValueText:"",expreParamValueId:""}))],u()})},s=f=>{console.log("=======",f),f&&o()},c=j([]),u=()=>{const f=i.value.find(m=>m.paramName==="serviceId");f&&f.expreParamValue&&WB(f.expreParamValue).then(m=>{c.value=(m||[]).map(v=>({value:v,label:v}))})},d=j({rowId:"id",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,data:i,columns:[{title:"\u53C2\u6570\u540D",field:"paramName",width:120,showOverflow:"title"},{field:"paramVarType",title:"\u53C2\u6570\u7C7B\u578B",showOverflow:"title",width:60,slots:{default:({row:f})=>AK(f.paramVarType)}},{title:"\u503C",showHeaderOverflow:!0,fixed:"right",slots:{default:({row:f})=>f.paramName==="serviceId"?[te("div",{style:"display: flex;"},te(Oe,{disabled:!0,style:"width: calc(100% - 40px)",value:f.expreParamValue}),te(Ew,{bizType:"wfExpApi",onCallback:m=>{f.expreParamValue=m.sysCode;const v=i.value.find(g=>g.paramName==="bizTag");v&&(v.expreParamValue=m.mthPath.split("/").pop())}}))]:f.paramName==="bizTag"?f.expreParamValue:[te(gY,{value:f.expreParamValue,expreParamValueText:f.expreParamValueText,expreParamSource:f.expreParamSource,disabled:!1,onUpdateValue:m=>{f.expreParamValue=m},onUpdateExpreParamSource:m=>{f.expreParamSource=m},onUpdateExpreParamValueText:m=>{f.expreParamValueText=m},onUpdateExpreParamValueId:m=>{f.expreParamValueId=m}})]}}]});return{expText:a,paramList:i,props:e,popover:n,onShow:s,gridOption:d,actionExpParamsRef:Dr,show(){Dr.value&&Dr.value.setShow(!1),Dr.value===n.value?Dr.value=null:(o(),Dr.value=n.value,Mn().then(()=>{setTimeout(()=>{n.value.setShow(!0)},200)}))},close(){Dr.value.setShow(!1),Dr.value=null},save(){console.log("paramList",e.value,i.value),e.value.code=r.value,e.value.cache=xi.exports.cloneDeep(i.value),Dr.value.setShow(!1),Dr.value=null},theme:{Tag:{heightSmall:"14px"},Input:{color:null,colorFocus:null,textColor:null,border:null,borderHover:null,borderFocus:null,caretColor:null,fontSizeSmall:"12px",heightSmall:"20px",textColorDisabled:"#4d4d4d"},Button:{heightSmall:"20px",fontSizeSmall:"12px"},Select:{peers:{InternalSelection:{paddingSingle:"0px 20px 0px 8px",heightSmall:"20px",fontSizeSmall:"12px",menuBoxShadow:"1px 0px 7px 1px #000"},InternalSelectMenu:{optionFontSizeSmall:"12px",optionHeightSmall:"14px",peers:{}},Empty:{fontSizeSmall:"12px",iconSizeSmall:"20px"}}}}}}};const _Y={class:"popover-box",style:{width:"500px"}},xY={class:"popover-box-header"},bY={class:"popover-box-header-text"},EY={class:"popover-box-header-text-t"};function wY(e,t,n,i,r,a){const o=D("nw-icon"),s=D("n-badge"),c=D("vxe-grid"),u=D("n-config-provider"),d=D("n-popover");return fe(),lt("div",{class:Fs({"exp-exp":!0,action:i.actionExpParamsRef===i.popover})},[x(d,{ref:"popover",placement:"bottom",trigger:"manual","on-update:show":i.onShow,raw:"","show-arrow":!1,"on-clickoutside":()=>!1,"theme-overrides":{space:"0px"}},{trigger:C(()=>[U("div",{class:"popover-text",onClick:t[0]||(t[0]=f=>i.show(!0))},pn(i.props.value.text),1)]),default:C(()=>[U("div",_Y,[U("div",xY,[U("div",bY,[U("div",EY,pn(i.expText),1)]),U("div",null,[U("div",{class:"popover-box-header-close",onClick:t[1]||(t[1]=(...f)=>i.close&&i.close(...f))},[x(o,{name:"icon-n-y-power",size:16})]),x(s,{dot:"",show:!1},{default:C(()=>[U("div",{class:"popover-box-header-save",onClick:t[2]||(t[2]=(...f)=>i.save&&i.save(...f))},[x(o,{name:"icon-n-y-check",size:16})])]),_:1})])]),x(u,{abstract:"",namespace:"splic","theme-overrides":i.theme},{default:C(()=>[x(c,Et({class:"nw-vxe-grid",ref:"gridRef"},i.gridOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),_:1},8,["theme-overrides"])])]),_:1},8,["on-update:show","on-clickoutside"])],2)}const SY=Pe(yY,[["render",wY],["__scopeId","data-v-51d1553f"]]),CY={name:"Expression",components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,ExpComp:SY},props:{value:{type:Object,default:()=>({})},index:{type:Number,default:-1},parent:{type:Object,default:()=>({})}},setup(e,t){return j(-1),j(null),{props:e,editingExpElements:zr,editingExpElementIndex:_i,handleGroup(n,i=e.parent,r=e.index){n.stopPropagation(),zr.value=i,_i.value=r}}}};const If=e=>(mn("data-v-896ea724"),e=e(),vn(),e),TY={key:0,class:"exp-group"},PY=If(()=>U("span",{class:"exp-group-l"},"(",-1)),AY=If(()=>U("div",{class:"exp-cursor-l"},"\xA0",-1)),RY=If(()=>U("span",{class:"exp-group-r"},")",-1)),MY={key:2,class:"exp-item"},DY={key:3,class:"exp-item"},OY={key:4,class:"exp-item"},IY=If(()=>U("div",{class:"exp-cursor-l"},"\xA0",-1));function NY(e,t,n,i,r,a){const o=D("nw-icon"),s=D("expression",!0),c=D("exp-comp"),u=D("n-input");return fe(),lt(on,null,[i.props.value.type==="group"?(fe(),lt("div",TY,[PY,U("div",{class:Fs({"exp-cursor":!0,active:i.editingExpElements===i.props.value&&i.editingExpElementIndex===-1}),onClick:t[0]||(t[0]=d=>i.handleGroup(d,i.props.value,-1))},[AY,x(o,{name:"icon-shang1",color:"#000",size:10})],2),(fe(!0),lt(on,null,Od(i.props.value.children,(d,f)=>(fe(),Ge(s,{key:f,index:f,parent:i.props.value,value:d},null,8,["index","parent","value"]))),128)),RY])):i.props.value.type==="exp"?(fe(),Ge(c,{key:1,value:i.props.value,onCallback:t[1]||(t[1]=d=>i.props.value.code=d)},null,8,["value"])):i.props.value.type==="logic"?(fe(),lt("div",MY,pn(i.props.value.text),1)):i.props.value.type==="operation"?(fe(),lt("div",DY,pn(i.props.value.text),1)):(fe(),lt("div",OY,[x(u,{size:"small",value:i.props.value.text,"onUpdate:value":[t[2]||(t[2]=d=>i.props.value.text=d),t[3]||(t[3]=d=>i.props.value.code=d)],placeholder:"",autosize:"",style:{"min-width":"15px"}},null,8,["value"])])),U("div",{class:Fs({"exp-cursor":!0,active:i.editingExpElements===i.props.parent&&i.editingExpElementIndex===i.props.index}),onClick:t[4]||(t[4]=(...d)=>i.handleGroup&&i.handleGroup(...d))},[IY,x(o,{name:"icon-shang1",color:"#000",size:10})],2)],64)}const kY=Pe(CY,[["render",NY],["__scopeId","data-v-896ea724"]]),BY={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,Expression:kY},props:{value:{type:Object,default:()=>({})}},setup(e){return{expressView:j(null),props:e,inputTheme:{Input:{paddingSmall:"0 3px",color:"#2196f3",colorFocus:"#2196f3",textColor:"#fff",border:"none",borderHover:"none",borderFocus:"none",fontSizeSmall:"12px",heightSmall:"22px",caretColor:"#fff",textColorDisabled:"#4d4d4d"}}}}};const Ty=e=>(mn("data-v-356d3af3"),e=e(),vn(),e),LY={class:"express-view",ref:"expressView"},$Y=Ty(()=>U("div",{class:"express-view-outlink"},null,-1)),zY={class:"express-view-items"},FY={class:"express-view-items-body"},HY={key:1,style:{border:"1px solid red",height:"20px","margin-top":"5px"}},jY=Ty(()=>U("div",{class:"express-view-code"},null,-1)),VY=Ty(()=>U("div",{class:"switch"},null,-1));function UY(e,t,n,i,r,a){const o=D("expression"),s=D("n-config-provider");return fe(),lt("div",LY,[$Y,U("div",zY,[U("div",FY,[x(s,{namespace:"expressview",abstract:"","theme-overrides":i.inputTheme},{default:C(()=>[i.props.value&&i.props.value.children&&i.props.value.children.length?(fe(!0),lt(on,{key:0},Od(i.props.value.children,(c,u)=>(fe(),Ge(o,{value:c,key:u,index:u,parent:i.props.value},null,8,["value","index","parent"]))),128)):(fe(),lt("div",HY))]),_:1},8,["theme-overrides"])])]),jY,VY],512)}const WY=Pe(BY,[["render",UY],["__scopeId","data-v-356d3af3"]]),GY={components:{NConfigProvider:Kt,NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NGrid:si,NGi:NN,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,ExpressView:WY,NAlert:kN},props:{},setup(e){const t=j({rowId:"id",rowKey:!1,height:"353px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},pagerConfig:{border:!0,pageSize:20,pageSizes:[10,20,50],perfect:!0},proxyConfig:{props:{total:"total"},ajax:{query:({page:n})=>zB({page:{current:n.currentPage,size:n.pageSize}}).then(async i=>({result:i.records,total:i.total}))}},columns:[{title:"\u5206\u7C7B",field:"procdefTypeName",width:80},{field:"expreName",title:"\u8868\u8FBE\u5F0F\u540D\u79F0",showOverflow:"title"},{field:"expreValue",title:"\u8868\u8FBE\u5F0F",showOverflow:"title"},{title:"\u8FD4\u56DE\u7C7B\u578B",showOverflow:"title",width:80,slots:{default:({row:n})=>TK(n.expreReturnType)}},{field:"startEnable",title:"\u64CD\u4F5C",width:55,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:n})=>[te(ye,{size:"small",type:"info",onClick:()=>{const i={type:"exp",text:n.expreName,code:n.expreValue,expId:n.id};zr.value.children.splice(_i.value+1,0,i),_i.value=_i.value+1}},{default:()=>"\u6DFB\u52A0"})]}}]});return Mn().then(()=>{console.log("========editingExp==",ma)}),{gridOption:t,gridOptionEvent:{},editingExp:ma,btnTheme:{Button:{heightSmall:"28px",fontSizeSmall:"12px",iconSizeSmall:"14px",iconMarginSmall:"2px"}},handleClear(){},handleBack(){console.log("editingExpElements",zr),zr.value.children.length&&(zr.value.children.splice(_i.value,1),_i.value=_i.value-1)},handleInput(n){const i=aY[n];if(i){const r=xi.exports.cloneDeep(i.Node);zr.value.children.splice(_i.value+1,0,r),n==="( )"?(zr.value=r,_i.value=-1):_i.value=_i.value+1}},handleExp(n,i){}}}};const qY={class:"calc-body"},KY={class:"calc-body-view"},YY={class:"calc-body-btn"},XY={style:{display:"flex","justify-content":"center","align-items":"flex-start",height:"28px",overflow:"visible"}},ZY={style:{display:"flex",width:"100%","font-size":"14px","font-weight":"bold","justify-content":"center","align-items":"center",height:"34px",background:"#8a2be2",color:"#fff"}},JY={class:"calc-body-express"},QY={style:{border:"2px solid #8a2be2"}};function eX(e,t,n,i,r,a){const o=D("n-alert"),s=D("express-view"),c=D("nw-icon"),u=D("n-button"),d=D("n-gi"),f=D("n-grid"),m=D("n-config-provider"),v=D("vxe-grid"),g=D("n-spin");return fe(),Ge(g,{show:!i.editingExp,"theme-overrides":{opacitySpinning:.2}},{icon:C(()=>[]),description:C(()=>[x(o,{title:"",type:"info"},{default:C(()=>[_e(" \u5DE6\u4FA7\u9009\u62E9\u9700\u8981\u7F16\u8F91\u7684\u8868\u8FBE\u5F0F ")]),_:1})]),default:C(()=>[U("div",qY,[U("div",KY,[x(s,{value:i.editingExp},null,8,["value"])]),U("div",YY,[x(m,{"theme-overrides":i.btnTheme},{default:C(()=>[x(f,{cols:6,"x-gap":"5","y-gap":"5"},{default:C(()=>[x(d,null,{default:C(()=>[x(u,{type:"warning",size:"small",onClick:i.handleBack},{default:C(()=>[x(c,{name:"icon-n-n-tuige",size:14,style:{"font-weight":"bold"}})]),_:1},8,["onClick"])]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"warning",size:"small"},{default:C(()=>[_e(" C ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[0]||(t[0]=y=>i.handleInput("And"))},{default:C(()=>[_e(" And ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[1]||(t[1]=y=>i.handleInput("Or"))},{default:C(()=>[_e(" Or ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[2]||(t[2]=y=>i.handleInput("In"))},{default:C(()=>[_e(" In ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[3]||(t[3]=y=>i.handleInput("Not in"))},{default:C(()=>[_e(" Not in ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[4]||(t[4]=y=>i.handleInput("!"))},{default:C(()=>[_e(" ! ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[5]||(t[5]=y=>i.handleInput("!="))},{default:C(()=>[_e(" != ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[6]||(t[6]=y=>i.handleInput("<"))},{default:C(()=>[_e(" < ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[7]||(t[7]=y=>i.handleInput("<="))},{default:C(()=>[_e(" <= ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[8]||(t[8]=y=>i.handleInput(">"))},{default:C(()=>[_e(" > ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[9]||(t[9]=y=>i.handleInput(">="))},{default:C(()=>[_e(" >= ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"success",size:"small",onClick:t[10]||(t[10]=y=>i.handleInput("( )"))},{default:C(()=>[_e(" ( ) ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[11]||(t[11]=y=>i.handleInput("+"))},{default:C(()=>[_e(" + ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[12]||(t[12]=y=>i.handleInput("-"))},{default:C(()=>[_e(" - ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[13]||(t[13]=y=>i.handleInput("x"))},{default:C(()=>[_e(" \xD7 ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[14]||(t[14]=y=>i.handleInput("/"))},{default:C(()=>[_e(" \xF7 ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{class:"btn-font-16",type:"info",size:"small",onClick:t[15]||(t[15]=y=>i.handleInput("="))},{default:C(()=>[_e(" = ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[U("div",XY,[U("div",ZY,[x(c,{name:"icon-n-y-expression",size:18,style:{"margin-right":"5px"}}),_e(" Exp ")])])]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[16]||(t[16]=y=>i.handleInput("String"))},{default:C(()=>[_e(" String ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[17]||(t[17]=y=>i.handleInput("Number"))},{default:C(()=>[_e(" Number ")]),_:1})]),_:1}),x(d,null,{default:C(()=>[x(u,{type:"info",size:"small",onClick:t[18]||(t[18]=y=>i.handleInput("Array"))},{default:C(()=>[_e(" Array ")]),_:1})]),_:1}),x(d)]),_:1})]),_:1},8,["theme-overrides"])]),U("div",JY,[U("div",QY,[x(v,Et({class:"nw-vxe-grid"},i.gridOption,$c(i.gridOptionEvent),{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])])])]),_:1},8,["show","theme-overrides"])}const tX=Pe(GY,[["render",eX],["__scopeId","data-v-41739bf3"]]),nX={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt,NDrawer:dw,NDrawerContent:fw,Graph:rY,Calc:tX,ExpressText:HT},props:{},emits:["callback"],setup(e,t){const n=j(null),i=j(null);Mn().then(()=>{console.log("splitterLeft===",i)});const r=j(!1),a=j(null);j([]),sn(()=>o.value?xi.exports.get(s.value,`[${o.value.id}].fields`,[]):[]);const o=j(null),s=j({}),c=j(!1),u=j(!1);return{expressionCache:Ns,expressText:n,splitterLeft:i,drawerActive:r,graphRef:a,props:e,isLoading:c,actionForm:o,visible:u,show(m={}){Ad(),Ns.value=xi.exports.cloneDeep(m),u.value=!0,Mn().then(()=>{a.value.render()})},handleModalComplete:()=>{const m=xi.exports.cloneDeep(Ns.value);t.emit("callback",JSON.stringify(m),Of(Ns.value),m),u.value=!1},handleClearForm:()=>{},sizeChange(){},onAfterEnter(){}}}};const WT=e=>(mn("data-v-ee7bde89"),e=e(),vn(),e),iX=WT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),rX=WT(()=>U("div",null," \u7F16\u8F91\u8868\u8FBE\u5F0F ",-1)),aX={style:{height:"700px"}},oX={ref:"splitterLeft",style:{position:"relative",width:"100%",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",height:"100%"}},sX={class:"nw-modal-action"};function lX(e,t,n,i,r,a){const o=D("nw-icon"),s=D("graph"),c=D("express-text"),u=D("n-drawer-content"),d=D("n-drawer"),f=D("d-splitter-pane"),m=D("calc"),v=D("n-spin"),g=D("d-splitter"),y=D("n-switch"),E=D("n-button"),N=D("n-modal");return fe(),Ge(N,{class:"nw-modal",show:i.visible,"onUpdate:show":t[3]||(t[3]=O=>i.visible=O),preset:"dialog",style:{width:"1200px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0,"on-after-enter":i.onAfterEnter},{icon:C(()=>[iX,x(o,{name:"icon-y-form",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[rX]),default:C(()=>[U("div",aX,[x(g,{class:"nw-layout-content-splitter",splitBarSize:"1px"},{DSplitterPane:C(()=>[x(f,{class:"splitter-bpmn-view",size:"700px",minSize:"330px",onSizeChange:i.sizeChange},{default:C(()=>[U("div",oX,[x(s,{ref:"graphRef",option:{width:400,height:300}},null,512),x(d,{to:i.splitterLeft,show:i.drawerActive,"onUpdate:show":t[0]||(t[0]=O=>i.drawerActive=O),placement:"bottom"},{default:C(()=>[x(u,null,{default:C(()=>[x(c,{ref:"expressText",value:i.expressionCache},null,8,["value"])]),_:1})]),_:1},8,["to","show"])],512)]),_:1},8,["onSizeChange"]),x(f,{class:"splitter-bpmn-attrs",minSize:"300px"},{default:C(()=>[x(v,{show:i.isLoading},{default:C(()=>[x(m)]),_:1},8,["show"])]),_:1})]),_:1})]),U("div",sX,[x(y,{size:"small",value:i.drawerActive,"onUpdate:value":t[1]||(t[1]=O=>i.drawerActive=O)},null,8,["value"]),U("div",null,[x(E,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(E,{size:"small",onClick:t[2]||(t[2]=O=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])])]),_:1},8,["show","on-after-enter"])}const cX=Pe(nX,[["render",lX],["__scopeId","data-v-ee7bde89"]]),uX={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we},props:{},setup(e){const t=j(null),n=Nt(xe.value,"netwisd:Vars");n.values||(n.values=[]);const i=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n.values,columns:[{title:"\u53D8\u91CF\u540D",field:"javaName",showOverflow:"title"},{title:"\u5B57\u6BB5\u540D",field:"nameCh",showOverflow:"title"},{title:"\u4F5C\u7528\u57DF",field:"nameCh",width:50,slots:{default:({row:r})=>{const a=r.actionScope==="0";return[te(ye,{type:a?"info":"success",size:"small",onClick:()=>{r.actionScope=r.actionScope==="0"?"1":"0"}},a?"\u5168\u5C40":"\u5C40\u90E8")]}}}]});return{props:e,gridVarsRef:t,gridVarsOption:i}}};const pX={style:{padding:"5px",height:"calc(100% - 10px)"}},dX=U("div",{style:{display:"flex","justify-content":"space-between",padding:"5px 0"}}," \u6240\u6709\u53D8\u91CF ",-1),fX={style:{height:"calc(100% - 36px)","border-bottom":"1px solid #ccc",overflow:"hidden"}};function hX(e,t,n,i,r,a){const o=D("vxe-grid");return fe(),lt("div",pX,[dX,U("div",fX,[x(o,Et({class:"nw-vxe-grid",ref:"gridVarsRef"},i.gridVarsOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])])}const GT=Pe(uX,[["render",hX]]),mX={name:"bpmn-SequenceFlow",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NSpin:Ne,NSwitch:Gt,PanelEvent:Da,ExpressionEditor:cX,PanelVars:GT},setup(e,t){gw().ctx;const n=j(null),i=sn(()=>xe.value.sourceRef.$type==="bpmn:ExclusiveGateway"&&xe.value.sourceRef.outgoing.length>1),r=j(null),a=()=>r.value=xe.value.sourceRef.default?xe.value.sourceRef.default.id===xe.value.id:!1;return a(),{isBranch:i,actionElBusinessObject:xe,updateActionElProperties:Ls,expressionEditorRef:n,expCallBack(o,s,c){console.log("expCallBack",o,s,c),Ls({conditionExpression:jt("bpmn:FormalExpression",{body:`\${${s}}`})});const u=Nt(xe.value,"netwisd:SequExpText");u?u.body=o:xe.value.extensionElements.values.push(jt("netwisd:SequExpText",{body:o})),iW(c)},handleExp(){const o=Nt(xe.value,"netwisd:SequExpText");n.value.show(JSON.parse(o.body))},isDefaultGoing:r,setDefaultGoing:o=>{if(o){Sc(window.__BPMN_ELEMENT_SELECT__.element.source,{default:window.__BPMN_ELEMENT_SELECT__.element.businessObject}),Ls({conditionExpression:null});const s=Nt(xe.value,"netwisd:SequExpText");s&&(s.body='{"id":"1","name":"root","type":3,"children":[]}'),Nt(xe.value,"netwisd:Vars").values=[]}else Sc(window.__BPMN_ELEMENT_SELECT__.element.source,{default:null});Mn().then(()=>{a()})}}}},vX=U("span",{style:{"margin-right":"10px"}},"\u5E8F\u5217\u8868\u8FBE\u5F0F",-1),gX=U("span",{style:{"margin-right":"10px"}},"\u9ED8\u8BA4\u8FDE\u63A5",-1),yX={class:"pro-properties-panel-content"};function _X(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-button"),u=D("expression-editor"),d=D("n-switch"),f=D("n-form"),m=D("n-layout"),v=D("n-tab-pane"),g=D("panel-event"),y=D("panel-vars"),E=D("n-tabs");return fe(),Ge(E,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(v,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(m,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=N=>i.updateActionElProperties({name:N}))},null,8,["value"])]),_:1}),i.isBranch?(fe(),Ge(s,{key:0,path:"inputValue","label-style":"align-items: center"},{label:C(()=>[vX,x(c,{disabled:i.isDefaultGoing,size:"small",type:"info",onClick:i.handleExp},{default:C(()=>[_e("\u8BBE\u7F6E")]),_:1},8,["disabled","onClick"])]),default:C(()=>[x(u,{ref:"expressionEditorRef",onCallback:i.expCallBack},null,8,["onCallback"])]),_:1})):Cn("",!0),i.isBranch?(fe(),Ge(s,{key:1,path:"inputValue"},{label:C(()=>[gX,x(d,{size:"small",value:i.isDefaultGoing,"onUpdate:value":t[1]||(t[1]=N=>i.setDefaultGoing(N))},null,8,["value"])]),_:1})):Cn("",!0)]),_:1},512)]),_:1})]),_:1}),x(v,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(m,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(g)]),_:1})]),_:1}),x(v,{name:"vars",tab:"\u53D8\u91CF"},{default:C(()=>[U("div",yX,[x(y)])]),_:1})]),_:1})}const xX=Pe(mX,[["render",_X]]),bX=Object.freeze(Object.defineProperty({__proto__:null,default:xX},Symbol.toStringTag,{value:"Module"})),EX={name:"bpmn-ServiceTask",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne},setup(){return{}}};function wX(e,t,n,i,r,a){return" bpmn-ServiceTask "}const SX=Pe(EX,[["render",wX]]),CX=Object.freeze(Object.defineProperty({__proto__:null,default:SX},Symbol.toStringTag,{value:"Module"})),TX={name:"bpmn-StartEvent",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NSpin:Ne,NSwitch:Gt,PanelEvent:Da},setup(){return{actionElBusinessObject:xe}}};function PX(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-form"),u=D("n-layout"),d=D("n-tab-pane"),f=D("panel-event"),m=D("n-tabs");return fe(),Ge(m,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(d,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(c,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=v=>i.actionElBusinessObject.name=v)},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1}),x(d,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(u,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(f)]),_:1})]),_:1})]),_:1})}const AX=Pe(TX,[["render",PX]]),RX=Object.freeze(Object.defineProperty({__proto__:null,default:AX},Symbol.toStringTag,{value:"Module"})),MX={name:"bpmn-SubProcess",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne},setup(){return{}}};function DX(e,t,n,i,r,a){return" bpmn-SubProcess "}const OX=Pe(MX,[["render",DX]]),IX=Object.freeze(Object.defineProperty({__proto__:null,default:OX},Symbol.toStringTag,{value:"Module"})),NX={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},setup(e,t){const n=j([]),i=j(null),r=j(!1),a=j(!1),o=j(!1),s=j(null),c=j({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:n,columns:[{field:"nameCh",title:"\u5B57\u6BB5\u540D\u79F0"},{field:"javaName",title:"\u5B57\u6BB5\u7F16\u7801"},{field:"javaType",title:"\u7C7B\u578B",width:70,showOverflow:!0},{field:"powerCode",title:"\u6743\u9650",width:120,showOverflow:!0,slots:{default:({row:d})=>[te($t,{"theme-overrides":{peers:{InternalSelection:{heightSmall:"20px"}}},value:d.powerCode,onUpdateValue:f=>d.powerCode=f,size:"small",style:"border: none;display:flex",options:[{label:"\u7F16\u8F91",value:"edit"},{label:"\u53EA\u8BFB",value:"readonly"},{label:"\u5FC5\u586B",value:"required"},{label:"\u4E0D\u53EF\u89C1",value:"hide"}]})]}}]});return{props:e,isLoading:a,gridFormItemRef:s,gridFormItemOption:c,actionForm:i,actionWf:r,visible:o,show(d=[]){o.value=!0;const f=Nt(xe.value,"netwisd:Form").values||[],m=Nt(Ma(),"netwisd:Form").values||[];n.value=m.map(v=>{const g=f.find(y=>y.javaName===v.javaName);return{javaName:v.javaName,nameCh:v.nameCh,javaType:v.javaType,powerCode:g?g.powerCode:"edit"}})},handleModalComplete:()=>{const d=Nt(xe.value,"netwisd:Form");d.values.splice(0);const f=n.value.filter(m=>m.powerCode!=="edit").map(m=>jt("netwisd:Field",{javaName:m.javaName,nameCh:m.nameCh,javaType:m.javaType,powerCode:m.powerCode}));d.values.push(...f),t.emit("update:callback"),o.value=!1},sizeChange(){s.value.refreshColumn()}}}};const qT=e=>(mn("data-v-3c00bcd0"),e=e(),vn(),e),kX=qT(()=>U("div",{class:"iconfont icon-bpmn-ditu"},null,-1)),BX=qT(()=>U("div",null," \u5B57\u6BB5\u914D\u7F6E ",-1)),LX={class:"nw-modal-action"};function $X(e,t,n,i,r,a){const o=D("nw-icon"),s=D("vxe-grid"),c=D("n-button"),u=D("n-modal");return fe(),Ge(u,{class:"nw-modal",show:i.visible,"onUpdate:show":t[1]||(t[1]=d=>i.visible=d),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:C(()=>[kX,x(o,{name:"icon-y-form",size:20,color:"rgb(103, 194, 58)"})]),header:C(()=>[BX]),default:C(()=>[x(s,Et({class:"nw-vxe-grid",ref:"gridFormItemRef"},i.gridFormItemOption),null,16),U("div",LX,[x(c,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:i.handleModalComplete},{default:C(()=>[_e("\u786E\u5B9A")]),_:1},8,["onClick"]),x(c,{size:"small",onClick:t[0]||(t[0]=d=>i.visible=!1)},{default:C(()=>[_e("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])}const zX=Pe(NX,[["render",$X],["__scopeId","data-v-3c00bcd0"]]),FX={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,FormModal:zX,NwPickCpts:ww},props:{},setup(e){const t=j(null),n=j(null);j([]),j([]);const i=Nt(xe.value,"netwisd:Form");i.values||(i.values=[]),j(i.values),console.log("netwisdForms==",i);const r=j({rowId:"id",rowKey:!1,height:"auto",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:i.values,columns:[{title:"\u8868\u5355\u5B57\u6BB5",field:"nameCh",slots:{default:({row:c})=>[te("div",{style:"display: flex;justify-content: space-between;"},te("div",null,c.nameCh," (",c.javaName,")"))]}},{title:"\u6743\u9650",field:"powerCode",width:"70px"}]});return{formModalRef:t,props:e,gridFormRef:n,gridFormOption:r,handleModalShow:()=>{console.log("=====getExtensionRootEl=====",Nt(Ma(),"netwisd:Form").values),t.value.show(i)},handleModalComplete:c=>{const u=Nt(xe.value,"netwisd:Form").values;n.value.reloadData(u||[])},handleClearForm:()=>{i.values.splice(0),n.value.reloadData(i.values)}}}};const HX={style:{padding:"5px"}},jX={style:{display:"flex","justify-content":"space-between",padding:"5px 0"}},VX={style:{height:"150px","border-bottom":"1px solid #ccc",overflow:"hidden"}};function UX(e,t,n,i,r,a){const o=D("n-button"),s=D("vxe-grid"),c=D("form-modal");return fe(),lt(on,null,[U("div",HX,[U("div",jX,[x(o,{type:"info",size:"small",onClick:i.handleModalShow},{default:C(()=>[_e("\u8BBE\u7F6E\u8868\u5355\u6743\u9650")]),_:1},8,["onClick"])]),U("div",VX,[x(s,Et({class:"nw-vxe-grid",ref:"gridFormRef"},i.gridFormOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])]),x(c,{ref:"formModalRef","onUpdate:callback":i.handleModalComplete},null,8,["onUpdate:callback"])],64)}const WX=Pe(FX,[["render",UX]]);j(!1);const GX=[{value:"wf_save",label:"\u4FDD\u5B58"},{value:"wf_handle",label:"\u529E\u7406"},{value:"wf_back",label:"\u9A73\u56DE"},{value:"wf_revoke",label:"\u64A4\u56DE"},{value:"wf_del_process",label:"\u6D41\u7A0B\u5220\u9664"},{value:"wf_act_process",label:"\u6D41\u7A0B\u6FC0\u6D3B"},{value:"wf_end_process",label:"\u6D41\u7A0B\u7EC8\u6B62"},{value:"wf_sus_process",label:"\u6D41\u7A0B\u6302\u8D77"},{value:"wf_turn_process",label:"\u8F6C\u529E"},{value:"wf_urge_process",label:"\u50AC\u529E"},{value:"wf_notify_process",label:"\u77E5\u4F1A"},{value:"wf_send_read_process",label:"\u4F20\u9605"},{value:"wf_countersign",label:"\u52A0\u7B7E"}],qX={components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,NInputGroup:at,NInput:Oe,NSpin:Ne,NModal:je,NButton:ye,NwIcon:we,NSwitch:Gt},props:{},setup(e){const t=j(!1),n=j(null),i=j({rowId:"id",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:GX,columns:[{title:"\u6309\u94AE\u540D\u79F0",field:"label",width:70},{title:"\u6309\u94AE\u7F16\u7801",field:"value"},{title:"\u5F00\u542F",width:50,slots:{default:({row:a})=>[te(Gt,{size:"small",value:!!xi.exports.get(Nt(xe.value,"netwisd:Buttons"),"values",[]).find(o=>o.code===a.value),onUpdateValue:o=>{const s=Nt(xe.value,"netwisd:Buttons");if(s.values||(s.values=[]),o)s.values.push(jt("netwisd:Button",{code:a.value,name:a.label}));else{const c=s.values.find(d=>d.code===a.value),u=s.values.indexOf(c);s.values.splice(u,1)}}})]}}]});return{props:e,gridButtonRef:n,gridButtonOption:i,visible:t,handleClear:()=>{Nt(xe.value,"netwisd:Buttons").values=[]}}}};const KX={style:{padding:"5px",height:"calc(100% - 10px)"}},YX={style:{display:"flex","justify-content":"space-between",padding:"5px 0"}},XX=U("div",null,"\u6240\u6709\u6309\u94AE",-1),ZX={style:{height:"calc(100% - 36px)","border-bottom":"1px solid #ccc",overflow:"hidden"}};function JX(e,t,n,i,r,a){const o=D("n-button"),s=D("vxe-grid");return fe(),lt("div",KX,[U("div",YX,[XX,x(o,{type:"error",size:"small",onClick:i.handleClear},{default:C(()=>[_e("\u53D6\u6D88\u6240\u6709")]),_:1},8,["onClick"])]),U("div",ZX,[x(s,Et({class:"nw-vxe-grid",ref:"gridButtonRef"},i.gridButtonOption,{style:{border:"1px solid #ccc","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)])])}const QX=Pe(qX,[["render",JX]]),eZ={name:"bpmn-UserTask",props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSpace:BN,NTabs:Kr,NTabPane:Yr,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NInputNumber:xw,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckboxGroup:LN,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne,NSwitch:Gt,NSlider:bw,PanelEvent:Da,PickFormItem:WX,PickHuman:zT,PickButton:QX,PanelVars:GT},setup(){return{todoMsgSwitch:jH,setTodoMsgSwitch:Cv,todoSendType:VH,setTodoSendType:JC,applyMsgSwitch:UH,setApplyMsgSwitch:Tv,applySendType:WH,setApplySendType:QC,actionElBusinessObject:xe,setMultiInstance:t=>{let n=-1;const i=xe.value.extensionElements.values;for(;i.find((r,a)=>(n=a,console.log(r.$type),r.$type==="camunda:ExecutionListener"||r.$type==="camunda:TaskListener"||r.$type==="netwisd:ExecutionListener"||r.$type==="netwisd:TaskListener"));)i.splice(n,1);t?(xe.value.candidateUsers="${wfLocalAssignee}",xe.value.loopCharacteristics=jt("bpmn:MultiInstanceLoopCharacteristics",{collection:"wfAssignee",elementVariable:"wfLocalAssignee",passingRate:".75",passingHandle:"0",unpassingHandle:"1",completionCondition:jt("bpmn:FormalExpression",{"xsi:type":"bpmn:tFormalExpression",body:"${wfDecisionInstances/nrOfInstances >= 0.75 }"})})):(xe.value.candidateUsers="${wfAssignee}",delete xe.value.loopCharacteristics),LH(xe.value)},isMultiInstance(){return!!xi.exports.get(xe.value,"loopCharacteristics",!1)},getMultiInstanceType(){return xi.exports.get(xe.value,"loopCharacteristics.isSequential",!1)?"Sequential1":"Sequential0"},getMultiInstanceProperties(t){return xi.exports.get(xe.value,`loopCharacteristics.${t}`,"0")},upDateMultiInstancePassingRate(t){const n=Math.round(t)/100;xe.value.loopCharacteristics.passingRate=`${n}`,xe.value.loopCharacteristics.completionCondition.body="${wfDecisionInstances/nrOfInstances >= "+n+" }"},upDateMultiInstanceProperties(t,n){xe.value.loopCharacteristics[t]=n}}}},tZ=U("span",{style:{"margin-right":"10px"}},"\u5230\u8FBE\u5F53\u524D\u8282\u70B9\u6D88\u606F\u63D0\u9192",-1),nZ=U("span",{style:{"margin-right":"10px"}},"\u7533\u8BF7\u4EBA\u8282\u70B9\u6D88\u606F\u63D0\u9192",-1),iZ=U("span",{style:{"margin-right":"10px"}},"\u4F1A\u7B7E",-1),rZ=U("i",{class:"entry bpmn-icon-parallel-mi-marker"},null,-1),aZ=U("span",null,"\u5E76\u884C\u591A\u5B9E\u4F8B",-1),oZ=U("i",{class:"entry bpmn-icon-sequential-mi-marker"},null,-1),sZ=U("span",null,"\u4E32\u884C\u591A\u5B9E\u4F8B",-1),lZ=U("span",null,"\u4F1A\u7B7E\u901A\u8FC7\u7387",-1),cZ={style:{width:"100px"}},uZ=U("br",null,null,-1),pZ={class:"pro-properties-panel-content"},dZ={class:"pro-properties-panel-content"};function fZ(e,t,n,i,r,a){const o=D("n-input"),s=D("n-form-item"),c=D("n-switch"),u=D("n-checkbox"),d=D("n-space"),f=D("n-checkbox-group"),m=D("n-radio"),v=D("n-radio-group"),g=D("n-input-number"),y=D("n-slider"),E=D("n-select"),N=D("n-form"),O=D("n-layout"),T=D("n-tab-pane"),w=D("pick-human"),R=D("panel-event"),L=D("pick-form-item"),H=D("pick-button"),$=D("panel-vars"),W=D("n-tabs");return fe(),Ge(W,{size:"small",type:"card","tabs-padding":5},{default:C(()=>[x(T,{name:"geneal",tab:"\u5E38\u89C4"},{default:C(()=>[x(O,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(N,{ref:"formRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u8282\u70B9ID",path:"inputValue"},{default:C(()=>[x(o,{disabled:"",placeholder:"",value:i.actionElBusinessObject.id},null,8,["value"])]),_:1}),x(s,{label:"\u8282\u70B9\u540D\u79F0",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"",value:i.actionElBusinessObject.name,"onUpdate:value":t[0]||(t[0]=Q=>i.actionElBusinessObject.name=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u4EFB\u52A1\u8FC7\u671F\u65F6\u95F4",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"Input",value:i.actionElBusinessObject.dueDay,"onUpdate:value":t[1]||(t[1]=Q=>i.actionElBusinessObject.dueDay=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u91CD\u8981\u7A0B\u5EA6",path:"inputValue"},{default:C(()=>[x(o,{placeholder:"Input",value:i.actionElBusinessObject.priority,"onUpdate:value":t[2]||(t[2]=Q=>i.actionElBusinessObject.priority=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u5230\u8FBE\u5F53\u524D\u8282\u70B9\u6D88\u606F\u63D0\u9192",path:"inputValue"},{label:C(()=>[tZ,x(c,{size:"small",value:i.todoMsgSwitch,"onUpdate:value":t[3]||(t[3]=Q=>i.setTodoMsgSwitch(Q))},null,8,["value"])]),default:C(()=>[U("div",null,[x(f,{value:i.todoSendType,"onUpdate:value":t[4]||(t[4]=Q=>i.setTodoSendType(Q))},{default:C(()=>[x(d,{"item-style":"display: flex;"},{default:C(()=>[x(u,{value:"inmail",label:"\u7AD9\u5185\u4FE1"}),x(u,{value:"email",label:"\u90AE\u4EF6"}),x(u,{value:"wechat",label:"\u5FAE\u4FE1"})]),_:1})]),_:1},8,["value"])])]),_:1}),x(s,{label:"\u7533\u8BF7\u4EBA\u8282\u70B9\u6D88\u606F\u63D0\u9192",path:"inputValue"},{label:C(()=>[nZ,x(c,{size:"small",value:i.applyMsgSwitch,"onUpdate:value":t[5]||(t[5]=Q=>i.setApplyMsgSwitch(Q))},null,8,["value"])]),default:C(()=>[U("div",null,[x(f,{value:i.applySendType,"onUpdate:value":t[6]||(t[6]=Q=>i.setApplySendType(Q))},{default:C(()=>[x(d,{"item-style":"display: flex;"},{default:C(()=>[x(u,{value:"inmail",label:"\u7AD9\u5185\u4FE1"}),x(u,{value:"email",label:"\u90AE\u4EF6"}),x(u,{value:"wechat",label:"\u5FAE\u4FE1"})]),_:1})]),_:1},8,["value"])])]),_:1}),i.actionElBusinessObject.id!=="firstNode"?(fe(),Ge(s,{key:0,label:"\u4F1A\u7B7E","label-style":"align-items: center;",path:"inputValue"},{label:C(()=>[iZ,x(c,{size:"small",value:i.isMultiInstance(),"onUpdate:value":i.setMultiInstance},null,8,["value","onUpdate:value"])]),default:C(()=>[i.isMultiInstance()?(fe(),Ge(v,{key:0,value:i.getMultiInstanceType(),onInput:t[7]||(t[7]=()=>{})},{default:C(()=>[x(m,{size:"small",value:"Sequential0"},{default:C(()=>[rZ,aZ]),_:1}),x(m,{disabled:"",size:"small",value:"Sequential1"},{default:C(()=>[oZ,sZ]),_:1})]),_:1},8,["value"])):Cn("",!0)]),_:1})):Cn("",!0),zs(U("div",null,[x(s,{label:"\u4F1A\u7B7E\u901A\u8FC7\u7387","label-style":"align-items: center;justify-content: space-between;",path:"inputValue"},{label:C(()=>[lZ,U("div",cZ,[x(g,{size:"small",value:Math.round(i.getMultiInstanceProperties("passingRate")*100),"onUpdate:value":t[8]||(t[8]=Q=>i.upDateMultiInstancePassingRate(Q)),max:100,min:0},null,8,["value"])])]),default:C(()=>[x(y,{style:{"font-size":"12px",margin:"0 10px"},step:5,marks:{0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},value:Math.round(i.getMultiInstanceProperties("passingRate")*100),"onUpdate:value":t[9]||(t[9]=Q=>i.upDateMultiInstancePassingRate(Q))},null,8,["value"])]),_:1}),uZ,x(s,{label:"\u901A\u8FC7\u5904\u7406",path:"inputValue"},{default:C(()=>[x(E,{size:"small",placeholder:"\u8BF7\u9009\u62E9\u5904\u7406\u65B9\u5F0F",options:[{value:"0",label:"\u6D41\u8F6C\u540E\u7F6E\u8282\u70B9"},{value:"1",label:"\u56DE\u9000\u524D\u7F6E\u8282\u70B9"}],value:i.getMultiInstanceProperties("passingHandle"),"onUpdate:value":t[10]||(t[10]=Q=>i.upDateMultiInstanceProperties("passingHandle",Q))},null,8,["value"])]),_:1}),x(s,{label:"\u4E0D\u901A\u8FC7\u5904\u7406",path:"inputValue"},{default:C(()=>[x(E,{size:"small",placeholder:"\u8BF7\u9009\u62E9\u5904\u7406\u65B9\u5F0F",options:[{value:"0",label:"\u6D41\u8F6C\u540E\u7F6E\u8282\u70B9"},{value:"1",label:"\u56DE\u9000\u524D\u7F6E\u8282\u70B9"}],value:i.getMultiInstanceProperties("unpassingHandle"),"onUpdate:value":t[11]||(t[11]=Q=>i.upDateMultiInstanceProperties("unpassingHandle",Q))},null,8,["value"])]),_:1})],512),[[id,i.isMultiInstance()]])]),_:1},512)]),_:1})]),_:1}),x(T,{name:"human",tab:"\u4EBA\u5458"},{default:C(()=>[U("div",pZ,[x(w)])]),_:1}),x(T,{name:"events",tab:"\u4E8B\u4EF6"},{default:C(()=>[x(O,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(R)]),_:1})]),_:1}),x(T,{name:"form",tab:"\u8868\u5355"},{default:C(()=>[x(O,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(L)]),_:1})]),_:1}),x(T,{name:"button",tab:"\u6309\u94AE"},{default:C(()=>[x(O,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(H)]),_:1})]),_:1}),x(T,{name:"vars",tab:"\u53D8\u91CF"},{default:C(()=>[U("div",dZ,[x($)])]),_:1}),x(T,{name:"others",tab:"\u5176\u4ED6"},{default:C(()=>[x(O,{"native-scrollbar":!1,class:"pro-properties-panel-content"},{default:C(()=>[x(N,{ref:"otherformRef","label-placement":"top","label-width":60,size:"small",style:{padding:"5px 10px"}},{default:C(()=>[x(s,{label:"\u9009\u4EBA\u89C4\u5219",path:"selectRule"},{default:C(()=>[x(E,{size:"small",placeholder:"",options:[{value:"0",label:"\u9ED8\u8BA4\u9009\u4EBA"},{value:"1",label:"\u603B\u662F\u5148\u9009\u4EBA"},{value:"2",label:"\u53EA\u53D6\u7B2C\u4E00\u4E2A\u4EBA"},{value:"3",label:"\u603B\u662F\u4E0D\u9009\u4EBA"},{value:"4",label:"\u5F39\u51FA\u9009\u4EBA"}],value:i.actionElBusinessObject.selectRule,"onUpdate:value":t[12]||(t[12]=Q=>i.actionElBusinessObject.selectRule=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u6279\u91CF\u5BA1\u6279",path:"batchRule"},{default:C(()=>[x(E,{size:"small",placeholder:"",options:[{value:"0",label:"\u5426"},{value:"1",label:"\u4E0E\u4E0A\u4E00\u8282\u70B9\u76F8\u540C\u8DF3\u8FC7"},{value:"2",label:"\u53EA\u8981\u6709\u76F8\u540C\u5C31\u8DF3\u8FC7"}],value:i.actionElBusinessObject.batchRule,"onUpdate:value":t[13]||(t[13]=Q=>i.actionElBusinessObject.batchRule=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u662F\u5426\u652F\u6301\u64A4\u56DE",path:"cancelRule"},{default:C(()=>[x(E,{size:"small",placeholder:"",options:[{value:"1",label:"\u662F"},{value:"0",label:"\u5426"}],value:i.actionElBusinessObject.cancelRule,"onUpdate:value":t[14]||(t[14]=Q=>i.actionElBusinessObject.cancelRule=Q)},null,8,["value"])]),_:1}),x(s,{label:"\u662F\u5426\u652F\u6301\u9A73\u56DE",path:"returnRule"},{default:C(()=>[x(E,{size:"small",placeholder:"",options:[{value:"1",label:"\u662F"},{value:"0",label:"\u5426"}],value:i.actionElBusinessObject.returnRule,"onUpdate:value":t[15]||(t[15]=Q=>i.actionElBusinessObject.returnRule=Q)},null,8,["value"])]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}const hZ=Pe(eZ,[["render",fZ]]),mZ=Object.freeze(Object.defineProperty({__proto__:null,default:hZ},Symbol.toStringTag,{value:"Module"})),KE=Object.assign({"./bpmn-CallActivity.vue":Uq,"./bpmn-EndEvent.vue":Kq,"./bpmn-ExclusiveGateway.vue":Jq,"./bpmn-InclusiveGateway.vue":nK,"./bpmn-ParallelGateway.vue":oK,"./bpmn-Process.vue":EK,"./bpmn-SequenceFlow.vue":bX,"./bpmn-ServiceTask.vue":CX,"./bpmn-StartEvent.vue":RX,"./bpmn-SubProcess.vue":IX,"./bpmn-UserTask.vue":mZ}),KT={};Object.keys(KE).forEach(e=>{const t=KE[e].default;KT[t.name]=t});const vZ={props:{},components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NSteps:Ci,NStep:Ti,NGrid:si,NTree:Ei,NButton:ye,NwIcon:we,NConfigProvider:Kt,NModal:je,NInput:Oe,NSelect:$t,NForm:Bn,NFormItem:Ln,NFormItemGi:Pi,NCheckbox:wi,NRadio:ci,NRadioGroup:li,NwDic:qr,NSpin:Ne,...KT},setup(){const e=j("");return Li(xe,()=>{e.value="",Mn().then(()=>{e.value=xe&&xe.value?xe.value.$type.replace(":","-"):""})}),{actionElBusinessObject:xe,actionEl:ed,tagName:e}}};const gZ={class:"pro-properties-panel",style:{"padding-top":"4px",height:"calc(100% - 4px)"}},yZ={key:1,style:{display:"flex",height:"100%","justify-content":"center","align-items":"center"}};function _Z(e,t,n,i,r,a){const o=D("nw-icon");return fe(),lt("div",gZ,[i.actionElBusinessObject&&i.tagName?(fe(),Ge($N(i.tagName),{key:0,ref:"pv"},null,512)):Cn("",!0),i.actionElBusinessObject?Cn("",!0):(fe(),lt("div",yZ,[x(o,{name:"icon-kongkongde",size:20,style:{"margin-right":"4px"}}),_e("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5143\u7D20 ")]))])}const xZ=Pe(vZ,[["render",_Z]]);const bZ=Si({name:"layout",components:{NLayout:$e,NLayoutHeader:ze,NLayoutSider:Fe,NLayoutContent:He,NLayoutFooter:nt,MenuTop:SV,Design:AV,Xml:TU,PropertiesPanel:xZ},setup(){return{viewActive:j("design"),sizeChange(){}}}}),EZ={class:"nw-layout-footer-action-bar"};function wZ(e,t,n,i,r,a){const o=D("menu-top"),s=D("n-layout-header"),c=D("design"),u=D("d-splitter-pane"),d=D("properties-panel"),f=D("d-splitter"),m=D("xml"),v=D("n-layout-content"),g=D("n-layout"),y=D("n-layout-footer");return fe(),Ge(g,{class:"nw-layout",position:"absolute"},{default:C(()=>[x(s,{class:"nw-layout-header"},{default:C(()=>[x(o)]),_:1}),x(g,{"has-sider":"",class:"nw-layout-body"},{default:C(()=>[x(v,{class:"nw-layout-content"},{default:C(()=>[zs(x(f,{class:"nw-layout-content-splitter",splitBarSize:"1px"},{DSplitterPane:C(()=>[x(u,{class:"splitter-bpmn-view",minSize:"500px"},{default:C(()=>[x(c)]),_:1}),x(u,{class:"splitter-bpmn-attrs",size:"270px",minSize:"130px",onSizeChange:e.sizeChange},{default:C(()=>[x(d)]),_:1},8,["onSizeChange"])]),_:1},512),[[id,e.viewActive==="design"]]),e.viewActive==="xml"?(fe(),Ge(m,{key:0})):Cn("",!0)]),_:1})]),_:1}),x(y,{class:"nw-layout-footer"},{default:C(()=>[U("div",EZ,[U("div",{class:Fs({"item-code":!0,"nw-layout-footer-action-bar-item":!0,select:e.viewActive==="design"}),style:{left:"5px"},onClick:t[0]||(t[0]=E=>e.viewActive="design")},"\u8BBE\u8BA1",2),U("div",{class:Fs({"item-code":!0,"nw-layout-footer-action-bar-item":!0,select:e.viewActive==="xml"}),style:{left:"45px"},onClick:t[1]||(t[1]=E=>e.viewActive="xml")},"XML",2)])]),_:1})]),_:1})}const SZ=Pe(bZ,[["render",wZ]]);const CZ=Si({name:"App",components:{Layout:SZ,NMessageProvider:mw,NNotificationProvider:vw,NDialogProvider:zN,NConfigProvider:Kt,NSpin:Ne},setup(){const e=j(!1);return uV().then(()=>{e.value=!0}),{inited:e,zhCN:XN,dateZhCN:kk,sizeChange:n=>{console.log(n)},theme:IB}}});function TZ(e,t,n,i,r,a){const o=D("layout"),s=D("n-dialog-provider"),c=D("n-notification-provider"),u=D("n-message-provider"),d=D("n-config-provider");return fe(),Ge(d,{abstract:"","theme-overrides":e.theme,locale:e.zhCN,"date-locale":e.dateZhCN},{default:C(()=>[x(u,null,{default:C(()=>[x(c,null,{default:C(()=>[x(s,null,{default:C(()=>[x(o)]),_:1})]),_:1})]),_:1})]),_:1},8,["theme-overrides","locale","date-locale"])}const PZ=Pe(CZ,[["render",TZ]]);function Vp(e,t,n){let i=e;return t&&(i+=`__${t}`),n&&(i+=`--${n}`),i}function mu(e,t=!1){const n=t?`.devui-${e}`:`devui-${e}`;return{b:()=>Vp(n),e:s=>s?Vp(n,s):"",m:s=>s?Vp(n,"",s):"",em:(s,c)=>s&&c?Vp(n,s,c):""}}var YE=Si({name:"DLayout",emits:[],setup(e,{slots:t}){const n=mu("layout");return()=>{var i;const r=(i=t.default)==null?void 0:i.call(t),o=`${r.some(s=>s.type.name==="DAside")?n.e("aside"):""} ${n.b()}`;return x("div",{class:o},[r])}}}),XE=Si({name:"DContent",setup(e,{slots:t}){const n=mu("layout");return()=>{var i;return x("div",{class:n.e("content")},[(i=t.default)==null?void 0:i.call(t)])}}}),ZE=Si({name:"DHeader",setup(e,{slots:t}){const n=mu("layout");return()=>{var i;return x("div",{class:n.e("header")},[(i=t.default)==null?void 0:i.call(t)])}}}),JE=Si({name:"DFooter",setup(e,{slots:t}){const n=mu("layout");return()=>{var i;return x("div",{class:n.e("footer")},[(i=t.default)==null?void 0:i.call(t)])}}}),QE=Si({name:"DAside",setup(e,{slots:t}){const n=mu("layout");return()=>{var i;return x("div",{class:n.em("aside","inner")},[(i=t.default)==null?void 0:i.call(t)])}}}),AZ={title:"Layout \u5E03\u5C40",category:"\u5E03\u5C40",status:"100%",install(e){e.component(YE.name,YE),e.component(XE.name,XE),e.component(ZE.name,ZE),e.component(JE.name,JE),e.component(QE.name,QE)}};function Qs(e){return e.split("-")[0]}function $s(e){return e.split("-")[1]}function vu(e){return["top","bottom"].includes(Qs(e))?"x":"y"}function Py(e){return e==="y"?"height":"width"}function ew(e,t,n){let{reference:i,floating:r}=e;const a=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,s=vu(t),c=Py(s),u=i[c]/2-r[c]/2,d=s==="x";let f;switch(Qs(t)){case"top":f={x:a,y:i.y-r.height};break;case"bottom":f={x:a,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:o};break;case"left":f={x:i.x-r.width,y:o};break;default:f={x:i.x,y:i.y}}switch($s(t)){case"start":f[s]-=u*(n&&d?-1:1);break;case"end":f[s]+=u*(n&&d?-1:1)}return f}const RZ=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:o}=n,s=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=ew(c,i,s),f=i,m={};for(let v=0;v<a.length;v++){const{name:g,fn:y}=a[v],{x:E,y:N,data:O,reset:T}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:m,rects:c,platform:o,elements:{reference:e,floating:t}});u=E!=null?E:u,d=N!=null?N:d,m={...m,[g]:{...m[g],...O}},T&&(typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):T.rects),{x:u,y:d}=ew(c,f,s)),v=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:m}};function YT(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Rd(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function XT(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:a,rects:o,elements:s,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=t,g=YT(v),y=s[m?f==="floating"?"reference":"floating":f],E=Rd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:c})),N=Rd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:i,y:r}:o.reference,offsetParent:await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),strategy:c}):o[f]);return{top:E.top-N.top+g.top,bottom:N.bottom-E.bottom+g.bottom,left:E.left-N.left+g.left,right:N.right-E.right+g.right}}const MZ=Math.min,DZ=Math.max;function Av(e,t,n){return DZ(e,MZ(t,n))}const OZ=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:i=0}=e!=null?e:{},{x:r,y:a,placement:o,rects:s,platform:c}=t;if(n==null)return{};const u=YT(i),d={x:r,y:a},f=vu(o),m=Py(f),v=await c.getDimensions(n),g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",E=s.reference[m]+s.reference[f]-d[f]-s.floating[m],N=d[f]-s.reference[f],O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(n)),T=O?f==="y"?O.clientHeight||0:O.clientWidth||0:0,w=E/2-N/2,R=u[g],L=T-v[m]-u[y],H=T/2-v[m]/2+w,$=Av(R,H,L);return{data:{[f]:$,centerOffset:H-$}}}}),IZ={left:"right",right:"left",bottom:"top",top:"bottom"};function tw(e){return e.replace(/left|right|bottom|top/g,t=>IZ[t])}function NZ(e,t,n){n===void 0&&(n=!1);const i=$s(e),r=vu(e),a=Py(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=tw(o)),{main:o,cross:tw(o)}}const kZ={start:"end",end:"start"};function BZ(e){return e.replace(/start|end/g,t=>kZ[t])}const LZ=["top","right","bottom","left"],$Z=LZ.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),zZ=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,i,r,a,o;const{x:s,y:c,rects:u,middlewareData:d,placement:f,platform:m,elements:v}=t,{alignment:g=null,allowedPlacements:y=$Z,autoAlignment:E=!0,...N}=e,O=function(ke,Yt,re){return(ke?[...re.filter(ce=>$s(ce)===ke),...re.filter(ce=>$s(ce)!==ke)]:re.filter(ce=>Qs(ce)===ce)).filter(ce=>!ke||$s(ce)===ke||!!Yt&&BZ(ce)!==ce)}(g,E,y),T=await XT(t,N),w=(n=(i=d.autoPlacement)==null?void 0:i.index)!=null?n:0,R=O[w];if(R==null)return{};const{main:L,cross:H}=NZ(R,u,await(m.isRTL==null?void 0:m.isRTL(v.floating)));if(f!==R)return{x:s,y:c,reset:{placement:O[0]}};const $=[T[Qs(R)],T[L],T[H]],W=[...(r=(a=d.autoPlacement)==null?void 0:a.overflows)!=null?r:[],{placement:R,overflows:$}],Q=O[w+1];if(Q)return{data:{index:w+1,overflows:W},reset:{placement:Q}};const pe=W.slice().sort((ke,Yt)=>ke.overflows[0]-Yt.overflows[0]),oe=(o=pe.find(ke=>{let{overflows:Yt}=ke;return Yt.every(re=>re<=0)}))==null?void 0:o.placement,be=oe!=null?oe:pe[0].placement;return be!==f?{data:{index:w+1,overflows:W},reset:{placement:be}}:{}}}},FZ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:i,placement:r,rects:a,platform:o,elements:s}=t,c=function(u,d,f,m){m===void 0&&(m=!1);const v=Qs(u),g=$s(u),y=vu(u)==="x",E=["left","top"].includes(v)?-1:1,N=m&&y?-1:1,O=typeof f=="function"?f({...d,placement:u}):f;let{mainAxis:T,crossAxis:w,alignmentAxis:R}=typeof O=="number"?{mainAxis:O,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...O};return g&&typeof R=="number"&&(w=g==="end"?-1*R:R),y?{x:w*N,y:T*E}:{x:T*E,y:w*N}}(r,a,e,await(o.isRTL==null?void 0:o.isRTL(s.floating)));return{x:n+c.x,y:i+c.y,data:c}}}};function HZ(e){return e==="x"?"y":"x"}const jZ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:E=>{let{x:N,y:O}=E;return{x:N,y:O}}},...c}=e,u={x:n,y:i},d=await XT(t,c),f=vu(Qs(r)),m=HZ(f);let v=u[f],g=u[m];if(a){const E=f==="y"?"bottom":"right";v=Av(v+d[f==="y"?"top":"left"],v,v-d[E])}if(o){const E=m==="y"?"bottom":"right";g=Av(g+d[m==="y"?"top":"left"],g,g-d[E])}const y=s.fn({...t,[f]:v,[m]:g});return{...y,data:{x:y.x-n,y:y.y-i}}}}};function ZT(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Oa(e){if(e==null)return window;if(!ZT(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function gu(e){return Oa(e).getComputedStyle(e)}function xa(e){return ZT(e)?"":e?(e.nodeName||"").toLowerCase():""}function Gr(e){return e instanceof Oa(e).HTMLElement}function el(e){return e instanceof Oa(e).Element}function Ay(e){return typeof ShadowRoot>"u"?!1:e instanceof Oa(e).ShadowRoot||e instanceof ShadowRoot}function Nf(e){const{overflow:t,overflowX:n,overflowY:i}=gu(e);return/auto|scroll|overlay|hidden/.test(t+i+n)}function VZ(e){return["table","td","th"].includes(xa(e))}function nw(e){const t=navigator.userAgent.toLowerCase().includes("firefox"),n=gu(e);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"}function JT(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const iw=Math.min,xc=Math.max,Md=Math.round;function jo(e,t,n){var i,r,a,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect();let c=1,u=1;t&&Gr(e)&&(c=e.offsetWidth>0&&Md(s.width)/e.offsetWidth||1,u=e.offsetHeight>0&&Md(s.height)/e.offsetHeight||1);const d=el(e)?Oa(e):window,f=!JT()&&n,m=(s.left+(f&&(i=(r=d.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/c,v=(s.top+(f&&(a=(o=d.visualViewport)==null?void 0:o.offsetTop)!=null?a:0))/u,g=s.width/c,y=s.height/u;return{width:g,height:y,top:v,right:m+g,bottom:v+y,left:m,x:m,y:v}}function Za(e){return(t=e,(t instanceof Oa(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function kf(e){return el(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function QT(e){return jo(Za(e)).left+kf(e).scrollLeft}function UZ(e,t,n){const i=Gr(t),r=Za(t),a=jo(e,i&&function(c){const u=jo(c);return Md(u.width)!==c.offsetWidth||Md(u.height)!==c.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(i||!i&&n!=="fixed")if((xa(t)!=="body"||Nf(r))&&(o=kf(t)),Gr(t)){const c=jo(t,!0);s.x=c.x+t.clientLeft,s.y=c.y+t.clientTop}else r&&(s.x=QT(r));return{x:a.left+o.scrollLeft-s.x,y:a.top+o.scrollTop-s.y,width:a.width,height:a.height}}function eP(e){return xa(e)==="html"?e:e.assignedSlot||e.parentNode||(Ay(e)?e.host:null)||Za(e)}function rw(e){return Gr(e)&&getComputedStyle(e).position!=="fixed"?e.offsetParent:null}function Rv(e){const t=Oa(e);let n=rw(e);for(;n&&VZ(n)&&getComputedStyle(n).position==="static";)n=rw(n);return n&&(xa(n)==="html"||xa(n)==="body"&&getComputedStyle(n).position==="static"&&!nw(n))?t:n||function(i){let r=eP(i);for(Ay(r)&&(r=r.host);Gr(r)&&!["html","body"].includes(xa(r));){if(nw(r))return r;r=r.parentNode}return null}(e)||t}function aw(e){if(Gr(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=jo(e);return{width:t.width,height:t.height}}function tP(e){const t=eP(e);return["html","body","#document"].includes(xa(t))?e.ownerDocument.body:Gr(t)&&Nf(t)?t:tP(t)}function nP(e,t){var n;t===void 0&&(t=[]);const i=tP(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),a=Oa(i),o=r?[a].concat(a.visualViewport||[],Nf(i)?i:[]):i,s=t.concat(o);return r?s:s.concat(nP(o))}function ow(e,t,n){return t==="viewport"?Rd(function(i,r){const a=Oa(i),o=Za(i),s=a.visualViewport;let c=o.clientWidth,u=o.clientHeight,d=0,f=0;if(s){c=s.width,u=s.height;const m=JT();(m||!m&&r==="fixed")&&(d=s.offsetLeft,f=s.offsetTop)}return{width:c,height:u,x:d,y:f}}(e,n)):el(t)?function(i,r){const a=jo(i,!1,r==="fixed"),o=a.top+i.clientTop,s=a.left+i.clientLeft;return{top:o,left:s,x:s,y:o,right:s+i.clientWidth,bottom:o+i.clientHeight,width:i.clientWidth,height:i.clientHeight}}(t,n):Rd(function(i){var r;const a=Za(i),o=kf(i),s=(r=i.ownerDocument)==null?void 0:r.body,c=xc(a.scrollWidth,a.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),u=xc(a.scrollHeight,a.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let d=-o.scrollLeft+QT(i);const f=-o.scrollTop;return gu(s||a).direction==="rtl"&&(d+=xc(a.clientWidth,s?s.clientWidth:0)-c),{width:c,height:u,x:d,y:f}}(Za(e)))}function WZ(e){const t=nP(e),n=["absolute","fixed"].includes(gu(e).position)&&Gr(e)?Rv(e):e;return el(n)?t.filter(i=>el(i)&&function(r,a){const o=a==null||a.getRootNode==null?void 0:a.getRootNode();if(r!=null&&r.contains(a))return!0;if(o&&Ay(o)){let s=a;do{if(s&&r===s)return!0;s=s.parentNode||s.host}while(s)}return!1}(i,n)&&xa(i)!=="body"):[]}const GZ={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const a=[...n==="clippingAncestors"?WZ(t):[].concat(n),i],o=a[0],s=a.reduce((c,u)=>{const d=ow(t,u,r);return c.top=xc(d.top,c.top),c.right=iw(d.right,c.right),c.bottom=iw(d.bottom,c.bottom),c.left=xc(d.left,c.left),c},ow(t,o,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:i}=e;const r=Gr(n),a=Za(n);if(n===a)return t;let o={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((r||!r&&i!=="fixed")&&((xa(n)!=="body"||Nf(a))&&(o=kf(n)),Gr(n))){const c=jo(n,!0);s.x=c.x+n.clientLeft,s.y=c.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+s.x,y:t.y-o.scrollTop+s.y}},isElement:el,getDimensions:aw,getOffsetParent:Rv,getDocumentElement:Za,getElementRects:e=>{let{reference:t,floating:n,strategy:i}=e;return{reference:UZ(t,Rv(n),i),floating:{...aw(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>gu(e).direction==="rtl"},qZ=(e,t,n)=>RZ(e,t,{platform:GZ,...n}),KZ={modelValue:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}};function YZ(){if(document.documentElement.scrollHeight>document.documentElement.clientHeight){const e=document.documentElement.scrollTop,t=document.documentElement.getAttribute("style");return document.documentElement.style.position="fixed",document.documentElement.style.top=`-${e}px`,document.documentElement.style.width=document.documentElement.style.width||"100%",document.documentElement.style.overflowY="scroll",()=>{t?document.documentElement.setAttribute("style",t):document.documentElement.removeAttribute("style"),document.documentElement.scrollTop=e}}}function XZ(e,t){let n;const i=a=>{a.preventDefault(),t.emit("click",a),e.closeOnClickOverlay&&t.emit("update:modelValue",!1)},r=()=>{n==null||n()};return Li(()=>e.modelValue,a=>{a?e.lockScroll&&(n=YZ()):r()}),Bv(r),{onClick:i}}function Up(e,t,n){let i=e;return t&&(i+=`__${t}`),n&&(i+=`--${n}`),i}function is(e,t=!1){const n=t?`.devui-${e}`:`devui-${e}`;return{b:()=>Up(n),e:s=>s?Up(n,s):"",m:s=>s?Up(n,"",s):"",em:(s,c)=>s&&c?Up(n,s,c):""}}Si({name:"DFixedOverlay",inheritAttrs:!1,props:KZ,emits:["update:modelValue","click"],setup(e,t){const{modelValue:n}=Nv(e),i=is("fixed-overlay"),{onClick:r}=XZ(e,t);return()=>x(yw,{name:i.m("fade")},{default:()=>{var a,o;return[n.value&&x("div",Et({class:i.b()},t.attrs,{onClick:r}),[(o=(a=t.slots).default)==null?void 0:o.call(a)])]}})}});const ZZ={modelValue:{type:Boolean,default:!1},origin:{type:Object,require:!0},position:{type:Array,default:["bottom"]},offset:{type:[Number,Object],default:8},shiftOffset:{type:Number},align:{type:String,default:null},showArrow:{type:Boolean,default:!1},isArrowCenter:{type:Boolean,default:!0}};function JZ(e){const t=/(auto|scroll|hidden)/;for(let n=e;n=n.parentElement;n.parentElement!==document.body){const i=window.getComputedStyle(n);if(t.test(i.overflow+i.overflowX+i.overflowY))return n}return window}function QZ(e,t,n,i){let{x:r,y:a}=t;if(!e){const{width:o,height:s}=i;r&&n.includes("start")&&(r=12),r&&n.includes("end")&&(r=Math.round(o-24)),a&&n.includes("start")&&(a=10),a&&n.includes("end")&&(a=s-14)}return{x:r,y:a}}function eJ(e,t){const n=j(),i=j();let r=null;const a=(s,c,u,d)=>{const{x:f,y:m}=QZ(e.isArrowCenter,u,c,d.getBoundingClientRect()),v={top:"bottom",right:"left",bottom:"top",left:"right"}[c.split("-")[0]];Object.assign(s.style,{left:f?`${f}px`:"",top:m?`${m}px`:"",right:"",bottom:"",[v]:"-4px"})},o=async()=>{const s=e.origin,c=Fx(n.value),u=Fx(i.value),d=[FZ(e.offset),zZ({alignment:e.align,allowedPlacements:e.position})];e.showArrow&&d.push(OZ({element:u})),e.shiftOffset!==void 0&&d.push(jZ());const{x:f,y:m,placement:v,middlewareData:g}=await qZ(s,c,{strategy:"fixed",middleware:d});let y=f,E=m;if(e.shiftOffset!==void 0){const{x:N,y:O}=g.shift;N<0&&(y-=e.shiftOffset),N>0&&(y+=e.shiftOffset),O<0&&(E-=e.shiftOffset),O>0&&(E+=e.shiftOffset)}t("positionChange",v),Object.assign(c.style,{top:`${E}px`,left:`${y}px`}),e.showArrow&&a(u,v,g.arrow,c)};return Li(()=>e.modelValue,()=>{e.modelValue&&e.origin?(r=JZ(e.origin),Mn(o),r==null||r.addEventListener("scroll",o),r!==window&&window.addEventListener("scroll",o),window.addEventListener("resize",o)):(r==null||r.removeEventListener("scroll",o),r!==window&&window.removeEventListener("scroll",o),window.removeEventListener("resize",o))}),Bv(()=>{r==null||r.removeEventListener("scroll",o),r!==window&&window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}),{arrowRef:i,overlayRef:n,updatePosition:o}}const tJ=Si({name:"DFlexibleOverlay",inheritAttrs:!1,props:ZZ,emits:["update:modelValue","positionChange"],setup(e,{slots:t,attrs:n,emit:i,expose:r}){const a=is("flexible-overlay"),{arrowRef:o,overlayRef:s,updatePosition:c}=eJ(e,i);return r({updatePosition:c}),()=>{var u;return e.modelValue&&x("div",Et({ref:s,class:a.b()},n),[(u=t.default)==null?void 0:u.call(t),e.showArrow&&x("div",{ref:o,class:a.e("arrow")},null)])}}}),iP=Symbol("popper-trigger"),nJ=e=>e!==null&&typeof e=="object",iJ=is("popper-trigger");function sw(e){return te("span",{class:iJ.b()},e)}function rP(e){for(const t of e){if(nJ(t)){if(t.type===VN)continue;return t.type==="svg"||t.type===UN?sw(t):t.type===on?rP(t.children):t}return sw(t)}return null}var rJ=Si({name:"DPopperTrigger",setup(e,t){const{slots:n,attrs:i}=t;return()=>{var r;const a=(r=n.default)==null?void 0:r.call(n,i),o=ad(iP);if(!a)return null;const s=rP(a);return s?zs(FN(s,i),[[{mounted(c){o.value=c},updated(c){o.value=c},unmounted(){o.value=null}}]]):null}}});const aJ={content:{type:String,default:""},position:{type:[String,Array],default:"top"},showAnimation:{type:Boolean,default:!0},mouseEnterDelay:{type:Number,default:150},mouseLeaveDelay:{type:Number,default:100},enterable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},hideAfter:{type:Number,default:0}};var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var n,i="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",f=1,m=2,v=4,g=1,y=2,E=1,N=2,O=4,T=8,w=16,R=32,L=64,H=128,$=256,W=512,Q=30,pe="...",oe=800,be=16,ke=1,Yt=2,re=3,ce=1/0,B=9007199254740991,b=17976931348623157e292,z=0/0,K=4294967295,se=K-1,Z=K>>>1,ee=[["ary",H],["bind",E],["bindKey",N],["curry",T],["curryRight",w],["flip",W],["partial",R],["partialRight",L],["rearg",$]],me="[object Arguments]",qe="[object Array]",Je="[object AsyncFunction]",St="[object Boolean]",tt="[object Date]",ut="[object DOMException]",Xt="[object Error]",Ht="[object Function]",wt="[object GeneratorFunction]",ot="[object Map]",nn="[object Number]",gn="[object Null]",Ae="[object Object]",Bt="[object Promise]",Mt="[object Proxy]",Me="[object RegExp]",Tt="[object Set]",Dn="[object String]",ln="[object Symbol]",Be="[object Undefined]",de="[object WeakMap]",We="[object WeakSet]",it="[object ArrayBuffer]",_t="[object DataView]",rn="[object Float32Array]",Kn="[object Float64Array]",Sr="[object Int8Array]",ea="[object Int16Array]",yl="[object Int32Array]",_l="[object Uint8Array]",xl="[object Uint8ClampedArray]",bl="[object Uint16Array]",El="[object Uint32Array]",rs=/\b__p \+= '';/g,Bf=/\b(__p \+=) '' \+/g,Lf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wl=/&(?:amp|lt|gt|quot|#39);/g,Sl=/[&<>"']/g,Cl=RegExp(wl.source),$f=RegExp(Sl.source),zf=/<%-([\s\S]+?)%>/g,Ff=/<%([\s\S]+?)%>/g,Tl=/<%=([\s\S]+?)%>/g,Hf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jf=/^\w*$/,Vf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ia=/[\\^$.*+?()[\]{}|]/g,Uf=RegExp(Ia.source),Pl=/^\s+/,yu=/\s/,Al=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wf=/\{\n\/\* \[wrapped with (.+)\] \*/,_u=/,? & /,Gf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xu=/[()=,{}\[\]\/\s]/,bu=/\\(\\)?/g,Eu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rl=/\w*$/,Ml=/^[-+]0x[0-9a-f]+$/i,ta=/^0b[01]+$/i,_o=/^\[object .+?Constructor\]$/,xo=/^0o[0-7]+$/i,as=/^(?:0|[1-9]\d*)$/,Dl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,os=/($^)/,qf=/['\n\r\u2028\u2029\\]/g,na="\\ud800-\\udfff",di="\\u0300-\\u036f",Na="\\ufe20-\\ufe2f",Cr="\\u20d0-\\u20ff",Wi=di+Na+Cr,ka="\\u2700-\\u27bf",Mi="a-z\\xdf-\\xf6\\xf8-\\xff",pr="\\xac\\xb1\\xd7\\xf7",wu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Su="\\u2000-\\u206f",ss=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fi="A-Z\\xc0-\\xd6\\xd8-\\xde",bo="\\ufe0e\\ufe0f",ls=pr+wu+Su+ss,Eo="['\u2019]",Ol="["+na+"]",cs="["+ls+"]",ia="["+Wi+"]",Gi="\\d+",Kf="["+ka+"]",Il="["+Mi+"]",us="[^"+na+ls+Gi+ka+Mi+fi+"]",ps="\\ud83c[\\udffb-\\udfff]",Yf="(?:"+ia+"|"+ps+")",Cu="[^"+na+"]",A="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",V="["+fi+"]",ne="\\u200d",ge="(?:"+Il+"|"+us+")",Re="(?:"+V+"|"+us+")",vt="(?:"+Eo+"(?:d|ll|m|re|s|t|ve))?",yn="(?:"+Eo+"(?:D|LL|M|RE|S|T|VE))?",wn=Yf+"?",On="["+bo+"]?",qi="(?:"+ne+"(?:"+[Cu,A,k].join("|")+")"+On+wn+")*",sP="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",My=On+wn+qi,cP="(?:"+[Kf,A,k].join("|")+")"+My,uP="(?:"+[Cu+ia+"?",ia,A,k,Ol].join("|")+")",pP=RegExp(Eo,"g"),dP=RegExp(ia,"g"),Xf=RegExp(ps+"(?="+ps+")|"+uP+My,"g"),fP=RegExp([V+"?"+Il+"+"+vt+"(?="+[cs,V,"$"].join("|")+")",Re+"+"+yn+"(?="+[cs,V+ge,"$"].join("|")+")",V+"?"+ge+"+"+vt,V+"+"+yn,lP,sP,Gi,cP].join("|"),"g"),hP=RegExp("["+ne+na+Wi+bo+"]"),mP=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vP=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gP=-1,Zt={};Zt[rn]=Zt[Kn]=Zt[Sr]=Zt[ea]=Zt[yl]=Zt[_l]=Zt[xl]=Zt[bl]=Zt[El]=!0,Zt[me]=Zt[qe]=Zt[it]=Zt[St]=Zt[_t]=Zt[tt]=Zt[Xt]=Zt[Ht]=Zt[ot]=Zt[nn]=Zt[Ae]=Zt[Me]=Zt[Tt]=Zt[Dn]=Zt[de]=!1;var qt={};qt[me]=qt[qe]=qt[it]=qt[_t]=qt[St]=qt[tt]=qt[rn]=qt[Kn]=qt[Sr]=qt[ea]=qt[yl]=qt[ot]=qt[nn]=qt[Ae]=qt[Me]=qt[Tt]=qt[Dn]=qt[ln]=qt[_l]=qt[xl]=qt[bl]=qt[El]=!0,qt[Xt]=qt[Ht]=qt[de]=!1;var yP={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xP={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bP={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},EP=parseFloat,wP=parseInt,Dy=typeof sc=="object"&&sc&&sc.Object===Object&&sc,SP=typeof self=="object"&&self&&self.Object===Object&&self,Fn=Dy||SP||Function("return this")(),Zf=t&&!t.nodeType&&t,wo=Zf&&!0&&e&&!e.nodeType&&e,Oy=wo&&wo.exports===Zf,Jf=Oy&&Dy.process,Ki=function(){try{var X=wo&&wo.require&&wo.require("util").types;return X||Jf&&Jf.binding&&Jf.binding("util")}catch{}}(),Iy=Ki&&Ki.isArrayBuffer,Ny=Ki&&Ki.isDate,ky=Ki&&Ki.isMap,By=Ki&&Ki.isRegExp,Ly=Ki&&Ki.isSet,$y=Ki&&Ki.isTypedArray;function Di(X,ae,ie){switch(ie.length){case 0:return X.call(ae);case 1:return X.call(ae,ie[0]);case 2:return X.call(ae,ie[0],ie[1]);case 3:return X.call(ae,ie[0],ie[1],ie[2])}return X.apply(ae,ie)}function CP(X,ae,ie,De){for(var ct=-1,It=X==null?0:X.length;++ct<It;){var An=X[ct];ae(De,An,ie(An),X)}return De}function Yi(X,ae){for(var ie=-1,De=X==null?0:X.length;++ie<De&&ae(X[ie],ie,X)!==!1;);return X}function TP(X,ae){for(var ie=X==null?0:X.length;ie--&&ae(X[ie],ie,X)!==!1;);return X}function zy(X,ae){for(var ie=-1,De=X==null?0:X.length;++ie<De;)if(!ae(X[ie],ie,X))return!1;return!0}function Ba(X,ae){for(var ie=-1,De=X==null?0:X.length,ct=0,It=[];++ie<De;){var An=X[ie];ae(An,ie,X)&&(It[ct++]=An)}return It}function Tu(X,ae){var ie=X==null?0:X.length;return!!ie&&ds(X,ae,0)>-1}function Qf(X,ae,ie){for(var De=-1,ct=X==null?0:X.length;++De<ct;)if(ie(ae,X[De]))return!0;return!1}function tn(X,ae){for(var ie=-1,De=X==null?0:X.length,ct=Array(De);++ie<De;)ct[ie]=ae(X[ie],ie,X);return ct}function La(X,ae){for(var ie=-1,De=ae.length,ct=X.length;++ie<De;)X[ct+ie]=ae[ie];return X}function eh(X,ae,ie,De){var ct=-1,It=X==null?0:X.length;for(De&&It&&(ie=X[++ct]);++ct<It;)ie=ae(ie,X[ct],ct,X);return ie}function PP(X,ae,ie,De){var ct=X==null?0:X.length;for(De&&ct&&(ie=X[--ct]);ct--;)ie=ae(ie,X[ct],ct,X);return ie}function th(X,ae){for(var ie=-1,De=X==null?0:X.length;++ie<De;)if(ae(X[ie],ie,X))return!0;return!1}var AP=nh("length");function RP(X){return X.split("")}function MP(X){return X.match(Gf)||[]}function Fy(X,ae,ie){var De;return ie(X,function(ct,It,An){if(ae(ct,It,An))return De=It,!1}),De}function Pu(X,ae,ie,De){for(var ct=X.length,It=ie+(De?1:-1);De?It--:++It<ct;)if(ae(X[It],It,X))return It;return-1}function ds(X,ae,ie){return ae===ae?jP(X,ae,ie):Pu(X,Hy,ie)}function DP(X,ae,ie,De){for(var ct=ie-1,It=X.length;++ct<It;)if(De(X[ct],ae))return ct;return-1}function Hy(X){return X!==X}function jy(X,ae){var ie=X==null?0:X.length;return ie?rh(X,ae)/ie:z}function nh(X){return function(ae){return ae==null?n:ae[X]}}function ih(X){return function(ae){return X==null?n:X[ae]}}function Vy(X,ae,ie,De,ct){return ct(X,function(It,An,Ut){ie=De?(De=!1,It):ae(ie,It,An,Ut)}),ie}function OP(X,ae){var ie=X.length;for(X.sort(ae);ie--;)X[ie]=X[ie].value;return X}function rh(X,ae){for(var ie,De=-1,ct=X.length;++De<ct;){var It=ae(X[De]);It!==n&&(ie=ie===n?It:ie+It)}return ie}function ah(X,ae){for(var ie=-1,De=Array(X);++ie<X;)De[ie]=ae(ie);return De}function IP(X,ae){return tn(ae,function(ie){return[ie,X[ie]]})}function Uy(X){return X&&X.slice(0,Ky(X)+1).replace(Pl,"")}function Oi(X){return function(ae){return X(ae)}}function oh(X,ae){return tn(ae,function(ie){return X[ie]})}function Nl(X,ae){return X.has(ae)}function Wy(X,ae){for(var ie=-1,De=X.length;++ie<De&&ds(ae,X[ie],0)>-1;);return ie}function Gy(X,ae){for(var ie=X.length;ie--&&ds(ae,X[ie],0)>-1;);return ie}function NP(X,ae){for(var ie=X.length,De=0;ie--;)X[ie]===ae&&++De;return De}var kP=ih(yP),BP=ih(_P);function LP(X){return"\\"+bP[X]}function $P(X,ae){return X==null?n:X[ae]}function fs(X){return hP.test(X)}function zP(X){return mP.test(X)}function FP(X){for(var ae,ie=[];!(ae=X.next()).done;)ie.push(ae.value);return ie}function sh(X){var ae=-1,ie=Array(X.size);return X.forEach(function(De,ct){ie[++ae]=[ct,De]}),ie}function qy(X,ae){return function(ie){return X(ae(ie))}}function $a(X,ae){for(var ie=-1,De=X.length,ct=0,It=[];++ie<De;){var An=X[ie];(An===ae||An===d)&&(X[ie]=d,It[ct++]=ie)}return It}function Au(X){var ae=-1,ie=Array(X.size);return X.forEach(function(De){ie[++ae]=De}),ie}function HP(X){var ae=-1,ie=Array(X.size);return X.forEach(function(De){ie[++ae]=[De,De]}),ie}function jP(X,ae,ie){for(var De=ie-1,ct=X.length;++De<ct;)if(X[De]===ae)return De;return-1}function VP(X,ae,ie){for(var De=ie+1;De--;)if(X[De]===ae)return De;return De}function hs(X){return fs(X)?WP(X):AP(X)}function dr(X){return fs(X)?GP(X):RP(X)}function Ky(X){for(var ae=X.length;ae--&&yu.test(X.charAt(ae)););return ae}var UP=ih(xP);function WP(X){for(var ae=Xf.lastIndex=0;Xf.test(X);)++ae;return ae}function GP(X){return X.match(Xf)||[]}function qP(X){return X.match(fP)||[]}var KP=function X(ae){ae=ae==null?Fn:ms.defaults(Fn.Object(),ae,ms.pick(Fn,vP));var ie=ae.Array,De=ae.Date,ct=ae.Error,It=ae.Function,An=ae.Math,Ut=ae.Object,lh=ae.RegExp,YP=ae.String,Xi=ae.TypeError,Ru=ie.prototype,XP=It.prototype,vs=Ut.prototype,Mu=ae["__core-js_shared__"],Du=XP.toString,zt=vs.hasOwnProperty,ZP=0,Yy=function(){var l=/[^.]+$/.exec(Mu&&Mu.keys&&Mu.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Ou=vs.toString,JP=Du.call(Ut),QP=Fn._,eA=lh("^"+Du.call(zt).replace(Ia,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Iu=Oy?ae.Buffer:n,za=ae.Symbol,Nu=ae.Uint8Array,Xy=Iu?Iu.allocUnsafe:n,ku=qy(Ut.getPrototypeOf,Ut),Zy=Ut.create,Jy=vs.propertyIsEnumerable,Bu=Ru.splice,Qy=za?za.isConcatSpreadable:n,kl=za?za.iterator:n,So=za?za.toStringTag:n,Lu=function(){try{var l=Ro(Ut,"defineProperty");return l({},"",{}),l}catch{}}(),tA=ae.clearTimeout!==Fn.clearTimeout&&ae.clearTimeout,nA=De&&De.now!==Fn.Date.now&&De.now,iA=ae.setTimeout!==Fn.setTimeout&&ae.setTimeout,$u=An.ceil,zu=An.floor,ch=Ut.getOwnPropertySymbols,rA=Iu?Iu.isBuffer:n,e_=ae.isFinite,aA=Ru.join,oA=qy(Ut.keys,Ut),Rn=An.max,Yn=An.min,sA=De.now,lA=ae.parseInt,t_=An.random,cA=Ru.reverse,uh=Ro(ae,"DataView"),Bl=Ro(ae,"Map"),ph=Ro(ae,"Promise"),gs=Ro(ae,"Set"),Ll=Ro(ae,"WeakMap"),$l=Ro(Ut,"create"),Fu=Ll&&new Ll,ys={},uA=Mo(uh),pA=Mo(Bl),dA=Mo(ph),fA=Mo(gs),hA=Mo(Ll),Hu=za?za.prototype:n,zl=Hu?Hu.valueOf:n,n_=Hu?Hu.toString:n;function M(l){if(cn(l)&&!pt(l)&&!(l instanceof Pt)){if(l instanceof Zi)return l;if(zt.call(l,"__wrapped__"))return ix(l)}return new Zi(l)}var _s=function(){function l(){}return function(p){if(!an(p))return{};if(Zy)return Zy(p);l.prototype=p;var h=new l;return l.prototype=n,h}}();function ju(){}function Zi(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=n}M.templateSettings={escape:zf,evaluate:Ff,interpolate:Tl,variable:"",imports:{_:M}},M.prototype=ju.prototype,M.prototype.constructor=M,Zi.prototype=_s(ju.prototype),Zi.prototype.constructor=Zi;function Pt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function mA(){var l=new Pt(this.__wrapped__);return l.__actions__=hi(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=hi(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=hi(this.__views__),l}function vA(){if(this.__filtered__){var l=new Pt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function gA(){var l=this.__wrapped__.value(),p=this.__dir__,h=pt(l),_=p<0,S=h?l.length:0,I=RR(0,S,this.__views__),F=I.start,q=I.end,J=q-F,le=_?q:F-1,ue=this.__iteratees__,he=ue.length,Ce=0,Ue=Yn(J,this.__takeCount__);if(!h||!_&&S==J&&Ue==J)return T_(l,this.__actions__);var Qe=[];e:for(;J--&&Ce<Ue;){le+=p;for(var gt=-1,et=l[le];++gt<he;){var Ct=ue[gt],Rt=Ct.iteratee,ki=Ct.type,ii=Rt(et);if(ki==Yt)et=ii;else if(!ii){if(ki==ke)continue e;break e}}Qe[Ce++]=et}return Qe}Pt.prototype=_s(ju.prototype),Pt.prototype.constructor=Pt;function Co(l){var p=-1,h=l==null?0:l.length;for(this.clear();++p<h;){var _=l[p];this.set(_[0],_[1])}}function yA(){this.__data__=$l?$l(null):{},this.size=0}function _A(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function xA(l){var p=this.__data__;if($l){var h=p[l];return h===c?n:h}return zt.call(p,l)?p[l]:n}function bA(l){var p=this.__data__;return $l?p[l]!==n:zt.call(p,l)}function EA(l,p){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=$l&&p===n?c:p,this}Co.prototype.clear=yA,Co.prototype.delete=_A,Co.prototype.get=xA,Co.prototype.has=bA,Co.prototype.set=EA;function ra(l){var p=-1,h=l==null?0:l.length;for(this.clear();++p<h;){var _=l[p];this.set(_[0],_[1])}}function wA(){this.__data__=[],this.size=0}function SA(l){var p=this.__data__,h=Vu(p,l);if(h<0)return!1;var _=p.length-1;return h==_?p.pop():Bu.call(p,h,1),--this.size,!0}function CA(l){var p=this.__data__,h=Vu(p,l);return h<0?n:p[h][1]}function TA(l){return Vu(this.__data__,l)>-1}function PA(l,p){var h=this.__data__,_=Vu(h,l);return _<0?(++this.size,h.push([l,p])):h[_][1]=p,this}ra.prototype.clear=wA,ra.prototype.delete=SA,ra.prototype.get=CA,ra.prototype.has=TA,ra.prototype.set=PA;function aa(l){var p=-1,h=l==null?0:l.length;for(this.clear();++p<h;){var _=l[p];this.set(_[0],_[1])}}function AA(){this.size=0,this.__data__={hash:new Co,map:new(Bl||ra),string:new Co}}function RA(l){var p=tp(this,l).delete(l);return this.size-=p?1:0,p}function MA(l){return tp(this,l).get(l)}function DA(l){return tp(this,l).has(l)}function OA(l,p){var h=tp(this,l),_=h.size;return h.set(l,p),this.size+=h.size==_?0:1,this}aa.prototype.clear=AA,aa.prototype.delete=RA,aa.prototype.get=MA,aa.prototype.has=DA,aa.prototype.set=OA;function To(l){var p=-1,h=l==null?0:l.length;for(this.__data__=new aa;++p<h;)this.add(l[p])}function IA(l){return this.__data__.set(l,c),this}function NA(l){return this.__data__.has(l)}To.prototype.add=To.prototype.push=IA,To.prototype.has=NA;function fr(l){var p=this.__data__=new ra(l);this.size=p.size}function kA(){this.__data__=new ra,this.size=0}function BA(l){var p=this.__data__,h=p.delete(l);return this.size=p.size,h}function LA(l){return this.__data__.get(l)}function $A(l){return this.__data__.has(l)}function zA(l,p){var h=this.__data__;if(h instanceof ra){var _=h.__data__;if(!Bl||_.length<r-1)return _.push([l,p]),this.size=++h.size,this;h=this.__data__=new aa(_)}return h.set(l,p),this.size=h.size,this}fr.prototype.clear=kA,fr.prototype.delete=BA,fr.prototype.get=LA,fr.prototype.has=$A,fr.prototype.set=zA;function i_(l,p){var h=pt(l),_=!h&&Do(l),S=!h&&!_&&Ua(l),I=!h&&!_&&!S&&ws(l),F=h||_||S||I,q=F?ah(l.length,YP):[],J=q.length;for(var le in l)(p||zt.call(l,le))&&!(F&&(le=="length"||S&&(le=="offset"||le=="parent")||I&&(le=="buffer"||le=="byteLength"||le=="byteOffset")||ca(le,J)))&&q.push(le);return q}function r_(l){var p=l.length;return p?l[Eh(0,p-1)]:n}function FA(l,p){return np(hi(l),Po(p,0,l.length))}function HA(l){return np(hi(l))}function dh(l,p,h){(h!==n&&!hr(l[p],h)||h===n&&!(p in l))&&oa(l,p,h)}function Fl(l,p,h){var _=l[p];(!(zt.call(l,p)&&hr(_,h))||h===n&&!(p in l))&&oa(l,p,h)}function Vu(l,p){for(var h=l.length;h--;)if(hr(l[h][0],p))return h;return-1}function jA(l,p,h,_){return Fa(l,function(S,I,F){p(_,S,h(S),F)}),_}function a_(l,p){return l&&Pr(p,In(p),l)}function VA(l,p){return l&&Pr(p,vi(p),l)}function oa(l,p,h){p=="__proto__"&&Lu?Lu(l,p,{configurable:!0,enumerable:!0,value:h,writable:!0}):l[p]=h}function fh(l,p){for(var h=-1,_=p.length,S=ie(_),I=l==null;++h<_;)S[h]=I?n:qh(l,p[h]);return S}function Po(l,p,h){return l===l&&(h!==n&&(l=l<=h?l:h),p!==n&&(l=l>=p?l:p)),l}function Ji(l,p,h,_,S,I){var F,q=p&f,J=p&m,le=p&v;if(h&&(F=S?h(l,_,S,I):h(l)),F!==n)return F;if(!an(l))return l;var ue=pt(l);if(ue){if(F=DR(l),!q)return hi(l,F)}else{var he=Xn(l),Ce=he==Ht||he==wt;if(Ua(l))return R_(l,q);if(he==Ae||he==me||Ce&&!S){if(F=J||Ce?{}:K_(l),!q)return J?xR(l,VA(F,l)):_R(l,a_(F,l))}else{if(!qt[he])return S?l:{};F=OR(l,he,q)}}I||(I=new fr);var Ue=I.get(l);if(Ue)return Ue;I.set(l,F),wx(l)?l.forEach(function(et){F.add(Ji(et,p,h,et,l,I))}):bx(l)&&l.forEach(function(et,Ct){F.set(Ct,Ji(et,p,h,Ct,l,I))});var Qe=le?J?Ih:Oh:J?vi:In,gt=ue?n:Qe(l);return Yi(gt||l,function(et,Ct){gt&&(Ct=et,et=l[Ct]),Fl(F,Ct,Ji(et,p,h,Ct,l,I))}),F}function UA(l){var p=In(l);return function(h){return o_(h,l,p)}}function o_(l,p,h){var _=h.length;if(l==null)return!_;for(l=Ut(l);_--;){var S=h[_],I=p[S],F=l[S];if(F===n&&!(S in l)||!I(F))return!1}return!0}function s_(l,p,h){if(typeof l!="function")throw new Xi(o);return ql(function(){l.apply(n,h)},p)}function Hl(l,p,h,_){var S=-1,I=Tu,F=!0,q=l.length,J=[],le=p.length;if(!q)return J;h&&(p=tn(p,Oi(h))),_?(I=Qf,F=!1):p.length>=r&&(I=Nl,F=!1,p=new To(p));e:for(;++S<q;){var ue=l[S],he=h==null?ue:h(ue);if(ue=_||ue!==0?ue:0,F&&he===he){for(var Ce=le;Ce--;)if(p[Ce]===he)continue e;J.push(ue)}else I(p,he,_)||J.push(ue)}return J}var Fa=N_(Tr),l_=N_(mh,!0);function WA(l,p){var h=!0;return Fa(l,function(_,S,I){return h=!!p(_,S,I),h}),h}function Uu(l,p,h){for(var _=-1,S=l.length;++_<S;){var I=l[_],F=p(I);if(F!=null&&(q===n?F===F&&!Ni(F):h(F,q)))var q=F,J=I}return J}function GA(l,p,h,_){var S=l.length;for(h=ht(h),h<0&&(h=-h>S?0:S+h),_=_===n||_>S?S:ht(_),_<0&&(_+=S),_=h>_?0:Cx(_);h<_;)l[h++]=p;return l}function c_(l,p){var h=[];return Fa(l,function(_,S,I){p(_,S,I)&&h.push(_)}),h}function Hn(l,p,h,_,S){var I=-1,F=l.length;for(h||(h=NR),S||(S=[]);++I<F;){var q=l[I];p>0&&h(q)?p>1?Hn(q,p-1,h,_,S):La(S,q):_||(S[S.length]=q)}return S}var hh=k_(),u_=k_(!0);function Tr(l,p){return l&&hh(l,p,In)}function mh(l,p){return l&&u_(l,p,In)}function Wu(l,p){return Ba(p,function(h){return ua(l[h])})}function Ao(l,p){p=ja(p,l);for(var h=0,_=p.length;l!=null&&h<_;)l=l[Ar(p[h++])];return h&&h==_?l:n}function p_(l,p,h){var _=p(l);return pt(l)?_:La(_,h(l))}function ti(l){return l==null?l===n?Be:gn:So&&So in Ut(l)?AR(l):HR(l)}function vh(l,p){return l>p}function qA(l,p){return l!=null&&zt.call(l,p)}function KA(l,p){return l!=null&&p in Ut(l)}function YA(l,p,h){return l>=Yn(p,h)&&l<Rn(p,h)}function gh(l,p,h){for(var _=h?Qf:Tu,S=l[0].length,I=l.length,F=I,q=ie(I),J=1/0,le=[];F--;){var ue=l[F];F&&p&&(ue=tn(ue,Oi(p))),J=Yn(ue.length,J),q[F]=!h&&(p||S>=120&&ue.length>=120)?new To(F&&ue):n}ue=l[0];var he=-1,Ce=q[0];e:for(;++he<S&&le.length<J;){var Ue=ue[he],Qe=p?p(Ue):Ue;if(Ue=h||Ue!==0?Ue:0,!(Ce?Nl(Ce,Qe):_(le,Qe,h))){for(F=I;--F;){var gt=q[F];if(!(gt?Nl(gt,Qe):_(l[F],Qe,h)))continue e}Ce&&Ce.push(Qe),le.push(Ue)}}return le}function XA(l,p,h,_){return Tr(l,function(S,I,F){p(_,h(S),I,F)}),_}function jl(l,p,h){p=ja(p,l),l=J_(l,p);var _=l==null?l:l[Ar(er(p))];return _==null?n:Di(_,l,h)}function d_(l){return cn(l)&&ti(l)==me}function ZA(l){return cn(l)&&ti(l)==it}function JA(l){return cn(l)&&ti(l)==tt}function Vl(l,p,h,_,S){return l===p?!0:l==null||p==null||!cn(l)&&!cn(p)?l!==l&&p!==p:QA(l,p,h,_,Vl,S)}function QA(l,p,h,_,S,I){var F=pt(l),q=pt(p),J=F?qe:Xn(l),le=q?qe:Xn(p);J=J==me?Ae:J,le=le==me?Ae:le;var ue=J==Ae,he=le==Ae,Ce=J==le;if(Ce&&Ua(l)){if(!Ua(p))return!1;F=!0,ue=!1}if(Ce&&!ue)return I||(I=new fr),F||ws(l)?W_(l,p,h,_,S,I):TR(l,p,J,h,_,S,I);if(!(h&g)){var Ue=ue&&zt.call(l,"__wrapped__"),Qe=he&&zt.call(p,"__wrapped__");if(Ue||Qe){var gt=Ue?l.value():l,et=Qe?p.value():p;return I||(I=new fr),S(gt,et,h,_,I)}}return Ce?(I||(I=new fr),PR(l,p,h,_,S,I)):!1}function eR(l){return cn(l)&&Xn(l)==ot}function yh(l,p,h,_){var S=h.length,I=S,F=!_;if(l==null)return!I;for(l=Ut(l);S--;){var q=h[S];if(F&&q[2]?q[1]!==l[q[0]]:!(q[0]in l))return!1}for(;++S<I;){q=h[S];var J=q[0],le=l[J],ue=q[1];if(F&&q[2]){if(le===n&&!(J in l))return!1}else{var he=new fr;if(_)var Ce=_(le,ue,J,l,p,he);if(!(Ce===n?Vl(ue,le,g|y,_,he):Ce))return!1}}return!0}function f_(l){if(!an(l)||BR(l))return!1;var p=ua(l)?eA:_o;return p.test(Mo(l))}function tR(l){return cn(l)&&ti(l)==Me}function nR(l){return cn(l)&&Xn(l)==Tt}function iR(l){return cn(l)&&lp(l.length)&&!!Zt[ti(l)]}function h_(l){return typeof l=="function"?l:l==null?gi:typeof l=="object"?pt(l)?g_(l[0],l[1]):v_(l):Bx(l)}function _h(l){if(!Gl(l))return oA(l);var p=[];for(var h in Ut(l))zt.call(l,h)&&h!="constructor"&&p.push(h);return p}function rR(l){if(!an(l))return FR(l);var p=Gl(l),h=[];for(var _ in l)_=="constructor"&&(p||!zt.call(l,_))||h.push(_);return h}function xh(l,p){return l<p}function m_(l,p){var h=-1,_=mi(l)?ie(l.length):[];return Fa(l,function(S,I,F){_[++h]=p(S,I,F)}),_}function v_(l){var p=kh(l);return p.length==1&&p[0][2]?X_(p[0][0],p[0][1]):function(h){return h===l||yh(h,l,p)}}function g_(l,p){return Lh(l)&&Y_(p)?X_(Ar(l),p):function(h){var _=qh(h,l);return _===n&&_===p?Kh(h,l):Vl(p,_,g|y)}}function Gu(l,p,h,_,S){l!==p&&hh(p,function(I,F){if(S||(S=new fr),an(I))aR(l,p,F,h,Gu,_,S);else{var q=_?_(zh(l,F),I,F+"",l,p,S):n;q===n&&(q=I),dh(l,F,q)}},vi)}function aR(l,p,h,_,S,I,F){var q=zh(l,h),J=zh(p,h),le=F.get(J);if(le){dh(l,h,le);return}var ue=I?I(q,J,h+"",l,p,F):n,he=ue===n;if(he){var Ce=pt(J),Ue=!Ce&&Ua(J),Qe=!Ce&&!Ue&&ws(J);ue=J,Ce||Ue||Qe?pt(q)?ue=q:_n(q)?ue=hi(q):Ue?(he=!1,ue=R_(J,!0)):Qe?(he=!1,ue=M_(J,!0)):ue=[]:Kl(J)||Do(J)?(ue=q,Do(q)?ue=Tx(q):(!an(q)||ua(q))&&(ue=K_(J))):he=!1}he&&(F.set(J,ue),S(ue,J,_,I,F),F.delete(J)),dh(l,h,ue)}function y_(l,p){var h=l.length;if(!!h)return p+=p<0?h:0,ca(p,h)?l[p]:n}function __(l,p,h){p.length?p=tn(p,function(I){return pt(I)?function(F){return Ao(F,I.length===1?I[0]:I)}:I}):p=[gi];var _=-1;p=tn(p,Oi(Ze()));var S=m_(l,function(I,F,q){var J=tn(p,function(le){return le(I)});return{criteria:J,index:++_,value:I}});return OP(S,function(I,F){return yR(I,F,h)})}function oR(l,p){return x_(l,p,function(h,_){return Kh(l,_)})}function x_(l,p,h){for(var _=-1,S=p.length,I={};++_<S;){var F=p[_],q=Ao(l,F);h(q,F)&&Ul(I,ja(F,l),q)}return I}function sR(l){return function(p){return Ao(p,l)}}function bh(l,p,h,_){var S=_?DP:ds,I=-1,F=p.length,q=l;for(l===p&&(p=hi(p)),h&&(q=tn(l,Oi(h)));++I<F;)for(var J=0,le=p[I],ue=h?h(le):le;(J=S(q,ue,J,_))>-1;)q!==l&&Bu.call(q,J,1),Bu.call(l,J,1);return l}function b_(l,p){for(var h=l?p.length:0,_=h-1;h--;){var S=p[h];if(h==_||S!==I){var I=S;ca(S)?Bu.call(l,S,1):Ch(l,S)}}return l}function Eh(l,p){return l+zu(t_()*(p-l+1))}function lR(l,p,h,_){for(var S=-1,I=Rn($u((p-l)/(h||1)),0),F=ie(I);I--;)F[_?I:++S]=l,l+=h;return F}function wh(l,p){var h="";if(!l||p<1||p>B)return h;do p%2&&(h+=l),p=zu(p/2),p&&(l+=l);while(p);return h}function xt(l,p){return Fh(Z_(l,p,gi),l+"")}function cR(l){return r_(Ss(l))}function uR(l,p){var h=Ss(l);return np(h,Po(p,0,h.length))}function Ul(l,p,h,_){if(!an(l))return l;p=ja(p,l);for(var S=-1,I=p.length,F=I-1,q=l;q!=null&&++S<I;){var J=Ar(p[S]),le=h;if(J==="__proto__"||J==="constructor"||J==="prototype")return l;if(S!=F){var ue=q[J];le=_?_(ue,J,q):n,le===n&&(le=an(ue)?ue:ca(p[S+1])?[]:{})}Fl(q,J,le),q=q[J]}return l}var E_=Fu?function(l,p){return Fu.set(l,p),l}:gi,pR=Lu?function(l,p){return Lu(l,"toString",{configurable:!0,enumerable:!1,value:Xh(p),writable:!0})}:gi;function dR(l){return np(Ss(l))}function Qi(l,p,h){var _=-1,S=l.length;p<0&&(p=-p>S?0:S+p),h=h>S?S:h,h<0&&(h+=S),S=p>h?0:h-p>>>0,p>>>=0;for(var I=ie(S);++_<S;)I[_]=l[_+p];return I}function fR(l,p){var h;return Fa(l,function(_,S,I){return h=p(_,S,I),!h}),!!h}function qu(l,p,h){var _=0,S=l==null?_:l.length;if(typeof p=="number"&&p===p&&S<=Z){for(;_<S;){var I=_+S>>>1,F=l[I];F!==null&&!Ni(F)&&(h?F<=p:F<p)?_=I+1:S=I}return S}return Sh(l,p,gi,h)}function Sh(l,p,h,_){var S=0,I=l==null?0:l.length;if(I===0)return 0;p=h(p);for(var F=p!==p,q=p===null,J=Ni(p),le=p===n;S<I;){var ue=zu((S+I)/2),he=h(l[ue]),Ce=he!==n,Ue=he===null,Qe=he===he,gt=Ni(he);if(F)var et=_||Qe;else le?et=Qe&&(_||Ce):q?et=Qe&&Ce&&(_||!Ue):J?et=Qe&&Ce&&!Ue&&(_||!gt):Ue||gt?et=!1:et=_?he<=p:he<p;et?S=ue+1:I=ue}return Yn(I,se)}function w_(l,p){for(var h=-1,_=l.length,S=0,I=[];++h<_;){var F=l[h],q=p?p(F):F;if(!h||!hr(q,J)){var J=q;I[S++]=F===0?0:F}}return I}function S_(l){return typeof l=="number"?l:Ni(l)?z:+l}function Ii(l){if(typeof l=="string")return l;if(pt(l))return tn(l,Ii)+"";if(Ni(l))return n_?n_.call(l):"";var p=l+"";return p=="0"&&1/l==-ce?"-0":p}function Ha(l,p,h){var _=-1,S=Tu,I=l.length,F=!0,q=[],J=q;if(h)F=!1,S=Qf;else if(I>=r){var le=p?null:SR(l);if(le)return Au(le);F=!1,S=Nl,J=new To}else J=p?[]:q;e:for(;++_<I;){var ue=l[_],he=p?p(ue):ue;if(ue=h||ue!==0?ue:0,F&&he===he){for(var Ce=J.length;Ce--;)if(J[Ce]===he)continue e;p&&J.push(he),q.push(ue)}else S(J,he,h)||(J!==q&&J.push(he),q.push(ue))}return q}function Ch(l,p){return p=ja(p,l),l=J_(l,p),l==null||delete l[Ar(er(p))]}function C_(l,p,h,_){return Ul(l,p,h(Ao(l,p)),_)}function Ku(l,p,h,_){for(var S=l.length,I=_?S:-1;(_?I--:++I<S)&&p(l[I],I,l););return h?Qi(l,_?0:I,_?I+1:S):Qi(l,_?I+1:0,_?S:I)}function T_(l,p){var h=l;return h instanceof Pt&&(h=h.value()),eh(p,function(_,S){return S.func.apply(S.thisArg,La([_],S.args))},h)}function Th(l,p,h){var _=l.length;if(_<2)return _?Ha(l[0]):[];for(var S=-1,I=ie(_);++S<_;)for(var F=l[S],q=-1;++q<_;)q!=S&&(I[S]=Hl(I[S]||F,l[q],p,h));return Ha(Hn(I,1),p,h)}function P_(l,p,h){for(var _=-1,S=l.length,I=p.length,F={};++_<S;){var q=_<I?p[_]:n;h(F,l[_],q)}return F}function Ph(l){return _n(l)?l:[]}function Ah(l){return typeof l=="function"?l:gi}function ja(l,p){return pt(l)?l:Lh(l,p)?[l]:nx(Lt(l))}var hR=xt;function Va(l,p,h){var _=l.length;return h=h===n?_:h,!p&&h>=_?l:Qi(l,p,h)}var A_=tA||function(l){return Fn.clearTimeout(l)};function R_(l,p){if(p)return l.slice();var h=l.length,_=Xy?Xy(h):new l.constructor(h);return l.copy(_),_}function Rh(l){var p=new l.constructor(l.byteLength);return new Nu(p).set(new Nu(l)),p}function mR(l,p){var h=p?Rh(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}function vR(l){var p=new l.constructor(l.source,Rl.exec(l));return p.lastIndex=l.lastIndex,p}function gR(l){return zl?Ut(zl.call(l)):{}}function M_(l,p){var h=p?Rh(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}function D_(l,p){if(l!==p){var h=l!==n,_=l===null,S=l===l,I=Ni(l),F=p!==n,q=p===null,J=p===p,le=Ni(p);if(!q&&!le&&!I&&l>p||I&&F&&J&&!q&&!le||_&&F&&J||!h&&J||!S)return 1;if(!_&&!I&&!le&&l<p||le&&h&&S&&!_&&!I||q&&h&&S||!F&&S||!J)return-1}return 0}function yR(l,p,h){for(var _=-1,S=l.criteria,I=p.criteria,F=S.length,q=h.length;++_<F;){var J=D_(S[_],I[_]);if(J){if(_>=q)return J;var le=h[_];return J*(le=="desc"?-1:1)}}return l.index-p.index}function O_(l,p,h,_){for(var S=-1,I=l.length,F=h.length,q=-1,J=p.length,le=Rn(I-F,0),ue=ie(J+le),he=!_;++q<J;)ue[q]=p[q];for(;++S<F;)(he||S<I)&&(ue[h[S]]=l[S]);for(;le--;)ue[q++]=l[S++];return ue}function I_(l,p,h,_){for(var S=-1,I=l.length,F=-1,q=h.length,J=-1,le=p.length,ue=Rn(I-q,0),he=ie(ue+le),Ce=!_;++S<ue;)he[S]=l[S];for(var Ue=S;++J<le;)he[Ue+J]=p[J];for(;++F<q;)(Ce||S<I)&&(he[Ue+h[F]]=l[S++]);return he}function hi(l,p){var h=-1,_=l.length;for(p||(p=ie(_));++h<_;)p[h]=l[h];return p}function Pr(l,p,h,_){var S=!h;h||(h={});for(var I=-1,F=p.length;++I<F;){var q=p[I],J=_?_(h[q],l[q],q,h,l):n;J===n&&(J=l[q]),S?oa(h,q,J):Fl(h,q,J)}return h}function _R(l,p){return Pr(l,Bh(l),p)}function xR(l,p){return Pr(l,G_(l),p)}function Yu(l,p){return function(h,_){var S=pt(h)?CP:jA,I=p?p():{};return S(h,l,Ze(_,2),I)}}function xs(l){return xt(function(p,h){var _=-1,S=h.length,I=S>1?h[S-1]:n,F=S>2?h[2]:n;for(I=l.length>3&&typeof I=="function"?(S--,I):n,F&&ni(h[0],h[1],F)&&(I=S<3?n:I,S=1),p=Ut(p);++_<S;){var q=h[_];q&&l(p,q,_,I)}return p})}function N_(l,p){return function(h,_){if(h==null)return h;if(!mi(h))return l(h,_);for(var S=h.length,I=p?S:-1,F=Ut(h);(p?I--:++I<S)&&_(F[I],I,F)!==!1;);return h}}function k_(l){return function(p,h,_){for(var S=-1,I=Ut(p),F=_(p),q=F.length;q--;){var J=F[l?q:++S];if(h(I[J],J,I)===!1)break}return p}}function bR(l,p,h){var _=p&E,S=Wl(l);function I(){var F=this&&this!==Fn&&this instanceof I?S:l;return F.apply(_?h:this,arguments)}return I}function B_(l){return function(p){p=Lt(p);var h=fs(p)?dr(p):n,_=h?h[0]:p.charAt(0),S=h?Va(h,1).join(""):p.slice(1);return _[l]()+S}}function bs(l){return function(p){return eh(Nx(Ix(p).replace(pP,"")),l,"")}}function Wl(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var h=_s(l.prototype),_=l.apply(h,p);return an(_)?_:h}}function ER(l,p,h){var _=Wl(l);function S(){for(var I=arguments.length,F=ie(I),q=I,J=Es(S);q--;)F[q]=arguments[q];var le=I<3&&F[0]!==J&&F[I-1]!==J?[]:$a(F,J);if(I-=le.length,I<h)return H_(l,p,Xu,S.placeholder,n,F,le,n,n,h-I);var ue=this&&this!==Fn&&this instanceof S?_:l;return Di(ue,this,F)}return S}function L_(l){return function(p,h,_){var S=Ut(p);if(!mi(p)){var I=Ze(h,3);p=In(p),h=function(q){return I(S[q],q,S)}}var F=l(p,h,_);return F>-1?S[I?p[F]:F]:n}}function $_(l){return la(function(p){var h=p.length,_=h,S=Zi.prototype.thru;for(l&&p.reverse();_--;){var I=p[_];if(typeof I!="function")throw new Xi(o);if(S&&!F&&ep(I)=="wrapper")var F=new Zi([],!0)}for(_=F?_:h;++_<h;){I=p[_];var q=ep(I),J=q=="wrapper"?Nh(I):n;J&&$h(J[0])&&J[1]==(H|T|R|$)&&!J[4].length&&J[9]==1?F=F[ep(J[0])].apply(F,J[3]):F=I.length==1&&$h(I)?F[q]():F.thru(I)}return function(){var le=arguments,ue=le[0];if(F&&le.length==1&&pt(ue))return F.plant(ue).value();for(var he=0,Ce=h?p[he].apply(this,le):ue;++he<h;)Ce=p[he].call(this,Ce);return Ce}})}function Xu(l,p,h,_,S,I,F,q,J,le){var ue=p&H,he=p&E,Ce=p&N,Ue=p&(T|w),Qe=p&W,gt=Ce?n:Wl(l);function et(){for(var Ct=arguments.length,Rt=ie(Ct),ki=Ct;ki--;)Rt[ki]=arguments[ki];if(Ue)var ii=Es(et),Bi=NP(Rt,ii);if(_&&(Rt=O_(Rt,_,S,Ue)),I&&(Rt=I_(Rt,I,F,Ue)),Ct-=Bi,Ue&&Ct<le){var xn=$a(Rt,ii);return H_(l,p,Xu,et.placeholder,h,Rt,xn,q,J,le-Ct)}var mr=he?h:this,da=Ce?mr[l]:l;return Ct=Rt.length,q?Rt=jR(Rt,q):Qe&&Ct>1&&Rt.reverse(),ue&&J<Ct&&(Rt.length=J),this&&this!==Fn&&this instanceof et&&(da=gt||Wl(da)),da.apply(mr,Rt)}return et}function z_(l,p){return function(h,_){return XA(h,l,p(_),{})}}function Zu(l,p){return function(h,_){var S;if(h===n&&_===n)return p;if(h!==n&&(S=h),_!==n){if(S===n)return _;typeof h=="string"||typeof _=="string"?(h=Ii(h),_=Ii(_)):(h=S_(h),_=S_(_)),S=l(h,_)}return S}}function Mh(l){return la(function(p){return p=tn(p,Oi(Ze())),xt(function(h){var _=this;return l(p,function(S){return Di(S,_,h)})})})}function Ju(l,p){p=p===n?" ":Ii(p);var h=p.length;if(h<2)return h?wh(p,l):p;var _=wh(p,$u(l/hs(p)));return fs(p)?Va(dr(_),0,l).join(""):_.slice(0,l)}function wR(l,p,h,_){var S=p&E,I=Wl(l);function F(){for(var q=-1,J=arguments.length,le=-1,ue=_.length,he=ie(ue+J),Ce=this&&this!==Fn&&this instanceof F?I:l;++le<ue;)he[le]=_[le];for(;J--;)he[le++]=arguments[++q];return Di(Ce,S?h:this,he)}return F}function F_(l){return function(p,h,_){return _&&typeof _!="number"&&ni(p,h,_)&&(h=_=n),p=pa(p),h===n?(h=p,p=0):h=pa(h),_=_===n?p<h?1:-1:pa(_),lR(p,h,_,l)}}function Qu(l){return function(p,h){return typeof p=="string"&&typeof h=="string"||(p=tr(p),h=tr(h)),l(p,h)}}function H_(l,p,h,_,S,I,F,q,J,le){var ue=p&T,he=ue?F:n,Ce=ue?n:F,Ue=ue?I:n,Qe=ue?n:I;p|=ue?R:L,p&=~(ue?L:R),p&O||(p&=~(E|N));var gt=[l,p,S,Ue,he,Qe,Ce,q,J,le],et=h.apply(n,gt);return $h(l)&&Q_(et,gt),et.placeholder=_,ex(et,l,p)}function Dh(l){var p=An[l];return function(h,_){if(h=tr(h),_=_==null?0:Yn(ht(_),292),_&&e_(h)){var S=(Lt(h)+"e").split("e"),I=p(S[0]+"e"+(+S[1]+_));return S=(Lt(I)+"e").split("e"),+(S[0]+"e"+(+S[1]-_))}return p(h)}}var SR=gs&&1/Au(new gs([,-0]))[1]==ce?function(l){return new gs(l)}:Qh;function j_(l){return function(p){var h=Xn(p);return h==ot?sh(p):h==Tt?HP(p):IP(p,l(p))}}function sa(l,p,h,_,S,I,F,q){var J=p&N;if(!J&&typeof l!="function")throw new Xi(o);var le=_?_.length:0;if(le||(p&=~(R|L),_=S=n),F=F===n?F:Rn(ht(F),0),q=q===n?q:ht(q),le-=S?S.length:0,p&L){var ue=_,he=S;_=S=n}var Ce=J?n:Nh(l),Ue=[l,p,h,_,S,ue,he,I,F,q];if(Ce&&zR(Ue,Ce),l=Ue[0],p=Ue[1],h=Ue[2],_=Ue[3],S=Ue[4],q=Ue[9]=Ue[9]===n?J?0:l.length:Rn(Ue[9]-le,0),!q&&p&(T|w)&&(p&=~(T|w)),!p||p==E)var Qe=bR(l,p,h);else p==T||p==w?Qe=ER(l,p,q):(p==R||p==(E|R))&&!S.length?Qe=wR(l,p,h,_):Qe=Xu.apply(n,Ue);var gt=Ce?E_:Q_;return ex(gt(Qe,Ue),l,p)}function V_(l,p,h,_){return l===n||hr(l,vs[h])&&!zt.call(_,h)?p:l}function U_(l,p,h,_,S,I){return an(l)&&an(p)&&(I.set(p,l),Gu(l,p,n,U_,I),I.delete(p)),l}function CR(l){return Kl(l)?n:l}function W_(l,p,h,_,S,I){var F=h&g,q=l.length,J=p.length;if(q!=J&&!(F&&J>q))return!1;var le=I.get(l),ue=I.get(p);if(le&&ue)return le==p&&ue==l;var he=-1,Ce=!0,Ue=h&y?new To:n;for(I.set(l,p),I.set(p,l);++he<q;){var Qe=l[he],gt=p[he];if(_)var et=F?_(gt,Qe,he,p,l,I):_(Qe,gt,he,l,p,I);if(et!==n){if(et)continue;Ce=!1;break}if(Ue){if(!th(p,function(Ct,Rt){if(!Nl(Ue,Rt)&&(Qe===Ct||S(Qe,Ct,h,_,I)))return Ue.push(Rt)})){Ce=!1;break}}else if(!(Qe===gt||S(Qe,gt,h,_,I))){Ce=!1;break}}return I.delete(l),I.delete(p),Ce}function TR(l,p,h,_,S,I,F){switch(h){case _t:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case it:return!(l.byteLength!=p.byteLength||!I(new Nu(l),new Nu(p)));case St:case tt:case nn:return hr(+l,+p);case Xt:return l.name==p.name&&l.message==p.message;case Me:case Dn:return l==p+"";case ot:var q=sh;case Tt:var J=_&g;if(q||(q=Au),l.size!=p.size&&!J)return!1;var le=F.get(l);if(le)return le==p;_|=y,F.set(l,p);var ue=W_(q(l),q(p),_,S,I,F);return F.delete(l),ue;case ln:if(zl)return zl.call(l)==zl.call(p)}return!1}function PR(l,p,h,_,S,I){var F=h&g,q=Oh(l),J=q.length,le=Oh(p),ue=le.length;if(J!=ue&&!F)return!1;for(var he=J;he--;){var Ce=q[he];if(!(F?Ce in p:zt.call(p,Ce)))return!1}var Ue=I.get(l),Qe=I.get(p);if(Ue&&Qe)return Ue==p&&Qe==l;var gt=!0;I.set(l,p),I.set(p,l);for(var et=F;++he<J;){Ce=q[he];var Ct=l[Ce],Rt=p[Ce];if(_)var ki=F?_(Rt,Ct,Ce,p,l,I):_(Ct,Rt,Ce,l,p,I);if(!(ki===n?Ct===Rt||S(Ct,Rt,h,_,I):ki)){gt=!1;break}et||(et=Ce=="constructor")}if(gt&&!et){var ii=l.constructor,Bi=p.constructor;ii!=Bi&&"constructor"in l&&"constructor"in p&&!(typeof ii=="function"&&ii instanceof ii&&typeof Bi=="function"&&Bi instanceof Bi)&&(gt=!1)}return I.delete(l),I.delete(p),gt}function la(l){return Fh(Z_(l,n,ox),l+"")}function Oh(l){return p_(l,In,Bh)}function Ih(l){return p_(l,vi,G_)}var Nh=Fu?function(l){return Fu.get(l)}:Qh;function ep(l){for(var p=l.name+"",h=ys[p],_=zt.call(ys,p)?h.length:0;_--;){var S=h[_],I=S.func;if(I==null||I==l)return S.name}return p}function Es(l){var p=zt.call(M,"placeholder")?M:l;return p.placeholder}function Ze(){var l=M.iteratee||Zh;return l=l===Zh?h_:l,arguments.length?l(arguments[0],arguments[1]):l}function tp(l,p){var h=l.__data__;return kR(p)?h[typeof p=="string"?"string":"hash"]:h.map}function kh(l){for(var p=In(l),h=p.length;h--;){var _=p[h],S=l[_];p[h]=[_,S,Y_(S)]}return p}function Ro(l,p){var h=$P(l,p);return f_(h)?h:n}function AR(l){var p=zt.call(l,So),h=l[So];try{l[So]=n;var _=!0}catch{}var S=Ou.call(l);return _&&(p?l[So]=h:delete l[So]),S}var Bh=ch?function(l){return l==null?[]:(l=Ut(l),Ba(ch(l),function(p){return Jy.call(l,p)}))}:em,G_=ch?function(l){for(var p=[];l;)La(p,Bh(l)),l=ku(l);return p}:em,Xn=ti;(uh&&Xn(new uh(new ArrayBuffer(1)))!=_t||Bl&&Xn(new Bl)!=ot||ph&&Xn(ph.resolve())!=Bt||gs&&Xn(new gs)!=Tt||Ll&&Xn(new Ll)!=de)&&(Xn=function(l){var p=ti(l),h=p==Ae?l.constructor:n,_=h?Mo(h):"";if(_)switch(_){case uA:return _t;case pA:return ot;case dA:return Bt;case fA:return Tt;case hA:return de}return p});function RR(l,p,h){for(var _=-1,S=h.length;++_<S;){var I=h[_],F=I.size;switch(I.type){case"drop":l+=F;break;case"dropRight":p-=F;break;case"take":p=Yn(p,l+F);break;case"takeRight":l=Rn(l,p-F);break}}return{start:l,end:p}}function MR(l){var p=l.match(Wf);return p?p[1].split(_u):[]}function q_(l,p,h){p=ja(p,l);for(var _=-1,S=p.length,I=!1;++_<S;){var F=Ar(p[_]);if(!(I=l!=null&&h(l,F)))break;l=l[F]}return I||++_!=S?I:(S=l==null?0:l.length,!!S&&lp(S)&&ca(F,S)&&(pt(l)||Do(l)))}function DR(l){var p=l.length,h=new l.constructor(p);return p&&typeof l[0]=="string"&&zt.call(l,"index")&&(h.index=l.index,h.input=l.input),h}function K_(l){return typeof l.constructor=="function"&&!Gl(l)?_s(ku(l)):{}}function OR(l,p,h){var _=l.constructor;switch(p){case it:return Rh(l);case St:case tt:return new _(+l);case _t:return mR(l,h);case rn:case Kn:case Sr:case ea:case yl:case _l:case xl:case bl:case El:return M_(l,h);case ot:return new _;case nn:case Dn:return new _(l);case Me:return vR(l);case Tt:return new _;case ln:return gR(l)}}function IR(l,p){var h=p.length;if(!h)return l;var _=h-1;return p[_]=(h>1?"& ":"")+p[_],p=p.join(h>2?", ":" "),l.replace(Al,`{
/* [wrapped with `+p+`] */
`)}function NR(l){return pt(l)||Do(l)||!!(Qy&&l&&l[Qy])}function ca(l,p){var h=typeof l;return p=p==null?B:p,!!p&&(h=="number"||h!="symbol"&&as.test(l))&&l>-1&&l%1==0&&l<p}function ni(l,p,h){if(!an(h))return!1;var _=typeof p;return(_=="number"?mi(h)&&ca(p,h.length):_=="string"&&p in h)?hr(h[p],l):!1}function Lh(l,p){if(pt(l))return!1;var h=typeof l;return h=="number"||h=="symbol"||h=="boolean"||l==null||Ni(l)?!0:jf.test(l)||!Hf.test(l)||p!=null&&l in Ut(p)}function kR(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function $h(l){var p=ep(l),h=M[p];if(typeof h!="function"||!(p in Pt.prototype))return!1;if(l===h)return!0;var _=Nh(h);return!!_&&l===_[0]}function BR(l){return!!Yy&&Yy in l}var LR=Mu?ua:tm;function Gl(l){var p=l&&l.constructor,h=typeof p=="function"&&p.prototype||vs;return l===h}function Y_(l){return l===l&&!an(l)}function X_(l,p){return function(h){return h==null?!1:h[l]===p&&(p!==n||l in Ut(h))}}function $R(l){var p=op(l,function(_){return h.size===u&&h.clear(),_}),h=p.cache;return p}function zR(l,p){var h=l[1],_=p[1],S=h|_,I=S<(E|N|H),F=_==H&&h==T||_==H&&h==$&&l[7].length<=p[8]||_==(H|$)&&p[7].length<=p[8]&&h==T;if(!(I||F))return l;_&E&&(l[2]=p[2],S|=h&E?0:O);var q=p[3];if(q){var J=l[3];l[3]=J?O_(J,q,p[4]):q,l[4]=J?$a(l[3],d):p[4]}return q=p[5],q&&(J=l[5],l[5]=J?I_(J,q,p[6]):q,l[6]=J?$a(l[5],d):p[6]),q=p[7],q&&(l[7]=q),_&H&&(l[8]=l[8]==null?p[8]:Yn(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=S,l}function FR(l){var p=[];if(l!=null)for(var h in Ut(l))p.push(h);return p}function HR(l){return Ou.call(l)}function Z_(l,p,h){return p=Rn(p===n?l.length-1:p,0),function(){for(var _=arguments,S=-1,I=Rn(_.length-p,0),F=ie(I);++S<I;)F[S]=_[p+S];S=-1;for(var q=ie(p+1);++S<p;)q[S]=_[S];return q[p]=h(F),Di(l,this,q)}}function J_(l,p){return p.length<2?l:Ao(l,Qi(p,0,-1))}function jR(l,p){for(var h=l.length,_=Yn(p.length,h),S=hi(l);_--;){var I=p[_];l[_]=ca(I,h)?S[I]:n}return l}function zh(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var Q_=tx(E_),ql=iA||function(l,p){return Fn.setTimeout(l,p)},Fh=tx(pR);function ex(l,p,h){var _=p+"";return Fh(l,IR(_,VR(MR(_),h)))}function tx(l){var p=0,h=0;return function(){var _=sA(),S=be-(_-h);if(h=_,S>0){if(++p>=oe)return arguments[0]}else p=0;return l.apply(n,arguments)}}function np(l,p){var h=-1,_=l.length,S=_-1;for(p=p===n?_:p;++h<p;){var I=Eh(h,S),F=l[I];l[I]=l[h],l[h]=F}return l.length=p,l}var nx=$R(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(Vf,function(h,_,S,I){p.push(S?I.replace(bu,"$1"):_||h)}),p});function Ar(l){if(typeof l=="string"||Ni(l))return l;var p=l+"";return p=="0"&&1/l==-ce?"-0":p}function Mo(l){if(l!=null){try{return Du.call(l)}catch{}try{return l+""}catch{}}return""}function VR(l,p){return Yi(ee,function(h){var _="_."+h[0];p&h[1]&&!Tu(l,_)&&l.push(_)}),l.sort()}function ix(l){if(l instanceof Pt)return l.clone();var p=new Zi(l.__wrapped__,l.__chain__);return p.__actions__=hi(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function UR(l,p,h){(h?ni(l,p,h):p===n)?p=1:p=Rn(ht(p),0);var _=l==null?0:l.length;if(!_||p<1)return[];for(var S=0,I=0,F=ie($u(_/p));S<_;)F[I++]=Qi(l,S,S+=p);return F}function WR(l){for(var p=-1,h=l==null?0:l.length,_=0,S=[];++p<h;){var I=l[p];I&&(S[_++]=I)}return S}function GR(){var l=arguments.length;if(!l)return[];for(var p=ie(l-1),h=arguments[0],_=l;_--;)p[_-1]=arguments[_];return La(pt(h)?hi(h):[h],Hn(p,1))}var qR=xt(function(l,p){return _n(l)?Hl(l,Hn(p,1,_n,!0)):[]}),KR=xt(function(l,p){var h=er(p);return _n(h)&&(h=n),_n(l)?Hl(l,Hn(p,1,_n,!0),Ze(h,2)):[]}),YR=xt(function(l,p){var h=er(p);return _n(h)&&(h=n),_n(l)?Hl(l,Hn(p,1,_n,!0),n,h):[]});function XR(l,p,h){var _=l==null?0:l.length;return _?(p=h||p===n?1:ht(p),Qi(l,p<0?0:p,_)):[]}function ZR(l,p,h){var _=l==null?0:l.length;return _?(p=h||p===n?1:ht(p),p=_-p,Qi(l,0,p<0?0:p)):[]}function JR(l,p){return l&&l.length?Ku(l,Ze(p,3),!0,!0):[]}function QR(l,p){return l&&l.length?Ku(l,Ze(p,3),!0):[]}function eM(l,p,h,_){var S=l==null?0:l.length;return S?(h&&typeof h!="number"&&ni(l,p,h)&&(h=0,_=S),GA(l,p,h,_)):[]}function rx(l,p,h){var _=l==null?0:l.length;if(!_)return-1;var S=h==null?0:ht(h);return S<0&&(S=Rn(_+S,0)),Pu(l,Ze(p,3),S)}function ax(l,p,h){var _=l==null?0:l.length;if(!_)return-1;var S=_-1;return h!==n&&(S=ht(h),S=h<0?Rn(_+S,0):Yn(S,_-1)),Pu(l,Ze(p,3),S,!0)}function ox(l){var p=l==null?0:l.length;return p?Hn(l,1):[]}function tM(l){var p=l==null?0:l.length;return p?Hn(l,ce):[]}function nM(l,p){var h=l==null?0:l.length;return h?(p=p===n?1:ht(p),Hn(l,p)):[]}function iM(l){for(var p=-1,h=l==null?0:l.length,_={};++p<h;){var S=l[p];_[S[0]]=S[1]}return _}function sx(l){return l&&l.length?l[0]:n}function rM(l,p,h){var _=l==null?0:l.length;if(!_)return-1;var S=h==null?0:ht(h);return S<0&&(S=Rn(_+S,0)),ds(l,p,S)}function aM(l){var p=l==null?0:l.length;return p?Qi(l,0,-1):[]}var oM=xt(function(l){var p=tn(l,Ph);return p.length&&p[0]===l[0]?gh(p):[]}),sM=xt(function(l){var p=er(l),h=tn(l,Ph);return p===er(h)?p=n:h.pop(),h.length&&h[0]===l[0]?gh(h,Ze(p,2)):[]}),lM=xt(function(l){var p=er(l),h=tn(l,Ph);return p=typeof p=="function"?p:n,p&&h.pop(),h.length&&h[0]===l[0]?gh(h,n,p):[]});function cM(l,p){return l==null?"":aA.call(l,p)}function er(l){var p=l==null?0:l.length;return p?l[p-1]:n}function uM(l,p,h){var _=l==null?0:l.length;if(!_)return-1;var S=_;return h!==n&&(S=ht(h),S=S<0?Rn(_+S,0):Yn(S,_-1)),p===p?VP(l,p,S):Pu(l,Hy,S,!0)}function pM(l,p){return l&&l.length?y_(l,ht(p)):n}var dM=xt(lx);function lx(l,p){return l&&l.length&&p&&p.length?bh(l,p):l}function fM(l,p,h){return l&&l.length&&p&&p.length?bh(l,p,Ze(h,2)):l}function hM(l,p,h){return l&&l.length&&p&&p.length?bh(l,p,n,h):l}var mM=la(function(l,p){var h=l==null?0:l.length,_=fh(l,p);return b_(l,tn(p,function(S){return ca(S,h)?+S:S}).sort(D_)),_});function vM(l,p){var h=[];if(!(l&&l.length))return h;var _=-1,S=[],I=l.length;for(p=Ze(p,3);++_<I;){var F=l[_];p(F,_,l)&&(h.push(F),S.push(_))}return b_(l,S),h}function Hh(l){return l==null?l:cA.call(l)}function gM(l,p,h){var _=l==null?0:l.length;return _?(h&&typeof h!="number"&&ni(l,p,h)?(p=0,h=_):(p=p==null?0:ht(p),h=h===n?_:ht(h)),Qi(l,p,h)):[]}function yM(l,p){return qu(l,p)}function _M(l,p,h){return Sh(l,p,Ze(h,2))}function xM(l,p){var h=l==null?0:l.length;if(h){var _=qu(l,p);if(_<h&&hr(l[_],p))return _}return-1}function bM(l,p){return qu(l,p,!0)}function EM(l,p,h){return Sh(l,p,Ze(h,2),!0)}function wM(l,p){var h=l==null?0:l.length;if(h){var _=qu(l,p,!0)-1;if(hr(l[_],p))return _}return-1}function SM(l){return l&&l.length?w_(l):[]}function CM(l,p){return l&&l.length?w_(l,Ze(p,2)):[]}function TM(l){var p=l==null?0:l.length;return p?Qi(l,1,p):[]}function PM(l,p,h){return l&&l.length?(p=h||p===n?1:ht(p),Qi(l,0,p<0?0:p)):[]}function AM(l,p,h){var _=l==null?0:l.length;return _?(p=h||p===n?1:ht(p),p=_-p,Qi(l,p<0?0:p,_)):[]}function RM(l,p){return l&&l.length?Ku(l,Ze(p,3),!1,!0):[]}function MM(l,p){return l&&l.length?Ku(l,Ze(p,3)):[]}var DM=xt(function(l){return Ha(Hn(l,1,_n,!0))}),OM=xt(function(l){var p=er(l);return _n(p)&&(p=n),Ha(Hn(l,1,_n,!0),Ze(p,2))}),IM=xt(function(l){var p=er(l);return p=typeof p=="function"?p:n,Ha(Hn(l,1,_n,!0),n,p)});function NM(l){return l&&l.length?Ha(l):[]}function kM(l,p){return l&&l.length?Ha(l,Ze(p,2)):[]}function BM(l,p){return p=typeof p=="function"?p:n,l&&l.length?Ha(l,n,p):[]}function jh(l){if(!(l&&l.length))return[];var p=0;return l=Ba(l,function(h){if(_n(h))return p=Rn(h.length,p),!0}),ah(p,function(h){return tn(l,nh(h))})}function cx(l,p){if(!(l&&l.length))return[];var h=jh(l);return p==null?h:tn(h,function(_){return Di(p,n,_)})}var LM=xt(function(l,p){return _n(l)?Hl(l,p):[]}),$M=xt(function(l){return Th(Ba(l,_n))}),zM=xt(function(l){var p=er(l);return _n(p)&&(p=n),Th(Ba(l,_n),Ze(p,2))}),FM=xt(function(l){var p=er(l);return p=typeof p=="function"?p:n,Th(Ba(l,_n),n,p)}),HM=xt(jh);function jM(l,p){return P_(l||[],p||[],Fl)}function VM(l,p){return P_(l||[],p||[],Ul)}var UM=xt(function(l){var p=l.length,h=p>1?l[p-1]:n;return h=typeof h=="function"?(l.pop(),h):n,cx(l,h)});function ux(l){var p=M(l);return p.__chain__=!0,p}function WM(l,p){return p(l),l}function ip(l,p){return p(l)}var GM=la(function(l){var p=l.length,h=p?l[0]:0,_=this.__wrapped__,S=function(I){return fh(I,l)};return p>1||this.__actions__.length||!(_ instanceof Pt)||!ca(h)?this.thru(S):(_=_.slice(h,+h+(p?1:0)),_.__actions__.push({func:ip,args:[S],thisArg:n}),new Zi(_,this.__chain__).thru(function(I){return p&&!I.length&&I.push(n),I}))});function qM(){return ux(this)}function KM(){return new Zi(this.value(),this.__chain__)}function YM(){this.__values__===n&&(this.__values__=Sx(this.value()));var l=this.__index__>=this.__values__.length,p=l?n:this.__values__[this.__index__++];return{done:l,value:p}}function XM(){return this}function ZM(l){for(var p,h=this;h instanceof ju;){var _=ix(h);_.__index__=0,_.__values__=n,p?S.__wrapped__=_:p=_;var S=_;h=h.__wrapped__}return S.__wrapped__=l,p}function JM(){var l=this.__wrapped__;if(l instanceof Pt){var p=l;return this.__actions__.length&&(p=new Pt(this)),p=p.reverse(),p.__actions__.push({func:ip,args:[Hh],thisArg:n}),new Zi(p,this.__chain__)}return this.thru(Hh)}function QM(){return T_(this.__wrapped__,this.__actions__)}var eD=Yu(function(l,p,h){zt.call(l,h)?++l[h]:oa(l,h,1)});function tD(l,p,h){var _=pt(l)?zy:WA;return h&&ni(l,p,h)&&(p=n),_(l,Ze(p,3))}function nD(l,p){var h=pt(l)?Ba:c_;return h(l,Ze(p,3))}var iD=L_(rx),rD=L_(ax);function aD(l,p){return Hn(rp(l,p),1)}function oD(l,p){return Hn(rp(l,p),ce)}function sD(l,p,h){return h=h===n?1:ht(h),Hn(rp(l,p),h)}function px(l,p){var h=pt(l)?Yi:Fa;return h(l,Ze(p,3))}function dx(l,p){var h=pt(l)?TP:l_;return h(l,Ze(p,3))}var lD=Yu(function(l,p,h){zt.call(l,h)?l[h].push(p):oa(l,h,[p])});function cD(l,p,h,_){l=mi(l)?l:Ss(l),h=h&&!_?ht(h):0;var S=l.length;return h<0&&(h=Rn(S+h,0)),cp(l)?h<=S&&l.indexOf(p,h)>-1:!!S&&ds(l,p,h)>-1}var uD=xt(function(l,p,h){var _=-1,S=typeof p=="function",I=mi(l)?ie(l.length):[];return Fa(l,function(F){I[++_]=S?Di(p,F,h):jl(F,p,h)}),I}),pD=Yu(function(l,p,h){oa(l,h,p)});function rp(l,p){var h=pt(l)?tn:m_;return h(l,Ze(p,3))}function dD(l,p,h,_){return l==null?[]:(pt(p)||(p=p==null?[]:[p]),h=_?n:h,pt(h)||(h=h==null?[]:[h]),__(l,p,h))}var fD=Yu(function(l,p,h){l[h?0:1].push(p)},function(){return[[],[]]});function hD(l,p,h){var _=pt(l)?eh:Vy,S=arguments.length<3;return _(l,Ze(p,4),h,S,Fa)}function mD(l,p,h){var _=pt(l)?PP:Vy,S=arguments.length<3;return _(l,Ze(p,4),h,S,l_)}function vD(l,p){var h=pt(l)?Ba:c_;return h(l,sp(Ze(p,3)))}function gD(l){var p=pt(l)?r_:cR;return p(l)}function yD(l,p,h){(h?ni(l,p,h):p===n)?p=1:p=ht(p);var _=pt(l)?FA:uR;return _(l,p)}function _D(l){var p=pt(l)?HA:dR;return p(l)}function xD(l){if(l==null)return 0;if(mi(l))return cp(l)?hs(l):l.length;var p=Xn(l);return p==ot||p==Tt?l.size:_h(l).length}function bD(l,p,h){var _=pt(l)?th:fR;return h&&ni(l,p,h)&&(p=n),_(l,Ze(p,3))}var ED=xt(function(l,p){if(l==null)return[];var h=p.length;return h>1&&ni(l,p[0],p[1])?p=[]:h>2&&ni(p[0],p[1],p[2])&&(p=[p[0]]),__(l,Hn(p,1),[])}),ap=nA||function(){return Fn.Date.now()};function wD(l,p){if(typeof p!="function")throw new Xi(o);return l=ht(l),function(){if(--l<1)return p.apply(this,arguments)}}function fx(l,p,h){return p=h?n:p,p=l&&p==null?l.length:p,sa(l,H,n,n,n,n,p)}function hx(l,p){var h;if(typeof p!="function")throw new Xi(o);return l=ht(l),function(){return--l>0&&(h=p.apply(this,arguments)),l<=1&&(p=n),h}}var Vh=xt(function(l,p,h){var _=E;if(h.length){var S=$a(h,Es(Vh));_|=R}return sa(l,_,p,h,S)}),mx=xt(function(l,p,h){var _=E|N;if(h.length){var S=$a(h,Es(mx));_|=R}return sa(p,_,l,h,S)});function vx(l,p,h){p=h?n:p;var _=sa(l,T,n,n,n,n,n,p);return _.placeholder=vx.placeholder,_}function gx(l,p,h){p=h?n:p;var _=sa(l,w,n,n,n,n,n,p);return _.placeholder=gx.placeholder,_}function yx(l,p,h){var _,S,I,F,q,J,le=0,ue=!1,he=!1,Ce=!0;if(typeof l!="function")throw new Xi(o);p=tr(p)||0,an(h)&&(ue=!!h.leading,he="maxWait"in h,I=he?Rn(tr(h.maxWait)||0,p):I,Ce="trailing"in h?!!h.trailing:Ce);function Ue(xn){var mr=_,da=S;return _=S=n,le=xn,F=l.apply(da,mr),F}function Qe(xn){return le=xn,q=ql(Ct,p),ue?Ue(xn):F}function gt(xn){var mr=xn-J,da=xn-le,Lx=p-mr;return he?Yn(Lx,I-da):Lx}function et(xn){var mr=xn-J,da=xn-le;return J===n||mr>=p||mr<0||he&&da>=I}function Ct(){var xn=ap();if(et(xn))return Rt(xn);q=ql(Ct,gt(xn))}function Rt(xn){return q=n,Ce&&_?Ue(xn):(_=S=n,F)}function ki(){q!==n&&A_(q),le=0,_=J=S=q=n}function ii(){return q===n?F:Rt(ap())}function Bi(){var xn=ap(),mr=et(xn);if(_=arguments,S=this,J=xn,mr){if(q===n)return Qe(J);if(he)return A_(q),q=ql(Ct,p),Ue(J)}return q===n&&(q=ql(Ct,p)),F}return Bi.cancel=ki,Bi.flush=ii,Bi}var SD=xt(function(l,p){return s_(l,1,p)}),CD=xt(function(l,p,h){return s_(l,tr(p)||0,h)});function TD(l){return sa(l,W)}function op(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new Xi(o);var h=function(){var _=arguments,S=p?p.apply(this,_):_[0],I=h.cache;if(I.has(S))return I.get(S);var F=l.apply(this,_);return h.cache=I.set(S,F)||I,F};return h.cache=new(op.Cache||aa),h}op.Cache=aa;function sp(l){if(typeof l!="function")throw new Xi(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function PD(l){return hx(2,l)}var AD=hR(function(l,p){p=p.length==1&&pt(p[0])?tn(p[0],Oi(Ze())):tn(Hn(p,1),Oi(Ze()));var h=p.length;return xt(function(_){for(var S=-1,I=Yn(_.length,h);++S<I;)_[S]=p[S].call(this,_[S]);return Di(l,this,_)})}),Uh=xt(function(l,p){var h=$a(p,Es(Uh));return sa(l,R,n,p,h)}),_x=xt(function(l,p){var h=$a(p,Es(_x));return sa(l,L,n,p,h)}),RD=la(function(l,p){return sa(l,$,n,n,n,p)});function MD(l,p){if(typeof l!="function")throw new Xi(o);return p=p===n?p:ht(p),xt(l,p)}function DD(l,p){if(typeof l!="function")throw new Xi(o);return p=p==null?0:Rn(ht(p),0),xt(function(h){var _=h[p],S=Va(h,0,p);return _&&La(S,_),Di(l,this,S)})}function OD(l,p,h){var _=!0,S=!0;if(typeof l!="function")throw new Xi(o);return an(h)&&(_="leading"in h?!!h.leading:_,S="trailing"in h?!!h.trailing:S),yx(l,p,{leading:_,maxWait:p,trailing:S})}function ID(l){return fx(l,1)}function ND(l,p){return Uh(Ah(p),l)}function kD(){if(!arguments.length)return[];var l=arguments[0];return pt(l)?l:[l]}function BD(l){return Ji(l,v)}function LD(l,p){return p=typeof p=="function"?p:n,Ji(l,v,p)}function $D(l){return Ji(l,f|v)}function zD(l,p){return p=typeof p=="function"?p:n,Ji(l,f|v,p)}function FD(l,p){return p==null||o_(l,p,In(p))}function hr(l,p){return l===p||l!==l&&p!==p}var HD=Qu(vh),jD=Qu(function(l,p){return l>=p}),Do=d_(function(){return arguments}())?d_:function(l){return cn(l)&&zt.call(l,"callee")&&!Jy.call(l,"callee")},pt=ie.isArray,VD=Iy?Oi(Iy):ZA;function mi(l){return l!=null&&lp(l.length)&&!ua(l)}function _n(l){return cn(l)&&mi(l)}function UD(l){return l===!0||l===!1||cn(l)&&ti(l)==St}var Ua=rA||tm,WD=Ny?Oi(Ny):JA;function GD(l){return cn(l)&&l.nodeType===1&&!Kl(l)}function qD(l){if(l==null)return!0;if(mi(l)&&(pt(l)||typeof l=="string"||typeof l.splice=="function"||Ua(l)||ws(l)||Do(l)))return!l.length;var p=Xn(l);if(p==ot||p==Tt)return!l.size;if(Gl(l))return!_h(l).length;for(var h in l)if(zt.call(l,h))return!1;return!0}function KD(l,p){return Vl(l,p)}function YD(l,p,h){h=typeof h=="function"?h:n;var _=h?h(l,p):n;return _===n?Vl(l,p,n,h):!!_}function Wh(l){if(!cn(l))return!1;var p=ti(l);return p==Xt||p==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Kl(l)}function XD(l){return typeof l=="number"&&e_(l)}function ua(l){if(!an(l))return!1;var p=ti(l);return p==Ht||p==wt||p==Je||p==Mt}function xx(l){return typeof l=="number"&&l==ht(l)}function lp(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=B}function an(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function cn(l){return l!=null&&typeof l=="object"}var bx=ky?Oi(ky):eR;function ZD(l,p){return l===p||yh(l,p,kh(p))}function JD(l,p,h){return h=typeof h=="function"?h:n,yh(l,p,kh(p),h)}function QD(l){return Ex(l)&&l!=+l}function eO(l){if(LR(l))throw new ct(a);return f_(l)}function tO(l){return l===null}function nO(l){return l==null}function Ex(l){return typeof l=="number"||cn(l)&&ti(l)==nn}function Kl(l){if(!cn(l)||ti(l)!=Ae)return!1;var p=ku(l);if(p===null)return!0;var h=zt.call(p,"constructor")&&p.constructor;return typeof h=="function"&&h instanceof h&&Du.call(h)==JP}var Gh=By?Oi(By):tR;function iO(l){return xx(l)&&l>=-B&&l<=B}var wx=Ly?Oi(Ly):nR;function cp(l){return typeof l=="string"||!pt(l)&&cn(l)&&ti(l)==Dn}function Ni(l){return typeof l=="symbol"||cn(l)&&ti(l)==ln}var ws=$y?Oi($y):iR;function rO(l){return l===n}function aO(l){return cn(l)&&Xn(l)==de}function oO(l){return cn(l)&&ti(l)==We}var sO=Qu(xh),lO=Qu(function(l,p){return l<=p});function Sx(l){if(!l)return[];if(mi(l))return cp(l)?dr(l):hi(l);if(kl&&l[kl])return FP(l[kl]());var p=Xn(l),h=p==ot?sh:p==Tt?Au:Ss;return h(l)}function pa(l){if(!l)return l===0?l:0;if(l=tr(l),l===ce||l===-ce){var p=l<0?-1:1;return p*b}return l===l?l:0}function ht(l){var p=pa(l),h=p%1;return p===p?h?p-h:p:0}function Cx(l){return l?Po(ht(l),0,K):0}function tr(l){if(typeof l=="number")return l;if(Ni(l))return z;if(an(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=an(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=Uy(l);var h=ta.test(l);return h||xo.test(l)?wP(l.slice(2),h?2:8):Ml.test(l)?z:+l}function Tx(l){return Pr(l,vi(l))}function cO(l){return l?Po(ht(l),-B,B):l===0?l:0}function Lt(l){return l==null?"":Ii(l)}var uO=xs(function(l,p){if(Gl(p)||mi(p)){Pr(p,In(p),l);return}for(var h in p)zt.call(p,h)&&Fl(l,h,p[h])}),Px=xs(function(l,p){Pr(p,vi(p),l)}),up=xs(function(l,p,h,_){Pr(p,vi(p),l,_)}),pO=xs(function(l,p,h,_){Pr(p,In(p),l,_)}),dO=la(fh);function fO(l,p){var h=_s(l);return p==null?h:a_(h,p)}var hO=xt(function(l,p){l=Ut(l);var h=-1,_=p.length,S=_>2?p[2]:n;for(S&&ni(p[0],p[1],S)&&(_=1);++h<_;)for(var I=p[h],F=vi(I),q=-1,J=F.length;++q<J;){var le=F[q],ue=l[le];(ue===n||hr(ue,vs[le])&&!zt.call(l,le))&&(l[le]=I[le])}return l}),mO=xt(function(l){return l.push(n,U_),Di(Ax,n,l)});function vO(l,p){return Fy(l,Ze(p,3),Tr)}function gO(l,p){return Fy(l,Ze(p,3),mh)}function yO(l,p){return l==null?l:hh(l,Ze(p,3),vi)}function _O(l,p){return l==null?l:u_(l,Ze(p,3),vi)}function xO(l,p){return l&&Tr(l,Ze(p,3))}function bO(l,p){return l&&mh(l,Ze(p,3))}function EO(l){return l==null?[]:Wu(l,In(l))}function wO(l){return l==null?[]:Wu(l,vi(l))}function qh(l,p,h){var _=l==null?n:Ao(l,p);return _===n?h:_}function SO(l,p){return l!=null&&q_(l,p,qA)}function Kh(l,p){return l!=null&&q_(l,p,KA)}var CO=z_(function(l,p,h){p!=null&&typeof p.toString!="function"&&(p=Ou.call(p)),l[p]=h},Xh(gi)),TO=z_(function(l,p,h){p!=null&&typeof p.toString!="function"&&(p=Ou.call(p)),zt.call(l,p)?l[p].push(h):l[p]=[h]},Ze),PO=xt(jl);function In(l){return mi(l)?i_(l):_h(l)}function vi(l){return mi(l)?i_(l,!0):rR(l)}function AO(l,p){var h={};return p=Ze(p,3),Tr(l,function(_,S,I){oa(h,p(_,S,I),_)}),h}function RO(l,p){var h={};return p=Ze(p,3),Tr(l,function(_,S,I){oa(h,S,p(_,S,I))}),h}var MO=xs(function(l,p,h){Gu(l,p,h)}),Ax=xs(function(l,p,h,_){Gu(l,p,h,_)}),DO=la(function(l,p){var h={};if(l==null)return h;var _=!1;p=tn(p,function(I){return I=ja(I,l),_||(_=I.length>1),I}),Pr(l,Ih(l),h),_&&(h=Ji(h,f|m|v,CR));for(var S=p.length;S--;)Ch(h,p[S]);return h});function OO(l,p){return Rx(l,sp(Ze(p)))}var IO=la(function(l,p){return l==null?{}:oR(l,p)});function Rx(l,p){if(l==null)return{};var h=tn(Ih(l),function(_){return[_]});return p=Ze(p),x_(l,h,function(_,S){return p(_,S[0])})}function NO(l,p,h){p=ja(p,l);var _=-1,S=p.length;for(S||(S=1,l=n);++_<S;){var I=l==null?n:l[Ar(p[_])];I===n&&(_=S,I=h),l=ua(I)?I.call(l):I}return l}function kO(l,p,h){return l==null?l:Ul(l,p,h)}function BO(l,p,h,_){return _=typeof _=="function"?_:n,l==null?l:Ul(l,p,h,_)}var Mx=j_(In),Dx=j_(vi);function LO(l,p,h){var _=pt(l),S=_||Ua(l)||ws(l);if(p=Ze(p,4),h==null){var I=l&&l.constructor;S?h=_?new I:[]:an(l)?h=ua(I)?_s(ku(l)):{}:h={}}return(S?Yi:Tr)(l,function(F,q,J){return p(h,F,q,J)}),h}function $O(l,p){return l==null?!0:Ch(l,p)}function zO(l,p,h){return l==null?l:C_(l,p,Ah(h))}function FO(l,p,h,_){return _=typeof _=="function"?_:n,l==null?l:C_(l,p,Ah(h),_)}function Ss(l){return l==null?[]:oh(l,In(l))}function HO(l){return l==null?[]:oh(l,vi(l))}function jO(l,p,h){return h===n&&(h=p,p=n),h!==n&&(h=tr(h),h=h===h?h:0),p!==n&&(p=tr(p),p=p===p?p:0),Po(tr(l),p,h)}function VO(l,p,h){return p=pa(p),h===n?(h=p,p=0):h=pa(h),l=tr(l),YA(l,p,h)}function UO(l,p,h){if(h&&typeof h!="boolean"&&ni(l,p,h)&&(p=h=n),h===n&&(typeof p=="boolean"?(h=p,p=n):typeof l=="boolean"&&(h=l,l=n)),l===n&&p===n?(l=0,p=1):(l=pa(l),p===n?(p=l,l=0):p=pa(p)),l>p){var _=l;l=p,p=_}if(h||l%1||p%1){var S=t_();return Yn(l+S*(p-l+EP("1e-"+((S+"").length-1))),p)}return Eh(l,p)}var WO=bs(function(l,p,h){return p=p.toLowerCase(),l+(h?Ox(p):p)});function Ox(l){return Yh(Lt(l).toLowerCase())}function Ix(l){return l=Lt(l),l&&l.replace(Dl,kP).replace(dP,"")}function GO(l,p,h){l=Lt(l),p=Ii(p);var _=l.length;h=h===n?_:Po(ht(h),0,_);var S=h;return h-=p.length,h>=0&&l.slice(h,S)==p}function qO(l){return l=Lt(l),l&&$f.test(l)?l.replace(Sl,BP):l}function KO(l){return l=Lt(l),l&&Uf.test(l)?l.replace(Ia,"\\$&"):l}var YO=bs(function(l,p,h){return l+(h?"-":"")+p.toLowerCase()}),XO=bs(function(l,p,h){return l+(h?" ":"")+p.toLowerCase()}),ZO=B_("toLowerCase");function JO(l,p,h){l=Lt(l),p=ht(p);var _=p?hs(l):0;if(!p||_>=p)return l;var S=(p-_)/2;return Ju(zu(S),h)+l+Ju($u(S),h)}function QO(l,p,h){l=Lt(l),p=ht(p);var _=p?hs(l):0;return p&&_<p?l+Ju(p-_,h):l}function eI(l,p,h){l=Lt(l),p=ht(p);var _=p?hs(l):0;return p&&_<p?Ju(p-_,h)+l:l}function tI(l,p,h){return h||p==null?p=0:p&&(p=+p),lA(Lt(l).replace(Pl,""),p||0)}function nI(l,p,h){return(h?ni(l,p,h):p===n)?p=1:p=ht(p),wh(Lt(l),p)}function iI(){var l=arguments,p=Lt(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var rI=bs(function(l,p,h){return l+(h?"_":"")+p.toLowerCase()});function aI(l,p,h){return h&&typeof h!="number"&&ni(l,p,h)&&(p=h=n),h=h===n?K:h>>>0,h?(l=Lt(l),l&&(typeof p=="string"||p!=null&&!Gh(p))&&(p=Ii(p),!p&&fs(l))?Va(dr(l),0,h):l.split(p,h)):[]}var oI=bs(function(l,p,h){return l+(h?" ":"")+Yh(p)});function sI(l,p,h){return l=Lt(l),h=h==null?0:Po(ht(h),0,l.length),p=Ii(p),l.slice(h,h+p.length)==p}function lI(l,p,h){var _=M.templateSettings;h&&ni(l,p,h)&&(p=n),l=Lt(l),p=up({},p,_,V_);var S=up({},p.imports,_.imports,V_),I=In(S),F=oh(S,I),q,J,le=0,ue=p.interpolate||os,he="__p += '",Ce=lh((p.escape||os).source+"|"+ue.source+"|"+(ue===Tl?Eu:os).source+"|"+(p.evaluate||os).source+"|$","g"),Ue="//# sourceURL="+(zt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gP+"]")+`
`;l.replace(Ce,function(et,Ct,Rt,ki,ii,Bi){return Rt||(Rt=ki),he+=l.slice(le,Bi).replace(qf,LP),Ct&&(q=!0,he+=`' +
__e(`+Ct+`) +
'`),ii&&(J=!0,he+=`';
`+ii+`;
__p += '`),Rt&&(he+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),le=Bi+et.length,et}),he+=`';
`;var Qe=zt.call(p,"variable")&&p.variable;if(!Qe)he=`with (obj) {
`+he+`
}
`;else if(xu.test(Qe))throw new ct(s);he=(J?he.replace(rs,""):he).replace(Bf,"$1").replace(Lf,"$1;"),he="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var gt=kx(function(){return It(I,Ue+"return "+he).apply(n,F)});if(gt.source=he,Wh(gt))throw gt;return gt}function cI(l){return Lt(l).toLowerCase()}function uI(l){return Lt(l).toUpperCase()}function pI(l,p,h){if(l=Lt(l),l&&(h||p===n))return Uy(l);if(!l||!(p=Ii(p)))return l;var _=dr(l),S=dr(p),I=Wy(_,S),F=Gy(_,S)+1;return Va(_,I,F).join("")}function dI(l,p,h){if(l=Lt(l),l&&(h||p===n))return l.slice(0,Ky(l)+1);if(!l||!(p=Ii(p)))return l;var _=dr(l),S=Gy(_,dr(p))+1;return Va(_,0,S).join("")}function fI(l,p,h){if(l=Lt(l),l&&(h||p===n))return l.replace(Pl,"");if(!l||!(p=Ii(p)))return l;var _=dr(l),S=Wy(_,dr(p));return Va(_,S).join("")}function hI(l,p){var h=Q,_=pe;if(an(p)){var S="separator"in p?p.separator:S;h="length"in p?ht(p.length):h,_="omission"in p?Ii(p.omission):_}l=Lt(l);var I=l.length;if(fs(l)){var F=dr(l);I=F.length}if(h>=I)return l;var q=h-hs(_);if(q<1)return _;var J=F?Va(F,0,q).join(""):l.slice(0,q);if(S===n)return J+_;if(F&&(q+=J.length-q),Gh(S)){if(l.slice(q).search(S)){var le,ue=J;for(S.global||(S=lh(S.source,Lt(Rl.exec(S))+"g")),S.lastIndex=0;le=S.exec(ue);)var he=le.index;J=J.slice(0,he===n?q:he)}}else if(l.indexOf(Ii(S),q)!=q){var Ce=J.lastIndexOf(S);Ce>-1&&(J=J.slice(0,Ce))}return J+_}function mI(l){return l=Lt(l),l&&Cl.test(l)?l.replace(wl,UP):l}var vI=bs(function(l,p,h){return l+(h?" ":"")+p.toUpperCase()}),Yh=B_("toUpperCase");function Nx(l,p,h){return l=Lt(l),p=h?n:p,p===n?zP(l)?qP(l):MP(l):l.match(p)||[]}var kx=xt(function(l,p){try{return Di(l,n,p)}catch(h){return Wh(h)?h:new ct(h)}}),gI=la(function(l,p){return Yi(p,function(h){h=Ar(h),oa(l,h,Vh(l[h],l))}),l});function yI(l){var p=l==null?0:l.length,h=Ze();return l=p?tn(l,function(_){if(typeof _[1]!="function")throw new Xi(o);return[h(_[0]),_[1]]}):[],xt(function(_){for(var S=-1;++S<p;){var I=l[S];if(Di(I[0],this,_))return Di(I[1],this,_)}})}function _I(l){return UA(Ji(l,f))}function Xh(l){return function(){return l}}function xI(l,p){return l==null||l!==l?p:l}var bI=$_(),EI=$_(!0);function gi(l){return l}function Zh(l){return h_(typeof l=="function"?l:Ji(l,f))}function wI(l){return v_(Ji(l,f))}function SI(l,p){return g_(l,Ji(p,f))}var CI=xt(function(l,p){return function(h){return jl(h,l,p)}}),TI=xt(function(l,p){return function(h){return jl(l,h,p)}});function Jh(l,p,h){var _=In(p),S=Wu(p,_);h==null&&!(an(p)&&(S.length||!_.length))&&(h=p,p=l,l=this,S=Wu(p,In(p)));var I=!(an(h)&&"chain"in h)||!!h.chain,F=ua(l);return Yi(S,function(q){var J=p[q];l[q]=J,F&&(l.prototype[q]=function(){var le=this.__chain__;if(I||le){var ue=l(this.__wrapped__),he=ue.__actions__=hi(this.__actions__);return he.push({func:J,args:arguments,thisArg:l}),ue.__chain__=le,ue}return J.apply(l,La([this.value()],arguments))})}),l}function PI(){return Fn._===this&&(Fn._=QP),this}function Qh(){}function AI(l){return l=ht(l),xt(function(p){return y_(p,l)})}var RI=Mh(tn),MI=Mh(zy),DI=Mh(th);function Bx(l){return Lh(l)?nh(Ar(l)):sR(l)}function OI(l){return function(p){return l==null?n:Ao(l,p)}}var II=F_(),NI=F_(!0);function em(){return[]}function tm(){return!1}function kI(){return{}}function BI(){return""}function LI(){return!0}function $I(l,p){if(l=ht(l),l<1||l>B)return[];var h=K,_=Yn(l,K);p=Ze(p),l-=K;for(var S=ah(_,p);++h<l;)p(h);return S}function zI(l){return pt(l)?tn(l,Ar):Ni(l)?[l]:hi(nx(Lt(l)))}function FI(l){var p=++ZP;return Lt(l)+p}var HI=Zu(function(l,p){return l+p},0),jI=Dh("ceil"),VI=Zu(function(l,p){return l/p},1),UI=Dh("floor");function WI(l){return l&&l.length?Uu(l,gi,vh):n}function GI(l,p){return l&&l.length?Uu(l,Ze(p,2),vh):n}function qI(l){return jy(l,gi)}function KI(l,p){return jy(l,Ze(p,2))}function YI(l){return l&&l.length?Uu(l,gi,xh):n}function XI(l,p){return l&&l.length?Uu(l,Ze(p,2),xh):n}var ZI=Zu(function(l,p){return l*p},1),JI=Dh("round"),QI=Zu(function(l,p){return l-p},0);function eN(l){return l&&l.length?rh(l,gi):0}function tN(l,p){return l&&l.length?rh(l,Ze(p,2)):0}return M.after=wD,M.ary=fx,M.assign=uO,M.assignIn=Px,M.assignInWith=up,M.assignWith=pO,M.at=dO,M.before=hx,M.bind=Vh,M.bindAll=gI,M.bindKey=mx,M.castArray=kD,M.chain=ux,M.chunk=UR,M.compact=WR,M.concat=GR,M.cond=yI,M.conforms=_I,M.constant=Xh,M.countBy=eD,M.create=fO,M.curry=vx,M.curryRight=gx,M.debounce=yx,M.defaults=hO,M.defaultsDeep=mO,M.defer=SD,M.delay=CD,M.difference=qR,M.differenceBy=KR,M.differenceWith=YR,M.drop=XR,M.dropRight=ZR,M.dropRightWhile=JR,M.dropWhile=QR,M.fill=eM,M.filter=nD,M.flatMap=aD,M.flatMapDeep=oD,M.flatMapDepth=sD,M.flatten=ox,M.flattenDeep=tM,M.flattenDepth=nM,M.flip=TD,M.flow=bI,M.flowRight=EI,M.fromPairs=iM,M.functions=EO,M.functionsIn=wO,M.groupBy=lD,M.initial=aM,M.intersection=oM,M.intersectionBy=sM,M.intersectionWith=lM,M.invert=CO,M.invertBy=TO,M.invokeMap=uD,M.iteratee=Zh,M.keyBy=pD,M.keys=In,M.keysIn=vi,M.map=rp,M.mapKeys=AO,M.mapValues=RO,M.matches=wI,M.matchesProperty=SI,M.memoize=op,M.merge=MO,M.mergeWith=Ax,M.method=CI,M.methodOf=TI,M.mixin=Jh,M.negate=sp,M.nthArg=AI,M.omit=DO,M.omitBy=OO,M.once=PD,M.orderBy=dD,M.over=RI,M.overArgs=AD,M.overEvery=MI,M.overSome=DI,M.partial=Uh,M.partialRight=_x,M.partition=fD,M.pick=IO,M.pickBy=Rx,M.property=Bx,M.propertyOf=OI,M.pull=dM,M.pullAll=lx,M.pullAllBy=fM,M.pullAllWith=hM,M.pullAt=mM,M.range=II,M.rangeRight=NI,M.rearg=RD,M.reject=vD,M.remove=vM,M.rest=MD,M.reverse=Hh,M.sampleSize=yD,M.set=kO,M.setWith=BO,M.shuffle=_D,M.slice=gM,M.sortBy=ED,M.sortedUniq=SM,M.sortedUniqBy=CM,M.split=aI,M.spread=DD,M.tail=TM,M.take=PM,M.takeRight=AM,M.takeRightWhile=RM,M.takeWhile=MM,M.tap=WM,M.throttle=OD,M.thru=ip,M.toArray=Sx,M.toPairs=Mx,M.toPairsIn=Dx,M.toPath=zI,M.toPlainObject=Tx,M.transform=LO,M.unary=ID,M.union=DM,M.unionBy=OM,M.unionWith=IM,M.uniq=NM,M.uniqBy=kM,M.uniqWith=BM,M.unset=$O,M.unzip=jh,M.unzipWith=cx,M.update=zO,M.updateWith=FO,M.values=Ss,M.valuesIn=HO,M.without=LM,M.words=Nx,M.wrap=ND,M.xor=$M,M.xorBy=zM,M.xorWith=FM,M.zip=HM,M.zipObject=jM,M.zipObjectDeep=VM,M.zipWith=UM,M.entries=Mx,M.entriesIn=Dx,M.extend=Px,M.extendWith=up,Jh(M,M),M.add=HI,M.attempt=kx,M.camelCase=WO,M.capitalize=Ox,M.ceil=jI,M.clamp=jO,M.clone=BD,M.cloneDeep=$D,M.cloneDeepWith=zD,M.cloneWith=LD,M.conformsTo=FD,M.deburr=Ix,M.defaultTo=xI,M.divide=VI,M.endsWith=GO,M.eq=hr,M.escape=qO,M.escapeRegExp=KO,M.every=tD,M.find=iD,M.findIndex=rx,M.findKey=vO,M.findLast=rD,M.findLastIndex=ax,M.findLastKey=gO,M.floor=UI,M.forEach=px,M.forEachRight=dx,M.forIn=yO,M.forInRight=_O,M.forOwn=xO,M.forOwnRight=bO,M.get=qh,M.gt=HD,M.gte=jD,M.has=SO,M.hasIn=Kh,M.head=sx,M.identity=gi,M.includes=cD,M.indexOf=rM,M.inRange=VO,M.invoke=PO,M.isArguments=Do,M.isArray=pt,M.isArrayBuffer=VD,M.isArrayLike=mi,M.isArrayLikeObject=_n,M.isBoolean=UD,M.isBuffer=Ua,M.isDate=WD,M.isElement=GD,M.isEmpty=qD,M.isEqual=KD,M.isEqualWith=YD,M.isError=Wh,M.isFinite=XD,M.isFunction=ua,M.isInteger=xx,M.isLength=lp,M.isMap=bx,M.isMatch=ZD,M.isMatchWith=JD,M.isNaN=QD,M.isNative=eO,M.isNil=nO,M.isNull=tO,M.isNumber=Ex,M.isObject=an,M.isObjectLike=cn,M.isPlainObject=Kl,M.isRegExp=Gh,M.isSafeInteger=iO,M.isSet=wx,M.isString=cp,M.isSymbol=Ni,M.isTypedArray=ws,M.isUndefined=rO,M.isWeakMap=aO,M.isWeakSet=oO,M.join=cM,M.kebabCase=YO,M.last=er,M.lastIndexOf=uM,M.lowerCase=XO,M.lowerFirst=ZO,M.lt=sO,M.lte=lO,M.max=WI,M.maxBy=GI,M.mean=qI,M.meanBy=KI,M.min=YI,M.minBy=XI,M.stubArray=em,M.stubFalse=tm,M.stubObject=kI,M.stubString=BI,M.stubTrue=LI,M.multiply=ZI,M.nth=pM,M.noConflict=PI,M.noop=Qh,M.now=ap,M.pad=JO,M.padEnd=QO,M.padStart=eI,M.parseInt=tI,M.random=UO,M.reduce=hD,M.reduceRight=mD,M.repeat=nI,M.replace=iI,M.result=NO,M.round=JI,M.runInContext=X,M.sample=gD,M.size=xD,M.snakeCase=rI,M.some=bD,M.sortedIndex=yM,M.sortedIndexBy=_M,M.sortedIndexOf=xM,M.sortedLastIndex=bM,M.sortedLastIndexBy=EM,M.sortedLastIndexOf=wM,M.startCase=oI,M.startsWith=sI,M.subtract=QI,M.sum=eN,M.sumBy=tN,M.template=lI,M.times=$I,M.toFinite=pa,M.toInteger=ht,M.toLength=Cx,M.toLower=cI,M.toNumber=tr,M.toSafeInteger=cO,M.toString=Lt,M.toUpper=uI,M.trim=pI,M.trimEnd=dI,M.trimStart=fI,M.truncate=hI,M.unescape=mI,M.uniqueId=FI,M.upperCase=vI,M.upperFirst=Yh,M.each=px,M.eachRight=dx,M.first=sx,Jh(M,function(){var l={};return Tr(M,function(p,h){zt.call(M.prototype,h)||(l[h]=p)}),l}(),{chain:!1}),M.VERSION=i,Yi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){M[l].placeholder=M}),Yi(["drop","take"],function(l,p){Pt.prototype[l]=function(h){h=h===n?1:Rn(ht(h),0);var _=this.__filtered__&&!p?new Pt(this):this.clone();return _.__filtered__?_.__takeCount__=Yn(h,_.__takeCount__):_.__views__.push({size:Yn(h,K),type:l+(_.__dir__<0?"Right":"")}),_},Pt.prototype[l+"Right"]=function(h){return this.reverse()[l](h).reverse()}}),Yi(["filter","map","takeWhile"],function(l,p){var h=p+1,_=h==ke||h==re;Pt.prototype[l]=function(S){var I=this.clone();return I.__iteratees__.push({iteratee:Ze(S,3),type:h}),I.__filtered__=I.__filtered__||_,I}}),Yi(["head","last"],function(l,p){var h="take"+(p?"Right":"");Pt.prototype[l]=function(){return this[h](1).value()[0]}}),Yi(["initial","tail"],function(l,p){var h="drop"+(p?"":"Right");Pt.prototype[l]=function(){return this.__filtered__?new Pt(this):this[h](1)}}),Pt.prototype.compact=function(){return this.filter(gi)},Pt.prototype.find=function(l){return this.filter(l).head()},Pt.prototype.findLast=function(l){return this.reverse().find(l)},Pt.prototype.invokeMap=xt(function(l,p){return typeof l=="function"?new Pt(this):this.map(function(h){return jl(h,l,p)})}),Pt.prototype.reject=function(l){return this.filter(sp(Ze(l)))},Pt.prototype.slice=function(l,p){l=ht(l);var h=this;return h.__filtered__&&(l>0||p<0)?new Pt(h):(l<0?h=h.takeRight(-l):l&&(h=h.drop(l)),p!==n&&(p=ht(p),h=p<0?h.dropRight(-p):h.take(p-l)),h)},Pt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Pt.prototype.toArray=function(){return this.take(K)},Tr(Pt.prototype,function(l,p){var h=/^(?:filter|find|map|reject)|While$/.test(p),_=/^(?:head|last)$/.test(p),S=M[_?"take"+(p=="last"?"Right":""):p],I=_||/^find/.test(p);!S||(M.prototype[p]=function(){var F=this.__wrapped__,q=_?[1]:arguments,J=F instanceof Pt,le=q[0],ue=J||pt(F),he=function(Ct){var Rt=S.apply(M,La([Ct],q));return _&&Ce?Rt[0]:Rt};ue&&h&&typeof le=="function"&&le.length!=1&&(J=ue=!1);var Ce=this.__chain__,Ue=!!this.__actions__.length,Qe=I&&!Ce,gt=J&&!Ue;if(!I&&ue){F=gt?F:new Pt(this);var et=l.apply(F,q);return et.__actions__.push({func:ip,args:[he],thisArg:n}),new Zi(et,Ce)}return Qe&&gt?l.apply(this,q):(et=this.thru(he),Qe?_?et.value()[0]:et.value():et)})}),Yi(["pop","push","shift","sort","splice","unshift"],function(l){var p=Ru[l],h=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);M.prototype[l]=function(){var S=arguments;if(_&&!this.__chain__){var I=this.value();return p.apply(pt(I)?I:[],S)}return this[h](function(F){return p.apply(pt(F)?F:[],S)})}}),Tr(Pt.prototype,function(l,p){var h=M[p];if(h){var _=h.name+"";zt.call(ys,_)||(ys[_]=[]),ys[_].push({name:p,func:h})}}),ys[Xu(n,N).name]=[{name:"wrapper",func:n}],Pt.prototype.clone=mA,Pt.prototype.reverse=vA,Pt.prototype.value=gA,M.prototype.at=GM,M.prototype.chain=qM,M.prototype.commit=KM,M.prototype.next=YM,M.prototype.plant=ZM,M.prototype.reverse=JM,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=QM,M.prototype.first=M.prototype.head,kl&&(M.prototype[kl]=XM),M},ms=KP();wo?((wo.exports=ms)._=ms,Zf._=ms):Fn._=ms}).call(sc)})(Dd,Dd.exports);const oJ={top:"50% calc(100% + 8px)",bottom:"50% -8px",left:"calc(100% + 8px)",right:"-8px 50%"};function sJ(e,t){const{position:n,mouseEnterDelay:i,mouseLeaveDelay:r,enterable:a,disabled:o,hideAfter:s}=Nv(t),c=j(!1),u=j(!1),d=sn(()=>typeof n.value=="string"?[n.value]:n.value),f=j(d.value[0]),m=sn(()=>({transformOrigin:oJ[f.value]})),v=Dd.exports.debounce(()=>{u.value&&(c.value=!0)},i.value),g=Dd.exports.debounce(()=>{!u.value&&(c.value=!1)},r.value),y=()=>{o.value||(u.value=!0,v())},E=()=>{u.value=!1,g()},N=R=>{f.value=R},O=()=>{u.value=!1,c.value=!1},T=()=>{a.value?y():O()};kv(()=>{e.value.addEventListener("mouseenter",y),e.value.addEventListener("mouseleave",E)});let w;return Li(c,R=>{R&&s.value&&(w&&clearTimeout(w),w=setTimeout(O,s.value))}),{visible:c,placement:f,positionArr:d,overlayStyles:m,onPositionChange:N,onMouseenter:y,onMouseleave:E,onMouseenterOverlay:T}}var Om=Si({name:"DTooltip",props:aJ,setup(e,{slots:t}){const{showAnimation:n,content:i}=Nv(e),r=j(),a=j(),{visible:o,placement:s,positionArr:c,overlayStyles:u,onPositionChange:d,onMouseleave:f,onMouseenterOverlay:m}=sJ(r,e),v=is("tooltip");return Lm(iP,r),()=>x(on,null,[x(rJ,null,{default:()=>{var g;return[(g=t.default)==null?void 0:g.call(t)]}}),x(HN,{to:"body"},{default:()=>[x(yw,{name:n.value?v.m(`fade-${s.value}`):""},{default:()=>[x(tJ,{modelValue:o.value,"onUpdate:modelValue":g=>o.value=g,ref:a,class:v.b(),origin:r.value,position:c.value,offset:6,"show-arrow":!0,style:u.value,onPositionChange:d,onMouseenter:m,onMouseleave:f},{default:()=>[x("span",{innerHTML:i.value},null)]})]})]})])}});function bc(e,t){const n={},i=Object.keys(t);return i.forEach(r=>{n[r]=e.style[r]}),i.forEach(r=>{e.style[r]=t[r]}),n}function Ry(e,t){return e.classList?e.classList.contains(t):` ${e.className} `.indexOf(` ${t} `)>-1}function td(e,t){e.classList?e.classList.add(t):Ry(e,t)||(e.className=`${e.className} ${t}`)}function uc(e,t){if(e.classList)e.classList.remove(t);else if(Ry(e,t)){const n=e.className;e.className=` ${n} `.replace(` ${t} `," ")}}function Im(e){return{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,originalEvent:e}}function Mv(e,t,n){e.addEventListener&&e.addEventListener(t,n)}function Dv(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}function aP(e){var t;const n=(t=e==null?void 0:e.target)==null?void 0:t.resizeProps;if(!n)return;function i(a){n.onDragEvent(Im(a))}function r(a){Dv(document,"mousemove",i),Dv(document,"mouseup",r),n.onReleaseEvent(Im(a))}Mv(document,"mousemove",i),Mv(document,"mouseup",r),n.onPressEvent(Im(e))}function lJ(e){Mv(e,"mousedown",aP)}const cJ={mounted(e,{value:t}){e.resizeProps=t,t.enableResize&&lJ(e)},unmounted(e,{value:t}){t.enableResize&&Dv(e,"mousedown",aP)}},uJ={index:{type:Number},orientation:{type:String,required:!0},splitBarSize:{type:String,required:!0},disabledBarSize:{type:String,default:"1px"},showCollapseButton:{type:Boolean}};function oP(...e){const t=n=>n&&typeof n=="object";return e.reduce((n,i)=>(Object.keys(i).forEach(r=>{const a=n[r],o=i[r];Array.isArray(a)&&Array.isArray(o)?n[r]=Array.from(new Set([...o,...a])):t(a)&&t(o)?n[r]=oP(a,o):n[r]=o}),n),{})}var pJ={pagination:{totalItemText:"\u6240\u6709\u6761\u76EE",goToText:"\u8DF3\u81F3"},accordion:{loading:"\u52A0\u8F7D\u4E2D",noData:"\u6CA1\u6709\u6570\u636E"},autoCompleteDropdown:{latestInput:"\u6700\u8FD1\u8F93\u5165"},cascaderList:{noData:"\u6CA1\u6709\u6570\u636E"},colorPicker:{foundationPanel:"\u57FA\u7840\u9762\u677F",advancedPanel:"\u9AD8\u7EA7\u9762\u677F"},datePickerPro:{ok:"\u786E\u5B9A",placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",month1:"1\u6708",month2:"2\u6708",month3:"3\u6708",month4:"4\u6708",month5:"5\u6708",month6:"6\u6708",month7:"7\u6708",month8:"8\u6708",month9:"9\u6708",month10:"10\u6708",month11:"11\u6708",month12:"12\u6708",year:"\u5E74",startPlaceholder:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65E5\u671F",endPlaceholder:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65E5\u671F",getWeekDays(){return["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},getTimeArr(){return["\u65F6","\u5206","\u79D2"]},getYearMonthStr(e,t){return`${e}\u5E74${t}\u6708`}},editableSelect:{noRelatedRecords:"\u627E\u4E0D\u5230\u76F8\u5173\u8BB0\u5F55",noData:"\u6CA1\u6709\u6570\u636E"},input:{placeholder:"\u8BF7\u8F93\u5165"},splitterBar:{collapse:"\u6536\u8D77",expand:"\u5C55\u5F00"},stepsGuide:{previous:"\u4E0A\u4E00\u6B65",continue:"\u6211\u77E5\u9053\u5566\uFF0C\u7EE7\u7EED",ok:"\u6211\u77E5\u9053\u5566"},table:{selectAll:"\u5168\u9009",ok:"\u786E\u5B9A"},timePopup:{ok:"\u786E\u5B9A"},transfer:{unit:"\u9879",panelUnit:"\u9879",headerUnit:"\u9879",noData:"\u6682\u65E0\u6570\u636E",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},tree:{loading:"\u52A0\u8F7D\u4E2D",newNode:"\u65B0\u8282\u70B9",selectPlaceholder:"\u8BF7\u9009\u62E9"},upload:{placeholder:"\u9009\u62E9\u6587\u4EF6",getExistSameNameFilesMsg(e){return`\u60A8\u4E0A\u4F20\u7684 "${e}" \u5B58\u5728\u91CD\u540D\u6587\u4EF6, \u8BF7\u91CD\u65B0\u9009\u62E9\u6587\u4EF6`},getAllFilesBeyondMaximalFileSizeMsg(e){return`\u6700\u5927\u652F\u6301\u4E0A\u4F20${e}MB\u7684\u6587\u4EF6, \u60A8\u672C\u6B21\u4E0A\u4F20\u7684\u6240\u6709\u6587\u4EF6\u8D85\u8FC7\u53EF\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F`},getBeyondMaximalFileSizeMsg(e,t){return`\u6700\u5927\u652F\u6301\u4E0A\u4F20${t}MB\u7684\u6587\u4EF6, \u60A8\u4E0A\u4F20\u7684\u6587\u4EF6"${e}"\u8D85\u8FC7\u53EF\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F`},getNotAllowedFileTypeMsg(e,t){return`\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B: "${t}", \u60A8\u4E0A\u4F20\u7684\u6587\u4EF6"${e}"\u4E0D\u5728\u5141\u8BB8\u8303\u56F4\u5185\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u6587\u4EF6`}},search:{placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57"},select:{placeholder:"\u8BF7\u9009\u62E9",noDataText:"\u65E0\u6570\u636E",noMatchText:"\u627E\u4E0D\u5230\u76F8\u5173\u8BB0\u5F55",loadingText:"\u52A0\u8F7D\u4E2D..."},tagInput:{maxTagsText:"\u5DF2\u8FBE\u5230\u6700\u5927\u4E2A\u6570\uFF1A"},timeSelect:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4"}};const nd=j("zh-CN");let Nm=Lc({[nd.value]:pJ});const dJ={messages(){return Nm[nd.value]},lang(){return nd.value},use(e,t){nd.value=e,this.add({[e]:t})},add(e={}){Nm=oP(Nm,e)}},fJ=e=>e.substring(1).replace(/^\S/,t=>t.toLocaleLowerCase());function lw(e,t){const n=t.split(".");let i=e;return n.forEach(r=>{var a;i=(a=i[r])!=null?a:""}),i}function hJ(e,t,n){const i=n||fJ(e)+".";return r=>{var a;const o=((a=t==null?void 0:t.appContext.config.globalProperties.langMessages)==null?void 0:a.value)||dJ.messages();return lw(o,i+r)||lw(o,r)}}var mJ=Si({name:"DSplitterBar",components:{DToolTip:Om},props:uJ,setup(e){const t=gw(),n=hJ("DSplitterBar",t),i=is("splitter"),r=ad("splitterStore"),a=Lc({wrapperClass:`${i.e("bar")} ${i.em("bar",e.orientation)} `}),o=j();Li([()=>e.splitBarSize,o],([T,w])=>{w instanceof HTMLElement&&bc(w,{flexBasis:T})},{immediate:!0}),Li([()=>r==null?void 0:r.state.panes,o],([,T])=>{!r||!e||e.index===void 0||(r.isStaticBar(e.index)?T&&bc(T,{flexBasis:e.disabledBarSize}):a.wrapperClass+=" resizable")},{deep:!0});const s=(T,w)=>{if(!r)return{};const R=r.getPane(T),L=r.getPane(w);return{pane:R,nearPane:L}},c=(T,w,R)=>{var L,H,$,W;const Q=((H=(L=T==null?void 0:T.component)==null?void 0:L.props)==null?void 0:H.collapsible)&&R,pe=(W=($=T==null?void 0:T.component)==null?void 0:$.props)==null?void 0:W.collapsed,oe=w==null?void 0:w.collapsed;return{[i.e("collapse")]:Q,collapsed:pe,hidden:oe}},u=sn(()=>{var T,w;if(!e||e.index===void 0)return{};const{pane:R,nearPane:L}=s(e.index,e.index+1),H=((w=(T=R==null?void 0:R.component)==null?void 0:T.props)==null?void 0:w.collapseDirection)!=="after"||e.index===0;return c(R,L,H)}),d=sn(()=>{var T,w;if(!r||!e||e.index===void 0)return{};const{pane:R,nearPane:L}=s(e.index+1,e.index),H=((w=(T=R==null?void 0:R.component)==null?void 0:T.props)==null?void 0:w.collapseDirection)!=="before"||e.index+1===r.state.paneCount-1;return c(R,L,H)}),f=()=>{var T,w,R,L;if(!o.value||!e||e.index===void 0)return;const{pane:H,nearPane:$}=s(e.index,e.index+1);((w=(T=H==null?void 0:H.component)==null?void 0:T.props)==null?void 0:w.collapsed)||((L=(R=$==null?void 0:$.component)==null?void 0:R.props)==null?void 0:L.collapsed)?td(o.value,"none-resizable"):uc(o.value,"none-resizable")},m=T=>{!r||!e||e.index===void 0||(r.tooglePane(e.index,e.index+1,T),f())},v=T=>{!r||!e||e.index===void 0||(r.tooglePane(e.index+1,e.index,T),f())},g=()=>{m(!0),v(!0)},y={pageX:0,pageY:0,originalX:0,originalY:0};let E;const N={enableResize:!0,onPressEvent:function({originalEvent:T}){T.stopPropagation(),!(!r||!e||e.index===void 0)&&(!r.isResizable(e.index)||(E=r.dragState(e.index),y.originalX=T.pageX,y.originalY=T.pageY))},onDragEvent:function({originalEvent:T}){if(T.stopPropagation(),!r||!e||e.index===void 0||!r.isResizable(e.index))return;y.pageX=T.pageX,y.pageY=T.pageY;let w;e.orientation==="vertical"?w=y.pageY-y.originalY:w=y.pageX-y.originalX,r.setSize(E,w)},onReleaseEvent:function({originalEvent:T}){if(T.stopPropagation(),!r||!e||e.index===void 0||!r.isResizable(e.index))return;y.pageX=T.pageX,y.pageY=T.pageY;let w;e.orientation==="vertical"?w=y.pageY-y.originalY:w=y.pageX-y.originalX,r.setSize(E,w)}};kv(()=>{g()});const O=()=>{var T,w,R,L;if(!e||e.index===void 0)return n("collapse");const{pane:H,nearPane:$}=s(e.index,e.index+1),W=((w=(T=H==null?void 0:H.component)==null?void 0:T.props)==null?void 0:w.collapsed)||((L=(R=$==null?void 0:$.component)==null?void 0:R.props)==null?void 0:L.collapsed);return n(W?"expand":"collapse")};return()=>zs(x("div",{class:a.wrapperClass,ref:o},[e.showCollapseButton&&x(Om,{content:O()},{default:()=>[x("div",{class:["prev",u.value],onClick:()=>{m()}},null)]}),e.showCollapseButton&&x(Om,{content:O()},{default:()=>[x("div",{class:["next",d.value],onClick:()=>v()},null)]})]),[[cJ,N]])}});class vJ{constructor(){this.state=Lc({panes:[],splitterContainerSize:0,paneCount:0})}setPanes({panes:t}){this.state.panes=t.map((n,i)=>{var r;return n.component&&(n.component.exposed.order.value=i*2),n.getPaneSize=(r=n==null?void 0:n.component)==null?void 0:r.exposed.getPaneSize,n}),this.state.paneCount=t.length}setSplitter({containerSize:t}){this.state.splitterContainerSize=t}getPane(t){if(!this.state.panes||t<0||t>=this.state.panes.length)throw new Error("no pane can return.");return this.state.panes[t]}dragState(t){const n=this.getPane(t),i=this.getPane(t+1),r=n.getPaneSize()+i.getPaneSize();return{prev:{index:t,initialSize:n.getPaneSize(),minSize:this.toPixels(n.component.props.minSize)||r-this.toPixels(i.component.props.maxSize)||0,maxSize:this.toPixels(n.component.props.maxSize)||r-this.toPixels(i.component.props.minSize)||r},next:{index:t+1,initialSize:i.getPaneSize(),minSize:this.toPixels(i.component.props.minSize)||r-this.toPixels(n.component.props.maxSize)||0,maxSize:this.toPixels(i.component.props.maxSize)||r-this.toPixels(n.component.props.minSize)||r}}}clamp(t,n,i){return Math.min(n,Math.max(t,i))}resize(t,n){const i=this.getPane(t.index),r=this.state.splitterContainerSize,a=this.clamp(t.minSize,t.maxSize,t.initialSize+n);let o="";this.isPercent(i.component.props.size)?o=a/r*100+"%":o=a+"px",i.component.props.size=o,i.component.emit("sizeChange",o)}isResizable(t){var n,i,r,a,o,s,c,u;const d=this.getPane(t),f=this.getPane(t+1),m=((i=(n=d==null?void 0:d.component)==null?void 0:n.props)==null?void 0:i.collapsed)||((a=(r=f==null?void 0:f.component)==null?void 0:r.props)==null?void 0:a.collapsed);return((s=(o=d==null?void 0:d.component)==null?void 0:o.props)==null?void 0:s.resizable)&&((u=(c=f==null?void 0:f.component)==null?void 0:c.props)==null?void 0:u.resizable)&&!m}isStaticBar(t){var n,i,r,a;const o=this.getPane(t),s=this.getPane(t+1);return!(((i=(n=o==null?void 0:o.component)==null?void 0:n.props)==null?void 0:i.resizable)&&((a=(r=s==null?void 0:s.component)==null?void 0:r.props)==null?void 0:a.resizable))}isPercent(t){return/%$/.test(t)}toPixels(t){let n=parseFloat(t);return this.isPercent(t)&&(n=this.state.splitterContainerSize*n/100),n}tooglePane(t,n,i){var r,a,o,s,c,u,d,f,m,v,g,y,E;const N=this.getPane(t),O=this.getPane(n);(a=(r=N==null?void 0:N.component)==null?void 0:r.props)!=null&&a.collapsible&&(N.component.props.collapsed=i?(s=(o=N==null?void 0:N.component)==null?void 0:o.props)==null?void 0:s.collapsed:!((u=(c=N==null?void 0:N.component)==null?void 0:c.props)!=null&&u.collapsed),(v=(d=O==null?void 0:O.component)==null?void 0:d.exposed)==null||v.toggleNearPaneFlexGrow((m=(f=N==null?void 0:N.component)==null?void 0:f.props)==null?void 0:m.collapsed),(E=N==null?void 0:N.component)==null||E.emit("collapsedChange",(y=(g=N==null?void 0:N.component)==null?void 0:g.props)==null?void 0:y.collapsed))}setSize(t,n){const i=this.getPane(t.prev.index),r=this.getPane(t.next.index);i.component.props.size&&r.component.props.size?(this.resize(t.prev,n),this.resize(t.next,-n)):r.component.props.size?this.resize(t.next,-n):this.resize(t.prev,n)}}const gJ={orientation:{type:String,default:"horizontal"},splitBarSize:{type:String,default:"2px"},disabledBarSize:{type:String,default:"1px"},showCollapseButton:{type:Boolean,default:!0}};var cw=Si({name:"DSplitter",components:{DSplitterBar:mJ},props:gJ,emits:[],setup(e,t){var n,i;const r=new vJ,a=Lc({panes:[]}),o=is("splitter");a.panes=((i=(n=t.slots).DSplitterPane)==null?void 0:i.call(n))||[],r.setPanes({panes:a.panes}),Lm("orientation",e.orientation),Lm("splitterStore",r);const s=j(),c=()=>{if(!s.value)return;let d=0;e.orientation==="vertical"?d=s.value.clientHeight:d=s.value.clientWidth,r.setSplitter({containerSize:d})},u=new ResizeObserver(c);return Li(s,d=>{!d||(c(),s.value&&u.observe(s.value))}),Bv(()=>{u.disconnect()}),()=>{const{splitBarSize:d,orientation:f,showCollapseButton:m}=e,v=[o.b(),o.m(f)];return x("div",{class:v,ref:s},[a.panes,a.panes.filter((g,y,E)=>y!==E.length-1).map((g,y)=>x(D("d-splitter-bar"),{key:y,style:`order: ${y*2+1}`,splitBarSize:d,orientation:f,index:y,showCollapseButton:m},null))])}}});const yJ={size:{type:String},minSize:{type:String},maxSize:{type:String},resizable:{type:Boolean,default:!0},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},collapseDirection:{type:String,default:"both"},shrink:{type:Boolean,default:!1},shrinkWidth:{type:Number,default:36}};var uw=Si({name:"DSplitterPane",props:yJ,emits:["sizeChange","collapsedChange"],setup(e,{slots:t,expose:n}){const i=ad("splitterStore"),r=j(),a=j(),o=is("splitter");Li([a,r],([m,v])=>{!v||bc(v,{order:m})});const s=(m,v)=>{if(!v)return;v.style.flexBasis=m;const g=o.em("pane","fixed");m?td(v,g):uc(v,g)};Li([()=>e.size,r],([m,v])=>{m&&v&&s(m,v)},{immediate:!0});const c=ad("orientation");let u="";kv(()=>{e.size&&(u=e.size),i&&i.setPanes({panes:i.state.panes})}),jN(()=>{i&&i.setPanes({panes:i.state.panes})});const d=()=>{const m=r.value;return m?c==="vertical"?m.offsetHeight:m.offsetWidth:0};return Li([()=>e.collapsed,r],([m,v])=>{if(!v)return;const g=o.em("pane","hidden");m?td(v,g):uc(v,g),m&&e.shrink?(uc(v,g),bc(v,{flexBasis:`${e.shrinkWidth}px`})):bc(v,{flexBasis:u})},{immediate:!0}),n({order:a,getPaneSize:d,toggleNearPaneFlexGrow:m=>{const v=r.value;if(!(v instanceof HTMLElement))return;const g=o.em("pane","grow");Ry(v,g)?uc(v,g):m&&td(v,g)}}),()=>{var m;return x("div",{class:o.e("pane"),ref:r},[(m=t.default)==null?void 0:m.call(t)])}}}),_J={title:"Splitter \u5206\u5272\u5668",category:"\u5E03\u5C40",status:"100%",install(e){e.component(cw.name,cw),e.component(uw.name,uw)}};WN(PZ).use(AZ).use(_J).mount("#app");
