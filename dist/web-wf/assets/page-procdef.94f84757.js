import{r as N,al as L,D as B,E as k,am as R,G as P,an as q,K as A,a as z,j as K,N as H,i as m,I as w,n as V,u as I,l as h,P as s,_ as $,p as a,q as E,s as O,w as t,y as e,S as T,t as M,v as x,d as S,H as G,J as U,L as j,M as J,O as Q,V as W,R as X,Q as Y,z as Z,F as ee,T as ne}from"./index.b9dd0157.js";import{N as te}from"./index.5b379d15.js";function oe(n){return N({url:`/wf/wfprocdef/${n}`,method:"delete"})}function ae(n){return N({url:`/wf/wfprocdef/delVerByCamundaProcdefId/${n}`,method:"delete"})}function ie(n){return N({url:`/wf/wfprocdef/setCurrentVerByCamundaProcdefId?camundaProcdefId=${n}`,method:"post"})}const ue=n=>N({url:`/wf/wfprocdef/queryVerListByCamundaProcdefKey?camundaProcdefKey=${n}`,method:"post"}),re={name:"versionModal",components:{NConfigProvider:L,NLayout:B,NLayoutHeader:k,NLayoutSider:R,NLayoutContent:P,NLayoutFooter:q,NInputGroup:A,NInput:z,NSpin:K,NModal:H,NButton:m,NwIcon:w},props:{},emits:["callback"],setup(n,o){const d=V(),c=I(),y=h(!1),v=h(!1),r=h(null),p=h([]),f=h(null),i=()=>{ue(f.value).then(u=>{y.value=!1,p.value=u})},l=u=>{ie(u.camundaProcdefId).then(g=>{g?d.success("\u751F\u6548\u6210\u529F"):d.error("\u751F\u6548\u5931\u8D25")}).catch(g=>{d.error("\u751F\u6548\u5931\u8D25")}).finally(()=>{i(),o.emit("callback")})},C=u=>{const g=c.warning({title:"\u5220\u9664\u8B66\u544A",content:()=>"\u786E\u5B9A\u5220\u9664\u8BE5\u6D41\u7A0B\u7248\u672C\uFF1F",positiveText:"\u786E\u8BA4",onPositiveClick:()=>(g.loading=!0,new Promise(F=>{ae(u.camundaProcdefId).then(b=>{b?d.success("\u5220\u9664\u6210\u529F"):d.error("\u5220\u9664\u5931\u8D25")}).catch(b=>{d.error("\u5220\u9664\u5931\u8D25")}).finally(()=>{g.loading=!1,i(),F()})}))})},_=h({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},data:p,columns:[{title:"\u6D41\u7A0B\u5206\u7C7B",field:"procdefTypeName",width:80},{field:"procdefName",title:"\u6D41\u7A0B\u540D\u79F0"},{field:"camundaProcdefKey",title:"\u6D41\u7A0BKey"},{field:"procdefVersion",title:"\u7248\u672C\u53F7"},{field:"versionTag",title:"\u7248\u672CTag"},{field:"createUserName",title:"\u521B\u5EFA\u4EBA"},{field:"createTime",width:130,title:"\u521B\u5EFA\u65F6\u95F4"},{field:"startEnable",title:"\u64CD\u4F5C",width:100,showHeaderOverflow:!0,fixed:"right",slots:{default:({row:u})=>[s(m,{text:!0,size:"small",color:"#1890ff",onClick:()=>{l(u)},style:"margin-right: 5px;"},{default:()=>"\u751F\u6548"}),s(m,{text:!0,size:"small",color:"#1890ff",onClick:()=>{C(u)},style:"margin-right: 5px;"},{default:()=>"\u5220\u9664"})]}}]});return{props:n,isLoading:y,gridRef:r,gridOption:_,visible:v,show(u){v.value=!0,y.value=!0,f.value=u,i()},handleClearForm:()=>{}}}};const le=M("div",null," \u7248\u672C\u5217\u8868 ",-1),se={class:"nw-modal-action"};function de(n,o,d,c,y,v){const r=a("nw-icon"),p=a("vxe-grid"),f=a("n-layout-content"),i=a("n-layout"),l=a("n-button"),C=a("n-spin"),_=a("n-modal"),D=a("n-config-provider");return E(),O(D,{abstract:"","theme-overrides":{}},{default:t(()=>[e(_,{class:"nw-modal",show:c.visible,"onUpdate:show":o[1]||(o[1]=u=>c.visible=u),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:t(()=>[e(r,{name:"icon-biaodan",size:20,color:"rgb(103, 194, 58)"})]),header:t(()=>[le]),default:t(()=>[e(C,{show:c.isLoading},{default:t(()=>[e(i,{"has-sider":"",class:"nw-modal-layout"},{default:t(()=>[e(f,null,{default:t(()=>[e(p,T({class:"nw-vxe-grid",ref:"gridRef"},c.gridOption),null,16)]),_:1})]),_:1}),M("div",se,[e(l,{size:"small",onClick:o[0]||(o[0]=u=>c.visible=!1)},{default:t(()=>[x("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["show"])]),_:1})}const ce=$(re,[["render",de]]),fe=S({components:{NLayout:B,NLayoutHeader:k,NLayoutContent:P,NButton:m,NSpace:G,NwIcon:w,NTag:U,NInput:z,NInputGroup:A,NDrawer:j,NDrawerContent:J,NwFunctionAccess:te,NwFunctionPredefine:Q,VersionModal:ce},setup(){const n=I(),o=V(),d=h(),c=i=>{const l=n.warning({title:"\u5220\u9664\u8B66\u544A",content:()=>"\u786E\u5B9A\u5220\u9664\u8BE5\u6D41\u7A0B\uFF1F",positiveText:"\u786E\u8BA4",onPositiveClick:()=>(l.loading=!0,new Promise(C=>{oe(i.id).then(_=>{_?o.success("\u5220\u9664\u6210\u529F"):o.error("\u5220\u9664\u5931\u8D25")}).catch(_=>{o.error("\u5220\u9664\u5931\u8D25")}).finally(()=>{l.loading=!1})}))})},{bind:y,gridRef:v,filterData:r,query:p,reset:f}=new W.VxeGridPaging({columns:[{field:"procdefTypeName",title:"\u6D41\u7A0B\u5206\u7C7B"},{field:"procdefName",title:"\u6D41\u7A0B\u540D\u79F0"},{field:"procdefNameAbbr",title:"\u6D41\u7A0B\u5168\u79F0"},{field:"versionTag",title:"\u7248\u672C"},{field:"",title:"\u8868\u5355"},{title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"140px",slots:{default:({row:i})=>[s(m,{size:"tiny",style:"margin-right: 5px;",type:"primary",text:!0,title:"\u65B0\u5EFA\u7248\u672C",onClick:()=>{window.location.href=`/web-wf/pages/procdef-editor.html?action=createVersion&camundaProcdefId=${i.camundaProcdefId}`}},{default:()=>[s(w,{size:20,name:"icon-n-y-newversion"})]}),s(m,{size:"tiny",style:"margin-right: 5px;",type:"warning",title:"\u7F16\u8F91",text:!0,onClick:()=>{window.location.href=`/web-wf/pages/procdef-editor.html?action=edit&procDefId=${i.id}&camundaProcdefId=${i.camundaProcdefId}`}},{default:()=>[s(w,{size:20,name:"icon-n-y-editpage"})]}),s(m,{size:"tiny",style:"margin-right: 5px;",type:"warning",title:"\u590D\u5236",text:!0,onClick:()=>{window.location.href=`/web-wf/pages/procdef-editor.html?action=clone&camundaProcdefId=${i.camundaProcdefId}`}},{default:()=>[s(w,{size:20,name:"icon-n-y-copy"})]}),s(m,{size:"tiny",style:"margin-right: 5px;",type:"warning",title:"\u7248\u672C",text:!0,onClick:()=>{d.value.show(i.camundaProcdefKey)}},{default:()=>[s(w,{size:20,name:"icon-n-y-version"})]}),s(m,{size:"tiny",type:"error",title:"\u5220\u9664",text:!0,onClick:()=>{c(i)}},{default:()=>[s(w,{size:20,name:"icon-n-y-shanchu"})]})]}}]},new X("/wf/wfprocdef/list","post"));return Y().then(()=>{f({})}),{VersionModalRef:d,bind:y,gridRef:v,filterData:r,query:p,reset:f,handleCreate(){window.location.href="/web-wf/pages/procdef-editor.html?action=create"},callbackModal(){f({})}}}});function pe(n,o,d,c,y,v){const r=a("n-button"),p=a("n-space"),f=a("n-input"),i=a("n-input-group"),l=a("nw-icon"),C=a("n-layout-header"),_=a("vxe-grid"),D=a("n-layout-content"),u=a("n-layout"),g=a("version-modal");return E(),Z(ee,null,[e(u,{class:"nw-layout-full"},{default:t(()=>[e(C,{class:"nw-layout-header"},{default:t(()=>[e(p,{size:5,style:{padding:"0 5px"}},{default:t(()=>[e(r,{onClick:n.handleCreate,size:"small",type:"primary"},{default:t(()=>[x("\u65B0\u5EFA\u6D41\u7A0B")]),_:1},8,["onClick"])]),_:1}),e(p,{size:5,style:{padding:"0 5px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(f,{value:n.filterData.formNameCh||"","onUpdate:value":o[0]||(o[0]=F=>n.filterData.formNameCh=F),placeholder:"\u8F93\u5165\u67E5\u8BE2\u6587\u672C",style:{width:"150px"}},null,8,["value"]),e(r,{type:"primary",onClick:o[1]||(o[1]=F=>n.query())},{default:t(()=>[x(" \u641C\u7D22 ")]),_:1})]),_:1}),e(r,{title:"\u91CD\u7F6E",type:"warning",onClick:o[2]||(o[2]=F=>n.reset())},{icon:t(()=>[e(l,{name:"icon-n-y-refresh"})]),_:1}),e(r,{title:"\u5BFC\u5165"},{icon:t(()=>[e(l,{name:"icon-n-y-import"})]),_:1}),e(r,{title:"\u5BFC\u51FA"},{icon:t(()=>[e(l,{name:"icon-n-y-export"})]),_:1}),e(r,{title:"\u6253\u5370",onClick:o[3]||(o[3]=F=>{var b;return(b=n.gridRef)==null?void 0:b.print()})},{icon:t(()=>[e(l,{name:"icon-n-y-print"})]),_:1}),e(r,null,{icon:t(()=>[e(l,{name:"icon-n-y-column"})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(_,T(n.bind,{ref:"gridRef"}),null,16)]),_:1})]),_:1}),e(g,{ref:"VersionModalRef",onCallback:n.callbackModal},null,8,["onCallback"])],64)}const me=$(fe,[["render",pe],["__scopeId","data-v-3204a5c3"]]);ne(me).mount("#app");
