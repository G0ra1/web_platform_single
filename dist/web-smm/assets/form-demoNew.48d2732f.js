var T=Object.defineProperty;var E=(e,a,t)=>a in e?T(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var s=(e,a,t)=>(E(e,typeof a!="symbol"?a+"":a,t),t);import{B as p,G as v,k as D,h as b,j as g,r as u,l as C,d as w,m as A,N as _,E as R,H as S,_ as z,I as o,o as m,b as f,w as n,a as r,f as k,a6 as M,p as O}from"./index.e51afe9d.js";import{A as V}from"./index.f2e37b57.js";import{t as G}from"./defaultLocale.79f990cc.js";import{N as U}from"./FormItemGridItem.d78d7d10.js";import{N as P}from"./InputNumber.9cc11044.js";const $={taskTitle:{type:"string",description:"\u4EFB\u52A1\u6807\u9898",exampleSetFlag:!0},taskName:{type:"string",description:"\u4EFB\u52A1\u540D\u79F0",exampleSetFlag:!0},taskType:{type:"number",description:"\u4EFB\u52A1\u7C7B\u578B",exampleSetFlag:!0},taskLevel:{type:"number",description:"\u4EFB\u52A1\u7EA7\u522B",exampleSetFlag:!0},taskInfoDetailList:{name:"taskInfoDetailList",type:"array",description:"\u4EFB\u52A1\u8BE6\u60C5\u5217\u8868",items:{name:"taskInfoDetail Dto",title:"\u4EFB\u52A1\u8BE6\u60C5 Dto",type:"object",properties:{detailName:{name:"detailName",type:"string",description:"\u4EFB\u52A1\u660E\u7EC6\u540D\u79F0"},detailType:{name:"detailType",type:"number",description:"\u4EFB\u52A1\u660E\u7EC6\u7C7B\u578B"},detailDatetime:{name:"detailDatetime",type:"string",description:"\u4EFB\u52A1\u65F6\u95F4"}}}}},j=(e,a)=>({rowKey:!1,keepSource:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,data:e.value.taskInfoDetailList,toolbarConfig:{enabled:a.taskInfoDetailList!=="readonly",slots:{buttons:({$grid:t})=>[p(v,{type:"primary",onClick:()=>{var l;e.value.taskInfoDetailList||(e.value.taskInfoDetailList=[]),(l=e.value.taskInfoDetailList)==null||l.push({detailName:"",detailType:1,detailDatetime:null}),t.reloadData(e.value.taskInfoDetailList)}},{default:()=>"\u65B0\u589E"})]}},editConfig:{trigger:"click",mode:"row",showStatus:!0,autoClear:!1},columns:[{visible:a["taskInfoDetailList.detailName"]!=="hide",title:"\u540D\u79F0",field:"detailName",showOverflow:"title",editRender:{enabled:a["taskInfoDetailList.detailName"]!=="readonly"},slots:{default:({row:t})=>t.detailName,edit:({row:t})=>[p(D,{size:"small",placeholder:"\u8F93\u5165\u540D\u79F0",value:t.detailName,onUpdateValue:l=>t.detailName=l})]}},{visible:a["taskInfoDetailList.detailType"]!=="hide",title:"\u7C7B\u578B",field:"detailType",showOverflow:"title",editRender:{enabled:a["taskInfoDetailList.detailType"]!=="readonly"},slots:{default:({row:t})=>t.detailType,edit:({row:t})=>[p(b,{size:"small",options:[{label:"1",value:1},{label:"2",value:2}],value:t.detailType,onUpdateValue:l=>{t.detailType=l}})]}},{visible:a["taskInfoDetailList.detailDatetime"]!=="hide",title:"\u65E5\u671F",field:"detailDatetime",showOverflow:"title",editRender:{enabled:a["taskInfoDetailList.detailDatetime"]!=="readonly"},slots:{default:({row:t})=>t.detailDatetime,edit:({row:t})=>[p(g,{size:"small","value-format":"yyyy-MM-dd","formatted-value":t.detailDatetime,onUpdateFormattedValue:l=>{t.detailDatetime=l}})]}},{visible:a.taskInfoDetailList!=="readonly",title:"\u64CD\u4F5C",width:70,fixed:"right",slots:{default:({$table:t,rowIndex:l})=>[p(v,{size:"small",type:"error",text:!0,onClick:()=>{e.value.taskInfoDetailList.splice(l,1),e.value.taskInfoDetailList.length||delete e.value.taskInfoDetailList,t.reloadData(e.value.taskInfoDetailList)}},{default:()=>"\u5220\u9664"})]}}]});class H extends V{constructor(){super();s(this,"formRef",u());s(this,"rules",u({}));s(this,"dataPermits",u({}));s(this,"gridRef",u());s(this,"gridOption",u({}));s(this,"dataModel",u({}));s(this,"refreshGrid",()=>{this.gridOption.value=j(this.dataModel,this.dataPermits.value)});s(this,"getSchema",async()=>$);s(this,"setValue",t=>{console.log("====setValue===",t),this.dataModel.value=t});s(this,"getValue",async()=>C.exports.cloneDeep(this.dataModel.value));s(this,"setRules",t=>{super.setRules(t),this.refreshGrid()});this.refreshGrid()}}G("%Y-%m-%d");const K=w({components:{NForm:A,NFormItem:_,NGrid:R,NFormItemGi:U,NInput:D,NInputNumber:P,NButton:v,NSwitch:S,NSelect:b,NDatePicker:g},setup(){const{formRef:e,dataModel:a,rules:t,dataPermits:l,gridRef:y,gridOption:c}=new H;return{formRef:e,dataModel:a,rules:t,dataPermits:l,gridRef:y,gridOption:c}}});function Y(e,a,t,l,y,c){const h=o("n-input"),d=o("n-form-item-gi"),N=o("n-select"),F=o("n-input-number"),I=o("vxe-grid"),L=o("n-grid"),B=o("n-form");return m(),f(B,{model:e.dataModel,rules:e.rules,ref:"formRef","label-placement":"left","label-width":160,size:"small",style:{padding:"45px"}},{default:n(()=>[r(L,{cols:24,"x-gap":24},{default:n(()=>[e.dataPermits.taskTitle!=="hide"?(m(),f(d,{key:0,span:12,label:"\u4EFB\u52A1\u6807\u9898",path:"taskTitle"},{default:n(()=>[r(h,{disabled:e.dataPermits.taskTitle==="readonly",placeholder:"Input",value:e.dataModel.taskTitle,"onUpdate:value":a[0]||(a[0]=i=>e.dataModel.taskTitle=i)},null,8,["disabled","value"])]),_:1})):k("",!0),e.dataPermits.taskName!=="hide"?(m(),f(d,{key:1,span:12,label:"\u4EFB\u52A1\u540D\u79F0",path:"taskName"},{default:n(()=>[r(h,{disabled:e.dataPermits.taskName==="readonly",placeholder:"Input",value:e.dataModel.taskName,"onUpdate:value":a[1]||(a[1]=i=>e.dataModel.taskName=i)},null,8,["disabled","value"])]),_:1})):k("",!0),e.dataPermits.taskType!=="hide"?(m(),f(d,{key:2,span:12,label:"\u4EFB\u52A1\u7C7B\u578B",path:"taskType"},{default:n(()=>[r(N,{disabled:e.dataPermits.taskType==="readonly",value:e.dataModel.taskType,"onUpdate:value":a[2]||(a[2]=i=>e.dataModel.taskType=i),options:[{label:"\u4EFB\u52A1\u7C7B\u578B1",value:1},{label:"\u4EFB\u52A1\u7C7B\u578B2",value:2}]},null,8,["disabled","value"])]),_:1})):k("",!0),e.dataPermits.taskLevel!=="hide"?(m(),f(d,{key:3,span:12,label:"\u4EFB\u52A1\u7EA7\u522B",path:"taskLevel"},{default:n(()=>[r(F,{disabled:e.dataPermits.taskLevel==="readonly",placeholder:"Input",value:e.dataModel.taskLevel,"onUpdate:value":a[3]||(a[3]=i=>e.dataModel.taskLevel=i)},null,8,["disabled","value"])]),_:1})):k("",!0),r(d,{span:24,label:"\u4EFB\u52A1\u8BE6\u60C5",path:"taskInfoDetailList"},{default:n(()=>[r(I,M({ref:"gridRef"},e.gridOption,{style:{width:"100%","moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),_:1})]),_:1})]),_:1},8,["model","rules"])}const q=z(K,[["render",Y]]);O(q).mount("#app");
