var N=Object.defineProperty;var R=(l,p,a)=>p in l?N(l,p,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[p]=a;var t=(l,p,a)=>(R(l,typeof p!="symbol"?p+"":p,a),a);import{r as i,l as C,d as S,o as m,c as x,a as y,w as n,u as e,b as F,e as g,t as h,f as D,i as v,g as A,F as T,N as f,h as k,j as I,k as U,m as w,n as M,p as O}from"./index.e51afe9d.js";import{A as _}from"./index.f2e37b57.js";import{N as b}from"./text.6614a830.js";const H={applyUserId:{type:"string",description:"\u7533\u8BF7\u4EBAid",exampleSetFlag:!0},applyUserName:{type:"string",description:"\u7533\u8BF7\u4EBA\u59D3\u540D",exampleSetFlag:!0},applyType:{type:"number",description:"\u8BF7\u5047\u7C7B\u578B",exampleSetFlag:!0},applyDay:{type:"number",description:"\u8BF7\u5047\u5929\u6570",exampleSetFlag:!0},applyReason:{type:"string",description:"\u8BF7\u5047\u539F\u56E0",exampleSetFlag:!0},applyStartDate:{type:"string",description:"\u8BF7\u5047\u5F00\u59CB\u65E5\u671F",exampleSetFlag:!0},applyEndDate:{type:"string",description:"\u8BF7\u5047\u7ED3\u675F\u65E5\u671F",exampleSetFlag:!0}};class V{constructor(){t(this,"applyUserId");t(this,"applyUserName");t(this,"applyType");t(this,"applyDay");t(this,"applyReason");t(this,"applyStartDate");t(this,"applyEndDate")}changeDate(p,a){console.log("AskOff this:",this),this.applyStartDate=a[0],this.applyEndDate=a[1],this.applyDay=(p[1]-p[0])/(1e3*3600*24),this.applyReason=`\u8BF7${this.applyType===0?"\u4E8B\u5047":"\u75C5\u5047"}${this.applyDay}\u5929`}}var s=(l=>(l.REQUIRED="required",l.HIDE="hide",l.READONLY="readonly",l))(s||{});const B=i([Date.now(),Date.now()]),E=i();class L extends _{constructor(){super();t(this,"formRef",i());t(this,"dataModel",i(new V));t(this,"rules",i({}));t(this,"dataPermits",i({}));t(this,"getSchema",async()=>H);t(this,"setValue",a=>{Object.assign(this.dataModel.value,a),this.dataModel.value.applyType||(this.dataModel.value.applyType=0)});t(this,"getValue",async()=>C.exports.cloneDeep(this.dataModel.value));t(this,"setRules",a=>{this.rules.value={},Object.entries(a).forEach(([r,u])=>{u.powerCode===s.REQUIRED?this.rules.value[r]={type:u.dbType,required:!0,trigger:["blur","input"],message:`${u.nameCh}\u8BE5\u5C5E\u6027\u4E3A\u5FC5\u586B`}:this.dataPermits.value[r]=u.powerCode})});t(this,"validate",async()=>{var r;let a=[];return await((r=this.formRef.value)==null?void 0:r.validate().then(()=>{console.log("===\u9A8C\u8BC1\u6210\u529F\uFF01\uFF01\uFF01"),a=[]}).catch(u=>{console.log("===\u9A8C\u8BC1\u5931\u8D25\uFF01\uFF01\uFF01"),a=u.map(c=>c[0].message)})),a});t(this,"changeDate",(a,r)=>{this.dataModel.value.changeDate(a,r)})}}const Y=i([{label:"\u4E8B\u5047",value:0},{label:"\u75C5\u5047",value:1}]),j=S({__name:"App",setup(l){const{formRef:p,dataModel:a,rules:r,dataPermits:u,changeDate:c}=new L;return(q,o)=>(m(),x(T,null,[y(e(w),{ref_key:"formRef",ref:p,model:e(a),rules:e(r),size:"medium","label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",style:{padding:"20px 30px"}},{default:n(()=>[e(u).applyUserName!==e(s).HIDE?(m(),F(e(f),{key:0,label:"\u7533\u8BF7\u4EBA\u59D3\u540D"},{default:n(()=>[y(e(b),{type:"default"},{default:n(()=>[g(h(e(a).applyUserName),1)]),_:1})]),_:1})):D("",!0),e(u).applyType!==e(s).HIDE?(m(),F(e(f),{key:1,label:"\u8BF7\u5047\u7C7B\u578B",path:"applyType"},{default:n(()=>[y(e(k),{value:e(a).applyType,"onUpdate:value":o[0]||(o[0]=d=>e(a).applyType=d),"default-value":0,options:e(Y),style:{width:"150px"},disabled:e(u).applyType===e(s).READONLY},null,8,["value","options","disabled"])]),_:1})):D("",!0),e(u).applyStartDate!==e(s).HIDE?(m(),F(e(f),{key:2,label:"\u8BF7\u5047\u5F00\u59CB\u7ED3\u675F\u65F6\u95F4",path:"applyStartDate"},{default:n(()=>[y(e(I),{value:e(B),"onUpdate:value":o[1]||(o[1]=d=>v(B)?B.value=d:null),"formatted-value":e(E),"onUpdate:formatted-value":o[2]||(o[2]=d=>v(E)?E.value=d:null),type:"datetimerange",clearable:"","value-format":"yyyy-MM-dd","on-update-value":e(c),disabled:e(u).applyStartDate===e(s).READONLY},null,8,["value","formatted-value","on-update-value","disabled"])]),_:1})):D("",!0),e(u).applyDay!==e(s).HIDE?(m(),F(e(f),{key:3,label:"\u8BF7\u5047\u5929\u6570",path:"applyDay"},{default:n(()=>[y(e(b),{type:"default"},{default:n(()=>[g(h(e(a).applyDay)+"\u5929 ",1)]),_:1})]),_:1})):D("",!0),e(u).applyReason!==e(s).HIDE?(m(),F(e(f),{key:4,label:"\u8BF7\u5047\u539F\u56E0",path:"applyReason"},{default:n(()=>[y(e(U),{placeholder:"\u8BF7\u5047\u539F\u56E0",value:e(a).applyReason,"onUpdate:value":o[3]||(o[3]=d=>e(a).applyReason=d),type:"textarea",disabled:e(u).applyReason===e(s).READONLY},null,8,["value","disabled"])]),_:1})):D("",!0)]),_:1},8,["model","rules"]),y(e(M),{dashed:""},{default:n(()=>[g(" \u8C03\u8BD5\u4FE1\u606F ")]),_:1}),A("pre",null,h(JSON.stringify(e(a),null,2)),1)],64))}});O(j).mount("#app");
