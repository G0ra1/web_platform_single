import{ae as z,al as j,am as X,ar as Y,aq as J,as as de,ao as K,k as D,at as I,au as R,G as U,ap as F,H as T,an as Q,av as ie,r as m,a9 as $,B as w,_ as A,I as n,o as M,b as S,w as o,g as P,a as t,d as L,m as q,N as O,E as W,M as Z,a8 as x,h as ee,ag as E,aw as te,ax as le,ay as H,aa as pe,e as k,az as me,aA as fe,aB as G,aC as ce,c as ve,a6 as ge,F as _e,p as be}from"./index.e51afe9d.js";import{N as oe,a as ae,M as ne,b as Ne,c as ye,O as he}from"./index.9875855d.js";import{N as se}from"./text.6614a830.js";import{N as we}from"./InputNumber.9cc11044.js";import"./Radio.95abfb5b.js";import"./FormItemGridItem.d78d7d10.js";function V(e){return z({url:"/smm/commonCustom/page",method:"post",data:e})}function ue(e){return z({url:"/smm/commonCustom",method:"post",data:e})}function re(e){return z({url:"/smm/commonCustom",method:"put",data:e})}function Ce(e){return z({url:`/smm/commonCustom/${e}`,method:"delete"})}function ke(e){return z({url:"/main/mdmOrg/list",method:"post",data:e})}const Fe={components:{NLayout:j,NLayoutHeader:X,NLayoutSider:Y,NLayoutContent:J,NLayoutFooter:de,NInputGroup:K,NInput:D,NSpin:I,NModal:R,NButton:U,NwIcon:F,NSwitch:T,NSpace:Q,NTree:ie},props:{rootName:{type:String,default:""},multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(e,l){const f=m([]),s=m(!1),b=m(""),_=({option:a})=>w(w("div",null,w(F,{name:a.appType==2?a.appIcon:"icon-n-y-fenjifenlei",size:15}))),i=()=>{s.value=!0,ke({isDefault:0,status:1}).then(a=>{f.value=a,s.value=!1})};return $(()=>{i()}),{props:e,renderPrefix:_,getTreeList:i,pattern:b,tIsLoading:s,treeData:f,nodeProps:({option:a})=>({onClick(){l.emit("callback",a)},onContextmenu(u){optionsRef.value=[a],showDropdownRef.value=!0,xRef.value=u.clientX,yRef.value=u.clientY,console.log(u.clientX,u.clientY),u.preventDefault()}})}}};const ze={class:"questionHeader"};function De(e,l,f,s,b,_){const i=n("n-input"),a=n("n-tree"),u=n("n-spin"),c=n("n-space");return M(),S(c,{vertical:"",size:12},{default:o(()=>[P("div",ze,[t(i,{placeholder:"\u641C\u7D22",style:{},value:s.pattern,"onUpdate:value":l[0]||(l[0]=v=>s.pattern=v)},null,8,["value"])]),t(u,{show:s.tIsLoading},{default:o(()=>[t(a,{data:s.treeData,"children-field":"children","label-field":"orgName","key-field":"id","render-prefix":s.renderPrefix,"block-line":"",pattern:s.pattern,"virtual-scroll":"",class:"treeH","node-props":s.nodeProps},null,8,["data","render-prefix","pattern","node-props"])]),_:1},8,["show"])]),_:1})}const Ie=A(Fe,[["render",De]]),Ue=L({components:{NModal:R,NInput:D,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:U,NSpin:I,NTag:E,NImage:oe,NText:se,NP:ae,NwDic:te,NwIcon:F,NwIconPick:le,MenuPick:ne,NwPickPage:Ne,NSwitch:T,NInputNumber:we},props:{},setup(e,l){const f=m(!1),s=m({}),b=m(),_=m(!1),i=m([]),a=H(),u=(v={})=>{f.value=!0,s.value={...v},pe.get("userInfo").then(p=>{s.value.deptName||(console.log(p,"\u7528\u6237\u4FE1\u606F"),s.value.deptName=p.parentDeptName,s.value.deptNameId=p.parentDeptId)})};$(()=>{});const c=m({customName:{required:!0,trigger:["focus","input"],message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},sort:{required:!0,trigger:["focus","input"],type:"number",message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}});return{showModal:f,message:a,model:s,formRef:b,isLoading:_,rules:c,sonFn:u,getFormMessage(v,p){s.value.formId=p.id,s.value.formUrl=p.pageUrl,s.value.formTargetUrl=p.targetUrl},platformDictCodes:i,onPositiveClick(){const v=s.value.id?re:ue;b.value.validate(p=>{p||(_.value=!0,v(s.value).then(N=>{N&&(l.emit("update:callback"),f.value=!1)}).finally(N=>{_.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),$e={style:{padding:"0 5px 5px 0"}};function Ae(e,l,f,s,b,_){const i=n("n-input"),a=n("n-form-item"),u=n("n-grid-item"),c=n("n-input-number"),v=n("n-grid"),p=n("n-form"),N=n("n-spin"),h=n("n-button"),y=n("n-modal");return M(),S(y,{show:e.showModal,"onUpdate:show":l[5]||(l[5]=g=>e.showModal=g),"mask-closable":!1,preset:"dialog",title:"\u8D44\u6E90\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[P("div",$e,[t(h,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[4]||(l[4]=g=>e.showModal=!1)},{default:o(()=>[k("\u53D6\u6D88")]),_:1}),t(h,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:o(()=>[k("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[t(N,{show:e.isLoading},{default:o(()=>[t(p,{model:e.model,ref:"formRef",rules:e.rules},{default:o(()=>[t(v,{"x-gap":"8",cols:2},{default:o(()=>[t(u,null,{default:o(()=>[t(a,{label:"\u5BA2\u6237\u540D\u79F0",path:"customName"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.customName,"onUpdate:value":l[0]||(l[0]=g=>e.model.customName=g)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u5382\u522B",path:"deptName"},{default:o(()=>[t(i,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.deptName,"onUpdate:value":l[1]||(l[1]=g=>e.model.deptName=g)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6392\u5E8F",path:"sort"},{default:o(()=>[t(c,{size:"small",style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165",value:e.model.sort,"onUpdate:value":l[2]||(l[2]=g=>e.model.sort=g)},null,8,["value"])]),_:1})]),_:1}),t(u,{span:24},{default:o(()=>[t(a,{label:"\u63CF\u8FF0",path:"description"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:e.model.description,"onUpdate:value":l[3]||(l[3]=g=>e.model.description=g)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Me=A(Ue,[["render",Ae]]),Pe=L({components:{NModal:R,NInput:D,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:U,NSpin:I,NTag:E,NImage:oe,NText:se,NP:ae,NwDic:te,NwIcon:F,NwIconPick:le,MenuPick:ne,NwPickCpts:ye,NSwitch:T},props:{},setup(e,l){const f=m(!1),s=m({}),b=m(),_=m(!1),i=m([]),a=H(),u=(c={})=>{f.value=!0,s.value={...c}};return $(()=>{}),{showModal:f,message:a,model:s,formRef:b,isLoading:_,sonFn:u,platformDictCodes:i,onPositiveClick(){const c=s.value.id?re:ue;b.value.validate(v=>{v||(_.value=!0,c(s.value).then(p=>{p&&(l.emit("update:callback"),f.value=!1)}).finally(p=>{_.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Be={style:{padding:"0 5px 5px 0"}};function Re(e,l,f,s,b,_){const i=n("n-input"),a=n("n-form-item"),u=n("n-grid-item"),c=n("n-select"),v=n("nw-pick-cpts"),p=n("n-grid"),N=n("n-form"),h=n("n-spin"),y=n("n-button"),g=n("n-modal");return M(),S(g,{show:e.showModal,"onUpdate:show":l[12]||(l[12]=r=>e.showModal=r),"mask-closable":!1,preset:"dialog",title:"\u529F\u80FD\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[P("div",Be,[t(y,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[11]||(l[11]=r=>e.showModal=!1)},{default:o(()=>[k("\u53D6\u6D88")]),_:1}),t(y,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:o(()=>[k("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[t(h,{show:e.isLoading},{default:o(()=>[t(N,{model:e.model,ref:"formRef",rules:e.rules},{default:o(()=>[t(p,{"x-gap":"8",cols:2},{default:o(()=>[t(u,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u540D\u79F0",path:"menuName"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuName,"onUpdate:value":l[0]||(l[0]=r=>e.model.menuName=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u7F16\u7801",path:"menuCode",disabled:""},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuCode,"onUpdate:value":l[1]||(l[1]=r=>e.model.menuCode=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6240\u5C5E\u83DC\u5355",path:"parentFullName"},{default:o(()=>[t(i,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentFullName,"onUpdate:value":l[2]||(l[2]=r=>e.model.parentFullName=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u9875\u9762\u540D\u79F0",path:"parentName"},{default:o(()=>[t(i,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentName,"onUpdate:value":l[3]||(l[3]=r=>e.model.parentName=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u8868\u5355\u6309\u94AEcode",path:"buttonCode"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.buttonCode,"onUpdate:value":l[4]||(l[4]=r=>e.model.buttonCode=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6392\u5E8F",path:"sort"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.sort,"onUpdate:value":l[5]||(l[5]=r=>e.model.sort=r)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u7C7B\u578B",path:"buttonType"},{default:o(()=>[t(c,{value:e.model.buttonType,"onUpdate:value":l[6]||(l[6]=r=>e.model.buttonType=r),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"default",label:"default"},{value:"tertiary",label:"tertiary"},{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"error",label:"error"}]},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u5C3A\u5BF8",path:"buttonSize"},{default:o(()=>[t(c,{value:e.model.buttonSize,"onUpdate:value":l[7]||(l[7]=r=>e.model.buttonSize=r),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8",options:[{value:"tiny",label:"tiny"},{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:o(()=>[t(a,{label:"\u5173\u8054\u529F\u80FD",path:"functionId"},{default:o(()=>[t(v,{fullName:e.model.functionName,"onUpdate:fullName":l[8]||(l[8]=r=>e.model.functionName=r),value:e.model.functionId,"onUpdate:value":l[9]||(l[9]=r=>e.model.functionId=r)},null,8,["fullName","value"])]),_:1})]),_:1}),t(u,{span:24},{default:o(()=>[t(a,{label:"\u63CF\u8FF0",path:"description"},{default:o(()=>[t(i,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:e.model.description,"onUpdate:value":l[10]||(l[10]=r=>e.model.description=r)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Te=A(Pe,[["render",Re]]),Se=L({components:{NLayout:j,NLayoutHeader:X,NLayoutContent:J,NButton:U,NSpace:Q,NwIcon:F,NTag:E,NInput:D,NInputGroup:K,NDrawer:me,SideTree:Ie,NForm:q,NFormItem:O,NSpin:I,NDrawerContent:fe,ModalAction:Me,NPopconfirm:G,ButtonAction:Te,NLayoutSider:Y,OrgTree:he},setup(){const e=m([]),l=m(),f=m(),s=m(),b=m({}),_=H(),i=m(""),a=m("0"),u=m("root"),c=d=>{console.log(d,"row......."),a.value=d.id,u.value=d.orgName,p()},v=d=>{let C=d.id;Ce(C).then(B=>{_.success("\u5220\u9664\u6210\u529F"),p()})},p=()=>{r.loading=!0,V({deptId:a.value}).then(d=>{e.value=d.records,l.value.loadData(d.records),r.loading=!1})},N=()=>{l.value.commitProxy("query")},h=(d={})=>{f.value.sonFn(d)},y=(d={})=>{s.value.sonFn(d)},r=ce({rowId:"id",size:"mini",border:!0,height:"auto",align:null,loading:!1,columns:[{field:"customName",title:"\u5BA2\u6237\u540D\u79F0",showHeaderOverflow:!0},{field:"customCode",title:"\u5BA2\u6237\u7F16\u7801",showHeaderOverflow:!0},{field:"deptName",title:"\u90E8\u95E8\u540D\u79F0",showHeaderOverflow:!0},{field:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",showHeaderOverflow:!0},{field:"description",title:"\u63CF\u8FF0",showHeaderOverflow:!0},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"100px",slots:{default:({row:d})=>[w("div",null,w("a",{onClick:()=>d.menuType==2?y(d):h({...d}),style:"color:#4098fc;cursor: pointer;display:inline-block;"},"\u4FEE\u6539"),w(G,{"onPositive-click":C=>{v(d)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>w("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px"},"\u5220\u9664"),default:()=>`\u662F\u5426\u5220\u9664\u5BA2\u6237${d.customName}\uFF1F`}),w("a",{onClick:()=>y({menuType:2,...b.value,parentFullName:d.parentFullName+"/"+d.menuName,parentName:d.menuName,parentFullId:d.parentFullId+"/"+d.id,parentId:d.id}),style:`${d.menuType==1?"display:inline-block":"display:none"};color:#4098fc;cursor: pointer;margin-left:15px`},"\u5173\u8054\u529F\u80FD"))]}}],pagerConfig:{pageSize:20},columnConfig:{resizable:!0},proxyConfig:{form:!0,seq:!0,props:{result:"result",total:"total"},ajax:{query:({page:d})=>new Promise(C=>{V({customName:i.value,page:{current:d.currentPage,size:d.pageSize}}).then(B=>{C({total:B.total,result:B.records})})})}}});return $(()=>{}),{sideTreeCallback:c,gridOptions:r,rightDatas:e,tableRef:l,appMessage:b,buttonlAction:s,modalAction:f,showAction:h,showButtonAction:y,getRightData:p,handDel:v,searchName:N,customName:i,deptId:a,deptName:u}}}),Le=P("span",null,null,-1);function qe(e,l,f,s,b,_){const i=n("n-space"),a=n("n-input"),u=n("n-form-item"),c=n("n-button"),v=n("n-form"),p=n("nw-icon"),N=n("n-layout-header"),h=n("vxe-grid"),y=n("n-layout-content"),g=n("n-layout"),r=n("ModalAction"),d=n("ButtonAction");return M(),ve(_e,null,[t(g,{class:"nw-layout-full"},{default:o(()=>[t(N,{class:"nw-layout-header"},{default:o(()=>[t(i,{size:5},{default:o(()=>[Le]),_:1}),t(i,{size:5,style:{padding:"0 5px",position:"absolute"}},{default:o(()=>[t(v,{ref:"formRef",inline:"","label-placement":"left","label-align":"right","label-width":120,model:e.SearchForm,style:{height:"30px"}},{default:o(()=>[t(u,{label:"\u5BA2\u6237\u540D\u79F0",path:"customName"},{default:o(()=>[t(a,{placeholder:"\u5BA2\u6237\u540D\u79F0",value:e.customName,"onUpdate:value":l[0]||(l[0]=C=>e.customName=C)},null,8,["value"])]),_:1}),t(u,null,{default:o(()=>[t(c,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:l[1]||(l[1]=()=>{e.searchName()})},{default:o(()=>[k(" \u67E5\u8BE2 ")]),_:1}),t(c,{type:"warning","attr-type":"button",onClick:l[2]||(l[2]=()=>{e.customName="",e.tableRef.loadData(e.rightDatas)})},{default:o(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(i,{size:5,style:{padding:"0 5px"}},{default:o(()=>[t(c,{type:"primary",onClick:l[3]||(l[3]=C=>e.showAction({}))},{icon:o(()=>[t(p,{name:"icon-n-y-add",size:14})]),default:o(()=>[k(" \u65B0\u5EFA ")]),_:1})]),_:1})]),_:1}),t(g,{"has-sider":"","content-style":"height: 100%"},{default:o(()=>[t(y,null,{default:o(()=>[t(h,ge(e.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1})]),_:1})]),_:1}),t(r,{ref:"modalAction","onUpdate:callback":l[4]||(l[4]=()=>{e.getRightData()})},null,512),t(d,{ref:"buttonlAction","onUpdate:callback":l[5]||(l[5]=()=>{e.getRightData()})},null,512)],64)}const Oe=A(Se,[["render",qe]]);be(Oe).mount("#app");
