import{al as W,am as ee,ar as q,aq as G,as as me,ao as V,k as A,at as j,au as K,G as S,ap as $,H as X,an as le,av as pe,r as v,a9 as Y,B as P,_ as H,I as i,o as z,b as L,w as a,g as B,a as e,a8 as te,a6 as ae,e as I,d as oe,m as ne,N as ue,E as fe,M as ve,h as ce,ag as ie,aw as ye,ax as be,j as Fe,b7 as Pe,az as ge,b8 as Ue,ay as de,W as De,a5 as Z,aa as Ie,a7 as ze,c as he,F as Ne,f as x,t as Be,aA as Re,aB as se,aC as Ee,p as Se}from"./index.e51afe9d.js";import{N as we,a as Ce,M as _e,b as Oe,c as Le,O as $e}from"./index.9875855d.js";import{r as Ae,g as je,c as Me,e as Te,d as He,a as We,q as re}from"./index.f284d6af.js";import{N as ke}from"./text.6614a830.js";import{N as qe}from"./InputNumber.9cc11044.js";import{N as Ge,a as Ve}from"./Step.fd93d305.js";import"./Radio.95abfb5b.js";import"./FormItemGridItem.d78d7d10.js";const Ke={components:{NLayout:W,NLayoutHeader:ee,NLayoutSider:q,NLayoutContent:G,NLayoutFooter:me,NInputGroup:V,NInput:A,NSpin:j,NModal:K,NButton:S,NwIcon:$,NSwitch:X,NSpace:le,NTree:pe},props:{rootName:{type:String,default:""},multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(l,t){const b=v([]),n=v(!1),h=v(""),g=({option:p})=>P(P("div",null,P($,{name:p.appType==2?p.appIcon:"icon-n-y-fenjifenlei",size:15}))),c=()=>{n.value=!0,Ae({isDefault:0,status:1}).then(p=>{b.value=p,n.value=!1})};return Y(()=>{c()}),{props:l,renderPrefix:g,getTreeList:c,pattern:h,tIsLoading:n,treeData:b,nodeProps:({option:p})=>({onClick(){t.emit("callback",p)},onContextmenu(s){optionsRef.value=[p],showDropdownRef.value=!0,xRef.value=s.clientX,yRef.value=s.clientY,console.log(s.clientX,s.clientY),s.preventDefault()}})}}};const Xe={class:"questionHeader"};function Ye(l,t,b,n,h,g){const c=i("n-input"),p=i("n-tree"),s=i("n-spin"),m=i("n-space");return z(),L(m,{vertical:"",size:12},{default:a(()=>[B("div",Xe,[e(c,{placeholder:"\u641C\u7D22",style:{},value:n.pattern,"onUpdate:value":t[0]||(t[0]=u=>n.pattern=u)},null,8,["value"])]),e(s,{show:n.tIsLoading},{default:a(()=>[e(p,{data:n.treeData,"children-field":"children","label-field":"orgName","key-field":"id","render-prefix":n.renderPrefix,"block-line":"",pattern:n.pattern,"virtual-scroll":"",class:"treeH","node-props":n.nodeProps},null,8,["data","render-prefix","pattern","node-props"])]),_:1},8,["show"])]),_:1})}const Je=H(Ke,[["render",Ye]]),Qe={components:{NLayout:W,NLayoutHeader:ee,NLayoutSider:q,NLayoutContent:G,NLayoutFooter:me,NInputGroup:V,NInput:A,NSpin:j,NModal:K,NButton:S,NwIcon:$,NSwitch:X,NTreeSelect:te,NSpace:le,NTree:pe},props:{value:{type:String,default:""}},emits:["update:value","UpdateValue"],setup(l,t){const b=v(!1),n=v([]),h=v([]),g=v([]),c=()=>{h.value=n.value.filter(s=>g.value.indexOf(s.id)>=0),console.log(h.value,"selected.value"),t.emit("callback",h.value),b.value=!1},p=v({rowId:"appId",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,data:n,columns:[{title:"\u539F\u6750\u6599",field:"commodityItemName"},{title:"\u5355\u4F4D",field:"commodityItemUnit"},{title:"\u64CD\u4F5C",width:80,slots:{default:({row:s})=>g.value.indexOf(s.id)>=0?[P(S,{size:"small",type:"primary",onClick:()=>{g.value.splice(g.value.indexOf(s.id),1)}},{default:()=>"\u5DF2\u9009\u62E9"})]:[P(S,{size:"small",type:"info",onClick:()=>{g.value.push(s.id)}},{default:()=>"\u9009\u62E9"})]}}]});return{props:l,visible:b,gridOption:p,selected:h,handleModalComplete:c,show(s=[]){h.value=s,g.value=s.map(m=>m.id),b.value=!0,je({}).then(m=>{n.value=m.detailList.map(u=>({...u,productMix3:u.commodityItemName,expenditurePattern:u.commodityItemPrice}))})}}}},Ze=B("div",{class:"iconfont icon-bpmn-ditu"},null,-1),xe=B("div",null," \u9009\u62E9\u7269\u8D44 ",-1),el={class:"nw-modal-action",style:{"text-align":"right"}};function ll(l,t,b,n,h,g){const c=i("nw-icon"),p=i("vxe-grid"),s=i("n-button"),m=i("n-modal");return z(),L(m,{class:"nw-modal",show:n.visible,"onUpdate:show":t[1]||(t[1]=u=>n.visible=u),preset:"dialog",style:{width:"600px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:a(()=>[Ze,e(c,{name:"icon-field",size:20,color:"rgb(103, 194, 58)"})]),header:a(()=>[xe]),default:a(()=>[e(p,ae({class:"nw-vxe-grid",ref:"gridFormRef"},n.gridOption),null,16),B("div",el,[e(s,{type:"info",size:"small",style:{"margin-right":"5px"},onClick:n.handleModalComplete},{default:a(()=>[I("\u786E\u5B9A")]),_:1},8,["onClick"]),e(s,{size:"small",onClick:t[0]||(t[0]=u=>n.visible=!1)},{default:a(()=>[I("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])}const tl=H(Qe,[["render",ll]]),al=oe({components:{NModal:K,NInput:A,NForm:ne,NFormItem:ue,NGrid:fe,NGridItem:ve,NTreeSelect:te,NSelect:ce,NButton:S,NSpin:j,NTag:ie,NImage:we,NText:ke,NP:Ce,NwDic:ye,NwIcon:$,NwIconPick:be,MenuPick:_e,NwPickPage:Oe,NSwitch:X,NInputNumber:qe,NDatePicker:Fe,ChooseDept:Pe,NDrawer:ge,NLayout:W,NLayoutSider:q,NLayoutContent:G,NSteps:Ge,NStep:Ve,NInputGroup:V,EmployeePickModal:Ue,materialsPick:tl},props:{},setup(l,t){const b=v(!1),n=v({}),h=v(),g=v(!1),c=v([]),p=de(),s=v(1),m=v(null),u=v(),r=v(),M=v(!1),C=()=>{r.value.show(d.value)},k=N=>{d.value=N,Z(()=>{var y;(y=u.value)==null||y.reloadData(d.value)})},U=(N={},y)=>{M.value=y!=1,s.value=y,b.value=!0,N.id&&He(N.id).then(w=>{var D,T,E,o;n.value={...w,materialsTypeCode:(D=w.materialsTypeCode)==null?void 0:D.split(","),materialsTypeName:(T=w.materialsTypeName)==null?void 0:T.split(","),procurementMethodName:(E=w.procurementMethodName)==null?void 0:E.split(","),procurementMethodCode:(o=w.procurementMethodCode)==null?void 0:o.split(",")},w.purchaseProductMixList.length>0&&(d.value=w.purchaseProductMixList,Z(()=>{var F;(F=u.value)==null||F.reloadData(d.value)})),w.purchaseProgressDetailList.length>0&&(n.value={...w.purchaseProgressDetailList[0],...n.value}),console.log(n.value,"modelRef.valuemodelRef.valuemodelRef.value")}),Ie.get("userInfo").then(w=>{n.value.deptName||(console.log(w,"\u7528\u6237\u4FE1\u606F"),n.value.deptName=w.parentDeptName,n.value.deptNameId=w.parentDeptId)}),n.value.itemTime||(n.value.itemTime=ze(new Date,"yyyy"))},d=v([]),f=N=>{n.value.valuecommodityItemName=d.value.filter(y=>y.value==N)[0].label,n.value.commodityItemUnit=d.value.filter(y=>y.value==N)[0].commodityItemUnit,n.value.sn=d.value.filter(y=>y.value==N)[0].sn},_=()=>{let N=[];if(n.value.projectLeader){let y=n.value.projectLeader.split(","),w=n.value.projectLeader.split(","),D=n.value.projectLeaderId.split(",");for(let T=0;T<y.length;T++)N.push({userNameCh:y[T],userName:w[T],id:D[T]});m.value.sonFn(N)}else m.value.sonFn(N)},R=N=>{n.value.projectLeader=N.map(y=>y.userNameCh).join(","),n.value.projectLeaderId=N.map(y=>y.id).join(",")},J=v({rowId:"rowId",rowKey:!1,keepSource:!1,height:"300px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,data:d.value,editConfig:{trigger:"click",mode:"cell",showStatus:!0,autoClear:!1},columns:[{title:"\u4EA7\u54C1\u6784\u6210",field:"productMix3",showOverflow:"title",minWidth:200},{title:"\u8D39\u7528\u6784\u6210",field:"expenditurePattern",showOverflow:"title",minWidth:200,editRender:{},slots:{default:"expenditurePattern_default",edit:"expenditurePattern_edit"}}]});De(()=>s.value,N=>{Z(()=>{var y;(y=u.value)==null||y.reloadData(d.value)})}),Y(()=>{});const Q=v({commodityItemName:{required:!0,trigger:["focus","input"],message:"\u8BF7\u9009\u62E9\u5927\u5B97\u5546\u54C1\u540D\u79F0"},commodityItemPrice:{required:!0,trigger:["focus","input"],message:"\u8BF7\u8F93\u5165\u5927\u5B97\u5546\u54C1\u4EF7\u683C"},sn:{required:!0,trigger:["focus","input"],type:"number",message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}});return{showModal:b,message:p,model:n,formRef:h,isLoading:g,current:s,rules:Q,sonFn:U,dzsply:d,employeePickRef:m,selectUser:_,getUsers:R,basicDisabled:M,dzsplyChangeEvent:f,detailVxeGrid:u,detailListGridOption:J,materialsPickRef:r,selectMaterials:C,setMaterials:k,getFormMessage(N,y){n.value.formId=y.id,n.value.formUrl=y.pageUrl,n.value.formTargetUrl=y.targetUrl},platformDictCodes:c,onPositiveClick(){var w,D,T,E,o;if(n.value.catalogUploadTime&&!((w=d.value)==null?void 0:w.every(O=>O.expenditurePattern>0))){p.warning("\u6E05\u5B8C\u5584\u8D39\u7528\u6784\u6210");return}const N=n.value.id?Te:Me;let y={...n.value,materialsTypeCode:(D=n.value.materialsTypeCode)==null?void 0:D.join(","),materialsTypeName:(T=n.value.materialsTypeName)==null?void 0:T.join(","),procurementMethodName:(E=n.value.procurementMethodName)==null?void 0:E.join(","),procurementMethodCode:(o=n.value.procurementMethodCode)==null?void 0:o.join(","),purchaseProductMixList:d.value,purchaseProgressDetailList:[{...n.value,id:null}]};h.value.validate(F=>{F||(g.value=!0,N(y).then(O=>{O&&(t.emit("update:callback"),b.value=!1)}).finally(O=>{g.value=!1}))})},onNegativeClick(){b.value=!1}}},methods:{}}),ol={style:{padding:"0 5px 5px 0"}};function nl(l,t,b,n,h,g){const c=i("n-step"),p=i("n-steps"),s=i("n-layout-sider"),m=i("n-date-picker"),u=i("n-form-item"),r=i("n-grid-item"),M=i("NwDic"),C=i("n-input"),k=i("ChooseDept"),U=i("n-input-number"),d=i("n-grid"),f=i("NwIcon"),_=i("n-button"),R=i("n-input-group"),J=i("vxe-grid"),Q=i("n-form"),N=i("n-layout-content"),y=i("n-layout"),w=i("n-spin"),D=i("n-modal"),T=i("EmployeePickModal"),E=i("materialsPick");return z(),he(Ne,null,[e(D,{show:l.showModal,"onUpdate:show":t[34]||(t[34]=o=>l.showModal=o),"mask-closable":!1,preset:"dialog",title:"\u5927\u5B97\u7269\u8D44\u539F\u6750\u6599\u4EF7\u683C\u65E5\u5E38\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"100%"},ref:"xmodal"},{action:a(()=>[B("div",ol,[e(_,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:t[33]||(t[33]=o=>l.showModal=!1)},{default:a(()=>[I("\u53D6\u6D88")]),_:1}),e(_,{size:"small",type:"info",onClick:l.onPositiveClick,disabled:l.btloading},{default:a(()=>[I("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:a(()=>[e(w,{show:l.isLoading},{default:a(()=>[e(y,{"has-sider":""},{default:a(()=>[e(s,{"content-style":"padding: 24px;"},{default:a(()=>[e(p,{vertical:"",current:l.current,"onUpdate:current":t[0]||(t[0]=o=>l.current=o)},{default:a(()=>[e(c,{title:"\u57FA\u672C\u4FE1\u606F",description:"\u586B\u5199\u57FA\u672C\u4FE1\u606F"}),e(c,{title:"\u516C\u544A\u4FE1\u606F",description:"\u586B\u5199\u516C\u544A\u4FE1\u606F"}),e(c,{title:"\u76F8\u5173\u65F6\u95F4",description:"\u586B\u5199\u76F8\u5173\u65F6\u95F4\u4FE1\u606F"})]),_:1},8,["current"])]),_:1}),e(N,{"content-style":"padding: 24px;"},{default:a(()=>[e(Q,{model:l.model,ref:"formRef",style:{height:"800px",overflow:"auto"},rules:l.rules},{default:a(()=>[l.current==1?(z(),L(d,{key:0,"x-gap":"8",cols:1},{default:a(()=>[e(r,null,{default:a(()=>[e(u,{label:"\u5E74\u4EFD",path:"itemTime"},{default:a(()=>[e(m,{style:{width:"100%"},disabled:l.basicDisabled,"formatted-value":l.model.itemTime,"onUpdate:formatted-value":t[1]||(t[1]=o=>l.model.itemTime=o),"value-format":"yyyy",type:"year"},null,8,["disabled","formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5927\u7C7B",path:"materialsTypeName"},{default:a(()=>[e(M,{disabled:l.basicDisabled,multiple:"",dictCode:"materials_type",placeholder:"\u8BF7\u9009\u62E9\u5927\u7C7B",value:l.model.materialsTypeCode,"onUpdate:value":t[2]||(t[2]=o=>l.model.materialsTypeCode=o),label:l.model.materialsTypeName,"onUpdate:label":t[3]||(t[3]=o=>l.model.materialsTypeName=o)},null,8,["disabled","value","label"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u9879\u76EE\u540D\u79F0",path:"projectName"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",disabled:l.basicDisabled,value:l.model.projectName,"onUpdate:value":t[4]||(t[4]=o=>l.model.projectName=o)},null,8,["disabled","value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u8981\u6C42\u5B8C\u6210\u65F6\u95F4",path:"finishTime"},{default:a(()=>[e(m,{style:{width:"100%"},disabled:l.basicDisabled,"formatted-value":l.model.finishTime,"onUpdate:formatted-value":t[5]||(t[5]=o=>l.model.finishTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["disabled","formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u7EC4\u957F\u5355\u4F4D",path:"unitName"},{default:a(()=>[e(k,{isShowSearch:!0,disabled:l.basicDisabled,orgUserName:l.model.unitName,value:l.model.unitId,"onUpdate:callback":t[6]||(t[6]=o=>{l.model.unitId=o.map(F=>F.id).join(","),l.model.unitName=o.map(F=>F.orgName).join(",")})},null,8,["disabled","orgUserName","value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u91C7\u8D2D\u65B9\u5F0F",path:"procurementMethodName"},{default:a(()=>[e(M,{disabled:l.basicDisabled,multiple:"",dictCode:"procurement_method",placeholder:"\u8BF7\u9009\u62E9\u91C7\u8D2D\u65B9\u5F0F",value:l.model.procurementMethodCode,"onUpdate:value":t[7]||(t[7]=o=>l.model.procurementMethodCode=o),label:l.model.procurementMethodName,"onUpdate:label":t[8]||(t[8]=o=>l.model.procurementMethodName=o)},null,8,["disabled","value","label"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u6D6E\u52A8\u8303\u56F4(%)",path:"floatRange"},{default:a(()=>[e(U,{style:{width:"100%"},disabled:l.basicDisabled,placeholder:"\u8BF7\u8F93\u5165\u6D6E\u52A8\u8303\u56F4",value:l.model.floatRange,"onUpdate:value":t[9]||(t[9]=o=>l.model.floatRange=o)},null,8,["disabled","value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u8C03\u4EF7\u673A\u5236",path:"pricingMechanism"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u8C03\u4EF7\u673A\u5236",disabled:l.basicDisabled,value:l.model.pricingMechanism,"onUpdate:value":t[10]||(t[10]=o=>l.model.pricingMechanism=o)},null,8,["disabled","value"])]),_:1})]),_:1})]),_:1})):x("",!0),l.current==2?(z(),L(d,{key:1,"x-gap":"8",cols:1},{default:a(()=>[e(r,null,{default:a(()=>[e(u,{label:"\u7ED3\u679C\u516C\u544A",path:"resultPublic"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u7ED3\u679C\u516C\u544A",value:l.model.resultPublic,"onUpdate:value":t[11]||(t[11]=o=>l.model.resultPublic=o)},null,8,["value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u4EF7\u683C\u8C03\u6574\u516C\u544A",path:"explanation"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u4EF7\u683C\u8C03\u6574\u516C\u544A",value:l.model.explanation,"onUpdate:value":t[12]||(t[12]=o=>l.model.explanation=o)},null,8,["value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5EF6\u671F\u516C\u544A",path:"postponePublic"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u5EF6\u671F\u516C\u544A",value:l.model.postponePublic,"onUpdate:value":t[13]||(t[13]=o=>l.model.postponePublic=o)},null,8,["value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5176\u4ED6\u4E8B\u9879",path:"others"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u5176\u4ED6\u4E8B\u9879",value:l.model.others,"onUpdate:value":t[14]||(t[14]=o=>l.model.others=o)},null,8,["value"])]),_:1})]),_:1})]),_:1})):x("",!0),l.current==3?(z(),L(d,{key:2,"x-gap":"8",cols:1},{default:a(()=>[e(r,null,{default:a(()=>[e(u,{label:"\u9879\u76EE\u8D1F\u8D23\u4EBA",path:"projectName"},{default:a(()=>[e(R,{onClick:t[16]||(t[16]=o=>l.selectUser())},{default:a(()=>[e(C,{value:l.model.projectLeader,"onUpdate:value":t[15]||(t[15]=o=>l.model.projectLeader=o),class:"selectedInput",disabled:""},null,8,["value"]),e(_,{ghost:""},{default:a(()=>[e(f,{name:"icon-n-n-add",size:"15",style:{color:"#828282",cursor:"pointer"}})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5F53\u524D\u8FDB\u5C55",path:"currentProgressName"},{default:a(()=>[e(M,{disabled:l.dataModelDisabled,dictCode:"current_progress",placeholder:"\u8BF7\u9009\u62E9\u5F53\u524D\u8FDB\u5C55",value:l.model.currentProgressCode,"onUpdate:value":t[17]||(t[17]=o=>l.model.currentProgressCode=o),label:l.model.currentProgressName,"onUpdate:label":t[18]||(t[18]=o=>l.model.currentProgressName=o)},null,8,["disabled","value","label"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u65B9\u6848\u63D0\u4EA4\u65F6\u95F4\uFF08\u4E00\u4F53\u5316\u5E73\u53F0\uFF09",path:"onePlatformSubmitTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.onePlatformSubmitTime,"onUpdate:formatted-value":t[19]||(t[19]=o=>l.model.onePlatformSubmitTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u65B9\u6848\u5BA1\u6279\u5B8C\u6210\u65F6\u95F4\uFF08\u4E00\u4F53\u5316\u5E73\u53F0\uFF09",path:"onePlatformFinishTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.onePlatformFinishTime,"onUpdate:formatted-value":t[20]||(t[20]=o=>l.model.onePlatformFinishTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u65B9\u6848\u63D0\u4EA4\u65F6\u95F4\uFF08\u62DB\u6807\u7BA1\u7406\u5E73\u53F0\uFF09",path:"inviteBidsSubmitTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.inviteBidsSubmitTime,"onUpdate:formatted-value":t[21]||(t[21]=o=>l.model.inviteBidsSubmitTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u65B9\u6848\u5BA1\u6279\u5B8C\u6210\u65F6\u95F4\uFF08\u62DB\u6807\u7BA1\u7406\u5E73\u53F0\uFF09",path:"inviteBidsFinishTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.inviteBidsFinishTime,"onUpdate:formatted-value":t[22]||(t[22]=o=>l.model.inviteBidsFinishTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u62DB\u6807\u6587\u4EF6\u786E\u8BA4\u65F6\u95F4",path:"inviteBidsConfirmTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.inviteBidsConfirmTime,"onUpdate:formatted-value":t[23]||(t[23]=o=>l.model.inviteBidsConfirmTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u62DB\u6807\u516C\u544A\u65F6\u95F4",path:"inviteBidsPublicTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.inviteBidsPublicTime,"onUpdate:formatted-value":t[24]||(t[24]=o=>l.model.inviteBidsPublicTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5F00\u6807\u65F6\u95F4",path:"tenderOpenTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.tenderOpenTime,"onUpdate:formatted-value":t[25]||(t[25]=o=>l.model.tenderOpenTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u62DB\u6807\u7ED3\u679C\u516C\u793A\u65F6\u95F4",path:"inviteBidsResultPublicTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.inviteBidsResultPublicTime,"onUpdate:formatted-value":t[26]||(t[26]=o=>l.model.inviteBidsResultPublicTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u62DB\u6807\u7ED3\u679C\u5B8C\u6210\u5BA1\u6279\u65F6\u95F4",path:"resultFinishTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.resultFinishTime,"onUpdate:formatted-value":t[27]||(t[27]=o=>l.model.resultFinishTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u8BC4\u5BA1\u62A5\u544A\u63D0\u4EA4\u65F6\u95F4\uFF08\u4E00\u4F53\u5316\u5E73\u53F0\uFF09",path:"assessSubmitTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.assessSubmitTime,"onUpdate:formatted-value":t[28]||(t[28]=o=>l.model.assessSubmitTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u8BC4\u5BA1\u62A5\u544A\u5BA1\u6279\u5B8C\u6210\u65F6\u95F4\uFF08\u4E00\u4F53\u5316\u5E73\u53F0\uFF09",path:"assessFinishTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.assessFinishTime,"onUpdate:formatted-value":t[29]||(t[29]=o=>l.model.assessFinishTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u7ED3\u679C\u516C\u544A\u65F6\u95F4",path:"resultPublicTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.resultPublicTime,"onUpdate:formatted-value":t[30]||(t[30]=o=>l.model.resultPublicTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u76EE\u5F55\u4E0A\u8F7D\u65F6\u95F4",path:"catalogUploadTime"},{default:a(()=>[e(m,{style:{width:"100%"},"formatted-value":l.model.catalogUploadTime,"onUpdate:formatted-value":t[31]||(t[31]=o=>l.model.catalogUploadTime=o),"value-format":"yyyy-MM-dd",type:"date"},null,8,["formatted-value"])]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u4EA7\u54C1\u6784\u6210"},{default:a(()=>[e(f,{name:"icon-n-n-add",onClick:l.selectMaterials,size:"15",style:{color:"#828282",cursor:"pointer",position:"absolute",top:"-22px",left:"62px","z-index":"99"}},null,8,["onClick"]),e(J,ae({ref:"detailVxeGrid"},l.detailListGridOption,{style:{width:"100%"}}),{expenditurePattern_default:a(({row:o,column:F})=>[B("span",null,Be(o.expenditurePattern),1)]),expenditurePattern_edit:a(({row:o,column:F})=>[e(U,{placeholder:"\u8BF7\u8F93\u5165\u5927\u5B97\u5546\u54C1\u4EF7\u683C",value:o.expenditurePattern,"onUpdate:value":O=>o.expenditurePattern=O},null,8,["value","onUpdate:value"])]),_:1},16)]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(u,{label:"\u5907\u6CE8",path:"explanation2"},{default:a(()=>[e(C,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",value:l.model.explanation2,"onUpdate:value":t[32]||(t[32]=o=>l.model.explanation2=o)},null,8,["value"])]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1},8,["show"])]),_:1},8,["show"]),e(T,{ref:"employeePickRef","onUpdate:callback":l.getUsers,multiple:!0},null,8,["onUpdate:callback"]),e(E,{ref:"materialsPickRef",onCallback:l.setMaterials},null,8,["onCallback"])],64)}const ul=H(al,[["render",nl]]),il=oe({components:{NModal:K,NInput:A,NForm:ne,NFormItem:ue,NGrid:fe,NGridItem:ve,NTreeSelect:te,NSelect:ce,NButton:S,NSpin:j,NTag:ie,NImage:we,NText:ke,NP:Ce,NwDic:ye,NwIcon:$,NwIconPick:be,MenuPick:_e,NwPickCpts:Le,NSwitch:X},props:{},setup(l,t){const b=v(!1),n=v({}),h=v(),g=v(!1),c=v([]),p=de(),s=(m={})=>{b.value=!0,n.value={...m}};return Y(()=>{}),{showModal:b,message:p,model:n,formRef:h,isLoading:g,sonFn:s,platformDictCodes:c,onPositiveClick(){const m=n.value.id?Te:Me;h.value.validate(u=>{u||(g.value=!0,m(n.value).then(r=>{r&&(t.emit("update:callback"),b.value=!1)}).finally(r=>{g.value=!1}))})},onNegativeClick(){b.value=!1}}},methods:{}}),dl={style:{padding:"0 5px 5px 0"}};function sl(l,t,b,n,h,g){const c=i("n-input"),p=i("n-form-item"),s=i("n-grid-item"),m=i("n-select"),u=i("nw-pick-cpts"),r=i("n-grid"),M=i("n-form"),C=i("n-spin"),k=i("n-button"),U=i("n-modal");return z(),L(U,{show:l.showModal,"onUpdate:show":t[12]||(t[12]=d=>l.showModal=d),"mask-closable":!1,preset:"dialog",title:"\u529F\u80FD\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:a(()=>[B("div",dl,[e(k,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:t[11]||(t[11]=d=>l.showModal=!1)},{default:a(()=>[I("\u53D6\u6D88")]),_:1}),e(k,{size:"small",type:"info",onClick:l.onPositiveClick,disabled:l.btloading},{default:a(()=>[I("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:a(()=>[e(C,{show:l.isLoading},{default:a(()=>[e(M,{model:l.model,ref:"formRef",rules:l.rules},{default:a(()=>[e(r,{"x-gap":"8",cols:2},{default:a(()=>[e(s,null,{default:a(()=>[e(p,{label:"\u6309\u94AE\u540D\u79F0",path:"menuName"},{default:a(()=>[e(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:l.model.menuName,"onUpdate:value":t[0]||(t[0]=d=>l.model.menuName=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u6309\u94AE\u7F16\u7801",path:"menuCode",disabled:""},{default:a(()=>[e(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:l.model.menuCode,"onUpdate:value":t[1]||(t[1]=d=>l.model.menuCode=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u6240\u5C5E\u83DC\u5355",path:"parentFullName"},{default:a(()=>[e(c,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:l.model.parentFullName,"onUpdate:value":t[2]||(t[2]=d=>l.model.parentFullName=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u9875\u9762\u540D\u79F0",path:"parentName"},{default:a(()=>[e(c,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:l.model.parentName,"onUpdate:value":t[3]||(t[3]=d=>l.model.parentName=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u8868\u5355\u6309\u94AEcode",path:"buttonCode"},{default:a(()=>[e(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:l.model.buttonCode,"onUpdate:value":t[4]||(t[4]=d=>l.model.buttonCode=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u6392\u5E8F",path:"sort"},{default:a(()=>[e(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:l.model.sort,"onUpdate:value":t[5]||(t[5]=d=>l.model.sort=d)},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u6309\u94AE\u7C7B\u578B",path:"buttonType"},{default:a(()=>[e(m,{value:l.model.buttonType,"onUpdate:value":t[6]||(t[6]=d=>l.model.buttonType=d),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"default",label:"default"},{value:"tertiary",label:"tertiary"},{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"error",label:"error"}]},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u6309\u94AE\u5C3A\u5BF8",path:"buttonSize"},{default:a(()=>[e(m,{value:l.model.buttonSize,"onUpdate:value":t[7]||(t[7]=d=>l.model.buttonSize=d),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8",options:[{value:"tiny",label:"tiny"},{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]},null,8,["value"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(p,{label:"\u5173\u8054\u529F\u80FD",path:"functionId"},{default:a(()=>[e(u,{fullName:l.model.functionName,"onUpdate:fullName":t[8]||(t[8]=d=>l.model.functionName=d),value:l.model.functionId,"onUpdate:value":t[9]||(t[9]=d=>l.model.functionId=d)},null,8,["fullName","value"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(p,{label:"\u63CF\u8FF0",path:"description"},{default:a(()=>[e(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:l.model.description,"onUpdate:value":t[10]||(t[10]=d=>l.model.description=d)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const rl=H(il,[["render",sl]]),ml=oe({components:{NLayout:W,NLayoutHeader:ee,NLayoutContent:G,NButton:S,NSpace:le,NwIcon:$,NTag:ie,NInput:A,NInputGroup:V,NDrawer:ge,SideTree:Je,NForm:ne,NFormItem:ue,NSpin:j,NDrawerContent:Re,ModalAction:ul,NPopconfirm:se,ButtonAction:rl,NLayoutSider:q,OrgTree:$e},setup(){const l=v([]),t=v(),b=v(),n=v(),h=v({}),g=de(),c=v(""),p=v("0"),s=v("root"),m=f=>{console.log(f,"row......."),p.value=f.id,s.value=f.orgName,r()},u=f=>{let _=f.id;We(_).then(R=>{g.success("\u5220\u9664\u6210\u529F"),r()})},r=()=>{d.loading=!0,re({deptId:p.value,searchName:M.value}).then(f=>{l.value=f.records,t.value.loadData(f.records),d.loading=!1})},M=()=>{t.value.commitProxy("query")},C=(f={},_=1)=>{b.value.sonFn(f,_)},k=(f={})=>{n.value.sonFn(f)},d=Ee({rowId:"id",size:"mini",border:!0,height:"auto",align:null,loading:!1,columns:[{type:"seq",width:50,minWidth:50,fixed:"left"},{field:"materialsTypeName",title:"\u5927\u7C7B",showHeaderOverflow:!0,minWidth:200,fixed:"left"},{field:"projectName",title:"\u540D\u79F0",showHeaderOverflow:!0,minWidth:200,fixed:"left"},{field:"itemTime",title:"\u5E74\u4EFD",showHeaderOverflow:!0,minWidth:200},{field:"finishTime",title:"\u8981\u6C42\u5B8C\u6210\u65F6\u95F4",showHeaderOverflow:!0,minWidth:200},{field:"unitName",title:"\u7EC4\u957F\u5355\u4F4D",showHeaderOverflow:!0,minWidth:200},{field:"procurementMethodName",title:"\u91C7\u8D2D\u65B9\u5F0F",showHeaderOverflow:!0,minWidth:200},{field:"floatRange",title:"\u6D6E\u52A8\u8303\u56F4",showHeaderOverflow:!0,minWidth:200},{field:"pricingMechanism",title:"\u8C03\u4EF7\u673A\u5236",showHeaderOverflow:!0,minWidth:200},{field:"resultPublic",title:"\u7ED3\u679C\u516C\u544A",showHeaderOverflow:!0,minWidth:200},{field:"explanation",title:"\u4EF7\u683C\u8C03\u6574\u516C\u544A",showHeaderOverflow:!0,minWidth:200},{field:"postponePublic",title:"\u5EF6\u671F\u516C\u544A",showHeaderOverflow:!0,minWidth:200},{field:"others",title:"\u5176\u4ED6\u4E8B\u9879",showHeaderOverflow:!0,minWidth:200},{field:"",title:"\u64CD\u4F5C",fixed:"right",showHeaderOverflow:!0,minWidth:200,width:"300px",slots:{default:({row:f})=>[P("div",null,P("a",{onClick:()=>C({...f},1),style:"color:#4098fc;cursor: pointer;display:inline-block;"},"\u4FEE\u6539\u57FA\u672C\u4FE1\u606F"),P("a",{onClick:()=>C({...f},3),style:"color:#4098fc;cursor: pointer;display:inline-block;margin-left:15px"},"\u4FEE\u6539\u65F6\u95F4\u4FE1\u606F"),P(se,{"onPositive-click":_=>{u(f)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>P("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px"},"\u5220\u9664"),default:()=>`\u662F\u5426\u5220\u9664\u9879\u76EE-${f.projectName}\uFF1F`}),P("a",{onClick:()=>k({menuType:2,...h.value,parentFullName:f.parentFullName+"/"+f.menuName,parentName:f.menuName,parentFullId:f.parentFullId+"/"+f.id,parentId:f.id}),style:`${f.menuType==1?"display:inline-block":"display:none"};color:#4098fc;cursor: pointer;margin-left:15px`},"\u5173\u8054\u529F\u80FD"))]}}],pagerConfig:{pageSize:20},columnConfig:{resizable:!0},proxyConfig:{form:!0,seq:!0,props:{result:"result",total:"total"},ajax:{query:({page:f})=>new Promise(_=>{re({pgtCustomName:c.value,page:{current:f.currentPage,size:f.pageSize}}).then(R=>{_({total:R.total,result:R.records})})})}}});return Y(()=>{}),{sideTreeCallback:m,gridOptions:d,rightDatas:l,tableRef:t,appMessage:h,buttonlAction:n,modalAction:b,showAction:C,showButtonAction:k,getRightData:r,handDel:u,searchName:M,pgtCustomName:c,deptId:p,deptName:s}}}),pl=B("span",null,null,-1);function fl(l,t,b,n,h,g){const c=i("n-space"),p=i("n-input"),s=i("n-form-item"),m=i("n-button"),u=i("n-form"),r=i("nw-icon"),M=i("n-layout-header"),C=i("vxe-grid"),k=i("n-layout-content"),U=i("n-layout"),d=i("ModalAction"),f=i("ButtonAction");return z(),he(Ne,null,[e(U,{class:"nw-layout-full"},{default:a(()=>[e(M,{class:"nw-layout-header"},{default:a(()=>[e(c,{size:5},{default:a(()=>[pl]),_:1}),e(c,{size:5,style:{padding:"0 5px",position:"absolute"}},{default:a(()=>[e(u,{ref:"formRef",inline:"","label-placement":"left","label-align":"right","label-width":120,model:l.SearchForm,style:{height:"30px"}},{default:a(()=>[e(s,{label:"\u5927\u5B97\u5546\u54C1\u540D\u79F0",path:"commodityItemName"},{default:a(()=>[e(p,{placeholder:"\u5927\u5B97\u5546\u54C1\u540D\u79F0",value:l.commodityItemName,"onUpdate:value":t[0]||(t[0]=_=>l.commodityItemName=_)},null,8,["value"])]),_:1}),e(s,null,{default:a(()=>[e(m,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:t[1]||(t[1]=()=>{l.searchName()})},{default:a(()=>[I(" \u67E5\u8BE2 ")]),_:1}),e(m,{type:"warning","attr-type":"button",onClick:t[2]||(t[2]=()=>{l.pgtCustomName="",l.tableRef.loadData(l.rightDatas)})},{default:a(()=>[I(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(c,{size:5,style:{padding:"0 5px"}},{default:a(()=>[e(m,{type:"primary",onClick:t[3]||(t[3]=_=>l.showAction([],1))},{icon:a(()=>[e(r,{name:"icon-n-y-add",size:14})]),default:a(()=>[I(" \u65B0\u5EFA ")]),_:1})]),_:1})]),_:1}),e(U,{"has-sider":"","content-style":"height: 100%"},{default:a(()=>[e(k,null,{default:a(()=>[e(C,ae(l.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1})]),_:1})]),_:1}),e(d,{ref:"modalAction","onUpdate:callback":t[4]||(t[4]=()=>{l.getRightData()})},null,512),e(f,{ref:"buttonlAction","onUpdate:callback":t[5]||(t[5]=()=>{l.getRightData()})},null,512)],64)}const vl=H(ml,[["render",fl]]);Se(vl).mount("#app");
