import{ae as I,al as j,am as X,ar as Y,aq as J,as as de,ao as K,k as D,at as z,au as R,G as U,ap as k,H as T,an as Q,av as re,r as p,a9 as $,B as C,_ as A,I as n,o as M,b as S,w as o,g as B,a as t,d as L,m as q,N as O,E as W,M as Z,a8 as x,h as ee,ag as E,aw as te,ax as le,ay as H,aa as me,e as F,az as pe,aA as fe,aB as G,aC as ce,c as ve,a6 as ge,F as _e,p as ye}from"./index.e51afe9d.js";import{N as oe,a as ne,M as ae,b as be,c as Ne,O as he}from"./index.9875855d.js";import{N as ue}from"./text.6614a830.js";import{N as Ce}from"./InputNumber.9cc11044.js";import"./Radio.95abfb5b.js";import"./FormItemGridItem.d78d7d10.js";function V(e){return I({url:"/supp/suppCommodityItem/page",method:"post",data:e})}function se(e){return I({url:"/supp/suppCommodityItem",method:"post",data:e})}function ie(e){return I({url:"/supp/suppCommodityItem",method:"put",data:e})}function we(e){return I({url:`/supp/suppCommodityItem/${e}`,method:"delete"})}function Fe(e){return I({url:"/main/mdmOrg/list",method:"post",data:e})}const ke={components:{NLayout:j,NLayoutHeader:X,NLayoutSider:Y,NLayoutContent:J,NLayoutFooter:de,NInputGroup:K,NInput:D,NSpin:z,NModal:R,NButton:U,NwIcon:k,NSwitch:T,NSpace:Q,NTree:re},props:{rootName:{type:String,default:""},multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(e,l){const f=p([]),u=p(!1),_=p(""),g=({option:a})=>C(C("div",null,C(k,{name:a.appType==2?a.appIcon:"icon-n-y-fenjifenlei",size:15}))),r=()=>{u.value=!0,Fe({isDefault:0,status:1}).then(a=>{f.value=a,u.value=!1})};return $(()=>{r()}),{props:e,renderPrefix:g,getTreeList:r,pattern:_,tIsLoading:u,treeData:f,nodeProps:({option:a})=>({onClick(){l.emit("callback",a)},onContextmenu(s){optionsRef.value=[a],showDropdownRef.value=!0,xRef.value=s.clientX,yRef.value=s.clientY,console.log(s.clientX,s.clientY),s.preventDefault()}})}}};const Ie={class:"questionHeader"};function De(e,l,f,u,_,g){const r=n("n-input"),a=n("n-tree"),s=n("n-spin"),c=n("n-space");return M(),S(c,{vertical:"",size:12},{default:o(()=>[B("div",Ie,[t(r,{placeholder:"\u641C\u7D22",style:{},value:u.pattern,"onUpdate:value":l[0]||(l[0]=v=>u.pattern=v)},null,8,["value"])]),t(s,{show:u.tIsLoading},{default:o(()=>[t(a,{data:u.treeData,"children-field":"children","label-field":"orgName","key-field":"id","render-prefix":u.renderPrefix,"block-line":"",pattern:u.pattern,"virtual-scroll":"",class:"treeH","node-props":u.nodeProps},null,8,["data","render-prefix","pattern","node-props"])]),_:1},8,["show"])]),_:1})}const ze=A(ke,[["render",De]]),Ue=L({components:{NModal:R,NInput:D,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:U,NSpin:z,NTag:E,NImage:oe,NText:ue,NP:ne,NwDic:te,NwIcon:k,NwIconPick:le,MenuPick:ae,NwPickPage:be,NSwitch:T,NInputNumber:Ce},props:{},setup(e,l){const f=p(!1),u=p({}),_=p(),g=p(!1),r=p([]),a=H(),s=(v={})=>{f.value=!0,u.value={...v},me.get("userInfo").then(m=>{u.value.deptName||(console.log(m,"\u7528\u6237\u4FE1\u606F"),u.value.deptName=m.parentDeptName,u.value.deptNameId=m.parentDeptId)})};$(()=>{});const c=p({commodityItemName:{required:!0,trigger:["focus","input"],message:"\u8BF7\u8F93\u5165\u5927\u5B97\u5546\u54C1\u540D\u79F0"},commodityItemUnit:{required:!0,trigger:["focus","input"],message:"\u8BF7\u8F93\u5165\u5546\u54C1\u8BA1\u91CF\u5355\u4F4D"},sn:{required:!0,trigger:["focus","input"],type:"number",message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}});return{showModal:f,message:a,model:u,formRef:_,isLoading:g,rules:c,sonFn:s,getFormMessage(v,m){u.value.formId=m.id,u.value.formUrl=m.pageUrl,u.value.formTargetUrl=m.targetUrl},platformDictCodes:r,onPositiveClick(){const v=u.value.id?ie:se;_.value.validate(m=>{m||(g.value=!0,v(u.value).then(b=>{b&&(l.emit("update:callback"),f.value=!1)}).finally(b=>{g.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),$e={style:{padding:"0 5px 5px 0"}};function Ae(e,l,f,u,_,g){const r=n("n-input"),a=n("n-form-item"),s=n("n-grid-item"),c=n("n-input-number"),v=n("n-grid"),m=n("n-form"),b=n("n-spin"),h=n("n-button"),N=n("n-modal");return M(),S(N,{show:e.showModal,"onUpdate:show":l[4]||(l[4]=y=>e.showModal=y),"mask-closable":!1,preset:"dialog",title:"\u5927\u5B97\u539F\u6750\u6599\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[B("div",$e,[t(h,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[3]||(l[3]=y=>e.showModal=!1)},{default:o(()=>[F("\u53D6\u6D88")]),_:1}),t(h,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:o(()=>[F("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[t(b,{show:e.isLoading},{default:o(()=>[t(m,{model:e.model,ref:"formRef",rules:e.rules},{default:o(()=>[t(v,{"x-gap":"8",cols:1},{default:o(()=>[t(s,null,{default:o(()=>[t(a,{label:"\u5927\u5B97\u5546\u54C1\u540D\u79F0",path:"commodityItemName"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.commodityItemName,"onUpdate:value":l[0]||(l[0]=y=>e.model.commodityItemName=y)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u5546\u54C1\u8BA1\u91CF\u5355\u4F4D",path:"commodityItemUnit"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.commodityItemUnit,"onUpdate:value":l[1]||(l[1]=y=>e.model.commodityItemUnit=y)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u5E8F\u53F7",path:"sn"},{default:o(()=>[t(c,{size:"small",style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",value:e.model.sn,"onUpdate:value":l[2]||(l[2]=y=>e.model.sn=y)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Me=A(Ue,[["render",Ae]]),Be=L({components:{NModal:R,NInput:D,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:U,NSpin:z,NTag:E,NImage:oe,NText:ue,NP:ne,NwDic:te,NwIcon:k,NwIconPick:le,MenuPick:ae,NwPickCpts:Ne,NSwitch:T},props:{},setup(e,l){const f=p(!1),u=p({}),_=p(),g=p(!1),r=p([]),a=H(),s=(c={})=>{f.value=!0,u.value={...c}};return $(()=>{}),{showModal:f,message:a,model:u,formRef:_,isLoading:g,sonFn:s,platformDictCodes:r,onPositiveClick(){const c=u.value.id?ie:se;_.value.validate(v=>{v||(g.value=!0,c(u.value).then(m=>{m&&(l.emit("update:callback"),f.value=!1)}).finally(m=>{g.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Pe={style:{padding:"0 5px 5px 0"}};function Re(e,l,f,u,_,g){const r=n("n-input"),a=n("n-form-item"),s=n("n-grid-item"),c=n("n-select"),v=n("nw-pick-cpts"),m=n("n-grid"),b=n("n-form"),h=n("n-spin"),N=n("n-button"),y=n("n-modal");return M(),S(y,{show:e.showModal,"onUpdate:show":l[12]||(l[12]=i=>e.showModal=i),"mask-closable":!1,preset:"dialog",title:"\u529F\u80FD\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[B("div",Pe,[t(N,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[11]||(l[11]=i=>e.showModal=!1)},{default:o(()=>[F("\u53D6\u6D88")]),_:1}),t(N,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:o(()=>[F("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[t(h,{show:e.isLoading},{default:o(()=>[t(b,{model:e.model,ref:"formRef",rules:e.rules},{default:o(()=>[t(m,{"x-gap":"8",cols:2},{default:o(()=>[t(s,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u540D\u79F0",path:"menuName"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuName,"onUpdate:value":l[0]||(l[0]=i=>e.model.menuName=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u7F16\u7801",path:"menuCode",disabled:""},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuCode,"onUpdate:value":l[1]||(l[1]=i=>e.model.menuCode=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u6240\u5C5E\u83DC\u5355",path:"parentFullName"},{default:o(()=>[t(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentFullName,"onUpdate:value":l[2]||(l[2]=i=>e.model.parentFullName=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u9875\u9762\u540D\u79F0",path:"parentName"},{default:o(()=>[t(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentName,"onUpdate:value":l[3]||(l[3]=i=>e.model.parentName=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u8868\u5355\u6309\u94AEcode",path:"buttonCode"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.buttonCode,"onUpdate:value":l[4]||(l[4]=i=>e.model.buttonCode=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u6392\u5E8F",path:"sort"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.sort,"onUpdate:value":l[5]||(l[5]=i=>e.model.sort=i)},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u7C7B\u578B",path:"buttonType"},{default:o(()=>[t(c,{value:e.model.buttonType,"onUpdate:value":l[6]||(l[6]=i=>e.model.buttonType=i),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"default",label:"default"},{value:"tertiary",label:"tertiary"},{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"error",label:"error"}]},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u6309\u94AE\u5C3A\u5BF8",path:"buttonSize"},{default:o(()=>[t(c,{value:e.model.buttonSize,"onUpdate:value":l[7]||(l[7]=i=>e.model.buttonSize=i),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8",options:[{value:"tiny",label:"tiny"},{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]},null,8,["value"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(a,{label:"\u5173\u8054\u529F\u80FD",path:"functionId"},{default:o(()=>[t(v,{fullName:e.model.functionName,"onUpdate:fullName":l[8]||(l[8]=i=>e.model.functionName=i),value:e.model.functionId,"onUpdate:value":l[9]||(l[9]=i=>e.model.functionId=i)},null,8,["fullName","value"])]),_:1})]),_:1}),t(s,{span:24},{default:o(()=>[t(a,{label:"\u63CF\u8FF0",path:"description"},{default:o(()=>[t(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:e.model.description,"onUpdate:value":l[10]||(l[10]=i=>e.model.description=i)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Te=A(Be,[["render",Re]]),Se=L({components:{NLayout:j,NLayoutHeader:X,NLayoutContent:J,NButton:U,NSpace:Q,NwIcon:k,NTag:E,NInput:D,NInputGroup:K,NDrawer:pe,SideTree:ze,NForm:q,NFormItem:O,NSpin:z,NDrawerContent:fe,ModalAction:Me,NPopconfirm:G,ButtonAction:Te,NLayoutSider:Y,OrgTree:he},setup(){const e=p([]),l=p(),f=p(),u=p(),_=p({}),g=H(),r=p(""),a=p("0"),s=p("root"),c=d=>{console.log(d,"row......."),a.value=d.id,s.value=d.orgName,m()},v=d=>{let w=d.id;we(w).then(P=>{g.success("\u5220\u9664\u6210\u529F"),m()})},m=()=>{i.loading=!0,V({deptId:a.value,searchName:b.value}).then(d=>{e.value=d.records,l.value.loadData(d.records),i.loading=!1})},b=()=>{l.value.commitProxy("query")},h=(d={})=>{f.value.sonFn(d)},N=(d={})=>{u.value.sonFn(d)},i=ce({rowId:"id",size:"mini",border:!0,height:"auto",align:null,loading:!1,columns:[{field:"commodityItemName",title:"\u7269\u8D44\u540D\u79F0",showHeaderOverflow:!0},{field:"commodityItemUnit",title:"\u8BA1\u91CF\u5355\u4F4D",showHeaderOverflow:!0},{field:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",showHeaderOverflow:!0},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"100px",slots:{default:({row:d})=>[C("div",null,C("a",{onClick:()=>d.menuType==2?N(d):h({...d}),style:"color:#4098fc;cursor: pointer;display:inline-block;"},"\u4FEE\u6539"),C(G,{"onPositive-click":w=>{v(d)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>C("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px"},"\u5220\u9664"),default:()=>`\u662F\u5426\u5220\u9664\u7269\u8D44${d.commodityItemName}\uFF1F`}),C("a",{onClick:()=>N({menuType:2,..._.value,parentFullName:d.parentFullName+"/"+d.menuName,parentName:d.menuName,parentFullId:d.parentFullId+"/"+d.id,parentId:d.id}),style:`${d.menuType==1?"display:inline-block":"display:none"};color:#4098fc;cursor: pointer;margin-left:15px`},"\u5173\u8054\u529F\u80FD"))]}}],pagerConfig:{pageSize:20},columnConfig:{resizable:!0},proxyConfig:{form:!0,seq:!0,props:{result:"result",total:"total"},ajax:{query:({page:d})=>new Promise(w=>{V({pgtCustomName:r.value,page:{current:d.currentPage,size:d.pageSize}}).then(P=>{w({total:P.total,result:P.records})})})}}});return $(()=>{}),{sideTreeCallback:c,gridOptions:i,rightDatas:e,tableRef:l,appMessage:_,buttonlAction:u,modalAction:f,showAction:h,showButtonAction:N,getRightData:m,handDel:v,searchName:b,pgtCustomName:r,deptId:a,deptName:s}}}),Le=B("span",null,null,-1);function qe(e,l,f,u,_,g){const r=n("n-space"),a=n("n-input"),s=n("n-form-item"),c=n("n-button"),v=n("n-form"),m=n("nw-icon"),b=n("n-layout-header"),h=n("vxe-grid"),N=n("n-layout-content"),y=n("n-layout"),i=n("ModalAction"),d=n("ButtonAction");return M(),ve(_e,null,[t(y,{class:"nw-layout-full"},{default:o(()=>[t(b,{class:"nw-layout-header"},{default:o(()=>[t(r,{size:5},{default:o(()=>[Le]),_:1}),t(r,{size:5,style:{padding:"0 5px",position:"absolute"}},{default:o(()=>[t(v,{ref:"formRef",inline:"","label-placement":"left","label-align":"right","label-width":120,model:e.SearchForm,style:{height:"30px"}},{default:o(()=>[t(s,{label:"\u7269\u8D44\u540D\u79F0",path:"commodityItemName"},{default:o(()=>[t(a,{placeholder:"\u7269\u8D44\u540D\u79F0",value:e.commodityItemName,"onUpdate:value":l[0]||(l[0]=w=>e.commodityItemName=w)},null,8,["value"])]),_:1}),t(s,null,{default:o(()=>[t(c,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:l[1]||(l[1]=()=>{e.searchName()})},{default:o(()=>[F(" \u67E5\u8BE2 ")]),_:1}),t(c,{type:"warning","attr-type":"button",onClick:l[2]||(l[2]=()=>{e.pgtCustomName="",e.tableRef.loadData(e.rightDatas)})},{default:o(()=>[F(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(r,{size:5,style:{padding:"0 5px"}},{default:o(()=>[t(c,{type:"primary",onClick:l[3]||(l[3]=w=>e.showAction({}))},{icon:o(()=>[t(m,{name:"icon-n-y-add",size:14})]),default:o(()=>[F(" \u65B0\u5EFA ")]),_:1})]),_:1})]),_:1}),t(y,{"has-sider":"","content-style":"height: 100%"},{default:o(()=>[t(N,null,{default:o(()=>[t(h,ge(e.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1})]),_:1})]),_:1}),t(i,{ref:"modalAction","onUpdate:callback":l[4]||(l[4]=()=>{e.getRightData()})},null,512),t(d,{ref:"buttonlAction","onUpdate:callback":l[5]||(l[5]=()=>{e.getRightData()})},null,512)],64)}const Oe=A(Se,[["render",qe]]);ye(Oe).mount("#app");
