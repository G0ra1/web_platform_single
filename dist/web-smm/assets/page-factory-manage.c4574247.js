import{ae as D,al as j,am as X,ar as Y,aq as J,as as re,ao as K,k as z,at as A,au as S,G as I,ap as C,H as T,an as Q,av as de,r as m,a9 as U,B as w,_ as $,I as o,o as M,b as B,w as a,g as P,a as t,d as L,m as q,N as O,E as W,M as Z,a8 as x,h as ee,ag as E,aw as te,ax as le,ay as H,aa as pe,e as k,az as me,aA as fe,aB as G,aC as ce,c as ve,a6 as ge,F as _e,p as be}from"./index.e51afe9d.js";import{N as ae,a as ne,M as oe,b as Ne,c as ye,O as he}from"./index.9875855d.js";import{N as se}from"./text.6614a830.js";import{N as we}from"./InputNumber.9cc11044.js";import"./Radio.95abfb5b.js";import"./FormItemGridItem.d78d7d10.js";function V(e){return D({url:"/smm/commonStation/page",method:"post",data:e})}function ue(e){return D({url:"/smm/commonStation",method:"post",data:e})}function ie(e){return D({url:"/smm/commonStation",method:"put",data:e})}function Fe(e){return D({url:`/smm/commonStation/${e}`,method:"delete"})}function ke(e){return D({url:"/main/mdmOrg/list",method:"post",data:e})}const Ce={components:{NLayout:j,NLayoutHeader:X,NLayoutSider:Y,NLayoutContent:J,NLayoutFooter:re,NInputGroup:K,NInput:z,NSpin:A,NModal:S,NButton:I,NwIcon:C,NSwitch:T,NSpace:Q,NTree:de},props:{rootName:{type:String,default:""},multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(e,l){const f=m([]),s=m(!1),b=m(""),_=({option:n})=>w(w("div",null,w(C,{name:n.appType==2?n.appIcon:"icon-n-y-fenjifenlei",size:15}))),d=()=>{s.value=!0,ke({isDefault:0,status:1}).then(n=>{f.value=n,s.value=!1})};return U(()=>{d()}),{props:e,renderPrefix:_,getTreeList:d,pattern:b,tIsLoading:s,treeData:f,nodeProps:({option:n})=>({onClick(){l.emit("callback",n)},onContextmenu(u){optionsRef.value=[n],showDropdownRef.value=!0,xRef.value=u.clientX,yRef.value=u.clientY,console.log(u.clientX,u.clientY),u.preventDefault()}})}}};const De={class:"questionHeader"};function ze(e,l,f,s,b,_){const d=o("n-input"),n=o("n-tree"),u=o("n-spin"),c=o("n-space");return M(),B(c,{vertical:"",size:12},{default:a(()=>[P("div",De,[t(d,{placeholder:"\u641C\u7D22",style:{},value:s.pattern,"onUpdate:value":l[0]||(l[0]=v=>s.pattern=v)},null,8,["value"])]),t(u,{show:s.tIsLoading},{default:a(()=>[t(n,{data:s.treeData,"children-field":"children","label-field":"orgName","key-field":"id","render-prefix":s.renderPrefix,"block-line":"",pattern:s.pattern,"virtual-scroll":"",class:"treeH","node-props":s.nodeProps},null,8,["data","render-prefix","pattern","node-props"])]),_:1},8,["show"])]),_:1})}const Ae=$(Ce,[["render",ze]]),Ie=L({components:{NModal:S,NInput:z,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:I,NSpin:A,NTag:E,NImage:ae,NText:se,NP:ne,NwDic:te,NwIcon:C,NwIconPick:le,MenuPick:oe,NwPickPage:Ne,NSwitch:T,NInputNumber:we},props:{},setup(e,l){const f=m(!1),s=m({}),b=m(),_=m(!1),d=m([]),n=H(),u=(v={})=>{f.value=!0,s.value={...v},pe.get("userInfo").then(p=>{s.value.deptName||(console.log(p,"\u7528\u6237\u4FE1\u606F"),s.value.deptName=p.parentDeptName,s.value.deptNameId=p.parentDeptId)})};U(()=>{});const c=m({stationName:{required:!0,trigger:["focus","input"],message:"\u8BF7\u8F93\u5165\u573A\u7AD9/\u533A\u57DF\u540D\u79F0"},sort:{required:!0,trigger:["focus","input"],type:"number",message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}});return{showModal:f,message:n,model:s,formRef:b,isLoading:_,rules:c,sonFn:u,getFormMessage(v,p){s.value.formId=p.id,s.value.formUrl=p.pageUrl,s.value.formTargetUrl=p.targetUrl},platformDictCodes:d,onPositiveClick(){const v=s.value.id?ie:ue;b.value.validate(p=>{p||(_.value=!0,v(s.value).then(N=>{N&&(l.emit("update:callback"),f.value=!1)}).finally(N=>{_.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Ue={style:{padding:"0 5px 5px 0"}};function $e(e,l,f,s,b,_){const d=o("n-input"),n=o("n-form-item"),u=o("n-grid-item"),c=o("n-input-number"),v=o("n-grid"),p=o("n-form"),N=o("n-spin"),h=o("n-button"),y=o("n-modal");return M(),B(y,{show:e.showModal,"onUpdate:show":l[5]||(l[5]=g=>e.showModal=g),"mask-closable":!1,preset:"dialog",title:"\u8D44\u6E90\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:a(()=>[P("div",Ue,[t(h,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[4]||(l[4]=g=>e.showModal=!1)},{default:a(()=>[k("\u53D6\u6D88")]),_:1}),t(h,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:a(()=>[k("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:a(()=>[t(N,{show:e.isLoading},{default:a(()=>[t(p,{model:e.model,ref:"formRef",rules:e.rules},{default:a(()=>[t(v,{"x-gap":"8",cols:2},{default:a(()=>[t(u,null,{default:a(()=>[t(n,{label:"\u573A\u7AD9/\u533A\u57DF\u540D\u79F0",path:"stationName"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.stationName,"onUpdate:value":l[0]||(l[0]=g=>e.model.stationName=g)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u5382\u522B",path:"deptName"},{default:a(()=>[t(d,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.deptName,"onUpdate:value":l[1]||(l[1]=g=>e.model.deptName=g)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6392\u5E8F",path:"sort"},{default:a(()=>[t(c,{size:"small",style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165",value:e.model.sort,"onUpdate:value":l[2]||(l[2]=g=>e.model.sort=g)},null,8,["value"])]),_:1})]),_:1}),t(u,{span:24},{default:a(()=>[t(n,{label:"\u63CF\u8FF0",path:"description"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:e.model.description,"onUpdate:value":l[3]||(l[3]=g=>e.model.description=g)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Me=$(Ie,[["render",$e]]),Pe=L({components:{NModal:S,NInput:z,NForm:q,NFormItem:O,NGrid:W,NGridItem:Z,NTreeSelect:x,NSelect:ee,NButton:I,NSpin:A,NTag:E,NImage:ae,NText:se,NP:ne,NwDic:te,NwIcon:C,NwIconPick:le,MenuPick:oe,NwPickCpts:ye,NSwitch:T},props:{},setup(e,l){const f=m(!1),s=m({}),b=m(),_=m(!1),d=m([]),n=H(),u=(c={})=>{f.value=!0,s.value={...c}};return U(()=>{}),{showModal:f,message:n,model:s,formRef:b,isLoading:_,sonFn:u,platformDictCodes:d,onPositiveClick(){const c=s.value.id?ie:ue;b.value.validate(v=>{v||(_.value=!0,c(s.value).then(p=>{p&&(l.emit("update:callback"),f.value=!1)}).finally(p=>{_.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Re={style:{padding:"0 5px 5px 0"}};function Se(e,l,f,s,b,_){const d=o("n-input"),n=o("n-form-item"),u=o("n-grid-item"),c=o("n-select"),v=o("nw-pick-cpts"),p=o("n-grid"),N=o("n-form"),h=o("n-spin"),y=o("n-button"),g=o("n-modal");return M(),B(g,{show:e.showModal,"onUpdate:show":l[12]||(l[12]=i=>e.showModal=i),"mask-closable":!1,preset:"dialog",title:"\u529F\u80FD\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:a(()=>[P("div",Re,[t(y,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[11]||(l[11]=i=>e.showModal=!1)},{default:a(()=>[k("\u53D6\u6D88")]),_:1}),t(y,{size:"small",type:"info",onClick:e.onPositiveClick,disabled:e.btloading},{default:a(()=>[k("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:a(()=>[t(h,{show:e.isLoading},{default:a(()=>[t(N,{model:e.model,ref:"formRef",rules:e.rules},{default:a(()=>[t(p,{"x-gap":"8",cols:2},{default:a(()=>[t(u,null,{default:a(()=>[t(n,{label:"\u6309\u94AE\u540D\u79F0",path:"menuName"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuName,"onUpdate:value":l[0]||(l[0]=i=>e.model.menuName=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6309\u94AE\u7F16\u7801",path:"menuCode",disabled:""},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.menuCode,"onUpdate:value":l[1]||(l[1]=i=>e.model.menuCode=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6240\u5C5E\u83DC\u5355",path:"parentFullName"},{default:a(()=>[t(d,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentFullName,"onUpdate:value":l[2]||(l[2]=i=>e.model.parentFullName=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u9875\u9762\u540D\u79F0",path:"parentName"},{default:a(()=>[t(d,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:e.model.parentName,"onUpdate:value":l[3]||(l[3]=i=>e.model.parentName=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u8868\u5355\u6309\u94AEcode",path:"buttonCode"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.buttonCode,"onUpdate:value":l[4]||(l[4]=i=>e.model.buttonCode=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6392\u5E8F",path:"sort"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:e.model.sort,"onUpdate:value":l[5]||(l[5]=i=>e.model.sort=i)},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6309\u94AE\u7C7B\u578B",path:"buttonType"},{default:a(()=>[t(c,{value:e.model.buttonType,"onUpdate:value":l[6]||(l[6]=i=>e.model.buttonType=i),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"default",label:"default"},{value:"tertiary",label:"tertiary"},{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"error",label:"error"}]},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u6309\u94AE\u5C3A\u5BF8",path:"buttonSize"},{default:a(()=>[t(c,{value:e.model.buttonSize,"onUpdate:value":l[7]||(l[7]=i=>e.model.buttonSize=i),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8",options:[{value:"tiny",label:"tiny"},{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]},null,8,["value"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(n,{label:"\u5173\u8054\u529F\u80FD",path:"functionId"},{default:a(()=>[t(v,{fullName:e.model.functionName,"onUpdate:fullName":l[8]||(l[8]=i=>e.model.functionName=i),value:e.model.functionId,"onUpdate:value":l[9]||(l[9]=i=>e.model.functionId=i)},null,8,["fullName","value"])]),_:1})]),_:1}),t(u,{span:24},{default:a(()=>[t(n,{label:"\u63CF\u8FF0",path:"description"},{default:a(()=>[t(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:e.model.description,"onUpdate:value":l[10]||(l[10]=i=>e.model.description=i)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Te=$(Pe,[["render",Se]]),Be=L({components:{NLayout:j,NLayoutHeader:X,NLayoutContent:J,NButton:I,NSpace:Q,NwIcon:C,NTag:E,NInput:z,NInputGroup:K,NDrawer:me,SideTree:Ae,NForm:q,NFormItem:O,NSpin:A,NDrawerContent:fe,ModalAction:Me,NPopconfirm:G,ButtonAction:Te,NLayoutSider:Y,OrgTree:he},setup(){const e=m([]),l=m(),f=m(),s=m(),b=m({}),_=H(),d=m(""),n=m("0"),u=m("root"),c=r=>{console.log(r,"row......."),n.value=r.id,u.value=r.orgName,p()},v=r=>{let F=r.id;Fe(F).then(R=>{_.success("\u5220\u9664\u6210\u529F"),p()})},p=()=>{i.loading=!0,V({deptId:n.value}).then(r=>{e.value=r.records,l.value.loadData(r.records),i.loading=!1})},N=()=>{l.value.commitProxy("query")},h=(r={})=>{f.value.sonFn(r)},y=(r={})=>{s.value.sonFn(r)},i=ce({rowId:"id",size:"mini",border:!0,height:"auto",align:null,loading:!1,columns:[{field:"stationName",title:"\u573A\u7AD9/\u533A\u57DF\u540D\u79F0",showHeaderOverflow:!0},{field:"stationCode",title:"\u573A\u7AD9/\u533A\u57DF\u7F16\u7801",showHeaderOverflow:!0},{field:"deptName",title:"\u90E8\u95E8\u540D\u79F0",showHeaderOverflow:!0},{field:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",showHeaderOverflow:!0},{field:"description",title:"\u63CF\u8FF0",showHeaderOverflow:!0},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"100px",slots:{default:({row:r})=>[w("div",null,w("a",{onClick:()=>r.menuType==2?y(r):h({...r}),style:"color:#4098fc;cursor: pointer;display:inline-block;"},"\u4FEE\u6539"),w(G,{"onPositive-click":F=>{v(r)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>w("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px"},"\u5220\u9664"),default:()=>`\u662F\u5426\u5220\u9664\u5BA2\u6237${r.customName}\uFF1F`}),w("a",{onClick:()=>y({menuType:2,...b.value,parentFullName:r.parentFullName+"/"+r.menuName,parentName:r.menuName,parentFullId:r.parentFullId+"/"+r.id,parentId:r.id}),style:`${r.menuType==1?"display:inline-block":"display:none"};color:#4098fc;cursor: pointer;margin-left:15px`},"\u5173\u8054\u529F\u80FD"))]}}],pagerConfig:{pageSize:20},columnConfig:{resizable:!0},proxyConfig:{form:!0,seq:!0,props:{result:"result",total:"total"},ajax:{query:({page:r})=>new Promise(F=>{V({stationName:d.value,page:{current:r.currentPage,size:r.pageSize}}).then(R=>{F({total:R.total,result:R.records})})})}}});return U(()=>{}),{sideTreeCallback:c,gridOptions:i,rightDatas:e,tableRef:l,appMessage:b,buttonlAction:s,modalAction:f,showAction:h,showButtonAction:y,getRightData:p,handDel:v,searchName:N,stationName:d,deptId:n,deptName:u}}}),Le=P("span",null,null,-1);function qe(e,l,f,s,b,_){const d=o("n-space"),n=o("n-input"),u=o("n-form-item"),c=o("n-button"),v=o("n-form"),p=o("nw-icon"),N=o("n-layout-header"),h=o("vxe-grid"),y=o("n-layout-content"),g=o("n-layout"),i=o("ModalAction"),r=o("ButtonAction");return M(),ve(_e,null,[t(g,{class:"nw-layout-full"},{default:a(()=>[t(N,{class:"nw-layout-header"},{default:a(()=>[t(d,{size:5},{default:a(()=>[Le]),_:1}),t(d,{size:5,style:{padding:"0 5px",position:"absolute"}},{default:a(()=>[t(v,{ref:"formRef",inline:"","label-placement":"left","label-align":"right","label-width":120,model:e.SearchForm,style:{height:"30px"}},{default:a(()=>[t(u,{label:"\u573A\u7AD9/\u533A\u57DF\u540D\u79F0",path:"stationName"},{default:a(()=>[t(n,{placeholder:"\u573A\u7AD9/\u533A\u57DF\u540D\u79F0",value:e.stationName,"onUpdate:value":l[0]||(l[0]=F=>e.stationName=F)},null,8,["value"])]),_:1}),t(u,null,{default:a(()=>[t(c,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:l[1]||(l[1]=()=>{e.searchName()})},{default:a(()=>[k(" \u67E5\u8BE2 ")]),_:1}),t(c,{type:"warning","attr-type":"button",onClick:l[2]||(l[2]=()=>{e.stationName="",e.tableRef.loadData(e.rightDatas)})},{default:a(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(d,{size:5,style:{padding:"0 5px"}},{default:a(()=>[t(c,{type:"primary",onClick:l[3]||(l[3]=F=>e.showAction({}))},{icon:a(()=>[t(p,{name:"icon-n-y-add",size:14})]),default:a(()=>[k(" \u65B0\u5EFA ")]),_:1})]),_:1})]),_:1}),t(g,{"has-sider":"","content-style":"height: 100%"},{default:a(()=>[t(y,null,{default:a(()=>[t(h,ge(e.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1})]),_:1})]),_:1}),t(i,{ref:"modalAction","onUpdate:callback":l[4]||(l[4]=()=>{e.getRightData()})},null,512),t(r,{ref:"buttonlAction","onUpdate:callback":l[5]||(l[5]=()=>{e.getRightData()})},null,512)],64)}const Oe=$(Be,[["render",qe]]);be(Oe).mount("#app");
