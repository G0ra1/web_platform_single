import{aY as B,ax as T,ay as L,aq as P,ar as E,aA as R,as as q,aZ as H,b2 as M,f as m,aw as A,e as U,am as V,a as j,b as G,at as J,ak as K,i as Y,aI as Z,b3 as Q,b4 as W,b5 as y,b6 as v,b7 as C,b8 as X,b9 as $,ba as ee,bb as te,bc as ae,_ as oe}from"./index.0e7eb3bd.js";import{D as ne,S as le,a as se,t as ie}from"./index.64b6020f.js";import{r as b,j as re,k as w,a as o,o as de,g as ce,h as i,b as t,w as a,f as N,t as ue,K as fe,F as pe}from"./runtime-dom.esm-bundler.bf4f36cb.js";const _e={components:{NConfigProvider:B,NDrawer:T,NDrawerContent:L,NLayout:P,NLayoutHeader:E,NLayoutSider:R,NLayoutContent:q,NLayoutFooter:H,NThemeEditor:M,NButton:m,NInputGroup:A,NInput:U,NSpin:V,NForm:j,NFormItem:G,NPopconfirm:J,NModal:K,NwIcon:Y,Detail:ne,SideTree:le,Search:se,NwAppTreeGrid:Z},props:{value:{type:String,default:""},text:{type:String,default:""},disabled:{type:Boolean,default:!1},bizType:{type:String,default:""},size:{type:String,default:"medium"},label:{type:String,default:"\u9009\u62E9"}},emits:["callback"],setup(c,s){const r=b(!1),e=b(!1),u=b(null),f=()=>{C(),e.value=!1},d=re({rowId:"id",size:"mini",border:!1,resizable:!0,height:"auto",align:null,columns:[{field:"mthPath",title:"\u8BF7\u6C42URL",showHeaderOverflow:!0},{field:"mthMethod",title:"\u8BF7\u6C42Method",showHeaderOverflow:!0,width:"105px"},{field:"mthDescription",title:"\u63A5\u53E3\u63CF\u8FF0",showHeaderOverflow:!0},{field:"ctlName",title:"\u6240\u5C5E\u7C7B",showHeaderOverflow:!0},{field:"status",title:"\u72B6\u6001",showOverflow:!0,width:"45px",slots:{default:({row:n})=>[w("span",null,n.onOff=="on"?"\u542F\u7528":"\u7981\u7528")]}},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"120px",slots:{default:({row:n})=>[w(m,{text:!0,size:"small",type:"info",style:"margin-right: 10px;",onClick:()=>{console.log("gridContent",u),X(n.id)}},{default:()=>"\u67E5\u770B"}),w(m,{size:"small",type:"info",loading:!1,onClick:()=>{r.value=!0,$(n.id).then(l=>{ee.resolveRefs(JSON.parse(l.content)).then(p=>{s.emit("callback",l,p)}),f()}).finally(()=>{r.value=!1})}},{default:()=>"\u9009\u62E9"})]}}],pagerConfig:{pageSize:20,pageSizes:[10,20,50]},proxyConfig:{props:{total:"total"},ajax:{query:({page:n})=>te({...ae.value,...v.value,bizType:c.bizType,page:{current:n.currentPage,size:n.pageSize}}).then(async l=>(console.log("=====dd=====",l),{result:l.records,total:l.total}))}}});return{props:c,isLoading:r,visible:e,gridContent:u,InterfaceDetail:Q,theme:ie,gridOptions:d,pageRef:W,tableRef:y,sideTreeCallback(n){v.value={sysCode:n.appCode},y.value.commitProxy("query"),C()},handleModal(){e.value=!0},handleCancel:f}}},he={class:"value-input",style:{display:"flex","align-items":"center"}},me=i("div",{class:"iconfont icon-bpmn-ditu"},null,-1),be=i("div",null," \u9009\u62E9OpenAPI\u63A5\u53E3 ",-1),we=i("div",{class:"nw-table-header-left"},null,-1),ge={class:"nw-table-header-right"},ye={class:"nw-modal-action"};function ve(c,s,r,e,u,f){const d=o("n-button"),n=o("nw-icon"),l=o("Search"),p=o("n-layout-header"),x=o("nw-app-tree-grid"),S=o("n-layout-sider"),k=o("vxe-grid"),g=o("n-layout-content"),_=o("n-layout"),z=o("n-spin"),D=o("Detail"),F=o("n-drawer-content"),I=o("n-drawer"),O=o("n-modal");return de(),ce(pe,null,[i("div",he,[t(d,{disabled:e.props.disabled,size:e.props.size,type:"info",onClick:e.handleModal,style:{"margin-left":"4px"}},{default:a(()=>[N(ue(e.props.label),1)]),_:1},8,["disabled","size","onClick"])]),t(O,{class:"nw-modal",show:e.visible,"onUpdate:show":s[1]||(s[1]=h=>e.visible=h),preset:"dialog",style:{width:"1000px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:a(()=>[me,t(n,{name:"icon-request",size:20,color:"rgb(103, 194, 58)"})]),header:a(()=>[be]),default:a(()=>[t(z,{show:e.isLoading},{default:a(()=>[t(_,{class:"nw-page",style:{height:"600px","padding-top":"5px"},ref:"pageRef"},{default:a(()=>[t(g,{style:{height:"100%"}},{default:a(()=>[t(_,{class:"nw-layout-full",ref:"tbody"},{default:a(()=>[t(p,{class:"nw-table-header"},{default:a(()=>[we,i("div",ge,[t(l)])]),_:1}),t(_,{"has-sider":"",class:"nw-table-content"},{default:a(()=>[t(S,{width:"250"},{default:a(()=>[t(x,{rootName:"\u5168\u90E8",onCallback:e.sideTreeCallback},null,8,["onCallback"])]),_:1}),t(g,{ref:"gridContent"},{default:a(()=>[t(k,fe(e.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1},512)]),_:1})]),_:1},512)]),_:1})]),_:1},512)]),_:1},8,["show"]),t(I,{show:e.InterfaceDetail.visible,"onUpdate:show":s[0]||(s[0]=h=>e.InterfaceDetail.visible=h),placement:"right",width:"100%","trap-focus":!1,"block-scroll":!1,to:e.gridContent&&e.gridContent.$el},{default:a(()=>[t(F,null,{default:a(()=>[t(D)]),_:1})]),_:1},8,["show","to"]),i("div",ye,[t(d,{size:"small",onClick:e.handleCancel},{default:a(()=>[N("\u53D6\u6D88")]),_:1},8,["onClick"])])]),_:1},8,["show"])],64)}const Se=oe(_e,[["render",ve]]);export{Se as N};
