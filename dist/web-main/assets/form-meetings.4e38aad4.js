var v=Object.defineProperty;var D=(t,e,u)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u;var n=(t,e,u)=>(D(t,typeof e!="symbol"?e+"":e,u),u);import{r as c,d as x,k as h,a as m,o as F,g as C,b as o,w as r,K as w,f as _,F as y}from"./runtime-dom.esm-bundler.bf4f36cb.js";import{l as E,a as N,b as M,c as R,e as L,f as B,_ as k,m as z}from"./index.0e7eb3bd.js";import{A as T}from"./index.3c25c870.js";import{N as I}from"./FormItemGridItem.5c201774.js";import{N as S}from"./InputNumber.39ec7792.js";import"./Add.f7b12907.js";const $={sumBudgetExecuteAmount:{name:"sumBudgetExecuteAmount",type:"number",description:"\u9884\u7B97\u6267\u884C\u91D1\u989D",example:"",exampleSetFlag:!0},sumDeductionTaxAmount:{name:"sumDeductionTaxAmount",type:"number",description:"\u62B5\u6263\u8FDB\u9879\u7A0E",example:"",exampleSetFlag:!0},sumDeductionAmount:{name:"sumDeductionAmount",type:"number",description:"\u6263\u51CF\u91D1\u989D",example:"",exampleSetFlag:!0},testprocBudgetinfoList:{name:"testprocBudgetinfoList",type:"array",description:"testprocBudgetinfoList",items:{name:"\u62A5\u9500\u9884\u7B97\u4FE1\u606F Dto",title:"\u62A5\u9500\u9884\u7B97\u4FE1\u606F Dto",type:"object",properties:{expenseName:{name:"expenseName",type:"string",description:"\u62A5\u9500\u540D\u79F0"},expenseBizKey:{name:"expenseBizKey",type:"string",description:"\u62A5\u9500\u540D\u79F0"},budgetAmount:{name:"budgetAmount",type:"number",description:"\u9884\u7B97\u6570"}}}}};class V extends T{constructor(){super();n(this,"formRef",c());n(this,"dataModel",c({}));n(this,"rules",c({}));n(this,"brules",c({}));n(this,"getSchema",async()=>$);n(this,"setValue",u=>{this.dataModel.value=u});n(this,"getValue",async()=>E.exports.cloneDeep(this.dataModel.value));n(this,"setRules",u=>{this.rules.value={},Object.entries(u).forEach(([a,s])=>{a.includes(".")||(s.powerCode==="required"?this.rules.value[a]={required:!0,trigger:["blur","input"],message:`${s.nameCh}\u8BE5\u5C5E\u6027\u4E3A\u5FC5\u586B`}:this.brules.value[a]=s.powerCode)})});n(this,"validate",async()=>{var a;let u=[];return await((a=this.formRef.value)==null?void 0:a.validate().then(()=>{u=[]}).catch(s=>{u=s.map(f=>f[0].message)})),u})}}const K=x({components:{NForm:N,NFormItem:M,NGrid:R,NFormItemGi:I,NInput:L,NInputNumber:S,NButton:B},setup(){const{formRef:t,dataModel:e,rules:u,brules:a,setValue:s,getValue:f,validate:i,setRules:d}=new V;return d({sumBudgetExecuteAmount:{powerCode:"required",nameCh:"\u6D4B\u8BD5"}}),{formRef:t,dataModel:e,rules:u,brules:a,validate:i,testshow:()=>{f().then(l=>{}),i().then(l=>{})},gridOption:c({rowId:"id",rowKey:!1,keepSource:!0,size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,data:e.value.testprocBudgetinfoList,toolbarConfig:{slots:{buttons:({$grid:l})=>[h(B,{type:"primary",onClick:function(){e.value.testprocBudgetinfoList||(e.value.testprocBudgetinfoList=[]),e.value.testprocBudgetinfoList.push({id:`${new Date().getTime()}`}),l.reloadData(e.value.testprocBudgetinfoList)}},{default:()=>"\u65B0\u589E"})]}},editConfig:{trigger:"click",mode:"row",showStatus:!0},columns:[{title:"\u62A5\u9500\u7C7B\u578B",field:"expenseType",showOverflow:"title",minWidth:200,editRender:{name:"$select",options:[{label:"\u7C7B\u578B1",value:1},{label:"\u7C7B\u578B2",value:2}],attrs:{placeholder:"\u62A5\u9500\u7C7B\u578B"}}},{title:"\u62A5\u9500\u540D\u79F0",field:"expenseName",minWidth:190,editRender:{name:"input",attrs:{placeholder:"\u62A5\u9500\u540D\u79F0"}}},{title:"\u62A5\u9500\u5355\u53F7",field:"expenseBizKey",minWidth:150,editRender:{name:"input",attrs:{placeholder:"\u62A5\u9500\u5355\u53F7"}}},{title:"\u9884\u7B97\u6570",field:"budgetAmount",minWidth:150,editRender:{name:"input",attrs:{placeholder:"\u62A5\u9500\u5355\u53F7"}}},{title:"\u64CD\u4F5C",width:70,fixed:"right",slots:{default:({$table:l,rowIndex:g})=>[h(B,{size:"small",type:"error",onClick:function(){e.value.testprocBudgetinfoList.splice(g,1),l.reloadData(e.value.testprocBudgetinfoList)}},{default:()=>"\u5220\u9664"})]}}]})}}});function O(t,e,u,a,s,f){const i=m("n-input-number"),d=m("n-form-item-gi"),l=m("vxe-grid"),g=m("n-grid"),A=m("n-form"),b=m("n-button");return F(),C(y,null,[o(A,{model:t.dataModel,rules:t.rules,ref:"formRef","label-placement":"left","label-width":160,size:"small",style:{padding:"45px"}},{default:r(()=>[o(g,{cols:24,"x-gap":24},{default:r(()=>[o(d,{span:12,label:"\u9884\u7B97\u6267\u884C\u91D1\u989D",path:"sumBudgetExecuteAmount"},{default:r(()=>[o(i,{placeholder:"Input",value:t.dataModel.sumBudgetExecuteAmount,"onUpdate:value":e[0]||(e[0]=p=>t.dataModel.sumBudgetExecuteAmount=p)},null,8,["value"])]),_:1}),o(d,{span:12,label:"\u62B5\u6263\u8FDB\u9879\u7A0E",path:"sumDeductionTaxAmount"},{default:r(()=>[o(i,{placeholder:"Input",value:t.dataModel.sumDeductionTaxAmount,"onUpdate:value":e[1]||(e[1]=p=>t.dataModel.sumDeductionTaxAmount=p)},null,8,["value"])]),_:1}),o(d,{span:12,label:"\u6263\u51CF\u91D1\u989D",path:"sumDeductionAmount"},{default:r(()=>[o(i,{placeholder:"Input",value:t.dataModel.sumDeductionAmount,"onUpdate:value":e[2]||(e[2]=p=>t.dataModel.sumDeductionAmount=p)},null,8,["value"])]),_:1}),o(d,{span:24,label:"\u9884\u7B97"},{default:r(()=>[o(l,w(t.gridOption,{style:{"moz-user-select":"-moz-none","-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}}),null,16)]),_:1})]),_:1})]),_:1},8,["model","rules"]),o(b,{onClick:t.testshow},{default:r(()=>[_("Test")]),_:1},8,["onClick"])],64)}const W=k(K,[["render",O]]);z(W).mount("#app");
