var lt=Object.defineProperty;var rt=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var k=(e,t,n)=>(rt(e,typeof t!="symbol"?t+"":t,n),n);import{d as H,r as T,a as f,o as X,c as le,w as o,b as a,f as y,h as B,_ as st,$ as it,p as Ue,t as j,H as Pe,D as Re,u as ut,k as G,g as pt,K as dt,F as ct}from"./runtime-dom.esm-bundler.bf4f36cb.js";import{eH as Ge,eI as ft,eJ as mt,aq as Y,f as L,N as W,i as K,an as V,e as Z,aw as Q,k as re,ax as ee,ay as te,a as se,b as ie,c as ue,aJ as pe,aK as de,_ as ae,aH as _e,am as Je,aL as Se,l as ze,as as Oe,aA as ht,ar as gt,aI as vt,aC as _t,aB as yt,aE as wt,aF as bt,m as Dt}from"./index.0e7eb3bd.js";import{N as ce}from"./index.8affa40d.js";import{N as fe}from"./FormItemGridItem.5c201774.js";import{N as ye}from"./InputGroupLabel.f8867056.js";import{N as Fe}from"./index.f553f930.js";import{m as kt}from"./max.09297b96.js";import{h as qe}from"./index.9cc9edd5.js";import"./index.64b6020f.js";function U(e){return typeof e=="string"?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],ft)}function Ct(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ae(e,t){if(e=Ct(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var d=t.getBoundingClientRect();return[e.clientX-d.left-t.clientLeft,e.clientY-d.top-t.clientTop]}}return[e.pageX,e.pageY]}const Tt={passive:!1},oe={capture:!0,passive:!1};function Ce(e){e.stopImmediatePropagation()}function q(e){e.preventDefault(),e.stopImmediatePropagation()}function $t(e){var t=e.document.documentElement,n=U(e).on("dragstart.drag",q,oe);"onselectstart"in t?n.on("selectstart.drag",q,oe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nt(e,t){var n=e.document.documentElement,r=U(e).on("dragstart.drag",null);t&&(r.on("click.drag",q,oe),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const he=e=>()=>e;function Te(e,{sourceEvent:t,subject:n,target:r,identifier:d,active:m,x:p,y:s,dx:l,dy:c,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:d,enumerable:!0,configurable:!0},active:{value:m,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:g}})}Te.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xt(e){return!e.ctrlKey&&!e.button}function Ut(){return this.parentNode}function St(e,t){return t==null?{x:e.x,y:e.y}:t}function Ft(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mt(){var e=xt,t=Ut,n=St,r=Ft,d={},m=mt("start","drag","end"),p=0,s,l,c,g,h=0;function u(i){i.on("mousedown.drag",v).filter(r).on("touchstart.drag",N).on("touchmove.drag",x,Tt).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(i,C){if(!(g||!e.call(this,i,C))){var $=D(this,t.call(this,i,C),i,C,"mouse");!$||(U(i.view).on("mousemove.drag",w,oe).on("mouseup.drag",_,oe),$t(i.view),Ce(i),c=!1,s=i.clientX,l=i.clientY,$("start",i))}}function w(i){if(q(i),!c){var C=i.clientX-s,$=i.clientY-l;c=C*C+$*$>h}d.mouse("drag",i)}function _(i){U(i.view).on("mousemove.drag mouseup.drag",null),Nt(i.view,c),q(i),d.mouse("end",i)}function N(i,C){if(!!e.call(this,i,C)){var $=i.changedTouches,S=t.call(this,i,C),E=$.length,I,O;for(I=0;I<E;++I)(O=D(this,S,i,C,$[I].identifier,$[I]))&&(Ce(i),O("start",i,$[I]))}}function x(i){var C=i.changedTouches,$=C.length,S,E;for(S=0;S<$;++S)(E=d[C[S].identifier])&&(q(i),E("drag",i,C[S]))}function b(i){var C=i.changedTouches,$=C.length,S,E;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),S=0;S<$;++S)(E=d[C[S].identifier])&&(Ce(i),E("end",i,C[S]))}function D(i,C,$,S,E,I){var O=m.copy(),R=Ae(I||$,C),Me,Be,me;if((me=n.call(i,new Te("beforestart",{sourceEvent:$,target:u,identifier:E,active:p,x:R[0],y:R[1],dx:0,dy:0,dispatch:O}),S))!=null)return Me=me.x-R[0]||0,Be=me.y-R[1]||0,function nt(De,Ee,ot){var Le=R,ke;switch(De){case"start":d[E]=nt,ke=p++;break;case"end":delete d[E],--p;case"drag":R=Ae(ot||Ee,C),ke=p;break}O.call(De,i,new Te(De,{sourceEvent:Ee,subject:me,target:u,identifier:E,active:ke,x:R[0]+Me,y:R[1]+Be,dx:R[0]-Le[0],dy:R[1]-Le[1],dispatch:O}),S)}}return u.filter=function(i){return arguments.length?(e=typeof i=="function"?i:he(!!i),u):e},u.container=function(i){return arguments.length?(t=typeof i=="function"?i:he(i),u):t},u.subject=function(i){return arguments.length?(n=typeof i=="function"?i:he(i),u):n},u.touchable=function(i){return arguments.length?(r=typeof i=="function"?i:he(!!i),u):r},u.on=function(){var i=m.on.apply(m,arguments);return i===m?u:i},u.clickDistance=function(i){return arguments.length?(h=(i=+i)*i,u):Math.sqrt(h)},u}const $e=Math.PI,Ne=2*$e,z=1e-6,Bt=Ne-z;function xe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function He(){return new xe}xe.prototype=He.prototype={constructor:xe,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,d,m){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+d)+","+(this._y1=+m)},arcTo:function(e,t,n,r,d){e=+e,t=+t,n=+n,r=+r,d=+d;var m=this._x1,p=this._y1,s=n-e,l=r-t,c=m-e,g=p-t,h=c*c+g*g;if(d<0)throw new Error("negative radius: "+d);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>z)if(!(Math.abs(g*s-l*c)>z)||!d)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var u=n-m,v=r-p,w=s*s+l*l,_=u*u+v*v,N=Math.sqrt(w),x=Math.sqrt(h),b=d*Math.tan(($e-Math.acos((w+h-_)/(2*N*x)))/2),D=b/x,i=b/N;Math.abs(D-1)>z&&(this._+="L"+(e+D*c)+","+(t+D*g)),this._+="A"+d+","+d+",0,0,"+ +(g*u>c*v)+","+(this._x1=e+i*s)+","+(this._y1=t+i*l)}},arc:function(e,t,n,r,d,m){e=+e,t=+t,n=+n,m=!!m;var p=n*Math.cos(r),s=n*Math.sin(r),l=e+p,c=t+s,g=1^m,h=m?r-d:d-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>z||Math.abs(this._y1-c)>z)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%Ne+Ne),h>Bt?this._+="A"+n+","+n+",0,1,"+g+","+(e-p)+","+(t-s)+"A"+n+","+n+",0,1,"+g+","+(this._x1=l)+","+(this._y1=c):h>z&&(this._+="A"+n+","+n+",0,"+ +(h>=$e)+","+g+","+(this._x1=e+n*Math.cos(d))+","+(this._y1=t+n*Math.sin(d))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Ve(e){return function(){return e}}var Et=Array.prototype.slice;function Lt(e){return e[0]}function Pt(e){return e[1]}class Rt{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Gt(e){return new Rt(e,!0)}function At(e){return e.source}function Vt(e){return e.target}function It(e){let t=At,n=Vt,r=Lt,d=Pt,m=null,p=null;function s(){let l;const c=Et.call(arguments),g=t.apply(this,c),h=n.apply(this,c);if(m==null&&(p=e(l=He())),p.lineStart(),c[0]=g,p.point(+r.apply(this,c),+d.apply(this,c)),c[0]=h,p.point(+r.apply(this,c),+d.apply(this,c)),p.lineEnd(),l)return p=null,l+""||null}return s.source=function(l){return arguments.length?(t=l,s):t},s.target=function(l){return arguments.length?(n=l,s):n},s.x=function(l){return arguments.length?(r=typeof l=="function"?l:Ve(+l),s):r},s.y=function(l){return arguments.length?(d=typeof l=="function"?l:Ve(+l),s):d},s.context=function(l){return arguments.length?(l==null?m=p=null:p=e(m=l),s):m},s}function Xe(){return It(Gt)}const jt=H({components:{NLayout:Y,NButton:L,NSpace:W,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NSelect:re,NDrawer:ee,NDrawerContent:te,NForm:se,NFormItem:ie,NGrid:ue,NFormItemGi:fe,NDivider:pe,NSwitch:de,NwSchemaEditor:ce},setup(){const e=T(!1);return{show:()=>{e.value=!0},cancel:()=>{e.value=!1},active:e}}});const Ye=e=>(st("data-v-a3817af4"),e=e(),it(),e),Jt={class:"nw-tile-group"},zt={class:"nw-tile active"},Ot={class:"nw-tile-icon"},qt=Ye(()=>B("div",{class:"nw-tile-text"}," \u8868\u5355 ",-1)),Ht={class:"nw-tile"},Xt={class:"nw-tile-icon"},Yt=Ye(()=>B("div",{class:"nw-tile-text"}," \u4E00\u822C\u9875\u9762 ",-1));function Wt(e,t,n,r,d,m){const p=f("nw-icon"),s=f("n-form-item-gi"),l=f("n-input"),c=f("n-switch"),g=f("n-grid"),h=f("n-divider"),u=f("n-button"),v=f("nw-schema-editor"),w=f("n-form"),_=f("n-drawer-content"),N=f("n-drawer");return X(),le(N,{show:e.active,"onUpdate:show":t[5]||(t[5]=x=>e.active=x),width:"100%",placement:"right"},{default:o(()=>[a(_,null,{header:o(()=>[a(p,{style:{"margin-right":"5px"},size:25,name:"icon-n-y-newpage"}),y(" \u65B0\u5EFA\u9875\u9762 ")]),footer:o(()=>[a(u,{onClick:t[4]||(t[4]=x=>e.active=!1)},{default:o(()=>[y(" \xA0\u53D6\u6D88\xA0 ")]),_:1})]),default:o(()=>[a(w,{ref:"formRef","label-width":"auto","label-align":"left","label-placement":"left",style:{width:"600px",padding:"50px 0",margin:"0 auto"}},{default:o(()=>[a(g,{cols:24,"x-gap":24},{default:o(()=>[a(s,{span:12,label:"\u9875\u9762\u7C7B\u578B",path:"inputValue"},{default:o(()=>[B("div",Jt,[B("div",zt,[B("div",Ot,[a(p,{name:"icon-y-formpage",size:25})]),qt]),B("div",Ht,[B("div",Xt,[a(p,{name:"icon-y-formpage",size:25})]),Yt])])]),_:1}),a(s,{span:12,label:"\u540D\u79F0",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165\u540D\u79F0"})]),_:1}),a(s,{span:12,label:"\u662F\u5426\u542F\u7528",path:"inputValue"},{default:o(()=>[a(c)]),_:1}),a(s,{span:12,label:"\u7F16\u7801",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165\u7F16\u7801"})]),_:1}),a(s,{span:24,label:"Url",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165Url"})]),_:1}),a(s,{span:24,label:"\u5907\u6CE8",path:"inputValue"},{default:o(()=>[a(l,{type:"textarea",placeholder:"\u8F93\u5165\u5907\u6CE8"})]),_:1})]),_:1}),a(h,{"title-placement":"left"},{default:o(()=>[y(" \u8868\u5355\u914D\u7F6E ")]),_:1}),a(g,{cols:24,"x-gap":24},{default:o(()=>[a(s,{span:24,label:"\u65B0\u589E\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165Url",style:{"margin-right":"5px"}}),a(u,{onClick:t[0]||(t[0]=x=>e.active=!1)},{default:o(()=>[y(" \xA0\u9009\u62E9\xA0 ")]),_:1})]),_:1}),a(s,{span:24,label:"\u5220\u9664\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165Url",style:{"margin-right":"5px"}}),a(u,{onClick:t[1]||(t[1]=x=>e.active=!1)},{default:o(()=>[y(" \xA0\u9009\u62E9\xA0 ")]),_:1})]),_:1}),a(s,{span:24,label:"\u7F16\u8F91\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165Url",style:{"margin-right":"5px"}}),a(u,{onClick:t[2]||(t[2]=x=>e.active=!1)},{default:o(()=>[y(" \xA0\u9009\u62E9\xA0 ")]),_:1})]),_:1}),a(s,{span:24,label:"\u67E5\u8BE2\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(l,{placeholder:"\u8F93\u5165Url",style:{"margin-right":"5px"}}),a(u,{onClick:t[3]||(t[3]=x=>e.active=!1)},{default:o(()=>[y(" \xA0\u9009\u62E9\xA0 ")]),_:1})]),_:1})]),_:1}),a(h,{"title-placement":"left"},{default:o(()=>[y(" \u53C2\u6570\u914D\u7F6E ")]),_:1}),a(v)]),_:1},512)]),_:1})]),_:1},8,["show"])}const Kt=ae(jt,[["render",Wt],["__scopeId","data-v-a3817af4"]]);function We(e){return new _e("/main/page","post",e).send()}function we(e){return new _e("/main/page","put",e).send()}function Ie(e){return new _e(`/main/page/${e}`,"delete").send()}function be(e){return new _e(`/main/page/${e}`,"get").send()}const Zt=H({components:{NLayout:Y,NButton:L,NSpace:W,NSpin:Je,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NInputGroupLabel:ye,NSelect:re,NDrawer:ee,NDrawerContent:te,NForm:se,NFormItem:ie,NGrid:ue,NFormItemGi:fe,NDivider:pe,NSwitch:de,NwSchemaEditor:ce,NwCodeMirror:Se},setup(){const e=T(!1),t=T(),n=T(!1),r=T(""),d=T(),m=T("create"),p=T(!1),s={pageName:"",pageCode:"",pageType:"1",targetUrl:"",pageUrl:"",remark:"",isEnable:0,appCode:"wf",appName:"\u5DE5\u4F5C\u6D41",jsonSchema:""},l=T({});return{loading:e,formRef:t,rules:{pageName:{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u5355\u540D\u79F0",trigger:["input","blur"]},pageCode:{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u5355\u7F16\u7801",trigger:["input","blur"]},targetUrl:{required:!0,message:"\u8BF7\u8F93\u5165\u76EE\u6807\u9875\u9762Url",trigger:["input","blur"]}},show:(u,v)=>{p.value=!0,u?(m.value="edit",be(u).then(w=>{l.value=w})):(m.value="create",l.value=ze.exports.cloneDeep(s),l.value.appCode=v.appCode,l.value.appName=v.appName,l.value.isTransform=0)},submit:async()=>{t.value.validate().then((...u)=>{e.value=!0,l.value.pageUrl=`/${l.value.appCode}/${l.value.pageCode}`,m.value==="create"?(console.log("====formData======",l.value),We(l.value).then(v=>{console.log("====r====",v),p.value=!1}).finally(()=>{e.value=!1})):m.value==="edit"&&we(l.value).then(v=>{console.log("====r====",v),p.value=!1}).finally(()=>{e.value=!1})})},cancel:()=>{p.value=!1},active:p,formData:l,iframeActive:n,iframeUrl:r,iframeRef:d,preview(){n.value=!0,r.value=l.value.targetUrl,Ue().then(()=>{d.value.onload=()=>{window.addEventListener("message",u=>{u.data.cmd==="INIT_COMPLETE"?d.value.contentWindow.postMessage({cmd:"GET_SCHEMA"},"*"):u.data.cmd==="GET_SCHEMA"&&(l.value.jsonSchema=JSON.stringify(u.data.value,null,4))})}})}}}});const Qt=["src"];function ea(e,t,n,r,d,m){const p=f("nw-icon"),s=f("n-input"),l=f("n-form-item-gi"),c=f("n-switch"),g=f("n-input-group-label"),h=f("n-input-group"),u=f("n-button"),v=f("n-grid"),w=f("n-divider"),_=f("NwCodeMirror"),N=f("n-form"),x=f("n-spin"),b=f("n-drawer-content"),D=f("n-drawer");return X(),le(D,{show:e.active,"onUpdate:show":t[12]||(t[12]=i=>e.active=i),width:"100%",placement:"right"},{default:o(()=>[a(b,null,{header:o(()=>[a(p,{style:{"margin-right":"5px"},size:25,name:"icon-n-y-newpage"}),y(" \u65B0\u5EFA\u8868\u5355 ")]),footer:o(()=>[a(u,{onClick:t[8]||(t[8]=i=>e.submit()),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u63D0\u4EA4 ")]),_:1}),a(u,{onClick:t[9]||(t[9]=i=>e.active=!1)},{default:o(()=>[y(" \u53D6\u6D88 ")]),_:1})]),default:o(()=>[a(x,{show:e.loading},{default:o(()=>[a(N,{ref:"formRef",model:e.formData,"label-width":"auto","label-align":"left","label-placement":"left",style:{width:"600px",padding:"50px 0",margin:"0 auto"},rules:e.rules},{default:o(()=>[a(v,{cols:24,"x-gap":24},{default:o(()=>[a(l,{span:12,label:"\u540D\u79F0",path:"pageName"},{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u540D\u79F0",value:e.formData.pageName,"onUpdate:value":t[0]||(t[0]=i=>e.formData.pageName=i)},null,8,["value"])]),_:1}),a(l,{span:12,label:"\u6240\u5C5E\u5E94\u7528",path:"appCode"},{default:o(()=>[a(s,{disabled:"",style:{width:"50%"},placeholder:"\u8F93\u5165App\u540D\u79F0",value:e.formData.appName,"onUpdate:value":t[1]||(t[1]=i=>e.formData.appName=i)},null,8,["value"]),a(s,{disabled:"",style:{width:"50%"},placeholder:"\u8F93\u5165App\u7F16\u7801",value:e.formData.appCode,"onUpdate:value":t[2]||(t[2]=i=>e.formData.appCode=i)},null,8,["value"])]),_:1}),a(l,{span:24,label:"\u662F\u5426\u542F\u7528"},{default:o(()=>[a(c,{"checked-value":1,"unchecked-value":0,value:e.formData.isEnable,"onUpdate:value":t[3]||(t[3]=i=>e.formData.isEnable=i)},null,8,["value"])]),_:1}),a(l,{span:24,label:"\u8BBF\u95EEUrl",path:"pageCode"},{default:o(()=>[a(h,null,{default:o(()=>[a(g,null,{default:o(()=>[y("/"+j(e.formData.appCode)+"/",1)]),_:1}),a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.pageCode,"onUpdate:value":t[4]||(t[4]=i=>e.formData.pageCode=i)},null,8,["value"])]),_:1})]),_:1}),a(l,{span:24,label:"\u76EE\u6807\u9875\u9762Url",path:"targetUrl"},{default:o(()=>[a(s,{placeholder:"\u8F93\u5165Url",value:e.formData.targetUrl,"onUpdate:value":t[5]||(t[5]=i=>e.formData.targetUrl=i)},null,8,["value"]),a(u,{disabled:!e.formData.targetUrl,onClick:e.preview,type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u83B7\u53D6\u5B57\u6BB5\u63CF\u8FF0 ")]),_:1},8,["disabled","onClick"])]),_:1}),a(l,{span:24,label:"\u5907\u6CE8",path:"remark"},{default:o(()=>[a(s,{type:"textarea",placeholder:"\u8F93\u5165\u5907\u6CE8",value:e.formData.remark,"onUpdate:value":t[6]||(t[6]=i=>e.formData.remark=i)},null,8,["value"])]),_:1})]),_:1}),a(w,{"title-placement":"left"},{default:o(()=>[y(" \u5B57\u6BB5\u914D\u7F6E ")]),_:1}),a(_,{disabled:!1,value:e.formData.jsonSchema,"onUpdate:value":t[7]||(t[7]=i=>e.formData.jsonSchema=i)},null,8,["value"])]),_:1},8,["model","rules"])]),_:1},8,["show"]),a(D,{show:e.iframeActive,"onUpdate:show":t[11]||(t[11]=i=>e.iframeActive=i),width:800},{default:o(()=>[a(b,{title:"\u9884\u89C8\u8868\u5355"},{footer:o(()=>[a(u,{onClick:t[10]||(t[10]=i=>e.iframeActive=!1)},{default:o(()=>[y(" \u5173\u95ED ")]),_:1})]),default:o(()=>[B("iframe",{ref:"iframeRef",src:e.iframeUrl,style:{display:"block",width:"100%",height:"100%",border:"none"}},null,8,Qt)]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}const ta=ae(Zt,[["render",ea],["__scopeId","data-v-e224c70c"]]),aa=H({components:{NLayout:Y,NButton:L,NSpace:W,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NInputGroupLabel:ye,NSelect:re,NDrawer:ee,NDrawerContent:te,NForm:se,NFormItem:ie,NGrid:ue,NFormItemGi:fe,NDivider:pe,NSwitch:de,NwSchemaEditor:ce,NwOpenapiPick:Fe},setup(){const e=T("create"),t=T(!1),n={pageName:"",pageCode:"",pageType:"2",targetUrl:"",pageUrl:"",remark:"",isEnable:0,appCode:"wf",appName:"\u5DE5\u4F5C\u6D41",jsonSchema:""},r=T({});return{show:(s,l)=>{t.value=!0,s?(e.value="edit",be(s).then(c=>{r.value=c})):(e.value="create",r.value=ze.exports.cloneDeep(n),r.value.appCode=l.appCode,r.value.appName=l.appName)},submit:()=>{r.value.pageUrl=`/${r.value.appCode}/${r.value.pageCode}`,r.value.isEnable=+r.value.isEnable,e.value==="create"?(console.log("====formData======",r.value),r.value.pageUrl,We(r.value).then(s=>{console.log("====r====",s),t.value=!1})):e.value==="edit"&&we(r.value).then(s=>{console.log("====r====",s),t.value=!1})},cancel:()=>{t.value=!1},active:t,formData:r,isEnable(s){return Number(s)},preview(){window.open(r.value.targetUrl,"_blank","top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=n o, status=no")},addCallback(s){r.value.formListUrl=s.mthPath,r.value.formListMethodType=s.mthMethod}}}});function na(e,t,n,r,d,m){const p=f("nw-icon"),s=f("n-input"),l=f("n-form-item-gi"),c=f("n-switch"),g=f("n-input-group-label"),h=f("n-input-group"),u=f("n-button"),v=f("NwOpenapiPick"),w=f("n-grid"),_=f("n-form"),N=f("n-drawer-content"),x=f("n-drawer");return X(),le(x,{show:e.active,"onUpdate:show":t[10]||(t[10]=b=>e.active=b),width:"100%",placement:"right"},{default:o(()=>[a(N,null,{header:o(()=>[a(p,{style:{"margin-right":"5px"},size:25,name:"icon-n-y-newpage"}),y(" \u65B0\u5EFA\u9875\u9762 ")]),footer:o(()=>[a(u,{onClick:t[8]||(t[8]=b=>e.submit()),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u63D0\u4EA4 ")]),_:1}),a(u,{onClick:t[9]||(t[9]=b=>e.active=!1)},{default:o(()=>[y(" \u53D6\u6D88 ")]),_:1})]),default:o(()=>[a(_,{ref:"formRef","label-width":"auto","label-align":"left","label-placement":"left",style:{width:"600px",padding:"50px 0",margin:"0 auto"}},{default:o(()=>[a(w,{cols:24,"x-gap":24},{default:o(()=>[a(l,{span:12,label:"\u540D\u79F0",path:"inputValue"},{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u540D\u79F0",value:e.formData.pageName,"onUpdate:value":t[0]||(t[0]=b=>e.formData.pageName=b)},null,8,["value"])]),_:1}),a(l,{span:12,label:"\u6240\u5C5E\u5E94\u7528",path:"inputValue"},{default:o(()=>[a(s,{disabled:"",style:{width:"50%"},placeholder:"\u8F93\u5165App\u540D\u79F0",value:e.formData.appName,"onUpdate:value":t[1]||(t[1]=b=>e.formData.appName=b)},null,8,["value"]),a(s,{disabled:"",style:{width:"50%"},placeholder:"\u8F93\u5165App\u7F16\u7801",value:e.formData.appCode,"onUpdate:value":t[2]||(t[2]=b=>e.formData.appCode=b)},null,8,["value"])]),_:1}),a(l,{span:24,label:"\u662F\u5426\u542F\u7528",path:"inputValue"},{default:o(()=>[a(c,{value:!!e.formData.isEnable,"onUpdate:value":t[3]||(t[3]=b=>e.formData.isEnable=e.isEnable(b))},null,8,["value"])]),_:1}),a(l,{span:24,label:"\u8BBF\u95EEUrl",path:"inputValue"},{default:o(()=>[a(h,null,{default:o(()=>[a(g,null,{default:o(()=>[y("/"+j(e.formData.appCode)+"/",1)]),_:1}),a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.pageCode,"onUpdate:value":t[4]||(t[4]=b=>e.formData.pageCode=b)},null,8,["value"])]),_:1})]),_:1}),a(l,{span:24,label:"\u76EE\u6807\u9875\u9762Url",path:"inputValue"},{default:o(()=>[a(s,{placeholder:"\u8F93\u5165Url",value:e.formData.targetUrl,"onUpdate:value":t[5]||(t[5]=b=>e.formData.targetUrl=b)},null,8,["value"]),a(u,{onClick:e.preview,type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u9884\u89C8 ")]),_:1},8,["onClick"])]),_:1}),a(l,{span:24,label:"\u6570\u636E\u63A5\u53E3",path:"formListUrl"},{default:o(()=>[a(h,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165Url",value:e.formData.formListUrl,"onUpdate:value":t[6]||(t[6]=b=>e.formData.formListUrl=b)},null,8,["value"]),a(g,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.formListMethodType),1)]),_:1})]),_:1}),a(v,{onCallback:e.addCallback},null,8,["onCallback"])]),_:1}),a(l,{span:24,label:"\u5907\u6CE8",path:"inputValue"},{default:o(()=>[a(s,{type:"textarea",placeholder:"\u8F93\u5165\u5907\u6CE8",value:e.formData.remark,"onUpdate:value":t[7]||(t[7]=b=>e.formData.remark=b)},null,8,["value"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["show"])}const oa=ae(aa,[["render",na],["__scopeId","data-v-f9028ece"]]),la=H({components:{NLayout:Y,NButton:L,NSpace:W,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NInputGroupLabel:ye,NSelect:re,NDrawer:ee,NDrawerContent:te,NForm:se,NFormItem:ie,NGrid:ue,NFormItemGi:fe,NDivider:pe,NSwitch:de,NwSchemaEditor:ce,NwOpenapiPick:Fe,NwCodeMirror:Se},setup(){T("create");const e=T(!1),t=T(""),n=T({});return{x:t,show:p=>{e.value=!0,n.value={},be(p).then(s=>{n.value=s})},submit:()=>{we(n.value).then(p=>{console.log("====r====",p),e.value=!1})},cancel:()=>{e.value=!1},active:e,formData:n,addCallback(p,s){n.value.formSaveUrl=p.mthPath,n.value.formSaveMethodType=p.mthMethod,n.value.formDeleteUrl=`${p.mthPath}/{id}`,n.value.formDeleteMethodType="DELETE",n.value.formUpdateUrl=p.mthPath,n.value.formUpdateMethodType="PUT",n.value.formGetUrl=`${p.mthPath}/{id}`,n.value.formGetMethodType="GET",n.value.procViewUrl=`${p.mthPath}/proc/view/{procinsId}`,n.value.procViewMethodType="GET";const l=Object.values(s.resolved.paths)[0].post.requestBody.content["application/json"].schema.properties;n.value.interfaceJsonSchema=JSON.stringify(l,null,4),console.log("==properties==",JSON.stringify(l))}}}});function ra(e,t,n,r,d,m){const p=f("nw-icon"),s=f("n-input"),l=f("n-input-group-label"),c=f("n-input-group"),g=f("NwOpenapiPick"),h=f("n-form-item-gi"),u=f("n-button"),v=f("n-switch"),w=f("n-grid"),_=f("NwCodeMirror"),N=f("n-form"),x=f("n-drawer-content"),b=f("n-drawer");return X(),le(b,{show:e.active,"onUpdate:show":t[13]||(t[13]=D=>e.active=D),width:"100%",placement:"right"},{default:o(()=>[a(x,null,{header:o(()=>[a(p,{style:{"margin-right":"5px"},size:25,name:"icon-n-y-newpage"}),y(" \u63A5\u53E3\u914D\u7F6E ")]),footer:o(()=>[a(u,{onClick:t[11]||(t[11]=D=>e.submit()),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u63D0\u4EA4 ")]),_:1}),a(u,{onClick:t[12]||(t[12]=D=>e.active=!1)},{default:o(()=>[y(" \u53D6\u6D88 ")]),_:1})]),default:o(()=>[a(N,{ref:"formRef","label-width":"auto","label-align":"left","label-placement":"left",style:{width:"600px",padding:"50px 0",margin:"0 auto"}},{default:o(()=>[a(w,{cols:24,"x-gap":24},{default:o(()=>[a(h,{span:24,label:"\u65B0\u589E\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(c,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.formSaveUrl,"onUpdate:value":t[0]||(t[0]=D=>e.formData.formSaveUrl=D)},null,8,["value"]),a(l,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.formSaveMethodType),1)]),_:1})]),_:1}),a(g,{onCallback:e.addCallback},null,8,["onCallback"])]),_:1}),a(h,{span:24,label:"\u5220\u9664\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(c,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.formDeleteUrl,"onUpdate:value":t[1]||(t[1]=D=>e.formData.formDeleteUrl=D)},null,8,["value"]),a(l,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.formDeleteMethodType),1)]),_:1})]),_:1}),a(u,{style:{visibility:"hidden","margin-left":"5px"},onClick:t[2]||(t[2]=D=>e.active=!1)},{default:o(()=>[y(" \u9009\u62E9 ")]),_:1})]),_:1}),a(h,{span:24,label:"\u7F16\u8F91\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(c,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.formUpdateUrl,"onUpdate:value":t[3]||(t[3]=D=>e.formData.formUpdateUrl=D)},null,8,["value"]),a(l,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.formUpdateMethodType),1)]),_:1})]),_:1}),a(u,{style:{visibility:"hidden","margin-left":"5px"},onClick:t[4]||(t[4]=D=>e.active=!1)},{default:o(()=>[y(" \u9009\u62E9 ")]),_:1})]),_:1}),a(h,{span:24,label:"\u67E5\u8BE2\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(c,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.formGetUrl,"onUpdate:value":t[5]||(t[5]=D=>e.formData.formGetUrl=D)},null,8,["value"]),a(l,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.formGetMethodType),1)]),_:1})]),_:1}),a(u,{style:{visibility:"hidden","margin-left":"5px"},onClick:t[6]||(t[6]=D=>e.active=!1)},{default:o(()=>[y(" \u9009\u62E9 ")]),_:1})]),_:1}),a(h,{span:24,label:"\u6D41\u7A0B\u67E5\u8BE2\u63A5\u53E3",path:"inputValue"},{default:o(()=>[a(c,null,{default:o(()=>[a(s,{placeholder:"\u8F93\u5165\u7F16\u7801",value:e.formData.procViewUrl,"onUpdate:value":t[7]||(t[7]=D=>e.formData.procViewUrl=D)},null,8,["value"]),a(l,{style:{width:"70px","text-align":"center"}},{default:o(()=>[y(j(e.formData.procViewMethodType),1)]),_:1})]),_:1}),a(u,{style:{visibility:"hidden","margin-left":"5px"},onClick:t[8]||(t[8]=D=>e.active=!1)},{default:o(()=>[y(" \u9009\u62E9 ")]),_:1})]),_:1}),a(h,{span:24,label:"\u5F00\u542F\u6570\u636E\u8F6C\u6362",path:"inputValue"},{default:o(()=>[a(v,{"checked-value":1,"unchecked-value":0,value:e.formData.isTransform,"onUpdate:value":t[9]||(t[9]=D=>e.formData.isTransform=D)},{checked:o(()=>[y(" \u5F00\u542F ")]),unchecked:o(()=>[y(" \u5173\u95ED ")]),_:1},8,["value"])]),_:1})]),_:1}),a(_,{disabled:!1,value:e.formData.interfaceJsonSchema,"onUpdate:value":t[10]||(t[10]=D=>e.formData.interfaceJsonSchema=D)},null,8,["value"])]),_:1},512)]),_:1})]),_:1},8,["show"])}const sa=ae(la,[["render",ra],["__scopeId","data-v-24b4a74a"]]);function ia(e,t){const n=JSON.parse(e),r=d=>Object.entries(d).map(([m,p])=>{const{sourceFieldName:s,properties:l,items:c,type:g}=p;return g==="object"&&l?`${m}: (d => ({
                    ${r(l)}
                }))(d['${s}'])`:g==="array"&&c&&c.type==="object"?`${m}: d['${s}']?.map(d => ({
                    ${r(c.properties)}
                }))`:(console.log(`${m}: d['${s}']`),`${m}: d['${s}']`)}).join(`,
`);return`return {${r(n)}}`}function je(e){const t=JSON.parse(e),n=d=>{var m;return(m=P.RightGraphTree)==null?void 0:m.Tree.descendants().find(p=>p.data._fnPath===d)},r=(d,m)=>{Object.entries(d).forEach(([p,s])=>{const{properties:l,items:c,type:g}=s,h=`${m}${m?".":""}${p}`,u=n(h);u&&u.data.sourceFieldName?s.sourceFieldName=u.data.sourceFieldName:delete s.sourceFieldName,g==="object"&&l?r(l,h):g==="array"&&c&&c.type==="object"&&r(c.properties,h)})};return r(t,""),JSON.stringify(t,null,4)}function ge(e){const t=r=>Object.entries(r).map(([d,m])=>{const{properties:p,items:s,title:l="",type:c,format:g="",description:h="",sourceFieldName:u}=m;return c==="object"&&p?{fieldName:d,sourceFieldName:u,title:l,description:h,type:c,format:g,children:p,schema:l}:c==="array"&&s?{fieldName:d,sourceFieldName:u,title:l,description:h,type:c,format:g,children:s.properties,schema:s.type}:{fieldName:d,sourceFieldName:u,title:l,description:h,type:c,format:g}}),n=r=>{const d=t(r);return d.forEach(m=>{m.children&&(m.children=n(m.children))}),d};return n(e)}const F=32,Ke=30,Ze=30,Qe=50,et=750;function tt(e,t=!1){e.eachAfter(n=>{n.data._fnPath=n.ancestors().map(r=>r.data.fieldName).reverse().filter(r=>r).join("."),t&&n.data.sourceFieldName&&(n.data._sourceFnPath=n.ancestors().map(r=>r.data.sourceFieldName).reverse().filter(r=>r).join("."))})}const at={string:{label:"string",color:"#D33D17"},integer:{label:"integer",color:"#00A396"},number:{label:"number",color:"#00A396"},array:{label:"array",color:"#9D3F9D"},object:{label:"object",color:"#147EB3"},boolean:{label:"boolean",color:"#D1980B"}},M=class{constructor(t,n,r,d,m){k(this,"Div");k(this,"Svg");k(this,"List",[]);k(this,"Tree");k(this,"BBox");k(this,"render",()=>{});this.Div=t,this.Svg=n,this.Tree=qe({children:r}),tt(this.Tree);let p=0;this.Tree.eachBefore(_=>_.index=p++);const s=this.Tree.descendants(),l=this.Tree.links(),c=n.append("g").attr("transform",`translate(${d}, ${m})`);c.append("g").attr("fill","none").attr("stroke","#888").attr("opacity",".5").selectAll("path").data(l).join("path").attr("d",_=>`
                M${_.source.depth*F},${_.source.index*F}
                V${_.target.index*F}
                h${F}
            `);const h=c.append("g").attr("fill","none").attr("stroke","#888").attr("stroke-width","2px").attr("opacity",".5").append("path").attr("d",`
            M0,0
            L0,0
        `).style("display","none"),u=Mt().on("start",(_,N)=>{console.log(N),M.dragState.action="drag",M.dragState.sx=_.x,M.dragState.sy=_.y,h.attr("d",`
                M0,0
                L0,0
            `).style("display",""),M.Source.Node=N}).on("drag",_=>{h.attr("d",Xe().source(()=>[M.dragState.sx,M.dragState.sy]).target(()=>[_.x,_.y]))}).on("end",(_,N)=>{var x;console.log("==d==",_),J.Target.Node&&(console.log("-----Graph.RightGraphTree------",P.RightGraphTree),(x=P.RightGraphTree)==null||x.Tree.eachAfter(b=>{b.data._sourceNode===N&&(console.log("-----Graph.RightGraphTree--rd----",b),b.data.sourceFieldName=null,b.data._sourceFnPath=null,b.data._sourceNode=null)}),J.Target.Node.data.sourceFieldName=M.Source.Node.data.fieldName,J.Target.Node.data._sourceFnPath=M.Source.Node.data._fnPath,J.Target.Node.data._sourceNode=M.Source.Node,P.LinkGraph.render(),P.callBack()),M.dragState.action="over",h.style("display","none"),M.Source.Node=null});t.append("div").style("position","absolute").style("left",`${d}px`).style("top",`${m}px`).selectAll("div").data(s).join("div").style("position","absolute").style("left","-8px").style("padding-left",_=>`${_.depth*F}px`).style("top",_=>`${_.index*F-10}px`).style("display","flex").style("align-items","center").each(function(_){var b;if(!_.parent){U(this).append("div").style("width","100px").style("text-align","center").style("border-radius","5px").style("padding","0 5px").style("margin-right","5px").style("background","#29A634").style("color","#fff").text("\u8868\u5355\u5B57\u6BB5\u89C4\u5219");return}const N=(b=at[_.data.type])==null?void 0:b.color;U(this).append("div").style("width","60px").style("text-align","center").style("border-radius","5px").style("padding","0 5px").style("margin-right","5px").style("background",N).style("color","#fff").style("overflow","hidden").style("white-space","nowrap").style("text-overflow","ellipsis").text(D=>`${D.data.type}`),U(this).append("div").style("font-weight","bold").style("overflow","hidden").style("white-space","nowrap").style("text-overflow","ellipsis").style("background","#fff").text(D=>`${D.data.fieldName}(${D.data.description})`),U(this).append("div").style("display","flex").style("align-items","center").style("fill","#215DB0").style("margin-left","5px").style("background","#fff").style("cursor","pointer").html(D=>`
            <svg style="width: 18px;height: 18px" aria-hidden="true" >
                <use xlink:href="#icon-n-y-link"></use>
            </svg>
            `);const x=this;_._TextWidth=x.clientWidth,U(this).call(u)}),this.BBox=c.node().getBBox()}};let ne=M;k(ne,"dragState",{action:"over",sx:0,sy:0,ex:0,ey:0}),k(ne,"Source",{Node:null});const ve=class{constructor(t,n,r,d,m){k(this,"Div");k(this,"Svg");k(this,"List",[]);k(this,"Tree");k(this,"BBox");k(this,"render",()=>{});this.Div=t,this.Svg=n,this.Tree=qe({children:r}),tt(this.Tree,!0);let p=0;this.Tree.eachBefore(u=>u.index=p++);const s=this.Tree.descendants(),l=this.Tree.links(),c=n.append("g").attr("transform",`translate(${d}, ${m})`);c.append("g").attr("fill","none").attr("stroke","#888").attr("opacity",".5").selectAll("path").data(l).join("path").attr("d",u=>`
                M${u.source.depth*F},${u.source.index*F}
                V${u.target.index*F}
                h${F}
            `),t.append("div").style("position","absolute").style("left",`${d}px`).style("top",`${m}px`).selectAll("div").data(s).join("div").style("position","absolute").style("left","-8px").style("padding-left",u=>`${u.depth*F}px`).style("top",u=>`${u.index*F-10}px`).style("display","flex").style("align-items","center").each(function(u){var w;if(!u.parent){U(this).append("div").style("width","100px").style("text-align","center").style("border-radius","5px").style("padding","0 5px").style("margin-right","5px").style("background","#29A634").style("color","#fff").text("\u63A5\u53E3\u5B57\u6BB5\u89C4\u5219");return}const v=(w=at[u.data.type])==null?void 0:w.color;U(this).append("div").style("display","flex").style("align-items","center").style("fill","#215DB0").style("margin-right","5px").style("background","#fff").style("cursor","pointer").html(_=>`
            <svg style="width: 18px;height: 18px" aria-hidden="true" >
                <use xlink:href="#icon-n-y-inlink"></use>
            </svg>
            `).on("mouseenter",(_,N)=>{ve.Target.Node=N}).on("mouseleave",(_,N)=>{ve.Target.Node=null}),U(this).append("div").style("width","60px").style("text-align","center").style("border-radius","5px").style("padding","0 5px").style("margin-right","5px").style("background",v).style("color","#fff").style("overflow","hidden").style("white-space","nowrap").style("text-overflow","ellipsis").text(_=>`${_.data.type}`),U(this).append("div").style("font-weight","bold").style("overflow","hidden").style("white-space","nowrap").style("text-overflow","ellipsis").text(_=>`${_.data.fieldName}(${_.data.description})`)}),this.BBox=c.node().getBBox()}};let J=ve;k(J,"Target",{Node:null});class ua{constructor(t,n,r){k(this,"LeftGraphTree");k(this,"RightGraphTree");k(this,"SvgLink");k(this,"Div");this.SvgLink=t,this.LeftGraphTree=n,this.RightGraphTree=r;const d=m=>this.LeftGraphTree.Tree.descendants().find(p=>p.data._fnPath===m);this.RightGraphTree.Tree.eachAfter(m=>{m.data._sourceFnPath&&(m.data._sourceNode=d(m.data._sourceFnPath))}),this.render()}render(){this.SvgLink.selectAll("g").data(this.RightGraphTree.Tree.descendants(),t=>t.data._fnPath).join("g").each(function(t){U(this).selectAll("path").remove();const n=[t.depth*F+et,t.index*F+Ze];let r=[];if(t.data._sourceNode){const m=t.data._sourceNode;r=[Qe+m._TextWidth-20,m.index*F+Ke]}else r=n;const d=Xe().source(()=>r).target(()=>n)(t);U(this).append("path").attr("fill","none").attr("stroke","#fff").style("stroke-width","4px").attr("d",d),U(this).append("path").attr("fill","none").attr("stroke","#0F6894").style("stroke-width","2px").attr("d",d)})}}const A=class{constructor(t,n){k(this,"El");k(this,"GEl");k(this,"CoordD3Dom");k(this,"Svg");k(this,"Div");k(this,"SvgLink");k(this,"LeftJson",{});k(this,"LeftList",[]);k(this,"RightJson",{});k(this,"RightList",[]);k(this,"LinkGraph");k(this,"loadData",(t,n)=>{this.LeftJson=t,this.LeftList=ge(this.LeftJson),A.LeftGraphTree=new ne(this.Div,this.Svg,this.LeftList,Qe,Ke),this.RightJson=n,this.RightList=ge(this.RightJson),A.RightGraphTree=new J(this.Div,this.Svg,this.RightList,et,Ze),A.LinkGraph=new ua(this.SvgLink,A.LeftGraphTree,A.RightGraphTree);const r=kt([A.LeftGraphTree.BBox.height,A.RightGraphTree.BBox.height]);this.GEl.style("height",`${r+100}px`),console.log("===LeftJson===RightJson===",t,ge(this.LeftJson),n,ge(this.RightJson))});A.callBack=n,this.El=t,this.GEl=U(t),this.GEl.selectChild().remove(),console.log("====this.GEl====",this.GEl.selectChild(),this.GEl.selectChildren()),this.init()}render(){}init(){this.GEl.attr("onselectstart","return false"),this.CoordD3Dom=this.GEl.append("div").attr("onselectstart","return false").style("position","relative"),this.Svg=this.CoordD3Dom.append("svg").style("overflow","visible"),this.SvgLink=this.Svg.append("g"),this.Div=this.CoordD3Dom.append("div").attr("onselectstart","return false")}};let P=A;k(P,"LinkGraph"),k(P,"callBack",()=>{}),k(P,"LeftGraphTree"),k(P,"RightGraphTree");const pa=H({components:{NLayout:Y,NLayoutContent:Oe,NButton:L,NSpace:W,NSpin:Je,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NInputGroupLabel:ye,NSelect:re,NDrawer:ee,NDrawerContent:te,NForm:se,NFormItem:ie,NGrid:ue,NFormItemGi:fe,NDivider:pe,NSwitch:de,NwSchemaEditor:ce,NwOpenapiPick:Fe,NwCodeMirror:Se},setup(){let e;const t=T(!1),n=T(),r=T("view"),d=T(!1),m=T(""),p=T({}),s=T({});return{mode:r,SpinFlag:t,GraphRef:n,x:m,show:async h=>{d.value=!0,t.value=!0,p.value={},await Ue().then(u=>{e=new P(n.value,()=>{p.value.interfaceJsonSchema=je(p.value.interfaceJsonSchema)})}),await be(h).then(u=>{p.value=u,t.value=!1,s.value=JSON.parse(p.value.interfaceJsonSchema),e.loadData(JSON.parse(p.value.jsonSchema),s.value)})},submit:()=>{console.log("====interfaceJsonSchema.value====",s.value),p.value.interfaceJsonSchema=je(p.value.interfaceJsonSchema),t.value=!0,we(p.value).then(h=>{console.log("====r====",h),d.value=!1}).finally(()=>{t.value=!1})},cancel:()=>{d.value=!1},active:d,formData:p,test(){const h=ia(p.value.interfaceJsonSchema);console.log("======script===",h);const u=new Function("d",h);console.log("======script===",u({agentUserName:"agentUserNamexx",agentUserId:"agentUserIdxx"}))}}}});const da={ref:"GraphRef",style:{height:"100%",width:"100%"}},ca={style:{display:"flex","justify-content":"space-between",width:"100%"}};function fa(e,t,n,r,d,m){const p=f("nw-icon"),s=f("NwCodeMirror"),l=f("n-layout-content"),c=f("n-layout"),g=f("n-spin"),h=f("n-button"),u=f("n-drawer-content"),v=f("n-drawer");return X(),le(v,{show:e.active,"onUpdate:show":t[4]||(t[4]=w=>e.active=w),width:"100%",placement:"right"},{default:o(()=>[a(u,null,{header:o(()=>[a(p,{style:{"margin-right":"5px"},size:25,name:"icon-n-y-newpage"}),y(" \u6570\u636E\u8F6C\u6362 ")]),footer:o(()=>[B("div",ca,[B("div",null,[a(h,{onClick:t[0]||(t[0]=w=>e.mode=e.mode==="view"?"json":"view"),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u8FDE\u7EBF ")]),_:1})]),B("div",null,[a(h,{onClick:t[1]||(t[1]=w=>e.test()),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" Test ")]),_:1}),a(h,{onClick:t[2]||(t[2]=w=>e.submit()),type:"primary",style:{"margin-right":"5px"}},{default:o(()=>[y(" \u63D0\u4EA4 ")]),_:1}),a(h,{onClick:t[3]||(t[3]=w=>e.active=!1)},{default:o(()=>[y(" \xA0\u53D6\u6D88\xA0 ")]),_:1})])])]),default:o(()=>[a(g,{class:"nw-spin-full",show:e.SpinFlag},{default:o(()=>[a(c,{class:"nw-layout-full"},{default:o(()=>[a(l,null,{default:o(()=>[Pe(B("div",da,null,512),[[Re,e.mode==="view"]]),Pe(B("div",null,[a(s,{disabled:!0,value:e.formData.interfaceJsonSchema},null,8,["value"])],512),[[Re,e.mode==="json"]])]),_:1})]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}const ma=ae(pa,[["render",fa],["__scopeId","data-v-0ad4d270"]]),ha=H({components:{NLayout:Y,NLayoutSider:ht,NLayoutHeader:gt,NLayoutContent:Oe,NButton:L,NSpace:W,NwIcon:K,NTag:V,NInput:Z,NInputGroup:Q,NDrawer:ee,NDrawerContent:te,Modal:Kt,ModalBasicForm:ta,ModalBasicPage:oa,ModalBasicFormInterface:sa,ModalBasicFormTransform:ma,NwAppTreeGrid:vt},setup(){const e=_t.getMenuData(),t=T({...e}),n=yt(),r=T(),d=T(),m=T(),p=T();ut(()=>{console.log(r.value)});const{bind:s,gridRef:l,filterData:c,query:g,reset:h}=new wt.VxeGridPaging({columns:[{field:"pageName",title:"\u540D\u79F0",showHeaderOverflow:!0,width:"180px"},{field:"pageCode",title:"\u7F16\u7801",showHeaderOverflow:!0,width:"180px"},{title:"\u7C7B\u578B",showHeaderOverflow:!0,width:"100px",slots:{default:({row:v})=>v.pageType==="1"?[G(V,{size:"small",type:"warning"},{default:()=>["\u8868\u5355"]})]:v.pageType==="2"?[G(V,{size:"small",type:"success"},{default:()=>["\u9875\u9762"]})]:[G(V,{size:"small"},{default:()=>["\u672A\u77E5"]})]}},{title:"\u6765\u6E90",showHeaderOverflow:!0,slots:{default:()=>["\u5916\u94FE"]}},{title:"\u6570\u636E\u8F6C\u6362",width:80,slots:{default:({row:v})=>v.pageType==="1"?v.isTransform?["\u5DF2\u5F00\u542F"]:["\u5DF2\u5173\u95ED"]:["-"]}},{title:"\u64CD\u4F5C",showHeaderOverflow:!0,width:"230px",slots:{default:({row:v})=>v.pageType==="1"?[G(L,{size:"tiny",style:"margin-right: 5px;",onClick:()=>{var w;(w=r.value)==null||w.show(v.id)}},{default:()=>"\u7F16\u8F91"}),G(L,{size:"tiny",style:"margin-right: 5px;",onClick:()=>{var w;(w=m.value)==null||w.show(v.id)}},{default:()=>"\u914D\u7F6E\u63A5\u53E3"}),v.isTransform?G(L,{size:"tiny",style:"margin-right: 5px;",onClick:()=>{var w;(w=p.value)==null||w.show(v.id)}},{default:()=>"\u6570\u636E\u8F6C\u6362"}):G("span",null),G(L,{size:"tiny",type:"error",onClick:()=>{n.error({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",maskClosable:!1,onMaskClick:()=>{},onPositiveClick:()=>{Ie(v.id).then(w=>{u()})}})}},{default:()=>"\u5220\u9664"})]:[G(L,{size:"tiny",style:"margin-right: 5px;",onClick:()=>{var w;(w=d.value)==null||w.show(v.id)}},{default:()=>"\u7F16\u8F91"}),G(L,{size:"tiny",type:"error",onClick:()=>{n.error({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",maskClosable:!1,onMaskClick:()=>{},onPositiveClick:()=>{Ie(v.id).then(w=>{u()})}})}},{default:()=>"\u5220\u9664"})]}}]},new bt("/main/page/list","post"));Ue().then(()=>{u()});const u=()=>{h({appCode:t.value.appCode})};return{modalBasicFormRef:r,modalBasicFormInterfaceRef:m,modalBasicFormTransformRef:p,modalBasicPageRef:d,bind:s,gridRef:l,filterData:c,query:g,appInfo:t,handleTree(v){v.appType===2?t.value=v:v.appType===0&&(t.value={appCode:""}),u()},refresh:u}}});function ga(e,t,n,r,d,m){const p=f("nw-app-tree-grid"),s=f("n-layout-sider"),l=f("nw-icon"),c=f("n-button"),g=f("n-space"),h=f("n-input"),u=f("n-input-group"),v=f("n-layout-header"),w=f("vxe-grid"),_=f("n-layout-content"),N=f("n-layout"),x=f("ModalBasicForm"),b=f("ModalBasicPage"),D=f("ModalBasicFormInterface"),i=f("ModalBasicFormTransform");return X(),pt(ct,null,[a(N,{"has-sider":"",class:"nw-layout-full"},{default:o(()=>[a(s,{bordered:"",width:"225","content-style":"padding: 5px;",style:{"margin-right":"-1px"}},{default:o(()=>[a(p,{rootName:"\u5168\u90E8",onCallback:e.handleTree},null,8,["onCallback"])]),_:1}),a(N,{class:"nw-layout-full"},{default:o(()=>[a(v,{class:"nw-layout-header"},{default:o(()=>[a(g,{size:5,style:{padding:"0 5px"}},{default:o(()=>[a(c,{disabled:!e.appInfo.appCode,type:"primary",onClick:t[0]||(t[0]=C=>{var $;return($=e.modalBasicFormRef)==null?void 0:$.show("",e.appInfo)})},{icon:o(()=>[a(l,{name:"icon-n-y-add",size:14})]),default:o(()=>[y(" \u65B0\u5EFA\u8868\u5355 ")]),_:1},8,["disabled"]),a(c,{disabled:!e.appInfo.appCode,type:"primary",onClick:t[1]||(t[1]=C=>{var $;return($=e.modalBasicPageRef)==null?void 0:$.show("",e.appInfo)})},{icon:o(()=>[a(l,{name:"icon-n-y-add",size:14})]),default:o(()=>[y(" \u65B0\u5EFA\u9875\u9762 ")]),_:1},8,["disabled"])]),_:1}),a(g,{size:5,style:{padding:"0 5px"}},{default:o(()=>[a(u,null,{default:o(()=>[a(h,{value:e.filterData.formNameCh||"","onUpdate:value":t[2]||(t[2]=C=>e.filterData.formNameCh=C),placeholder:"\u8F93\u5165\u67E5\u8BE2\u6587\u672C",style:{width:"150px"}},null,8,["value"]),a(c,{type:"primary",onClick:t[3]||(t[3]=C=>e.query())},{default:o(()=>[y(" \u641C\u7D22 ")]),_:1})]),_:1}),a(c,{title:"\u91CD\u7F6E",type:"warning",onClick:t[4]||(t[4]=C=>e.refresh())},{icon:o(()=>[a(l,{name:"icon-n-y-refresh"})]),_:1}),a(c,{title:"\u5BFC\u5165"},{icon:o(()=>[a(l,{name:"icon-n-y-import"})]),_:1}),a(c,{title:"\u5BFC\u51FA"},{icon:o(()=>[a(l,{name:"icon-n-y-export"})]),_:1}),a(c,{title:"\u6253\u5370",onClick:t[5]||(t[5]=C=>{var $;return($=e.gridRef)==null?void 0:$.print()})},{icon:o(()=>[a(l,{name:"icon-n-y-print"})]),_:1}),a(c,null,{icon:o(()=>[a(l,{name:"icon-n-y-column"})]),_:1})]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(w,dt(e.bind,{ref:"gridRef"}),null,16)]),_:1})]),_:1})]),_:1}),a(x,{ref:"modalBasicFormRef"},null,512),a(b,{ref:"modalBasicPageRef"},null,512),a(D,{ref:"modalBasicFormInterfaceRef"},null,512),a(i,{ref:"modalBasicFormTransformRef"},null,512)],64)}const va=ae(ha,[["render",ga],["__scopeId","data-v-d7ea838f"]]);Dt(va).mount("#app");
