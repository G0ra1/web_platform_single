import{d as S,r as i,j as U,k as n,u as I,a as l,o as P,g as R,b as a,w as o,f as h,K as $,F as z}from"./runtime-dom.esm-bundler.bf4f36cb.js";import{r as g,ap as O,aq as q,ar as H,as as Q,f as D,at as M,N as T,i as A,c as G,d as j,a as V,b as K,au as L,av as X,an as x,am as J,e as W,aw as Y,ax as Z,ay as ee,az as te,aA as ae,ak as ne,aP as oe,aB as se,u as ue,aQ as le,aR as re,_ as ie,m as de}from"./index.0e7eb3bd.js";import{N as me}from"./Rate.7caf94c1.js";function pe(t){return g({url:"cts/ctsLinkman/page",method:"post",data:t})}function ce(t){return g({url:"cts/ctsLinkman",method:"post",data:t})}function fe(t){return g({url:`cts/ctsLinkman/${t}`,method:"delete"})}function he(t){return g({url:"cts//ctsLinkman/saveBatch",method:"post",data:t})}const ye=S({components:{NwTable:O,NLayout:q,NLayoutHeader:H,NLayoutContent:Q,NButton:D,NPopconfirm:M,NSpace:T,NwIcon:A,NGrid:G,NGridItem:j,NForm:V,NFormItem:K,NPopover:L,NCard:X,NTag:x,NSpin:J,NInput:W,NInputGroup:Y,NDrawer:Z,NDrawerContent:ee,NTree:te,NLayoutSider:ae,NRate:me,NModal:ne,EmployeePickModal:oe},setup(t,s){se();const u=i({}),d=i(!1),B=i({}),p=i(),y=i(!1),c=i(!1),r=i(),v=ue(),C=e=>{(e.isLinkman==1?fe(e.id):ce({linkUserId:e.id,linkUserNameCh:e.userNameCh})).then(f=>{p.value.commitQuery()}).catch(f=>{})},_=()=>{r.value.sonFn()},k=e=>{const m=[];e.map(f=>{m.push({linkUserId:f.id,linkUserNameCh:f.userNameCh})}),he(m).then(f=>{p.value.commitQuery()})},b=U([{field:"userNameCh",title:"\u59D3\u540D",slots:{default:({row:e})=>[n(L,{right:!0,placement:"right",trigger:"click"},{trigger:()=>n("a",{style:"color:#2d8cf0;cursor: pointer;"},e.userNameCh),default:()=>n("div",{style:"width:300px"},n("h3",{style:"width:100%;text-align:center"},e.userNameCh),n("div",{style:"width:60%;margin:auto"},n(T,{size:5,justify:"center"},n(D,{type:"success",onClick:()=>{d.value=!0,u.value={...e,btnType:1}}},"\u5373\u65F6\u901A"),n(D,{type:"error",onClick:()=>{d.value=!0,u.value={...e,btnType:2}}},"\u53D1\u77ED\u4FE1"))),n("p",null,"\u6240\u5C5E\u90E8\u95E8 ",e.dealTime),n("p",null,"\u5458\u5DE5\u7F16\u7801 ",e.userCode),n("p",null,"\u7535\u8BDD ",e.phoneNum),n("p",null,"\u90AE\u7BB1 ",e.email))})]}},{field:"userCode",title:"\u5458\u5DE5\u7F16\u7801",showHeaderOverflow:!0},{field:"staffRank",title:"\u804C\u7EA7",showHeaderOverflow:!0},{field:"parentDeptName",title:"\u6240\u5C5E\u90E8\u95E8",showHeaderOverflow:!0},{field:"phoneNum",title:"\u7535\u8BDD",showOverflow:!0},{field:"email",title:"\u90AE\u7BB1",showOverflow:!0},{field:"",title:"\u5E38\u7528\u8054\u7CFB\u4EBA",width:100,showHeaderOverflow:!0,slots:{default:({row:e})=>[n("div",null,n(M,{"onPositive-click":m=>{C(e)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>n(A,{style:"cursor: pointer;",name:e.isLinkman?"icon-n-n-heart":"icon-n-y-heart",size:18}),default:()=>`\u662F\u5426${e.isLinkman==1?"\u53D6\u6D88\u6536\u85CF":"\u6536\u85CF\u4E3A"}\u5E38\u7528\u8054\u7CFB\u4EBA?`}))]}},{field:"",title:"\u64CD\u4F5C",fixed:"right",showHeaderOverflow:!0,slots:{default:({row:e})=>[n("div",null,n("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px",onClick:()=>{d.value=!0,u.value={...e,btnType:1}}},"\u5373\u65F6\u901A"),n("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px",onClick:()=>{d.value=!0,u.value={...e,btnType:2}}},"\u53D1\u77ED\u4FE1"))]}}]),N={request:{XHR:pe,params:{},pageMethod:(e,m)=>({page:{current:e,size:m}})},response:{dataMethod:e=>e.records,pageMethod:({total:e})=>e}},w=e=>{N.request.params.parentOrgId=e.id,p.value.commitQuery()},E=()=>{s.emit("update:typeSearch")},F=()=>{if(!u.value.msgContent){v.warning("\u8BF7\u8F93\u5165\u6D88\u606F\u5185\u5BB9");return}(u.value.btnType==1?le:re)({receiverUserNameCh:u.value.userNameCh,receiverUserCode:u.value.userCode,receiverUserPhone:u.value.phoneNum,msgContent:u.value.msgContent,msgTitle:u.value.msgTitle,receiverUserId:u.value.id})};return I(()=>{}),{SearchForm:B,columns:b,tableRef:p,vbind:N,employeePickModal:r,sideTreeCallback:w,search:E,tIsLoading:y,isLoading:c,showModal:d,formData:u,formBtn:F,empAdd:k,showChooseEmp:_}}});function ve(t,s,u,d,B,p){const y=l("n-input"),c=l("n-form-item"),r=l("n-button"),v=l("n-form"),C=l("n-space"),_=l("nw-icon"),k=l("n-layout-header"),b=l("NwTable"),N=l("n-layout-content"),w=l("n-layout"),E=l("n-modal"),F=l("EmployeePickModal");return P(),R(z,null,[a(w,{class:"nw-layout-full"},{default:o(()=>[a(k,{class:"nw-layout-header"},{default:o(()=>[a(C,{size:5,style:{padding:"0 5px"}},{default:o(()=>[a(v,{ref:"formRef",inline:"","label-placement":"left","label-width":80,model:t.SearchForm,style:{height:"30px"}},{default:o(()=>[a(c,{label:"\u8054\u7CFB\u4EBA\u540D\u79F0",path:"userNameCh"},{default:o(()=>[a(y,{value:t.SearchForm.userNameCh,"onUpdate:value":s[0]||(s[0]=e=>t.SearchForm.userNameCh=e),placeholder:"\u8054\u7CFB\u4EBA\u540D\u79F0"},null,8,["value"])]),_:1}),a(c,null,{default:o(()=>[a(r,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:s[1]||(s[1]=()=>{t.vbind.request.params.userNameCh=t.SearchForm.userNameCh,t.$refs.tableRef.commitQuery()})},{default:o(()=>[h(" \u67E5\u8BE2 ")]),_:1}),a(r,{type:"warning","attr-type":"button",onClick:s[2]||(s[2]=()=>{t.SearchForm.userNameCh="",t.vbind.request.userNameCh.appName="",t.$refs.tableRef.commitQuery()})},{default:o(()=>[h(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(C,{size:5,style:{padding:"0 5px"}},{default:o(()=>[a(r,{type:"primary",onClick:t.showChooseEmp},{icon:o(()=>[a(_,{name:"icon-n-y-add",size:14})]),default:o(()=>[h(" \u65B0\u5EFA ")]),_:1},8,["onClick"])]),_:1})]),_:1}),a(N,{ref:"page","content-style":"height: 100%"},{default:o(()=>[a(b,$({ref:"tableRef",columns:t.columns},t.vbind),null,16,["columns"])]),_:1},512)]),_:1}),a(E,{show:t.showModal,"onUpdate:show":s[5]||(s[5]=e=>t.showModal=e),preset:"dialog",title:t.formData.btnType==1?"\u5373\u65F6\u901A\u6D88\u606F":"\u53D1\u9001\u77ED\u4FE1"},{action:o(()=>[a(r,{type:"default",size:"small",onClick:s[4]||(s[4]=e=>t.showModal=!1)},{default:o(()=>[h("\u53D6\u6D88")]),_:1}),a(r,{type:"error",size:"small",style:{"margin-right":"5px"},onClick:t.formBtn},{default:o(()=>[h("\u4FDD\u5B58")]),_:1},8,["onClick"])]),default:o(()=>[a(v,{style:{padding:"0 10px"}},{default:o(()=>[a(c,{label:"\u5185\u5BB9"},{default:o(()=>[a(y,{value:t.formData.msgContent,"onUpdate:value":s[3]||(s[3]=e=>t.formData.msgContent=e),type:"textarea",placeholder:""},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show","title"]),a(F,{isShowSearch:!1,ref:"employeePickModal","onUpdate:callback":s[6]||(s[6]=e=>{t.empAdd(e)})},null,512)],64)}const Ce=ie(ye,[["render",ve],["__scopeId","data-v-c391dca0"]]);de(Ce).mount("#app");
