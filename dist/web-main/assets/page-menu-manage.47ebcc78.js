import{r as p,k as y,a as t,o as F,g as B,h as z,b as e,w as o,f as C,K as q,F as V,p as oe,c as I,W as Ne,d as W,u as ae,e as le,U as ye,n as we,t as Ce,j as ke}from"./runtime-dom.esm-bundler.bf4f36cb.js";import{aY as te,aq as R,ar as E,aA as L,as as O,aZ as Y,aw as P,e as U,am as A,ak as T,f as D,i as M,r as se,_ as $,k as Z,b0 as ue,aK as H,ao as J,c as Q,a as G,b as j,ex as de,N as X,d as ie,al as re,an as x,j as me,u as ee,ey as pe,ez as fe,az as ze,ax as Fe,aI as Me,ay as Ie,at as ne,aC as Ue,eA as Ae,m as De}from"./index.0e7eb3bd.js";import{N as $e}from"./index.cb0cc583.js";import{N as Se}from"./InputNumber.39ec7792.js";import{N as ce}from"./Radio.929283f6.js";import{N as Te}from"./FormItemGridItem.5c201774.js";import{N as ve}from"./Image.316697df.js";import{N as _e}from"./text.c79655f7.js";import{N as ge}from"./p.0c502c64.js";import{N as Be}from"./Scrollbar.e2b8029c.js";import{h as Re}from"./index.9cc9edd5.js";import"./Add.f7b12907.js";const Ee={components:{NConfigProvider:te,NLayout:R,NLayoutHeader:E,NLayoutSider:L,NLayoutContent:O,NLayoutFooter:Y,NInputGroup:P,NInput:U,NSpin:A,NModal:T,NButton:D,NwIcon:M},props:{value:{type:String,default:""},fullName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["callback","update:value","update:formId","update:fullName","update:shortName"],setup(n,l){const f=p(!1),u=p(null),h=p([]),c=p([]),r=p({}),s=()=>{c.value=[],h.value=[],se({url:"/main/mdmCpts/lists",method:"post",data:{}}).then(d=>{console.log("====res====",d);const _={};d.forEach(b=>{r.value[b.id]=b,_[b.formId]||(_[b.formId]={formId:b.formId,formName:b.formName,formNameCh:b.formNameCh,formUrl:b.formUrl,cpts:[]}),_[b.formId].cpts.push(b)}),h.value=Object.values(_),console.log("===formsData.value===",h.value)})},i=p({rowId:"id",rowKey:!1,height:"400px",size:"mini",showOverflow:!1,highlightHoverRow:!0,border:!0,tableMenu:{},expandConfig:{expandAll:!0},data:h,columns:[{title:"\u8868\u5355\u540D\u79F0",showOverflow:"title",minWidth:200,type:"expand",slots:{default:({row:d})=>`${d.formNameCh}`,content:({row:d})=>y("div",{class:"cpts-list"},d.cpts.length?d.cpts.map(_=>y("div",{class:{"cpt-item":!0,active:n.value===d.id},onClick:()=>{v(_)}},y("div",{class:"cpt-item-icon"},y(M,{size:60,name:_.icon})),y("div",{class:"cpt-item-text"},_.shortName))):y("div",null,"\u6CA1\u6709\u5176\u4ED6\u7248\u672C"))}}]}),g=()=>{f.value=!0,s()},v=d=>{console.log(d),l.emit("update:value",d.id),l.emit("update:formId",d.formId),l.emit("update:fullName",d.fullName),l.emit("update:shortName",d.shortName),l.emit("callback",d),f.value=!1};return{props:n,gridRef:u,gridOption:i,visible:f,handleModalShow:g,handleModalComplete:v,theme:{Button:{heightSmall:"20px",fontSizeSmall:"12px"},Dialog:{iconMargin:"0 3px 0 0",titleFontSize:"14px",titleFontWeight:"bold",titleTextColor:"#5e5e5e",iconSize:"14px",padding:"2px 5px",closeSize:"14px",closeMargin:"5px",contentMargin:"0"},Modal:{boxShadow:"1px 0px 7px 1px #00000060"}}}}},Le={style:{display:"flex","justify-content":"space-between",padding:"5px 0","align-items":"center"}},Oe=z("div",null," \u9009\u62E9\u529F\u80FD ",-1),Pe={class:"nw-modal-action"};function He(n,l,f,u,h,c){const r=t("n-input"),s=t("n-button"),i=t("nw-icon"),g=t("vxe-grid"),v=t("n-layout-content"),d=t("n-layout"),_=t("n-modal"),b=t("n-config-provider");return F(),B(V,null,[z("div",null,[z("div",Le,[e(r,{size:"small",value:u.props.fullName,disabled:"",placeholder:""},null,8,["value"]),e(s,{type:"info",size:"small",style:{"margin-left":"5px"},onClick:u.handleModalShow},{default:o(()=>[C("\u9009\u62E9")]),_:1},8,["onClick"])])]),e(b,{abstract:"","theme-overrides":u.theme},{default:o(()=>[e(_,{class:"nw-modal",show:u.visible,"onUpdate:show":l[1]||(l[1]=w=>u.visible=w),preset:"dialog",style:{width:"800px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:o(()=>[e(i,{name:"icon-biaodan",size:20,color:"rgb(103, 194, 58)"})]),header:o(()=>[Oe]),default:o(()=>[e(d,{class:"nw-modal-layout"},{default:o(()=>[e(v,null,{default:o(()=>[e(g,q({class:"nw-vxe-grid",ref:"gridRef"},u.gridOption),null,16)]),_:1})]),_:1}),z("div",Pe,[e(s,{size:"small",onClick:l[0]||(l[0]=w=>u.visible=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1},8,["theme-overrides"])],64)}const Ge=$(Ee,[["render",He]]),je={components:{NConfigProvider:te,NLayout:R,NLayoutHeader:E,NLayoutSider:L,NLayoutContent:O,NLayoutFooter:Y,NInputGroup:P,NInput:U,NInputNumber:Se,NSelect:Z,NRadio:ce,NRadioGroup:ue,NSwitch:H,NSpin:A,NModal:T,NButton:D,NwIcon:M,NwIconPick:J,NGrid:Q,NForm:G,NFormItemGi:Te,NFormItem:j},props:{value:{type:String,default:""},name:{type:String,default:""},parentFullName:{type:String,default:""},bizMenuCode:{type:String,default:""}},setup(n,l){const f=p(!1),u=p(!1),h=p(null),c=p([]),r=p({rowId:"key",rowKey:!1,size:"mini",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:!1,cellCalssName:"",treeConfig:{indent:15,accordion:!1,line:!0,expandAll:!0,children:"kids"},rowStyle:{cursor:"pointer"},data:c,columns:[{treeNode:!0,slots:{default:({row:s})=>[y("div",{style:"display:flex;justify-content: space-between;",onClick:()=>{s.parentFullId=s.parentFullId?s.parentFullId+"/"+s.id:"0",s.parentFullName=s.parentFullName?s.parentFullName+"/"+s.menuName:"root",l.emit("update:value",s.id),l.emit("update:name",s.menuName),l.emit("update:parentFullId",s.parentFullId),l.emit("update:parentFullName",s.parentFullName),f.value=!1}},y("span",null,s.menuName))]}}]});return{props:n,isLoading:u,visible:f,gridRef:h,gridOption:r,showMenuPick(){f.value=!0,u.value=!0,de({includeSth:"1",bizMenuCode:n.bizMenuCode}).then(s=>{c.value=[{id:"0",menuName:"root",parentFullId:"",parentFullName:"",kids:s,level:0}],oe().then(()=>{h.value.setAllTreeExpand(!0)})}).finally(()=>{u.value=!1})},gridEvent:{cellClick:({row:s})=>{}}}}},Ke=z("div",null," \u9009\u62E9\u7236\u7EA7\u83DC\u5355 ",-1),qe={class:"nw-modal-action"};function Ve(n,l,f,u,h,c){const r=t("n-input"),s=t("n-button"),i=t("nw-icon"),g=t("vxe-grid"),v=t("n-layout-content"),d=t("n-layout"),_=t("n-spin"),b=t("n-modal"),w=t("n-config-provider");return F(),I(w,{abstract:""},{default:o(()=>[e(r,{value:u.props.parentFullName,placeholder:"\u8BF7\u9009\u62E9",disabled:"",size:"small",style:{"margin-right":"5px"}},null,8,["value"]),e(s,{type:"info",size:"small",onClick:u.showMenuPick},{default:o(()=>[C("\u9009\u62E9")]),_:1},8,["onClick"]),e(b,{class:"nw-modal",show:u.visible,"onUpdate:show":l[1]||(l[1]=k=>u.visible=k),preset:"dialog",style:{width:"400px",padding:"0"},"show-icon":!0,"mask-closable":!0,closable:!0},{icon:o(()=>[e(i,{name:"icon-biaodan",size:20,color:"rgb(103, 194, 58)"})]),header:o(()=>[Ke]),default:o(()=>[e(_,{show:u.isLoading},{default:o(()=>[e(d,{"has-sider":""},{default:o(()=>[e(v,{"native-scrollbar":!1,style:{height:"400px"}},{default:o(()=>[e(g,q({class:"nw-vxe-grid-tree",ref:"gridRef"},u.gridOption,Ne(u.gridEvent)),null,16)]),_:1})]),_:1})]),_:1},8,["show"]),z("div",qe,[e(s,{size:"small",onClick:l[0]||(l[0]=k=>u.visible=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1})])]),_:1},8,["show"])]),_:1})}const be=$(je,[["render",Ve]]),We=W({components:{NSpace:X,NModal:T,NInput:U,NForm:G,NFormItem:j,NGrid:Q,NGridItem:ie,NTreeSelect:re,NSelect:Z,NButton:D,NSpin:A,NTag:x,NImage:ve,NText:_e,NRadioGroup:ue,NRadio:ce,NP:ge,NwDic:me,NwIcon:M,NwIconPick:J,MenuPick:be,NwPickPage:$e,NSwitch:H},props:{},setup(n,l){const f=p(!1),u=p({}),h=p(),c=p(!1),r=p([]),s=ee(),i=(g={})=>{f.value=!0,u.value={...g}};return ae(()=>{}),{showModal:f,message:s,model:u,formRef:h,isLoading:c,sonFn:i,getFormMessage(g,v){console.log(v),u.value.formId=v.id,u.value.formUrl=v.pageUrl,u.value.formTargetUrl=v.targetUrl,u.value.formListMethodType=v.formListMethodType,u.value.formListUrl=v.formListUrl},platformDictCodes:r,onPositiveClick(){const g=u.value.id?fe:pe;h.value.validate(v=>{v||(c.value=!0,g(u.value).then(d=>{d&&(l.emit("update:callback"),f.value=!1)}).finally(d=>{c.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Ye={style:{padding:"0 5px 5px 0"}};function Ze(n,l,f,u,h,c){const r=t("n-input"),s=t("n-form-item"),i=t("n-grid-item"),g=t("nw-icon-pick"),v=t("menu-pick"),d=t("n-radio"),_=t("n-space"),b=t("n-radio-group"),w=t("nw-pick-page"),k=t("n-grid"),a=t("n-form"),N=t("n-spin"),S=t("n-button"),K=t("n-modal");return F(),I(K,{show:n.showModal,"onUpdate:show":l[15]||(l[15]=m=>n.showModal=m),"mask-closable":!1,preset:"dialog",title:"\u8D44\u6E90\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[z("div",Ye,[e(S,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[14]||(l[14]=m=>n.showModal=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1}),e(S,{size:"small",type:"info",onClick:n.onPositiveClick,disabled:n.btloading},{default:o(()=>[C("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[e(N,{show:n.isLoading},{default:o(()=>[e(a,{model:n.model,ref:"formRef",rules:n.rules},{default:o(()=>[e(k,{"x-gap":"8",cols:2},{default:o(()=>[e(i,null,{default:o(()=>[e(s,{label:"\u5E94\u7528\u5165\u53E3\u540D\u79F0",path:"appName"},{default:o(()=>[e(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:n.model.bizMenuName,"onUpdate:value":l[0]||(l[0]=m=>n.model.bizMenuName=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u5E94\u7528\u5165\u53E3\u7F16\u7801",path:"appCode"},{default:o(()=>[e(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:n.model.bizMenuCode,"onUpdate:value":l[1]||(l[1]=m=>n.model.bizMenuCode=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u83DC\u5355\u540D\u79F0",path:"menuName"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.menuName,"onUpdate:value":l[2]||(l[2]=m=>n.model.menuName=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u56FE\u6807",path:"menuIcon"},{default:o(()=>[e(g,{value:n.model.menuIcon,"onUpdate:value":l[3]||(l[3]=m=>n.model.menuIcon=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u83DC\u5355\u7F16\u7801",path:"menuCode"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.menuCode,"onUpdate:value":l[4]||(l[4]=m=>n.model.menuCode=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6392\u5E8F",path:"sort"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.sort,"onUpdate:value":l[5]||(l[5]=m=>n.model.sort=m)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{span:12,label:"\u7236\u7EA7\u83DC\u5355",path:"parentId"},{default:o(()=>[e(v,{bizMenuCode:n.model.bizMenuCode,value:n.model.parentId,"onUpdate:value":l[6]||(l[6]=m=>n.model.parentId=m),name:n.model.parentName,"onUpdate:name":l[7]||(l[7]=m=>n.model.parentName=m),parentFullId:n.model.parentFullId,"onUpdate:parentFullId":l[8]||(l[8]=m=>n.model.parentFullId=m),parentFullName:n.model.parentFullName,"onUpdate:parentFullName":l[9]||(l[9]=m=>n.model.parentFullName=m)},null,8,["bizMenuCode","value","name","parentFullId","parentFullName"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{span:12,label:"\u662F\u5426\u4E3A\u53F6\u8282\u70B9",path:"menuType"},{default:o(()=>[e(b,{value:n.model.menuType,"onUpdate:value":l[10]||(l[10]=m=>n.model.menuType=m)},{default:o(()=>[e(_,null,{default:o(()=>[e(d,{value:0},{default:o(()=>[C(" \u4E00\u7EA7\u9875\u9762 ")]),_:1}),e(d,{value:1},{default:o(()=>[C(" \u9875\u9762 ")]),_:1}),e(d,{value:3},{default:o(()=>[C(" \u83DC\u5355\u5206\u7C7B ")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:24},{default:o(()=>[e(s,{label:"\u63CF\u8FF0",path:"description"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:n.model.description,"onUpdate:value":l[11]||(l[11]=m=>n.model.description=m)},null,8,["value"])]),_:1})]),_:1}),n.model.menuType!==3?(F(),I(i,{key:0},{default:o(()=>[e(s,{label:"\u5173\u8054\u9875\u9762",path:"formId"},{default:o(()=>[e(w,{"onUpdate:value":l[12]||(l[12]=(m,he)=>n.getFormMessage(m,he))})]),_:1})]),_:1})):le("",!0),n.model.menuType!==3?(F(),I(i,{key:1},{default:o(()=>[e(s,{label:"url",path:"formUrl"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",disabled:"",value:n.model.formUrl,"onUpdate:value":l[13]||(l[13]=m=>n.model.formUrl=m)},null,8,["value"])]),_:1})]),_:1})):le("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const Je=$(We,[["render",Ze]]),Qe=W({components:{NModal:T,NInput:U,NForm:G,NFormItem:j,NGrid:Q,NGridItem:ie,NTreeSelect:re,NSelect:Z,NButton:D,NSpin:A,NTag:x,NImage:ve,NText:_e,NP:ge,NwDic:me,NwIcon:M,NwIconPick:J,MenuPick:be,NwPickCpts:Ge,NSwitch:H},props:{},setup(n,l){const f=p(!1),u=p({}),h=p(),c=p(!1),r=p([]),s=ee(),i=(g={})=>{f.value=!0,u.value={...g}};return ae(()=>{}),{showModal:f,message:s,model:u,formRef:h,isLoading:c,sonFn:i,platformDictCodes:r,onPositiveClick(){const g=u.value.id?fe:pe;h.value.validate(v=>{v||(c.value=!0,g(u.value).then(d=>{d&&(l.emit("update:callback"),f.value=!1)}).finally(d=>{c.value=!1}))})},onNegativeClick(){f.value=!1}}},methods:{}}),Xe={style:{padding:"0 5px 5px 0"}};function xe(n,l,f,u,h,c){const r=t("n-input"),s=t("n-form-item"),i=t("n-grid-item"),g=t("n-select"),v=t("nw-pick-cpts"),d=t("n-grid"),_=t("n-form"),b=t("n-spin"),w=t("n-button"),k=t("n-modal");return F(),I(k,{show:n.showModal,"onUpdate:show":l[12]||(l[12]=a=>n.showModal=a),"mask-closable":!1,preset:"dialog",title:"\u529F\u80FD\u7EF4\u62A4",content:"\u4F60\u786E\u8BA4","positive-text":"\u786E\u8BA4","negative-text":"\u53D6\u6D88",style:{width:"800px"},ref:"xmodal"},{action:o(()=>[z("div",Xe,[e(w,{size:"small",type:"default",style:{"margin-right":"5px"},onClick:l[11]||(l[11]=a=>n.showModal=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1}),e(w,{size:"small",type:"info",onClick:n.onPositiveClick,disabled:n.btloading},{default:o(()=>[C("\u4FDD\u5B58")]),_:1},8,["onClick","disabled"])])]),default:o(()=>[e(b,{show:n.isLoading},{default:o(()=>[e(_,{model:n.model,ref:"formRef",rules:n.rules},{default:o(()=>[e(d,{"x-gap":"8",cols:2},{default:o(()=>[e(i,null,{default:o(()=>[e(s,{label:"\u6309\u94AE\u540D\u79F0",path:"menuName"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.menuName,"onUpdate:value":l[0]||(l[0]=a=>n.model.menuName=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6309\u94AE\u7F16\u7801",path:"menuCode",disabled:""},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.menuCode,"onUpdate:value":l[1]||(l[1]=a=>n.model.menuCode=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6240\u5C5E\u83DC\u5355",path:"parentFullName"},{default:o(()=>[e(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:n.model.parentFullName,"onUpdate:value":l[2]||(l[2]=a=>n.model.parentFullName=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u9875\u9762\u540D\u79F0",path:"parentName"},{default:o(()=>[e(r,{size:"small",disabled:"",placeholder:"\u8BF7\u8F93\u5165",value:n.model.parentName,"onUpdate:value":l[3]||(l[3]=a=>n.model.parentName=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u8868\u5355\u6309\u94AEcode",path:"buttonCode"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.buttonCode,"onUpdate:value":l[4]||(l[4]=a=>n.model.buttonCode=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6392\u5E8F",path:"sort"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",value:n.model.sort,"onUpdate:value":l[5]||(l[5]=a=>n.model.sort=a)},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6309\u94AE\u7C7B\u578B",path:"buttonType"},{default:o(()=>[e(g,{value:n.model.buttonType,"onUpdate:value":l[6]||(l[6]=a=>n.model.buttonType=a),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"default",label:"default"},{value:"tertiary",label:"tertiary"},{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"error",label:"error"}]},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u6309\u94AE\u5C3A\u5BF8",path:"buttonSize"},{default:o(()=>[e(g,{value:n.model.buttonSize,"onUpdate:value":l[7]||(l[7]=a=>n.model.buttonSize=a),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8",options:[{value:"tiny",label:"tiny"},{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]},null,8,["value"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(s,{label:"\u5173\u8054\u529F\u80FD",path:"functionId"},{default:o(()=>[e(v,{fullName:n.model.functionName,"onUpdate:fullName":l[8]||(l[8]=a=>n.model.functionName=a),value:n.model.functionId,"onUpdate:value":l[9]||(l[9]=a=>n.model.functionId=a)},null,8,["fullName","value"])]),_:1})]),_:1}),e(i,{span:24},{default:o(()=>[e(s,{label:"\u63CF\u8FF0",path:"description"},{default:o(()=>[e(r,{size:"small",placeholder:"\u8BF7\u8F93\u5165",type:"textarea",value:n.model.description,"onUpdate:value":l[10]||(l[10]=a=>n.model.description=a)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])}const el=$(Qe,[["render",xe]]),ll={components:{NLayout:R,NLayoutHeader:E,NLayoutSider:L,NLayoutContent:O,NLayoutFooter:Y,NInputGroup:P,NInput:U,NSpin:A,NModal:T,NButton:D,NwIcon:M,NSwitch:H,NSpace:X,NTree:ze,NScrollbar:Be},props:{value:{type:String}},setup(n,l){const f=p(!1),u=p([]);return(()=>{f.value=!0,se({url:"/main/mdmBizMenu/list",method:"post",data:{}}).then(c=>{console.log("====res===",c),u.value=c}).finally(()=>{f.value=!1})})(),{props:n,list:u,handle(c){l.emit("update:value",c.code,c)}}}};const nl=["onClick"],ol={class:"icon"},al={class:"text"};function tl(n,l,f,u,h,c){const r=t("n-layout-header"),s=t("NwIcon"),i=t("n-scrollbar"),g=t("n-spin"),v=t("n-layout-content"),d=t("n-layout");return F(),I(d,{class:"nw-layout-full","content-style":"height: 100%"},{default:o(()=>[e(r,{class:"nw-layout-header"}),e(v,null,{default:o(()=>[e(g,{show:!1},{default:o(()=>[e(i,null,{default:o(()=>[(F(!0),B(V,null,ye(u.list,_=>(F(),B("div",{key:_.id,class:we({"bizmenu-item":!0,active:u.props.value===_.code}),onClick:b=>u.handle(_)},[z("div",ol,[e(s,{name:_.icon,size:16},null,8,["name"])]),z("div",al,Ce(_.name),1)],10,nl))),128))]),_:1})]),_:1})]),_:1})]),_:1})}const sl=$(ll,[["render",tl]]),ul=W({components:{NLayout:R,NLayoutSider:L,NLayoutHeader:E,NLayoutContent:O,NButton:D,NSpace:X,NwIcon:M,NTag:x,NInput:U,NInputGroup:P,NDrawer:Fe,SideTree:Me,NForm:G,NFormItem:j,NSpin:A,NDrawerContent:Ie,ModalAction:Je,NPopconfirm:ne,ButtonAction:el,BizmenuGrid:sl},setup(){const n=Ue.getMenuData(),l=p([]),f=p(),u=p(),h=p(),c=p({...n}),r=p({...n}),s=ee(),i=p(""),g=p(!1),v=a=>{let N=a.id;Ae(N).then(S=>{s.success("\u5220\u9664\u6210\u529F"),d()})},d=()=>{k.loading=!0,de({bizMenuCode:c.value.code,includeSth:"0"}).then(a=>{l.value=a,f.value.loadData(a),k.loading=!1})};oe(()=>{d()});const _=()=>{if(i.value){const a=[];Re({kids:l.value,menuName:"",id:"0"},N=>N.kids).descendants().filter(N=>N.id=="0"?!1:N.data.menuName.includes(i.value)).forEach(N=>{a.push(N.data)}),f.value.loadData(a)}else d()},b=(a={})=>{u.value.sonFn(a)},w=(a={})=>{h.value.sonFn(a)},k=ke({rowId:"id",size:"mini",border:!0,height:"auto",align:null,loading:!1,columns:[{field:"menuName",title:"\u8D44\u6E90\u540D\u79F0",showHeaderOverflow:!0,treeNode:!0},{field:"menuType",title:"\u8D44\u6E90\u7C7B\u578B",showOverflow:!0,slots:{default:({row:a})=>[y("span",null,["\u4E00\u7EA7\u9875\u9762","\u9875\u9762","\u6309\u94AE","\u83DC\u5355\u5206\u7C7B","\u81EA\u5B9A\u4E49\u6309\u94AE"][a.menuType])]}},{field:"mthDescription",title:"\u5173\u8054(\u9875\u9762ID)",showHeaderOverflow:!0,slots:{default:({row:a})=>[y("span",null,a.formId?a.formId:"-")]}},{field:"formUrl",title:"URL",showHeaderOverflow:!0,slots:{default:({row:a})=>[y("span",null,a.formUrl?a.formUrl:"-")]}},{field:"sort",title:"\u6392\u5E8F",showHeaderOverflow:!0},{field:"description",title:"\u63CF\u8FF0",showHeaderOverflow:!0},{field:"createUserName",title:"\u521B\u5EFA\u4EBA",showHeaderOverflow:!0},{field:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",showHeaderOverflow:!0},{field:"",title:"\u64CD\u4F5C",showHeaderOverflow:!0,minWidth:"100px",slots:{default:({row:a})=>[y("div",null,y("a",{onClick:()=>a.menuType==2?w(a):b({...a}),style:"color:#4098fc;cursor: pointer;display:inline-block;"},"\u4FEE\u6539"),y(ne,{"onPositive-click":N=>{v(a)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>y("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px"},"\u5220\u9664"),default:()=>`\u662F\u5426\u5220\u9664\u5F53\u524D${a.kids.length?"\u53CA\u5B50\u96C6\u9009\u9879":"\u9009\u9879"}\uFF1F`}),y("a",{onClick:()=>w({menuType:2,bizMenuCode:c.value.code,bizMenuName:c.value.name,parentFullName:a.parentFullName+"/"+a.menuName,parentName:a.menuName,parentFullId:a.parentFullId+"/"+a.id,parentId:a.id}),style:`${a.menuType!==2?"display:inline-block":"display:none"};color:#4098fc;cursor: pointer;margin-left:15px`},"\u5173\u8054\u529F\u80FD"))]}}],treeConfig:{expandAll:!0,children:"kids",hasChild:"hasKids",indent:15,line:!1,lazy:!1},data:[]});return{bizMenu:c,onBizMenuCode(a,N){c.value=N,d()},gridOptions:k,rightDatas:l,tableRef:f,appMessage:r,buttonlAction:h,modalAction:u,showAction:b,showButtonAction:w,getRightData:d,isDisabled:g,handDel:v,searchName:_,sAppName:i}}}),dl=z("span",null,null,-1);function il(n,l,f,u,h,c){const r=t("BizmenuGrid"),s=t("n-layout-sider"),i=t("n-space"),g=t("n-input"),v=t("n-form-item"),d=t("n-button"),_=t("n-form"),b=t("nw-icon"),w=t("n-layout-header"),k=t("vxe-grid"),a=t("n-layout-content"),N=t("n-layout"),S=t("ModalAction"),K=t("ButtonAction");return F(),B(V,null,[e(N,{"has-sider":"",class:"nw-layout-full"},{default:o(()=>[e(s,{width:140},{default:o(()=>[e(r,{value:n.bizMenu.code,"onUpdate:value":n.onBizMenuCode},null,8,["value","onUpdate:value"])]),_:1}),e(N,{class:"nw-layout-full","content-style":"height: 100%"},{default:o(()=>[e(w,{class:"nw-layout-header"},{default:o(()=>[e(i,{size:5},{default:o(()=>[dl]),_:1}),e(i,{size:5,style:{padding:"0 5px",position:"absolute",left:"250px"}},{default:o(()=>[e(_,{ref:"formRef",inline:"","label-placement":"left","label-width":80,model:n.SearchForm,style:{height:"30px"}},{default:o(()=>[e(v,{label:"\u8D44\u6E90\u540D\u79F0",path:"sAppName"},{default:o(()=>[e(g,{placeholder:"\u5E94\u7528\u540D\u79F0",value:n.sAppName,"onUpdate:value":l[0]||(l[0]=m=>n.sAppName=m)},null,8,["value"])]),_:1}),e(v,null,{default:o(()=>[e(d,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:l[1]||(l[1]=()=>{n.searchName()})},{default:o(()=>[C(" \u67E5\u8BE2 ")]),_:1}),e(d,{type:"warning","attr-type":"button",onClick:l[2]||(l[2]=()=>{n.sAppName="",n.tableRef.loadData(n.rightDatas)})},{default:o(()=>[C(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(i,{size:5,style:{padding:"0 5px"}},{default:o(()=>[e(d,{type:"primary",onClick:l[3]||(l[3]=m=>n.showAction({menuType:0,bizMenuCode:n.bizMenu.code,bizMenuName:n.bizMenu.name})),disabled:n.isDisabled},{icon:o(()=>[e(b,{name:"icon-n-y-add",size:14})]),default:o(()=>[C(" \u65B0\u5EFA ")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(a,null,{default:o(()=>[e(k,q(n.gridOptions,{ref:"tableRef",class:"mytable-scrollbar"}),null,16)]),_:1})]),_:1})]),_:1}),e(S,{ref:"modalAction","onUpdate:callback":l[4]||(l[4]=()=>{n.getRightData()})},null,512),e(K,{ref:"buttonlAction","onUpdate:callback":l[5]||(l[5]=()=>{n.getRightData()})},null,512)],64)}const rl=$(ul,[["render",il]]);De(rl).mount("#app");
