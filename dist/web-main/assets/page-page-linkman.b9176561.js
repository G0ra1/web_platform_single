import{r as i,k as o,a as r,o as M,c as q,K as O,d as x,j as Q,p as G,u as P,g as j,b as a,w as n,f as v,F as V,_ as X,$ as Z,h as J}from"./runtime-dom.esm-bundler.bf4f36cb.js";import{aq as I,ar as S,aA as $,as as R,aZ as W,aw as L,e as z,am as H,ak as U,f as b,i as w,aK as Y,eD as ee,_ as K,ap as te,at as B,N as E,c as ae,d as oe,a as ne,b as se,au as A,av as le,an as re,ax as ue,ay as ie,az as de,aB as pe,u as ce,eE as me,eF as fe,eG as he,aQ as ge,aR as ye,m as ve}from"./index.0e7eb3bd.js";import{M as Ne}from"./messagingAction.cc11e790.js";import{N as Ce}from"./Avatar.daae428d.js";import{N as _e}from"./Rate.7caf94c1.js";import"./Image.316697df.js";import"./text.c79655f7.js";import"./p.0c502c64.js";const be={components:{NLayout:I,NLayoutHeader:S,NLayoutSider:$,NLayoutContent:R,NLayoutFooter:W,NInputGroup:L,NInput:z,NSpin:H,NModal:U,NButton:b,NwIcon:w,NSwitch:Y},props:{multiple:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["callback"],setup(t,s){const l=i(null);i([]);const d=i(!0),h=i({rowId:"id",rowKey:!1,size:"mini",height:"100%",showOverflow:!1,highlightHoverRow:!0,showHeader:!1,border:"null",rowConfig:{isCurrent:!0,height:43},treeConfig:{expandRowKeys:["0"],indent:15,line:!1,lazy:!0,hasChild:"hasKids",loadMethod:({row:u})=>ee(u.id).then(p=>(p||[]).map(c=>({id:c.id,orgName:c.orgName,hasKids:c.hasKids,orgType:c.orgType,type:"ctlName"})))},tableMenu:{},data:[{id:"0",orgName:"/",hasKids:1,orgType:1}],columns:[{field:"orgName",title:"\u673A\u6784\u5217\u8868",showHeaderOverflow:!0,showOverflow:!0,treeNode:!0,slots:{default:({row:u})=>[o("div",{class:{"side-tree-btn":!0},title:u.orgName,onClick:()=>{s.emit("callback",u)}},o(w,{name:u.orgType==1?"icon-n-y-fenjifenlei":"icon-n-y-fenlei"}),o("span",{style:"margin-left:5px"},u.orgName))]}}]});return{props:t,gridRef:l,isLoading:d,gridOption:h}}};function we(t,s,l,d,h,u){const p=r("vxe-grid");return M(),q(p,O(d.gridOption,{ref:"gridComponent",class:"mytable-scrollbar org-tree"}),null,16)}const ke=K(be,[["render",we]]),Fe=x({components:{NwTable:te,NLayout:I,NLayoutHeader:S,NLayoutContent:R,NButton:b,NPopconfirm:B,NSpace:E,NwIcon:w,NModal:U,NGrid:ae,NGridItem:oe,NForm:ne,NFormItem:se,NPopover:A,NCard:le,NTag:re,NSpin:H,NInput:z,NInputGroup:L,NDrawer:ue,NDrawerContent:ie,NTree:de,NLayoutSider:$,OrgTree:ke,NRate:_e,ModalAction:Ne,NAvatar:Ce},setup(t,s){pe();const l=i({}),d=i(!1),h=i({}),u=i(),p=i(!1),c=i(!1),g=ce(),m=i(),N=()=>{m.value.sonFn()},k=e=>{(e.isLinkman==1?me(e.id):fe({linkUserId:e.id,linkUserNameCh:e.userNameCh})).then(f=>{u.value.commitQuery()}).catch(f=>{})},F=Q([{field:"userNameCh",title:"\u59D3\u540D",slots:{default:({row:e})=>[o(A,{right:!0,placement:"right",trigger:"click"},{trigger:()=>o("a",{style:"color:#2d8cf0;cursor: pointer;"},e.userNameCh),default:()=>o("div",{style:"width:300px"},o("h3",{style:"width:100%;text-align:center"},e.userNameCh),o("div",{style:"width:60%;margin:auto"},o(E,{size:5,justify:"center"},o(b,{type:"success",onClick:()=>{d.value=!0,l.value={...e,btnType:1}}},"\u5373\u65F6\u901A"),o(b,{type:"error",onClick:()=>{d.value=!0,l.value={...e,btnType:2}}},"\u53D1\u77ED\u4FE1"))),o("p",null,"\u6240\u5C5E\u90E8\u95E8 ",e.dealTime),o("p",null,"\u5458\u5DE5\u7F16\u7801 ",e.userCode),o("p",null,"\u7535\u8BDD ",e.phoneNum),o("p",null,"\u90AE\u7BB1 ",e.email))})]}},{field:"userCode",title:"\u5458\u5DE5\u7F16\u7801",showHeaderOverflow:!0},{field:"staffRank",title:"\u804C\u7EA7",showHeaderOverflow:!0},{field:"parentDeptName",title:"\u6240\u5C5E\u90E8\u95E8",showHeaderOverflow:!0},{field:"phoneNum",title:"\u7535\u8BDD",showOverflow:!0},{field:"email",title:"\u90AE\u7BB1",showOverflow:!0},{field:"",title:"\u5E38\u7528\u8054\u7CFB\u4EBA",width:100,showHeaderOverflow:!0,slots:{default:({row:e})=>[o("div",null,o(B,{"onPositive-click":y=>{k(e)},"positive-text":"\u786E\u5B9A","negative-text":"\u53D6\u6D88"},{trigger:()=>o(w,{style:"cursor: pointer;",name:e.isLinkman?"icon-n-n-heart":"icon-n-y-heart",size:18}),default:()=>`\u662F\u5426${e.isLinkman==1?"\u53D6\u6D88\u6536\u85CF":"\u6536\u85CF\u4E3A"}\u5E38\u7528\u8054\u7CFB\u4EBA?`}))]}},{field:"",title:"\u64CD\u4F5C",fixed:"right",showHeaderOverflow:!0,slots:{default:({row:e})=>[o("div",null,o("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px",onClick:()=>{d.value=!0,l.value={...e,btnType:1}}},"\u5373\u65F6\u901A"),o("a",{style:"color:red;cursor: pointer;display:inline-block;margin-left:8px",onClick:()=>{d.value=!0,l.value={...e,btnType:2}}},"\u53D1\u77ED\u4FE1"))]}}]),C={request:{XHR:he,params:{parentOrgId:0},pageMethod:(e,y)=>({page:{current:e,size:y}})},response:{dataMethod:e=>e.records,pageMethod:({total:e})=>e}},D=e=>{C.request.params.parentOrgId=e.id,u.value.commitQuery()},T=()=>{s.emit("update:typeSearch")},_=()=>{if(!l.value.msgContent){g.warning("\u8BF7\u8F93\u5165\u6D88\u606F\u5185\u5BB9");return}(l.value.btnType==1?ge:ye)({receiverUserNameCh:l.value.userNameCh,receiverUserCode:l.value.userCode,receiverUserPhone:l.value.phoneNum,msgContent:l.value.msgContent,msgTitle:l.value.msgTitle,receiverUserId:l.value.id})};return G().then(()=>{}),P(()=>{}),{SearchForm:h,columns:F,tableRef:u,vbind:C,sideTreeCallback:D,search:T,tIsLoading:p,isLoading:c,showModal:d,formData:l,formBtn:_,showAction:N,modalAction:m}}});const De=t=>(X("data-v-4cc1b52b"),t=t(),Z(),t),Te=De(()=>J("span",null,null,-1));function Be(t,s,l,d,h,u){const p=r("n-space"),c=r("n-input"),g=r("n-form-item"),m=r("n-button"),N=r("n-form"),k=r("n-layout-header"),F=r("OrgTree"),C=r("n-layout-sider"),D=r("NwTable"),T=r("n-layout-content"),_=r("n-layout"),e=r("n-modal"),y=r("ModalAction");return M(),j(V,null,[a(_,{class:"nw-layout-full"},{default:n(()=>[a(k,{class:"nw-layout-header"},{default:n(()=>[a(p,{size:5},{default:n(()=>[Te]),_:1}),a(p,{size:5,style:{padding:"0 5px",position:"absolute",left:"250px"}},{default:n(()=>[a(N,{ref:"formRef",inline:"","label-placement":"left","label-width":80,model:t.SearchForm,style:{height:"30px"}},{default:n(()=>[a(g,{label:"\u8054\u7CFB\u4EBA\u540D\u79F0",path:"userNameCh"},{default:n(()=>[a(c,{value:t.SearchForm.userNameCh,"onUpdate:value":s[0]||(s[0]=f=>t.SearchForm.userNameCh=f),placeholder:"\u8054\u7CFB\u4EBA\u540D\u79F0"},null,8,["value"])]),_:1}),a(g,null,{default:n(()=>[a(m,{type:"info","attr-type":"button",style:{"margin-right":"5px"},onClick:s[1]||(s[1]=()=>{t.vbind.request.params.userNameCh=t.SearchForm.userNameCh,t.$refs.tableRef.commitQuery()})},{default:n(()=>[v(" \u67E5\u8BE2 ")]),_:1}),a(m,{type:"warning","attr-type":"button",onClick:s[2]||(s[2]=()=>{t.SearchForm.userNameCh="",t.vbind.request.params.userNameCh="",t.$refs.tableRef.commitQuery()})},{default:n(()=>[v(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(p,{size:5,style:{padding:"0 5px"}},{default:n(()=>[a(m,{type:"primary",onClick:t.showAction},{default:n(()=>[v(" \u6D88\u606F\u7FA4\u53D1 ")]),_:1},8,["onClick"])]),_:1})]),_:1}),a(_,{"has-sider":"",ref:"page","content-style":"height: 100%"},{default:n(()=>[a(C,{width:"250"},{default:n(()=>[a(F,{onCallback:t.sideTreeCallback},null,8,["onCallback"])]),_:1}),a(T,null,{default:n(()=>[a(D,O({ref:"tableRef",columns:t.columns},t.vbind),null,16,["columns"])]),_:1})]),_:1},512)]),_:1}),a(e,{show:t.showModal,"onUpdate:show":s[5]||(s[5]=f=>t.showModal=f),preset:"dialog",title:t.formData.btnType==1?"\u5373\u65F6\u901A\u6D88\u606F":"\u53D1\u9001\u77ED\u4FE1"},{action:n(()=>[a(m,{type:"default",size:"small",onClick:s[4]||(s[4]=f=>t.showModal=!1)},{default:n(()=>[v("\u53D6\u6D88")]),_:1}),a(m,{type:"error",size:"small",style:{"margin-right":"5px"},onClick:t.formBtn},{default:n(()=>[v("\u4FDD\u5B58")]),_:1},8,["onClick"])]),default:n(()=>[a(N,{style:{padding:"0 10px"}},{default:n(()=>[a(g,{label:"\u5185\u5BB9"},{default:n(()=>[a(c,{value:t.formData.msgContent,"onUpdate:value":s[3]||(s[3]=f=>t.formData.msgContent=f),type:"textarea",placeholder:""},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show","title"]),a(y,{ref:"modalAction","onUpdate:callback":s[6]||(s[6]=()=>{t.$refs.tableRef.commitQuery()})},null,512)],64)}const Ee=K(Fe,[["render",Be],["__scopeId","data-v-4cc1b52b"]]);ve(Ee).mount("#app");
